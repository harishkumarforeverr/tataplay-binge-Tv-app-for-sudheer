/**
 * @license
 * Video.js 7.10.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):(e=e||self).videojs=t(e.window,e.document)}(this,(function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n="7.10.0",i=[];var r=function t(n){var r,o="info",a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r("log",o,t)};return r=function(t,n){return function(r,o,a){var s=n.levels[o],l=new RegExp("^("+s+")$");if("log"!==r&&a.unshift(r.toUpperCase()+":"),a.unshift(t+":"),i){i.push([].concat(a));var u=i.length-1e3;i.splice(0,u>0?u:0)}if(e.console){var d=e.console[r];d||"debug"!==r||(d=e.console.info||e.console.log),d&&s&&l.test(r)&&d[Array.isArray(a)?"apply":"call"](e.console,a)}}}(n,a),a.createLogger=function(e){return t(n+": "+e)},a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:o},a.level=function(e){if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');o=e}return o},(a.history=function(){return i?[].concat(i):[]}).filter=function(e){return(i||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},a.history.clear=function(){i&&(i.length=0)},a.history.disable=function(){null!==i&&(i.length=0,i=null)},a.history.enable=function(){null===i&&(i=[])},a.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("error",o,t)},a.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("warn",o,t)},a.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("debug",o,t)},a}("VIDEOJS"),o=r.createLogger;function a(e,t){return e(t={exports:{}},t.exports),t.exports}var s=a((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.apply(this,arguments)}e.exports=t})),l=Object.prototype.toString,u=function(e){return p(e)?Object.keys(e):[]};function d(e,t){u(e).forEach((function(n){return t(e[n],n)}))}function c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Object.assign?s.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&d(t,(function(t,n){e[n]=t}))})),e)}function p(e){return!!e&&"object"==typeof e}function h(e){return p(e)&&"[object Object]"===l.call(e)&&e.constructor===Object}function f(t,n){if(!t||!n)return"";if("function"==typeof e.getComputedStyle){var i=e.getComputedStyle(t);return i?i.getPropertyValue(n)||i[n]:""}return""}function g(e){return"string"==typeof e&&Boolean(e.trim())}function m(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function y(){return t===e.document}function v(e){return p(e)&&1===e.nodeType}function _(){try{return e.parent!==e.self}catch(e){return!0}}function b(e){return function(n,i){if(!g(n))return t[e](null);g(i)&&(i=t.querySelector(i));var r=v(i)?i:t;return r[e]&&r[e](n)}}function E(e,n,i,o){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===i&&(i={});var a=t.createElement(e);return Object.getOwnPropertyNames(n).forEach((function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(r.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),a.setAttribute(e,t)):"textContent"===e?T(a,t):a[e]!==t&&(a[e]=t)})),Object.getOwnPropertyNames(i).forEach((function(e){a.setAttribute(e,i[e])})),o&&q(a,o),a}function T(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function C(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function S(e,t){return m(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function w(e,t){return e.classList?e.classList.add(t):S(e,t)||(e.className=(e.className+" "+t).trim()),e}function A(e,t){return e.classList?e.classList.remove(t):(m(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e}function k(e,t,n){var i=S(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i)return n?w(e,t):A(e,t),e}function P(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var i=t[n];null==i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function I(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var i=e.attributes,r=i.length-1;r>=0;r--){var o=i[r].name,a=i[r].value;"boolean"!=typeof e[o]&&-1===n.indexOf(","+o+",")||(a=null!==a),t[o]=a}return t}function L(e,t){return e.getAttribute(t)}function M(e,t,n){e.setAttribute(t,n)}function R(e,t){e.removeAttribute(t)}function D(){t.body.focus(),t.onselectstart=function(){return!1}}function x(){t.onselectstart=function(){return!0}}function O(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(f(e,"height"))),n.width||(n.width=parseFloat(f(e,"width"))),n}}function N(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};var t=e.offsetWidth,n=e.offsetHeight,i=0,r=0;do{i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent}while(e);return{left:i,top:r,width:t,height:n}}function B(e,t){var n={},i=N(t.target),r=N(e),o=r.width,a=r.height,s=t.offsetY-(r.top-i.top),l=t.offsetX-(r.left-i.left);return t.changedTouches&&(l=t.changedTouches[0].pageX-r.left,s=t.changedTouches[0].pageY+r.top),n.y=1-Math.max(0,Math.min(1,s/a)),n.x=Math.max(0,Math.min(1,l/o)),n}function U(e){return p(e)&&3===e.nodeType}function F(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function j(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),v(e)||U(e)?e:"string"==typeof e&&/\S/.test(e)?t.createTextNode(e):void 0})).filter((function(e){return e}))}function q(e,t){return j(t).forEach((function(t){return e.appendChild(t)})),e}function V(e,t){return q(F(e),t)}function H(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var W,G=b("querySelector"),z=b("querySelectorAll"),K=Object.freeze({__proto__:null,isReal:y,isEl:v,isInFrame:_,createEl:E,textContent:T,prependTo:C,hasClass:S,addClass:w,removeClass:A,toggleClass:k,setAttributes:P,getAttributes:I,getAttribute:L,setAttribute:M,removeAttribute:R,blockTextSelection:D,unblockTextSelection:x,getBoundingClientRect:O,findPosition:N,getPointerPosition:B,isTextNode:U,emptyEl:F,normalizeContent:j,appendContent:q,insertContent:V,isSingleLeftClick:H,$:G,$$:z}),Y=!1,Q=function(){if(y()&&!1!==W.options.autoSetup){var e=Array.prototype.slice.call(t.getElementsByTagName("video")),n=Array.prototype.slice.call(t.getElementsByTagName("audio")),i=Array.prototype.slice.call(t.getElementsByTagName("video-js")),r=e.concat(n,i);if(r&&r.length>0)for(var o=0,a=r.length;o<a;o++){var s=r[o];if(!s||!s.getAttribute){X(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&W(s)}else Y||X(1)}};function X(t,n){n&&(W=n),e.setTimeout(Q,t)}function $(){Y=!0,e.removeEventListener("load",$)}y()&&("complete"===t.readyState?$():e.addEventListener("load",$));var J,Z=function(e){var n=t.createElement("style");return n.className=e,n},ee=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},te=3;function ne(){return te++}e.WeakMap||(J=function(){function t(){this.vdata="vdata"+Math.floor(e.performance&&e.performance.now()||Date.now()),this.data={}}var n=t.prototype;return n.set=function(e,t){var n=e[this.vdata]||ne();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},n.get=function(e){var t=e[this.vdata];if(t)return this.data[t];r("We have no data for this element",e)},n.has=function(e){return e[this.vdata]in this.data},n.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},t}());var ie,re=e.WeakMap?new WeakMap:new J;function oe(e,t){if(re.has(e)){var n=re.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&re.delete(e)}}function ae(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function se(n){if(n.fixed_)return n;function i(){return!0}function r(){return!1}if(!n||!n.isPropagationStopped){var o=n||e.event;for(var a in n={},o)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&o.preventDefault||(n[a]=o[a]));if(n.target||(n.target=n.srcElement||t),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){o.preventDefault&&o.preventDefault(),n.returnValue=!1,o.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){o.stopPropagation&&o.stopPropagation(),n.cancelBubble=!0,o.cancelBubble=!0,n.isPropagationStopped=i},n.isPropagationStopped=r,n.stopImmediatePropagation=function(){o.stopImmediatePropagation&&o.stopImmediatePropagation(),n.isImmediatePropagationStopped=i,n.stopPropagation()},n.isImmediatePropagationStopped=r,null!==n.clientX&&void 0!==n.clientX){var s=t.documentElement,l=t.body;n.pageX=n.clientX+(s&&s.scrollLeft||l&&l.scrollLeft||0)-(s&&s.clientLeft||l&&l.clientLeft||0),n.pageY=n.clientY+(s&&s.scrollTop||l&&l.scrollTop||0)-(s&&s.clientTop||l&&l.clientTop||0)}n.which=n.charCode||n.keyCode,null!==n.button&&void 0!==n.button&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n.fixed_=!0,n}var le=["touchstart","touchmove"];function ue(t,n,i){if(Array.isArray(n))return ae(ue,t,n,i);re.has(t)||re.set(t,{});var o=re.get(t);if(o.handlers||(o.handlers={}),o.handlers[n]||(o.handlers[n]=[]),i.guid||(i.guid=ne()),o.handlers[n].push(i),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e,n){if(!o.disabled){e=se(e);var i=o.handlers[e.type];if(i)for(var a=i.slice(0),s=0,l=a.length;s<l&&!e.isImmediatePropagationStopped();s++)try{a[s].call(t,e,n)}catch(e){r.error(e)}}}),1===o.handlers[n].length)if(t.addEventListener){var a=!1;(function(){if("boolean"!=typeof ie){ie=!1;try{var t=Object.defineProperty({},"passive",{get:function(){ie=!0}});e.addEventListener("test",null,t),e.removeEventListener("test",null,t)}catch(e){}}return ie})()&&le.indexOf(n)>-1&&(a={passive:!0}),t.addEventListener(n,o.dispatcher,a)}else t.attachEvent&&t.attachEvent("on"+n,o.dispatcher)}function de(e,t,n){if(re.has(e)){var i=re.get(e);if(i.handlers){if(Array.isArray(t))return ae(de,e,t,n);var r=function(e,t){i.handlers[t]=[],oe(e,t)};if(void 0!==t){var o=i.handlers[t];if(o)if(n){if(n.guid)for(var a=0;a<o.length;a++)o[a].guid===n.guid&&o.splice(a--,1);oe(e,t)}else r(e,t)}else for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(e,s)}}}function ce(e,t,n){var i=re.has(e)?re.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=se(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)ce.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){re.has(t.target)||re.set(t.target,{});var o=re.get(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function pe(e,t,n){if(Array.isArray(t))return ae(pe,e,t,n);var i=function i(){de(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||ne(),ue(e,t,i)}function he(e,t,n){var i=function i(){de(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||ne(),ue(e,t,i)}var fe,ge=Object.freeze({__proto__:null,fixEvent:se,on:ue,off:de,trigger:ce,one:pe,any:he}),me=30,ye=function(e,t,n){t.guid||(t.guid=ne());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},ve=function(t,n){var i=e.performance.now();return function(){var r=e.performance.now();r-i>=n&&(t.apply(void 0,arguments),i=r)}},_e=function(){};_e.prototype.allowedEvents_={},_e.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},ue(this,e,t),this.addEventListener=n},_e.prototype.addEventListener=_e.prototype.on,_e.prototype.off=function(e,t){de(this,e,t)},_e.prototype.removeEventListener=_e.prototype.off,_e.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},pe(this,e,t),this.addEventListener=n},_e.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},he(this,e,t),this.addEventListener=n},_e.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=se(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),ce(this,e)},_e.prototype.dispatchEvent=_e.prototype.trigger,_e.prototype.queueTrigger=function(t){var n=this;fe||(fe=new Map);var i=t.type||t,r=fe.get(this);r||(r=new Map,fe.set(this,r));var o=r.get(i);r.delete(i),e.clearTimeout(o);var a=e.setTimeout((function(){0===r.size&&(r=null,fe.delete(n)),n.trigger(t)}),0);r.set(i,a)};var be=function(e){return e instanceof _e||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},Ee=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Te=function(e){if(!e.nodeName&&!be(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Ce=function(e){if(!Ee(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Se=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},we=function(e,t){var n,i,r,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return o?(n=e.eventBusEl_,t.length>=3&&t.shift(),i=t[0],r=t[1]):(n=t[0],i=t[1],r=t[2]),Te(n),Ce(i),Se(r),{isTargetingSelf:o,target:n,type:i,listener:r=ye(e,r)}},Ae=function(e,t,n,i){Te(e),e.nodeName?ge[t](e,n,i):e[t](n,i)},ke={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=we(this,n),o=r.isTargetingSelf,a=r.target,s=r.type,l=r.listener;if(Ae(a,"on",s,l),!o){var u=function(){return e.off(a,s,l)};u.guid=l.guid;var d=function(){return e.off("dispose",u)};d.guid=l.guid,Ae(this,"on","dispose",u),Ae(a,"on","dispose",d)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=we(this,n),o=r.isTargetingSelf,a=r.target,s=r.type,l=r.listener;if(o)Ae(a,"one",s,l);else{var u=function t(){e.off(a,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,Ae(a,"one",s,u)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=we(this,n),o=r.isTargetingSelf,a=r.target,s=r.type,l=r.listener;if(o)Ae(a,"any",s,l);else{var u=function t(){e.off(a,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,Ae(a,"any",s,u)}},off:function(e,t,n){if(!e||Ee(e))de(this.eventBusEl_,e,t);else{var i=e,r=t;Te(i),Ce(r),Se(n),n=ye(this,n),this.off("dispose",n),i.nodeName?(de(i,r,n),de(i,"dispose",n)):be(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){return ce(this.eventBusEl_,e,t)}};function Pe(t,n){void 0===n&&(n={});var i=n.eventBusKey;if(i){if(!t[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');t.eventBusEl_=t[i]}else t.eventBusEl_=E("span",{className:"vjs-event-bus"});return c(t,ke),t.eventedCallbacks&&t.eventedCallbacks.forEach((function(e){e()})),t.on("dispose",(function(){t.off(),e.setTimeout((function(){t.eventBusEl_=null}),0)})),t}var Ie={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),d(e,(function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e})),t&&be(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Le(e,t){return c(e,Ie),e.state=c({},e.state,t),"function"==typeof e.handleStateChanged&&be(e)&&e.on("statechanged",e.handleStateChanged),e}var Me=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},Re=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function De(){for(var e={},t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){t&&d(t,(function(t,n){h(t)?(h(e[n])||(e[n]={}),e[n]=De(e[n],t)):e[n]=t}))})),e}var xe=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.set_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),Oe=e.Map?e.Map:xe,Ne=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),Be=e.Set?e.Set:Ne,Ue=function(){function t(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=De({},this.options_),t=this.options_=De(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+ne()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&Pe(this,{eventBusKey:this.el_?"el_":null}),Le(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Be,this.setIntervalIds_=new Be,this.rafIds_=new Be,this.namedRafs_=new Oe,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var n=t.prototype;return n.dispose=function(){if(!this.isDisposed_){if(this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),re.has(this.el_)&&re.delete(this.el_),this.el_=null),this.player_=null}},n.isDisposed=function(){return Boolean(this.isDisposed_)},n.player=function(){return this.player_},n.options=function(e){return e?(this.options_=De(this.options_,e),this.options_):this.options_},n.el=function(){return this.el_},n.createEl=function(e,t,n){return E(e,t,n)},n.localize=function(e,t,n){void 0===n&&(n=e);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),o=r&&r[i],a=i&&i.split("-")[0],s=r&&r[a],l=n;return o&&o[e]?l=o[e]:s&&s[e]&&(l=s[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,n){var i=t[n-1],r=i;return void 0===i&&(r=e),r}))),l},n.contentEl=function(){return this.contentEl_||this.el_},n.id=function(){return this.id_},n.name=function(){return this.name_},n.children=function(){return this.children_},n.getChildById=function(e){return this.childIndex_[e]},n.getChild=function(e){if(e)return this.childNameIndex_[e]},n.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var i=this,r=0;r<t.length;r++)if(!(i=i.getChild(t[r]))||!i.getChild)return;return i},n.addChild=function(e,n,i){var r,o;if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"==typeof e){o=Re(e);var a=n.componentClass||o;n.name=o;var s=t.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;r=new s(this.player_||this,n)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(o=o||r.name&&Re(r.name()))&&(this.childNameIndex_[o]=r,this.childNameIndex_[Me(o)]=r),"function"==typeof r.el&&r.el()){var l=null;this.children_[i+1]&&(this.children_[i+1].el_?l=this.children_[i+1].el_:v(this.children_[i+1])&&(l=this.children_[i+1])),this.contentEl().insertBefore(r.el(),l)}return r},n.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Re(e.name())]=null,this.childNameIndex_[Me(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},n.initChildren=function(){var e=this,n=this.options_.children;if(n){var i,r=this.options_,o=t.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(t){var i,r;return"string"==typeof t?r=n[i=t]||e.options_[i]||{}:(i=t.name,r=t),{name:i,opts:r}})).filter((function(e){var n=t.getComponent(e.opts.componentClass||Re(e.name));return n&&!o.isTech(n)})).forEach((function(t){var n=t.name,i=t.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=e.options_.playerOptions;var o=e.addChild(n,i);o&&(e[n]=o)}}))}},n.buildCSSClass=function(){return""},n.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},n.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},n.$=function(e,t){return G(e,t||this.contentEl())},n.$$=function(e,t){return z(e,t||this.contentEl())},n.hasClass=function(e){return S(this.el_,e)},n.addClass=function(e){w(this.el_,e)},n.removeClass=function(e){A(this.el_,e)},n.toggleClass=function(e,t){k(this.el_,e,t)},n.show=function(){this.removeClass("vjs-hidden")},n.hide=function(){this.addClass("vjs-hidden")},n.lockShowing=function(){this.addClass("vjs-lock-showing")},n.unlockShowing=function(){this.removeClass("vjs-lock-showing")},n.getAttribute=function(e){return L(this.el_,e)},n.setAttribute=function(e,t){M(this.el_,e,t)},n.removeAttribute=function(e){R(this.el_,e)},n.width=function(e,t){return this.dimension("width",e,t)},n.height=function(e,t){return this.dimension("height",e,t)},n.dimensions=function(e,t){this.width(e,!0),this.height(t)},n.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+Re(e)],10)},n.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=f(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+Re(e);t=this.el_[n]}return t},n.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},n.currentWidth=function(){return this.currentDimension("width")},n.currentHeight=function(){return this.currentDimension("height")},n.focus=function(){this.el_.focus()},n.blur=function(){this.el_.blur()},n.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},n.handleKeyPress=function(e){this.handleKeyDown(e)},n.emitTapEvents=function(){var t,n=0,i=null;this.on("touchstart",(function(r){1===r.touches.length&&(i={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},n=e.performance.now(),t=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)t=!1;else if(i){var n=e.touches[0].pageX-i.pageX,r=e.touches[0].pageY-i.pageY;Math.sqrt(n*n+r*r)>10&&(t=!1)}}));var r=function(){t=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",(function(r){(i=null,!0===t)&&(e.performance.now()-n<200&&(r.preventDefault(),this.trigger("tap")))}))},n.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=ye(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},n.setTimeout=function(t,n){var i,r=this;return t=ye(this,t),this.clearTimersOnDispose_(),i=e.setTimeout((function(){r.setTimeoutIds_.has(i)&&r.setTimeoutIds_.delete(i),t()}),n),this.setTimeoutIds_.add(i),i},n.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),e.clearTimeout(t)),t},n.setInterval=function(t,n){t=ye(this,t),this.clearTimersOnDispose_();var i=e.setInterval(t,n);return this.setIntervalIds_.add(i),i},n.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),e.clearInterval(t)),t},n.requestAnimationFrame=function(t){var n,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=ye(this,t),n=e.requestAnimationFrame((function(){i.rafIds_.has(n)&&i.rafIds_.delete(n),t()})),this.rafIds_.add(n),n):this.setTimeout(t,1e3/60)},n.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=ye(this,t);var i=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,i),e}},n.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},n.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),e.cancelAnimationFrame(t)),t):this.clearTimeout(t)},n.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],i=t[1];e[n].forEach((function(t,n){return e[i](n)}))})),e.clearingTimersOnDispose_=!1})))},t.registerComponent=function(e,n){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i,r=t.getComponent("Tech"),o=r&&r.isTech(n),a=t===n||t.prototype.isPrototypeOf(n.prototype);if(o||!a)throw i=o?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+i+".");e=Re(e),t.components_||(t.components_={});var s=t.getComponent("Player");if("Player"===e&&s&&s.players){var l=s.players,u=Object.keys(l);if(l&&u.length>0&&u.map((function(e){return l[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=n,t.components_[Me(e)]=n,n},t.getComponent=function(e){if(e&&t.components_)return t.components_[e]},t}();Ue.prototype.supportsRaf_="function"==typeof e.requestAnimationFrame&&"function"==typeof e.cancelAnimationFrame,Ue.registerComponent("Component",Ue);var Fe=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};a((function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t})),a((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}));var je,qe=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},Ve=e.navigator&&e.navigator.userAgent||"",He=/AppleWebKit\/([\d.]+)/i.exec(Ve),We=He?parseFloat(He.pop()):null,Ge=/iPod/i.test(Ve),ze=(je=Ve.match(/OS (\d+)_/i))&&je[1]?je[1]:null,Ke=/Android/i.test(Ve),Ye=function(){var e=Ve.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Qe=Ke&&Ye<5&&We<537,Xe=/Firefox/i.test(Ve),$e=/Edg/i.test(Ve),Je=!$e&&(/Chrome/i.test(Ve)||/CriOS/i.test(Ve)),Ze=function(){var e=Ve.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),et=function(){var e=/MSIE\s(\d+)\.\d/.exec(Ve),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Ve)&&/rv:11.0/.test(Ve)&&(t=11),t}(),tt=/Safari/i.test(Ve)&&!Je&&!Ke&&!$e,nt=/Windows/i.test(Ve),it=y()&&("ontouchstart"in e||e.navigator.maxTouchPoints||e.DocumentTouch&&e.document instanceof e.DocumentTouch),rt=/iPad/i.test(Ve)||tt&&it&&!/iPhone/i.test(Ve),ot=/iPhone/i.test(Ve)&&!rt,at=ot||rt||Ge,st=(tt||at)&&!Je,lt=Object.freeze({__proto__:null,IS_IPOD:Ge,IOS_VERSION:ze,IS_ANDROID:Ke,ANDROID_VERSION:Ye,IS_NATIVE_ANDROID:Qe,IS_FIREFOX:Xe,IS_EDGE:$e,IS_CHROME:Je,CHROME_VERSION:Ze,IE_VERSION:et,IS_SAFARI:tt,IS_WINDOWS:nt,TOUCH_ENABLED:it,IS_IPAD:rt,IS_IPHONE:ot,IS_IOS:at,IS_ANY_SAFARI:st});function ut(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function dt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ut.bind(null,"start",0,e),end:ut.bind(null,"end",1,e)}}function ct(e,t){return Array.isArray(e)?dt(e):void 0===e||void 0===t?dt():dt([[e,t]])}function pt(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=ct(0,0));for(var o=0;o<e.length;o++)n=e.start(o),(i=e.end(o))>t&&(i=t),r+=i-n;return r/t}for(var ht,ft={prefixed:!0},gt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],mt=gt[0],yt=0;yt<gt.length;yt++)if(gt[yt][1]in t){ht=gt[yt];break}if(ht){for(var vt=0;vt<ht.length;vt++)ft[mt[vt]]=ht[vt];ft.prefixed=ht[0]!==mt[0]}function _t(e){if(e instanceof _t)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:p(e)&&("number"==typeof e.code&&(this.code=e.code),c(this,e)),this.message||(this.message=_t.defaultMessages[this.code]||"")}_t.prototype.code=0,_t.prototype.message="",_t.prototype.status=null,_t.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],_t.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var bt=0;bt<_t.errorTypes.length;bt++)_t[_t.errorTypes[bt]]=bt,_t.prototype[_t.errorTypes[bt]]=bt;var Et=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(e){i=e}return[i,n]};function Tt(e){return null!=e&&"function"==typeof e.then}function Ct(e){Tt(e)&&e.then(null,(function(e){}))}var St=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,i){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},wt=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=St(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(St))},At=function(e,t){return e.forEach((function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return n.addCue(e)}))})),t.textTracks()},kt=a((function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n,o=String(e);return(n=i[o.toLowerCase()])?n:(n=r[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var o;if(o=i[t.toLowerCase()])return o===n;if(o=r[t.toLowerCase()])return o===n}else if("number"==typeof t)return t===n;return!1}};var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
     * Programatically add the following
     */
for(o=97;o<123;o++)i[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)i[o-48]=o;for(o=1;o<13;o++)i["f"+o]=o+111;for(o=0;o<10;o++)i["numpad "+o]=o+96;var a=t.names=t.title={};for(o in i)a[i[o]]=o;for(var s in r)i[s]=r[s]})),Pt=(kt.code,kt.codes,kt.aliases,kt.names,kt.title,function(n){function i(e,t){var i;return(i=n.call(this,e,t)||this).opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=E("div",{className:"vjs-modal-dialog-content"},{role:"document"}),i.descEl_=E("p",{className:"vjs-modal-dialog-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),T(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}qe(i,n);var r=i.prototype;return r.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+n.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),V(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},r.empty=function(){this.trigger("beforemodalempty"),F(this.contentEl()),this.trigger("modalempty")},r.content=function(e){return void 0!==e&&(this.content_=e),this.content_},r.conditionalFocus_=function(){var e=t.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(e){if(e.stopPropagation(),kt.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(kt.isEventKey(e,"Tab")){for(var n,i=this.focusableEls_(),r=this.el_.querySelector(":focus"),o=0;o<i.length;o++)if(r===i[o]){n=o;break}t.activeElement===this.el_&&(n=0),e.shiftKey&&0===n?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||n!==i.length-1||(i[0].focus(),e.preventDefault())}},r.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,(function(t){return(t instanceof e.HTMLAnchorElement||t instanceof e.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof e.HTMLInputElement||t instanceof e.HTMLSelectElement||t instanceof e.HTMLTextAreaElement||t instanceof e.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof e.HTMLIFrameElement||t instanceof e.HTMLObjectElement||t instanceof e.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")}))},i}(Ue));Pt.prototype.options_={pauseOnOpen:!0,temporary:!0},Ue.registerComponent("ModalDialog",Pt);var It=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(Fe(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)n.addTrack(t[i]);return n}qe(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},n.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(_e);for(var Lt in It.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},It.prototype.allowedEvents_)It.prototype["on"+Lt]=null;var Mt=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},Rt=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].enabled){Mt(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,n}qe(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&Mt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,Mt(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(It),Dt=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},xt=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].selected){Dt(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(Fe(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}qe(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&Dt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,Dt(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(It),Ot=function(e){function t(){return e.apply(this,arguments)||this}qe(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(It),Nt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Bt=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(),Ut={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ft={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},jt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},qt={disabled:"disabled",hidden:"hidden",showing:"showing"},Vt=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var i={id:t.id||"vjs_track_"+ne(),kind:t.kind||"",label:t.label||"",language:t.language||""},r=function(e){Object.defineProperty(Fe(n),e,{get:function(){return i[e]},set:function(){}})};for(var o in i)r(o);return n}return qe(t,e),t}(_e),Ht=function(n){var i=["protocol","hostname","port","pathname","search","hash","host"],r=t.createElement("a");r.href=n;var o,a=""===r.host&&"file:"!==r.protocol;a&&((o=t.createElement("div")).innerHTML='<a href="'+n+'"></a>',r=o.firstChild,o.setAttribute("style","display:none; position:absolute;"),t.body.appendChild(o));for(var s={},l=0;l<i.length;l++)s[i[l]]=r[i[l]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=e.location.protocol),a&&t.body.removeChild(o),s},Wt=function(e){if(!e.match(/^https?:\/\//)){var n=t.createElement("div");n.innerHTML='<a href="'+e+'">x</a>',e=n.firstChild.href}return e},Gt=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},zt=function(t,n){void 0===n&&(n=e.location);var i=Ht(t);return(":"===i.protocol?n.protocol:i.protocol)+i.host!==n.protocol+n.host},Kt=Object.freeze({__proto__:null,parseUrl:Ht,getAbsoluteURL:Wt,getFileExtension:Gt,isCrossOrigin:zt}),Yt=function(e){var t=Qt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}
/**
   * @license
   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
   * Copyright (c) 2014 David Björklund
   * Available under the MIT license
   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
   */,Qt=Object.prototype.toString;var Xt=Zt,$t=Zt;function Jt(e,t,n){var i=e;return Yt(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=s({},t,{uri:e}),i.callback=n,i}function Zt(e,t,n){return en(t=Jt(e,t,n))}function en(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),g)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,m)}function o(){if(!s){var t;clearTimeout(u),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=m,o=null;return 0!==t?(r={body:i(),statusCode:t,method:c,headers:{},url:d,rawRequest:l},l.getAllResponseHeaders&&(r.headers=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();void 0===t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t}(l.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,r,r.body)}}var a,s,l=e.xhr||null;l||(l=e.cors||e.useXDR?new Zt.XDomainRequest:new Zt.XMLHttpRequest);var u,d=l.url=e.uri||e.url,c=l.method=e.method||"GET",p=e.body||e.data,h=l.headers=e.headers||{},f=!!e.sync,g=!1,m={body:void 0,headers:{},statusCode:0,method:c,url:d,rawRequest:l};if("json"in e&&!1!==e.json&&(g=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(o,0)},l.onload=o,l.onerror=r,l.onprogress=function(){},l.onabort=function(){s=!0},l.ontimeout=r,l.open(c,d,!f,e.username,e.password),f||(l.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(u=setTimeout((function(){if(!s){s=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),l.setRequestHeader)for(a in h)h.hasOwnProperty(a)&&l.setRequestHeader(a,h[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(p||null),l}Zt.XMLHttpRequest=e.XMLHttpRequest||function(){},Zt.XDomainRequest="withCredentials"in new Zt.XMLHttpRequest?Zt.XMLHttpRequest:e.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){Zt["delete"===e?"del":e]=function(t,n,i){return(n=Jt(t,n,i)).method=e.toUpperCase(),en(n)}})),Xt.default=$t;var tn=function(t,n){var i=new e.WebVTT.Parser(e,e.vttjs,e.WebVTT.StringDecoder()),o=[];i.oncue=function(e){n.addCue(e)},i.onparsingerror=function(e){o.push(e)},i.onflush=function(){n.trigger({type:"loadeddata",target:n})},i.parse(t),o.length>0&&(e.console&&e.console.groupCollapsed&&e.console.groupCollapsed("Text Track parsing errors for "+n.src),o.forEach((function(e){return r.error(e)})),e.console&&e.console.groupEnd&&e.console.groupEnd()),i.flush()},nn=function(t,n){var i={uri:t},o=zt(t);o&&(i.cors=o);var a="use-credentials"===n.tech_.crossOrigin();a&&(i.withCredentials=a),Xt(i,ye(this,(function(t,i,o){if(t)return r.error(t,i);n.loaded_=!0,"function"!=typeof e.WebVTT?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return tn(o,n);r.error("vttjs failed to load, stopping trying to process "+n.src)})):tn(o,n)})))},rn=function(t){function n(e){var n;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var i=De(e,{kind:jt[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=qt[i.mode]||"disabled",o=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(r="hidden"),(n=t.call(this,i)||this).tech_=i.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var a=new Bt(n.cues_),s=new Bt(n.activeCues_),l=!1,u=ye(Fe(n),(function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)}));return"disabled"!==r&&n.tech_.ready((function(){n.tech_.on("timeupdate",u)}),!0),Object.defineProperties(Fe(n),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return r},set:function(e){var t=this;qt[e]&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||nn(this.src,this),"disabled"!==r?this.tech_.ready((function(){t.tech_.on("timeupdate",u)}),!0):this.tech_.off("timeupdate",u),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(l=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),i.src?(n.src=i.src,n.preload_||(n.loaded_=!0),(n.preload_||o||"subtitles"!==i.kind&&"captions"!==i.kind)&&nn(n.src,Fe(n))):n.loaded_=!0,n}qe(n,t);var i=n.prototype;return i.addCue=function(t){var n=t;if(e.vttjs&&!(t instanceof e.vttjs.VTTCue)){for(var i in n=new e.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)i in n||(n[i]=t[i]);n.id=t.id,n.originalCue_=t}for(var r=this.tech_.textTracks(),o=0;o<r.length;o++)r[o]!==this&&r[o].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},i.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},n}(Vt);rn.prototype.allowedEvents_={cuechange:"cuechange"};var on=function(e){function t(t){var n;void 0===t&&(t={});var i=De(t,{kind:Ft[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(Fe(n),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return qe(t,e),t}(Vt),an=function(e){function t(t){var n;void 0===t&&(t={});var i=De(t,{kind:Ut[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(Fe(n),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return qe(t,e),t}(Vt),sn=function(e){function t(t){var n,i;void 0===t&&(t={}),n=e.call(this)||this;var r=new rn(t);return n.kind=r.kind,n.src=r.src,n.srclang=r.language,n.label=r.label,n.default=r.default,Object.defineProperties(Fe(n),{readyState:{get:function(){return i}},track:{get:function(){return r}}}),i=0,r.addEventListener("loadeddata",(function(){i=2,n.trigger({type:"load",target:Fe(n)})})),n}return qe(t,e),t}(_e);sn.prototype.allowedEvents_={load:"load"},sn.NONE=0,sn.LOADING=1,sn.LOADED=2,sn.ERROR=3;var ln={audio:{ListClass:Rt,TrackClass:on,capitalName:"Audio"},video:{ListClass:xt,TrackClass:an,capitalName:"Video"},text:{ListClass:Ot,TrackClass:rn,capitalName:"Text"}};Object.keys(ln).forEach((function(e){ln[e].getterName=e+"Tracks",ln[e].privateName=e+"Tracks_"}));var un={remoteText:{ListClass:Ot,TrackClass:rn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Nt,TrackClass:sn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},dn=s({},ln,un);un.names=Object.keys(un),ln.names=Object.keys(ln),dn.names=[].concat(un.names).concat(ln.names);var cn=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function pn(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function hn(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function fn(){this.values=cn(null)}function gn(e,t,n,i){var r=i?e.split(i):[e];for(var o in r)if("string"==typeof r[o]){var a=r[o].split(n);if(2===a.length)t(a[0],a[1])}}function mn(e,t,n){var i=e;function r(){var t=hn(e);if(null===t)throw new pn(pn.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=r(),o(),"--\x3e"!==e.substr(0,3))throw new pn(pn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),o(),t.endTime=r(),o(),function(e,t){var i=new fn;gn(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];i.integer(e,a),i.percent(e,a)&&i.set("snapToLines",!1),i.alt(e,a,["auto"]),2===o.length&&i.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),i.percent(e,o[0]),2===o.length&&i.alt("positionAlign",o[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}pn.prototype=cn(Error.prototype),pn.prototype.constructor=pn,pn.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},fn.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var yn=t.createElement("textarea"),vn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_n={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},bn={v:"title",lang:"lang"},En={rt:"ruby"};function Tn(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e){return yn.innerHTML=e,e=yn.textContent,yn.textContent="",e}function r(e,t){return!En[t.localName]||En[t.localName]===e.localName}function o(t,n){var i=vn[t];if(!i)return null;var r=e.document.createElement(i),o=bn[t];return o&&n&&(r[o]=n.trim()),r}for(var a,s=e.document.createElement("div"),l=s,u=[];null!==(a=n());)if("<"!==a[0])l.appendChild(e.document.createTextNode(i(a)));else{if("/"===a[1]){u.length&&u[u.length-1]===a.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var d,c=hn(a.substr(1,a.length-2));if(c){d=e.document.createProcessingInstruction("timestamp",c),l.appendChild(d);continue}var p=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=o(p[1],p[3])))continue;if(!r(l,d))continue;if(p[2]){var h=p[2].split(".");h.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(_n.hasOwnProperty(n)){var i=t?"background-color":"color",r=_n[n];d.style[i]=r}})),d.className=h.join(" ")}u.push(p[1]),l.appendChild(d),l=d}return s}var Cn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Sn(e){for(var t=0;t<Cn.length;t++){var n=Cn[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function wn(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function r(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var o=n.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):n}return"ruby"===t.tagName?r(e):t.childNodes?(i(e,t),r(e)):void 0}for(i(t,e);n=r(t);)for(var o=0;o<n.length;o++)if(Sn(n.charCodeAt(o)))return"rtl";return"ltr"}function An(){}function kn(e,t,n){An.call(this),this.cue=t,this.cueDiv=Tn(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:wn(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Pn(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function In(e,t,n,i){var r=new Pn(t),o=t.cue,a=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(o),s=[];if(o.snapToLines){var l;switch(o.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=r.lineHeight,d=u*Math.round(a),c=n[l]+u,p=s[0];Math.abs(d)>c&&(d=d<0?-1:1,d*=Math.ceil(c/u)*u),a<0&&(d+=""===o.vertical?n.height:n.width,s=s.reverse()),r.move(p,d)}else{var h=r.lineHeight/n.height*100;switch(o.lineAlign){case"center":a-=h/2;break;case"end":a-=h}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],r=new Pn(t)}var f=function(e,t){for(var r,o=new Pn(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(n))return e;var l=e.intersectPercentage(n);a>l&&(r=new Pn(e),a=l),e=new Pn(o)}return r||o}(r,s);t.move(f.toCSSCompatValues(n))}function Ln(){}An.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},An.prototype.formatStyle=function(e,t){return 0===e?0:e+t},kn.prototype=cn(An.prototype),kn.prototype.constructor=kn,Pn.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Pn.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Pn.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Pn.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Pn.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Pn.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Pn.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Pn.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},Ln.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Ln.convertCueToDOMTree=function(e,t){return e&&t?Tn(e,t):null};Ln.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],o=Pn.getSimpleBoxPosition(i),a={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var n,s,l=0;l<t.length;l++)s=t[l],n=new kn(e,s,a),i.appendChild(n.div),In(0,n,o,r),s.displayState=n.div,r.push(Pn.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)i.appendChild(t[s].displayState)},Ln.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},Ln.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof pn))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?gn(e,(function(e,n){if("X-TIMESTAMP-MAP"===e)!function(e){var n=new fn;gn(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",hn(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}),/=/):gn(e,(function(e,n){if("Region"===e)!function(e){var n=new fn;if(gn(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new fn;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var o=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new pn(pn.Errors.BadSignature);t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{mn(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new pn(pn.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var Mn=Ln,Rn={"":1,lr:1,rl:1},Dn={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function xn(e){return"string"==typeof e&&(!!Dn[e.toLowerCase()]&&e.toLowerCase())}function On(e,t,n){this.hasBeenReset=!1;var i="",r=!1,o=e,a=t,s=n,l=null,u="",d=!0,c="auto",p="start",h="auto",f="auto",g=100,m="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");a=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!Rn[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");c=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(e){var t=xn(e);t?(p=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return h},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");h=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=xn(e);t?(f=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(e){var t=xn(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");m=t,this.hasBeenReset=!0}}}),this.displayState=void 0}On.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Nn=On,Bn={"":!0,up:!0};function Un(e){return"number"==typeof e&&e>=0&&e<=100}var Fn=function(){var e=100,t=3,n=0,i=100,r=0,o=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Un(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!Un(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Un(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!Un(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Un(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return a},set:function(e){var t=function(e){return"string"==typeof e&&!!Bn[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):a=t}}})},jn=a((function(t){var n=t.exports={WebVTT:Mn,VTTCue:Nn,VTTRegion:Fn};e.vttjs=n,e.WebVTT=n.WebVTT;var i=n.VTTCue,r=n.VTTRegion,o=e.VTTCue,a=e.VTTRegion;n.shim=function(){e.VTTCue=i,e.VTTRegion=r},n.restore=function(){e.VTTCue=o,e.VTTRegion=a},e.VTTCue||n.shim()}));jn.WebVTT,jn.VTTCue,jn.VTTRegion;var qn=function(n){function i(e,t){var i;return void 0===e&&(e={}),void 0===t&&(t=function(){}),e.reportTouchActivity=!1,(i=n.call(this,null,e,t)||this).hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),dn.names.forEach((function(t){var n=dn[t];e&&e[n.getterName]&&(i[n.privateName]=e[n.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(t){!1===e["native"+t+"Tracks"]&&(i["featuresNative"+t+"Tracks"]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==e.preloadTextTracks,i.autoRemoteTextTracks_=new dn.text.ListClass,i.initTrackListeners(),e.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}qe(i,n);var o=i.prototype;return o.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},o.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},o.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},o.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ye(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},o.onDurationChange=function(e){this.duration_=this.duration()},o.buffered=function(){return ct(0,0)},o.bufferedPercent=function(){return pt(this.buffered(),this.duration_)},o.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},o.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},o.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},o.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},o.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},o.dispose=function(){this.clearTracks(ln.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},o.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}}))},o.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},o.reset=function(){},o.crossOrigin=function(){},o.setCrossOrigin=function(){},o.error=function(e){return void 0!==e&&(this.error_=new _t(e),this.trigger("error")),this.error_},o.played=function(){return this.hasStarted_?ct(0,0):ct()},o.setScrubbing=function(){},o.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},o.initTrackListeners=function(){var e=this;ln.names.forEach((function(t){var n=ln[t],i=function(){e.trigger(t+"trackchange")},r=e[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),e.on("dispose",(function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)}))}))},o.addWebVttScript_=function(){var n=this;if(!e.WebVTT)if(t.body.contains(this.el())){if(!this.options_["vtt.js"]&&h(jn)&&Object.keys(jn).length>0)return void this.trigger("vttjsloaded");var i=t.createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",i.onload=function(){n.trigger("vttjsloaded")},i.onerror=function(){n.trigger("vttjserror")},this.on("dispose",(function(){i.onload=null,i.onerror=null})),e.WebVTT=!0,this.el().parentNode.appendChild(i)}else this.ready(this.addWebVttScript_)},o.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),i=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};n.on("addtrack",i),n.on("removetrack",r),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},a=function(){o();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",o),"showing"===n.mode&&n.addEventListener("cuechange",o)}};a(),t.addEventListener("change",a),t.addEventListener("addtrack",a),t.addEventListener("removetrack",a),this.on("dispose",(function(){n.off("addtrack",i),n.off("removetrack",r),t.removeEventListener("change",a),t.removeEventListener("addtrack",a),t.removeEventListener("removetrack",a);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",o)}}))},o.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var o=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var a=new dn.text.TrackClass(r);return o.addTrack(a),a}(this,e,t,n)},o.createRemoteTextTrack=function(e){var t=De(e,{tech:this});return new un.remoteTextEl.TrackClass(t)},o.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var i=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(r.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(i.track)})),i},o.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},o.getVideoPlaybackQuality=function(){return{}},o.requestPictureInPicture=function(){var t=this.options_.Promise||e.Promise;if(t)return t.reject()},o.disablePictureInPicture=function(){return!0},o.setDisablePictureInPicture=function(){},o.setPoster=function(){},o.playsinline=function(){},o.setPlaysinline=function(){},o.overrideNativeAudioTracks=function(){},o.overrideNativeVideoTracks=function(){},o.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(e,t){return i.canPlayType(e.type)},i.isTech=function(e){return e.prototype instanceof i||e instanceof i||e===i},i.registerTech=function(e,t){if(i.techs_||(i.techs_={}),!i.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Re(e),i.techs_[e]=t,i.techs_[Me(e)]=t,"Tech"!==e&&i.defaultTechOrder_.push(e),t},i.getTech=function(t){if(t)return i.techs_&&i.techs_[t]?i.techs_[t]:(t=Re(t),e&&e.videojs&&e.videojs[t]?(r.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),e.videojs[t]):void 0)},i}(Ue);dn.names.forEach((function(e){var t=dn[e];qn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),qn.prototype.featuresVolumeControl=!0,qn.prototype.featuresMuteControl=!0,qn.prototype.featuresFullscreenResize=!1,qn.prototype.featuresPlaybackRate=!1,qn.prototype.featuresProgressEvents=!1,qn.prototype.featuresSourceset=!1,qn.prototype.featuresTimeupdateEvents=!1,qn.prototype.featuresNativeTextTracks=!1,qn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n,i=e.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(t,n))return i[r];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:r.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ue.registerComponent("Tech",qn),qn.registerTech("Tech",qn),qn.defaultTechOrder_=[];var Vn={},Hn={},Wn={};function Gn(e,t,n){e.setTimeout((function(){return $n(t,Vn[t.type],n,e)}),1)}function zn(e,t,n,i){void 0===i&&(i=null);var r="call"+Re(n),o=e.reduce(Xn(r),i),a=o===Wn,s=a?null:t[n](o);return function(e,t,n,i){for(var r=e.length-1;r>=0;r--){var o=e[r];o[t]&&o[t](i,n)}}(e,n,s,a),s}var Kn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Yn={setCurrentTime:1,setMuted:1,setVolume:1},Qn={play:1,pause:1};function Xn(e){return function(t,n){return t===Wn?Wn:n[e]?n[e](t):t}}function $n(e,t,n,i,r,o){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===o&&(o=!1);var a=t,s=a[0],l=a.slice(1);if("string"==typeof s)$n(e,Vn[s],n,i,r,o);else if(s){var u=function(e,t){var n=Hn[e.id()],i=null;if(null==n)return i=t(e),Hn[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var o=n[r],a=o[0],s=o[1];a===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}(i,s);if(!u.setSource)return r.push(u),$n(e,l,n,i,r,o);u.setSource(c({},e),(function(t,a){if(t)return $n(e,l,n,i,r,o);r.push(u),$n(a,e.type===a.type?l:Vn[a.type],n,i,r,o)}))}else l.length?$n(e,l,n,i,r,o):o?n(e,r):$n(e,Vn["*"],n,i,r,!0)}var Jn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Zn=function(e){void 0===e&&(e="");var t=Gt(e);return Jn[t.toLowerCase()]||""},ei=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):p(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[ti({src:t})]:p(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[ti(t)]:[];return t};function ti(e){if(!e.type){var t=Zn(e.src);t&&(e.type=t)}return e}var ni=function(e){function t(t,n,i){var r,o=De({createEl:!1},n);if(r=e.call(this,t,o,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var a=0,s=n.playerOptions.techOrder;a<s.length;a++){var l=Re(s[a]),u=qn.getTech(l);if(l||(u=Ue.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return r}return qe(t,e),t}(Ue);Ue.registerComponent("MediaLoader",ni);var ii=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).emitTapEvents(),i.enable(),i}qe(t,e);var n=t.prototype;return n.createEl=function(t,n,i){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===i&&(i={}),n=c({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&r.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),i=c({role:"button"},i),this.tabIndex_=n.tabIndex;var o=e.prototype.createEl.call(this,t,n,i);return this.createControlTextEl(o),o},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=E("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,T(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){kt.isEventKey(t,"Space")||kt.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Ue);Ue.registerComponent("ClickableComponent",ii);var ri=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update(),t.on("posterchange",ye(Fe(i),i.update)),i}qe(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},n.createEl=function(){return E("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(et||$e)&&t||this.player_.tech(!0).focus(),this.player_.paused()?Ct(this.player_.play()):this.player_.pause()}},t}(ii);Ue.registerComponent("PosterImage",ri);var oi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ai(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function si(e,t,n){try{e.style[t]=n}catch(e){return}}var li=function(t){function n(n,i,r){var o;o=t.call(this,n,i,r)||this;var a=ye(Fe(o),o.updateDisplay);return n.on("loadstart",ye(Fe(o),o.toggleDisplay)),n.on("texttrackchange",a),n.on("loadedmetadata",ye(Fe(o),o.preselectTrack)),n.ready(ye(Fe(o),(function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",a),n.on("playerresize",a),e.addEventListener("orientationchange",a),n.on("dispose",(function(){return e.removeEventListener("orientationchange",a)}));for(var t=this.options_.playerOptions.tracks||[],i=0;i<t.length;i++)this.player_.addRemoteTextTrack(t[i],!0);this.preselectTrack()}}))),o}qe(n,t);var i=n.prototype;return i.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,a=0;a<r.length;a++){var s=r[a];o&&o.enabled&&o.language&&o.language===s.language&&s.kind in i?s.kind===o.kind?n=s:n||(n=s):o&&!o.enabled?(n=null,e=null,t=null):s.default&&("descriptions"!==s.kind||e?s.kind in i&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof e.WebVTT&&e.WebVTT.processCues(e,[],this.el_)},i.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var o=null,a=null,s=e.length;s--;){var l=e[s];"showing"===l.mode&&("descriptions"===l.kind?o=l:a=l)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):o&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(o))}},i.updateDisplayState=function(t){for(var n=this.player_.textTrackSettings.getValues(),i=t.activeCues,r=i.length;r--;){var o=i[r];if(o){var a=o.displayState;if(n.color&&(a.firstChild.style.color=n.color),n.textOpacity&&si(a.firstChild,"color",ai(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(a.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&si(a.firstChild,"backgroundColor",ai(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?si(a,"backgroundColor",ai(n.windowColor,n.windowOpacity)):a.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===n.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===n.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===n.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),n.fontPercent&&1!==n.fontPercent){var s=e.parseFloat(a.style.fontSize);a.style.fontSize=s*n.fontPercent+"px",a.style.height="auto",a.style.top="auto"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=oi[n.fontFamily])}}},i.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof e.WebVTT&&!t.every((function(e){return!e.activeCues}))){for(var n=[],i=0;i<t.length;++i)for(var r=t[i],o=0;o<r.activeCues.length;++o)n.push(r.activeCues[o]);e.WebVTT.processCues(e,n,this.el_);for(var a=0;a<t.length;++a){for(var s=t[a],l=0;l<s.activeCues.length;++l){var u=s.activeCues[l].displayState;w(u,"vjs-text-track-cue"),w(u,"vjs-text-track-cue-"+(s.language?s.language:a))}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},n}(Ue);Ue.registerComponent("TextTrackDisplay",li);var ui=function(e){function t(){return e.apply(this,arguments)||this}return qe(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),i=E("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r},t}(Ue);Ue.registerComponent("LoadingSpinner",ui);var di=function(e){function t(){return e.apply(this,arguments)||this}qe(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),t=c({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=c({type:"button"},n);var i=Ue.prototype.createEl.call(this,"button",t,n);return this.createControlTextEl(i),i},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return r.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Ue.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){kt.isEventKey(t,"Space")||kt.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(ii);Ue.registerComponent("Button",di);var ci=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Ct(t),void(!this.player_.tech(!0)||(et||$e)&&n||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(r){var o=function(){return r.focus()};Tt(t)?t.then(o,(function(){})):this.setTimeout(o,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(di);ci.prototype.controlText_="Play Video",Ue.registerComponent("BigPlayButton",ci);var pi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).controlText(n&&n.controlText||i.localize("Close")),i}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){kt.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(di);Ue.registerComponent("CloseButton",pi);var hi=function(e){function t(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,i.on(t,"play",i.handlePlay),i.on(t,"pause",i.handlePause),n.replay&&i.on(t,"ended",i.handleEnded),i}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(di);hi.prototype.controlText_="Play",Ue.registerComponent("PlayToggle",hi);var fi=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=r>0||a>0?r+":":"")+(i=((r||o>=10)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)},gi=fi;function mi(e,t){return void 0===t&&(t=e),gi(e,t)}var yi=function(e){function n(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["timeupdate","ended"],i.updateContent),i.updateTextNode_(),i}qe(n,e);var i=n.prototype;return i.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=E("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},i.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},i.updateTextNode_=function(e){var n=this;void 0===e&&(e=0),e=mi(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(n.contentEl_){var e=n.textNode_;n.textNode_=t.createTextNode(n.formattedTime_),n.textNode_&&(e?n.contentEl_.replaceChild(n.textNode_,e):n.contentEl_.appendChild(n.textNode_))}})))},i.updateContent=function(e){},n}(Ue);yi.prototype.labelText_="Time",yi.prototype.controlText_="Time",Ue.registerComponent("TimeDisplay",yi);var vi=function(e){function t(){return e.apply(this,arguments)||this}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(yi);vi.prototype.labelText_="Current Time",vi.prototype.controlText_="Current Time",Ue.registerComponent("CurrentTimeDisplay",vi);var _i=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"durationchange",i.updateContent),i.on(t,"loadstart",i.updateContent),i.on(t,"loadedmetadata",i.updateContent),i}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(yi);_i.prototype.labelText_="Duration",_i.prototype.controlText_="Duration",Ue.registerComponent("DurationDisplay",_i);var bi=function(e){function t(){return e.apply(this,arguments)||this}return qe(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(Ue);Ue.registerComponent("TimeDivider",bi);var Ei=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"durationchange",i.updateContent),i}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(E("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(yi);Ei.prototype.labelText_="Remaining Time",Ei.prototype.controlText_="Remaining Time",Ue.registerComponent("RemainingTimeDisplay",Ei);var Ti=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}qe(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=E("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Ue);Ue.registerComponent("LiveDisplay",Ti);var Ci=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatus),i}qe(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=E("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(di);Ci.prototype.controlText_="Seek to live, currently playing live",Ue.registerComponent("SeekToLive",Ci);var Si=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},wi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}qe(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),n.className=n.className+" vjs-slider",n=c({tabIndex:0},n),i=c({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),e.prototype.createEl.call(this,t,n,i)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Je||e.preventDefault(),D(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;x(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(Si(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=B(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){kt.isEventKey(t,"Left")||kt.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):kt.isEventKey(t,"Right")||kt.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Ue);Ue.registerComponent("Slider",wi);var Ai=function(e,t){return Si(e/t*100,0,100).toFixed(2)+"%"},ki=function(e){function n(t,n){var i;return(i=e.call(this,t,n)||this).partEls_=[],i.on(t,"progress",i.update),i}qe(n,e);var i=n.prototype;return i.createEl=function(){var n=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=E("span",{className:"vjs-control-text"}),r=E("span",{textContent:this.localize("Loaded")}),o=t.createTextNode(": ");return this.percentageEl_=E("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),n.appendChild(i),i.appendChild(r),i.appendChild(o),i.appendChild(this.percentageEl_),n},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},i.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),i=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),o=t.partEls_,a=Ai(r,i);t.percent_!==a&&(t.el_.style.width=a,T(t.percentageEl_,a),t.percent_=a);for(var s=0;s<n.length;s++){var l=n.start(s),u=n.end(s),d=o[s];d||(d=t.el_.appendChild(E()),o[s]=d),d.dataset.start===l&&d.dataset.end===u||(d.dataset.start=l,d.dataset.end=u,d.style.left=Ai(l,r),d.style.width=Ai(u-l,r))}for(var c=o.length;c>n.length;c--)t.el_.removeChild(o[c-1]);o.length=n.length}))},n}(Ue);Ue.registerComponent("LoadProgressBar",ki);var Pi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ve(ye(Fe(i),i.update),me),i}qe(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var i=N(this.el_),r=O(this.player_.el()),o=e.width*t;if(r&&i){var a=e.left-r.left+o,s=e.width-o+(r.right-e.right),l=i.width/2;a<l?l+=l-a:s<l&&(l=s),l<0?l=0:l>i.width&&(l=i.width),this.el_.style.right="-"+l+"px",this.write(n)}},n.write=function(e){T(this.el_,e)},n.updateTime=function(e,t,n,i){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var o,a=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var s=r.player_.liveTracker.liveWindow(),l=s-t*s;o=(l<1?"":"-")+mi(l,s)}else o=mi(n,a);r.update(e,t,o),i&&i()}))},t}(Ue);Ue.registerComponent("TimeTooltip",Pi);var Ii=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ve(ye(Fe(i),i.update),me),i}qe(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}},t}(Ue);Ii.prototype.options_={children:[]},at||Ke||Ii.prototype.options_.children.push("timeTooltip"),Ue.registerComponent("PlayProgressBar",Ii);var Li=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ve(ye(Fe(i),i.update),me),i}qe(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(function(){n.el_.style.left=e.width*t+"px"}))},t}(Ue);Li.prototype.options_={children:["timeTooltip"]},Ue.registerComponent("MouseTimeDisplay",Li);var Mi=function(e){function n(t,n){var i;return(i=e.call(this,t,n)||this).setEventHandlers_(),i}qe(n,e);var i=n.prototype;return i.setEventHandlers_=function(){this.update_=ye(this,this.update),this.update=ve(this.update_,me),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in t&&"visibilityState"in t&&this.on(t,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(e){t.hidden?this.disableInterval_(e):(this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,me))},i.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(t){var n=this,i=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,r=n.player_.duration();t&&t.isLive()&&(r=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===e&&n.duration_===r||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[mi(e,r),mi(r,r)],"{1} of {2}")),n.currentTime_=e,n.duration_=r),n.bar&&n.bar.update(O(n.el()),n.getProgress())})),i},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},i.handleMouseDown=function(t){H(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},i.handleMouseMove=function(e){if(H(e)){var t,n=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(n>=.99)return void i.seekToLiveEdge();var r=i.seekableStart(),o=i.liveCurrentTime();if((t=r+n*i.liveWindow())>=o&&(t=o),t<=r&&(t=r+.1),t===1/0)return}else(t=n*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},i.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},i.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},i.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ct(this.player_.play()):this.update_()},i.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},i.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},i.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(t){if(kt.isEventKey(t,"Space")||kt.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(kt.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(kt.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(kt(t))){t.preventDefault(),t.stopPropagation();var n=10*(kt.codes[kt(t)]-kt.codes[0])/100;this.player_.currentTime(this.player_.duration()*n)}else kt.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):kt.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in t&&"visibilityState"in t&&this.off(t,"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},n}(wi);Mi.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},at||Ke||Mi.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Ue.registerComponent("SeekBar",Mi);var Ri=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleMouseMove=ve(ye(Fe(i),i.handleMouseMove),me),i.throttledHandleMouseSeek=ve(ye(Fe(i),i.handleMouseSeek),me),i.enable(),i}qe(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(n||i){var r=t.el(),o=N(r),a=B(r,e).x;a=Si(a,0,1),i&&i.update(o,a),n&&n.update(o,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Ue);Ri.prototype.options_={children:["seekBar"]},Ue.registerComponent("ProgressControl",Ri);var Di=function(e){function n(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],i.handlePictureInPictureChange),i.on(t,["disablepictureinpicturechanged","loadedmetadata"],i.handlePictureInPictureEnabledChange),i.disable(),i}qe(n,e);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){t.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},i.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},n}(di);Di.prototype.controlText_="Picture-in-Picture",Ue.registerComponent("PictureInPictureToggle",Di);var xi=function(e){function n(n,i){var r;return(r=e.call(this,n,i)||this).on(n,"fullscreenchange",r.handleFullscreenChange),!1===t[n.fsApi_.fullscreenEnabled]&&r.disable(),r}qe(n,e);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},n}(di);xi.prototype.controlText_="Fullscreen",Ue.registerComponent("FullscreenToggle",xi);var Oi=function(e){function t(){return e.apply(this,arguments)||this}return qe(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Ue);Ue.registerComponent("VolumeLevel",Oi);var Ni=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on("slideractive",i.updateLastVolume_),i.on(t,"volumechange",i.updateARIAAttributes),t.ready((function(){return i.updateARIAAttributes()})),i}qe(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){H(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){H(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(wi);Ni.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Ni.prototype.playerEvent="volumechange",Ue.registerComponent("VolumeBar",Ni);var Bi=function(e){function t(t,n){var i;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||h(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),i=e.call(this,t,n)||this,function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Fe(i),t),i.throttledHandleMouseMove=ve(ye(Fe(i),i.handleMouseMove),me),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}qe(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Ue);Bi.prototype.options_={children:["volumeBar"]},Ue.registerComponent("VolumeControl",Bi);var Ui=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Fe(i),t),i.on(t,["loadstart","volumechange"],i.update),i}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;at&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)A(this.el_,"vjs-vol-"+n);w(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(di);Ui.prototype.controlText_="Mute",Ue.registerComponent("MuteToggle",Ui);var Fi=function(e){function n(t,n){var i;return void 0===n&&(n={}),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||h(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=e.call(this,t,n)||this).on(t,["loadstart"],i.volumePanelState_),i.on(i.muteToggle,"keyup",i.handleKeyPress),i.on(i.volumeControl,"keyup",i.handleVolumeControlKeyUp),i.on("keydown",i.handleKeyPress),i.on("mouseover",i.handleMouseOver),i.on("mouseout",i.handleMouseOut),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}qe(n,e);var i=n.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},i.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(e){kt.isEventKey(e,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(e){this.addClass("vjs-hover"),ue(t,"keyup",ye(this,this.handleKeyPress))},i.handleMouseOut=function(e){this.removeClass("vjs-hover"),de(t,"keyup",ye(this,this.handleKeyPress))},i.handleKeyPress=function(e){kt.isEventKey(e,"Esc")&&this.handleMouseOut()},n}(Ue);Fi.prototype.options_={children:["muteToggle","volumeControl"]},Ue.registerComponent("VolumePanel",Fi);var ji=function(e){function n(t,n){var i;return i=e.call(this,t,n)||this,n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyDown),i.boundHandleBlur_=ye(Fe(i),i.handleBlur),i.boundHandleTapClick_=ye(Fe(i),i.handleTapClick),i}qe(n,e);var i=n.prototype;return i.addEventListenerForItem=function(e){e instanceof Ue&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(e){e instanceof Ue&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},i.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},i.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=E(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),ue(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},i.handleBlur=function(e){var n=e.relatedTarget||t.activeElement;if(!this.children().some((function(e){return e.el()===n}))){var i=this.menuButton_;i&&i.buttonPressed_&&n!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(e){kt.isEventKey(e,"Left")||kt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(kt.isEventKey(e,"Right")||kt.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},i.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},i.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},i.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},n}(Ue);Ue.registerComponent("Menu",ji);var qi=function(e){function n(n,i){var r;void 0===i&&(i={}),(r=e.call(this,n,i)||this).menuButton_=new di(n,i),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var o=di.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+o,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"keydown",r.handleKeyDown),r.on(r.menuButton_,"mouseenter",(function(){r.addClass("vjs-hover"),r.menu.show(),ue(t,"keyup",ye(Fe(r),r.handleMenuKeyUp))})),r.on("mouseleave",r.handleMouseLeave),r.on("keydown",r.handleSubmenuKeyDown),r}qe(n,e);var i=n.prototype;return i.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},i.createMenu=function(){var e=new ji(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=E("li",{className:"vjs-menu-title",innerHTML:Re(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var n=new Ue(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},i.createItems=function(){},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+di.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},i.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},i.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},i.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(e){this.removeClass("vjs-hover"),de(t,"keyup",ye(this,this.handleMenuKeyUp))},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(e){kt.isEventKey(e,"Esc")||kt.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),kt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(kt.isEventKey(e,"Up")||kt.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(e){(kt.isEventKey(e,"Esc")||kt.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},i.handleSubmenuKeyDown=function(e){(kt.isEventKey(e,"Esc")||kt.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),kt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),at&&_())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},n}(Ue);Ue.registerComponent("MenuButton",qi);var Vi=function(e){function t(t,n){var i,r=n.tracks;if((i=e.call(this,t,n)||this).items.length<=1&&i.hide(),!r)return Fe(i);var o=ye(Fe(i),i.update);return r.addEventListener("removetrack",o),r.addEventListener("addtrack",o),i.player_.on("ready",o),i.player_.on("dispose",(function(){r.removeEventListener("removetrack",o),r.removeEventListener("addtrack",o)})),i}return qe(t,e),t}(qi);Ue.registerComponent("TrackButton",Vi);var Hi=["Tab","Esc","Up","Down","Right","Left"],Wi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}qe(t,e);var n=t.prototype;return n.createEl=function(t,n,i){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",c({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),i)},n.handleKeyDown=function(t){Hi.some((function(e){return kt.isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(ii);Ue.registerComponent("MenuItem",Wi);var Gi=function(n){function i(i,r){var o,a=r.track,s=i.textTracks();r.label=a.label||a.language||"Unknown",r.selected="showing"===a.mode,(o=n.call(this,i,r)||this).track=a,o.kinds=(r.kinds||[r.kind||o.track.kind]).filter(Boolean);var l,u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.handleTracksChange.apply(Fe(o),t)},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.handleSelectedLanguageChange.apply(Fe(o),t)};(i.on(["loadstart","texttrackchange"],u),s.addEventListener("change",u),s.addEventListener("selectedlanguagechange",d),o.on("dispose",(function(){i.off(["loadstart","texttrackchange"],u),s.removeEventListener("change",u),s.removeEventListener("selectedlanguagechange",d)})),void 0===s.onchange)&&o.on(["tap","click"],(function(){if("object"!=typeof e.Event)try{l=new e.Event("change")}catch(e){}l||(l=t.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(l)}));return o.handleTracksChange(),o}qe(i,n);var r=i.prototype;return r.handleClick=function(e){var t=this.track,i=this.player_.textTracks();if(n.prototype.handleClick.call(this,e),i)for(var r=0;r<i.length;r++){var o=i[r];-1!==this.kinds.indexOf(o.kind)&&(o===t?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},r.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},r.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,n.prototype.dispose.call(this)},i}(Wi);Ue.registerComponent("TextTrackMenuItem",Gi);var zi=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}qe(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var o=t[i];if(this.options_.kinds.indexOf(o.kind)>-1&&"showing"===o.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var o=t[i];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&"showing"===o.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Gi);Ue.registerComponent("OffTextTrackMenuItem",zi);var Ki=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return qe(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=Gi),this.label_&&(n=this.label_+" off"),e.push(new zi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var o=i[r];if(this.kinds_.indexOf(o.kind)>-1){var a=new t(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+o.kind+"-menu-item"),e.push(a)}}return e},t}(Vi);Ue.registerComponent("TextTrackButton",Ki);var Yi=function(e){function t(t,n){var i,r=n.track,o=n.cue,a=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=o.text,n.selected=o.startTime<=a&&a<o.endTime,(i=e.call(this,t,n)||this).track=r,i.cue=o,r.addEventListener("cuechange",ye(Fe(i),i.update)),i}qe(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},t}(Wi);Ue.registerComponent("ChaptersTrackMenuItem",Yi);var Qi=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Re(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],o=new Yi(this.player_,{track:this.track_,cue:r});e.push(o)}return e},t}(Ki);Qi.prototype.kind_="chapters",Qi.prototype.controlText_="Chapters",Ue.registerComponent("ChaptersButton",Qi);var Xi=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var o=t.textTracks(),a=ye(Fe(r),r.handleTracksChange);return o.addEventListener("change",a),r.on("dispose",(function(){o.removeEventListener("change",a)})),r}qe(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var o=t[i];if(o.kind!==this.kind_&&"showing"===o.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Ki);Xi.prototype.kind_="descriptions",Xi.prototype.controlText_="Descriptions",Ue.registerComponent("DescriptionsButton",Xi);var $i=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Ki);$i.prototype.kind_="subtitles",$i.prototype.controlText_="Subtitles",Ue.registerComponent("SubtitlesButton",$i);var Ji=function(e){function t(t,n){var i;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(i=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return qe(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(Gi);Ue.registerComponent("CaptionSettingsMenuItem",Ji);var Zi=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ji(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Ki);Zi.prototype.kind_="captions",Zi.prototype.controlText_="Captions",Ue.registerComponent("CaptionsButton",Zi);var er=function(e){function t(){return e.apply(this,arguments)||this}return qe(t,e),t.prototype.createEl=function(t,n,i){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),r+="</span>",e.prototype.createEl.call(this,t,c({innerHTML:r},n),i)},t}(Gi);Ue.registerComponent("SubsCapsMenuItem",er);var tr=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(Re(i.label_)),i}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ji(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,er)},t}(Ki);tr.prototype.kinds_=["captions","subtitles"],tr.prototype.controlText_="Subtitles",Ue.registerComponent("SubsCapsButton",tr);var nr=function(e){function t(t,n){var i,r=n.track,o=t.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(i=e.call(this,t,n)||this).track=r,i.addClass("vjs-"+r.kind+"-menu-item");var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(Fe(i),t)};return o.addEventListener("change",a),i.on("dispose",(function(){o.removeEventListener("change",a)})),i}qe(t,e);var n=t.prototype;return n.createEl=function(t,n,i){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),r+="</span>",e.prototype.createEl.call(this,t,c({innerHTML:r},n),i)},n.handleClick=function(t){var n=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var i=0;i<n.length;i++){var r=n[i];r.enabled=r===this.track}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Wi);Ue.registerComponent("AudioTrackMenuItem",nr);var ir=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new nr(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},t}(Vi);ir.prototype.controlText_="Audio Track",Ue.registerComponent("AudioTrackButton",ir);var rr=function(e){function t(t,n){var i,r=n.rate,o=parseFloat(r,10);return n.label=r,n.selected=1===o,n.selectable=!0,n.multiSelectable=!1,(i=e.call(this,t,n)||this).label=r,i.rate=o,i.on(t,"ratechange",i.update),i}qe(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Wi);rr.prototype.contentElType="button",Ue.registerComponent("PlaybackRateMenuItem",rr);var or=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateVisibility(),i.updateLabel(),i.on(t,"loadstart",i.updateVisibility),i.on(t,"ratechange",i.updateLabel),i}qe(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=E("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var e=new ji(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new rr(this.player(),{rate:t[n]+"x"}));return e},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),i=n[0],r=0;r<n.length;r++)if(n[r]>t){i=n[r];break}this.player().playbackRate(i)},n.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(qi);or.prototype.controlText_="Playback Rate",Ue.registerComponent("PlaybackRateMenuButton",or);var ar=function(e){function t(){return e.apply(this,arguments)||this}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Ue);Ue.registerComponent("Spacer",ar);var sr=function(e){function t(){return e.apply(this,arguments)||this}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(ar);Ue.registerComponent("CustomControlSpacer",sr);var lr=function(e){function t(){return e.apply(this,arguments)||this}return qe(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Ue);lr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in t&&lr.prototype.options_.children.splice(lr.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Ue.registerComponent("ControlBar",lr);var ur=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"error",i.open),i}qe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Pt);ur.prototype.options_=s({},Pt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ue.registerComponent("ErrorDisplay",ur);var dr="vjs-text-track-settings",cr=["#000","Black"],pr=["#00F","Blue"],hr=["#0FF","Cyan"],fr=["#0F0","Green"],gr=["#F0F","Magenta"],mr=["#F00","Red"],yr=["#FFF","White"],vr=["#FF0","Yellow"],_r=["1","Opaque"],br=["0.5","Semi-Transparent"],Er=["0","Transparent"],Tr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[cr,yr,mr,fr,pr,vr,gr,hr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[_r,br,Er]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[yr,cr,mr,fr,pr,vr,gr,hr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[_r,br]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Er,br,_r]}};function Cr(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}Tr.windowColor.options=Tr.backgroundColor.options;var Sr=function(t){function n(e,n){var i;return n.temporary=!1,(i=t.call(this,e,n)||this).updateDisplay=ye(Fe(i),i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=E("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),d(Tr,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}qe(n,t);var i=n.prototype;return i.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},i.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=Tr[e],o=r.id.replace("%s",this.id_),a=[t,o].join(" ").trim();return["<"+n+' id="'+o+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+a+'">'].concat(r.options.map((function(e){var t=o+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+a+" "+t+'">',i.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},i.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return E("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return E("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var e=this.localize("restore all settings to the default values");return E("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var e,t,n,i=this;return t=function(e,t,n){var r,o,a=(r=i.$(t.selector),o=t.parser,Cr(r.options[r.options.selectedIndex].value,o));return void 0!==a&&(e[n]=a),e},void 0===(n={})&&(n=0),u(e=Tr).reduce((function(n,i){return t(n,e[i],i)}),n)},i.setValues=function(e){var t=this;d(Tr,(function(n,i){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(Cr(e.options[i].value,n)===t){e.selectedIndex=i;break}}(t.$(n.selector),e[i],n.parser)}))},i.setDefaults=function(){var e=this;d(Tr,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},i.restoreSettings=function(){var t;try{t=JSON.parse(e.localStorage.getItem(dr))}catch(e){r.warn(e)}t&&this.setValues(t)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?e.localStorage.setItem(dr,JSON.stringify(t)):e.localStorage.removeItem(dr)}catch(e){r.warn(e)}}},i.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},n}(Pt);Ue.registerComponent("TextTrackSettings",Sr);var wr=function(t){function n(n,i){var r,o=i.ResizeObserver||e.ResizeObserver;null===i.ResizeObserver&&(o=!1);var a=De({createEl:!o,reportTouchActivity:!1},i);return(r=t.call(this,n,a)||this).ResizeObserver=i.ResizeObserver||e.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=function(t,n,i,r){var o;void 0===r&&(r=e);var a=function(){var e=this,a=arguments,s=function(){o=null,s=null,i||t.apply(e,a)};!o&&i&&t.apply(e,a),r.clearTimeout(o),o=r.setTimeout(s,n)};return a.cancel=function(){r.clearTimeout(o),o=null},a}((function(){r.resizeHandler()}),100,!1,Fe(r)),o?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(n.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){de(this,"resize",e),de(this,"unload",t),t=null};ue(r.el_.contentWindow,"unload",t),ue(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}qe(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},n}(Ue);Ue.registerComponent("ResizeManager",wr);var Ar={trackingThreshold:30,liveTolerance:15},kr=function(n){function i(e,i){var r,o=De(Ar,i,{createEl:!1});return(r=n.call(this,e,o)||this).reset_(),r.on(r.player_,"durationchange",r.handleDurationchange),et&&"hidden"in t&&"visibilityState"in t&&r.on(t,"visibilitychange",r.handleVisibilityChange),r}qe(i,n);var r=i.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(t.hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var n=Number(e.performance.now().toFixed(4)),i=-1===this.lastTime_?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+i;var r=this.liveCurrentTime(),o=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-o)>this.options_.liveTolerance;this.timeupdateSeen_&&r!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,me),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},r.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&e>2,this.skipNextSeeked_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},r.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},r.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},r.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return"number"==typeof this.trackingInterval_},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(t,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),n.prototype.dispose.call(this)},i}(Ue);Ue.registerComponent("LiveTracker",kr);var Pr,Ir=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var o=0;o<n.length;o++){var a=n[o].src;a&&-1===i.indexOf(a)&&i.push(a)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},Lr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(n){var i=t.createElement(this.nodeName.toLowerCase());i.innerHTML=n;for(var r=t.createDocumentFragment();i.childNodes.length;)r.appendChild(i.childNodes[0]);return this.innerText="",e.Element.prototype.appendChild.call(this,r),this.innerHTML}}),Mr=function(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},Rr=function(t){var n=t.el();if(!n.resetSourceWatch_){var i={},r=function(t){return Mr([t.el(),e.HTMLMediaElement.prototype,e.Element.prototype,Lr],"innerHTML")}(t),o=function(e){return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=e.apply(n,r);return Ir(t),a}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){n[e]&&(i[e]=n[e],n[e]=o(i[e]))})),Object.defineProperty(n,"innerHTML",De(r,{set:o(r.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(i).forEach((function(e){n[e]=i[e]})),Object.defineProperty(n,"innerHTML",r)},t.one("sourceset",n.resetSourceWatch_)}},Dr=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Wt(e.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return e.Element.prototype.setAttribute.call(this,"src",t),t}}),xr=function(t){if(t.featuresSourceset){var n=t.el();if(!n.resetSourceset_){var i=function(t){return Mr([t.el(),e.HTMLMediaElement.prototype,Dr],"src")}(t),r=n.setAttribute,o=n.load;Object.defineProperty(n,"src",De(i,{set:function(e){var r=i.set.call(n,e);return t.triggerSourceset(n.src),r}})),n.setAttribute=function(e,i){var o=r.call(n,e,i);return/src/i.test(e)&&t.triggerSourceset(n.src),o},n.load=function(){var e=o.call(n);return Ir(t)||(t.triggerSourceset(""),Rr(t)),e},n.currentSrc?t.triggerSourceset(n.currentSrc):Ir(t)||Rr(t),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=o,n.setAttribute=r,Object.defineProperty(n,"src",i),n.resetSourceWatch_&&n.resetSourceWatch_()}}}},Or=function(e,t,n,i){void 0===i&&(i=!0);var r=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})},o={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return i&&(o.set=r),Object.defineProperty(e,t,o)},Nr=function(n){function i(e,t){var i;i=n.call(this,e,t)||this;var o=e.source,a=!1;if(o&&(i.el_.currentSrc!==o.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(o):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var s=i.el_.childNodes,l=s.length,u=[];l--;){var d=s[l];"track"===d.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(d),i.remoteTextTracks().addTrack(d.track),i.textTracks().addTrack(d.track),a||i.el_.hasAttribute("crossorigin")||!zt(d.src)||(a=!0)):u.push(d))}for(var c=0;c<u.length;c++)i.el_.removeChild(u[c])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&a&&r.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(it||ot||Qe)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}qe(i,n);var o=i.prototype;return o.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),i.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},o.setupSourcesetHandling_=function(){xr(this)},o.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var i=t[n];"metadata"===i.kind&&e.push({track:i,storedMode:i.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var i=function n(){for(var i=0;i<e.length;i++){var r=e[i];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",i),t.addEventListener("change",i)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",i)}))},o.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach((function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},o.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},o.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},o.proxyNativeTracksForType_=function(e){var t=this,n=ln[e],i=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&i&&i.addEventListener){var o={change:function(n){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===e&&t[un.remoteText.getterName]().trigger(i)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},a=function(){for(var e=[],t=0;t<r.length;t++){for(var n=!1,o=0;o<i.length;o++)if(i[o]===r[t]){n=!0;break}n||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=o,Object.keys(o).forEach((function(e){var n=o[e];i.addEventListener(e,n),t.on("dispose",(function(t){return i.removeEventListener(e,n)}))})),this.on("loadstart",a),this.on("dispose",(function(e){return t.off("loadstart",a)}))}},o.proxyNativeTracks_=function(){var e=this;ln.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},o.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),i.disposeMediaElement(e),e=n}else{e=t.createElement("video");var r=De({},this.options_.tag&&I(this.options_.tag));it&&!0===this.options_.nativeControlsForTouch||delete r.controls,P(e,c(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&M(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var o=["loop","muted","playsinline","autoplay"],a=0;a<o.length;a++){var s=o[a],l=this.options_[s];void 0!==l&&(l?M(e,s,s):R(e,s),e[s]=l)}return e},o.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}},o.setScrubbing=function(e){this.isScrubbing_=e},o.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&st?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){r(e,"Video is not ready. (Video.js)")}},o.duration=function(){var e=this;if(this.el_.duration===1/0&&Ke&&Je&&0===this.el_.currentTime){return this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN}return this.el_.duration||NaN},o.width=function(){return this.el_.offsetWidth},o.height=function(){return this.el_.offsetHeight},o.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},o.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=e.navigator&&e.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},o.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Ct(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},o.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},o.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},o.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},o.reset=function(){i.resetMediaElement(this.el_)},o.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},o.setControls=function(e){this.el_.controls=!!e},o.addTextTrack=function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):n.prototype.addTextTrack.call(this,e,t,i)},o.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,e);var i=t.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i},o.addRemoteTextTrack=function(e,t){var i=n.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},o.removeRemoteTextTrack=function(e){if(n.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])},o.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),e.performance&&"function"==typeof e.performance.now?t.creationTime=e.performance.now():e.performance&&e.performance.timing&&"number"==typeof e.performance.timing.navigationStart&&(t.creationTime=e.Date.now()-e.performance.timing.navigationStart),t},i}(qn);Or(Nr,"TEST_VID",(function(){if(y()){var e=t.createElement("video"),n=t.createElement("track");return n.kind="captions",n.srclang="en",n.label="English",e.appendChild(n),e}})),Nr.isSupported=function(){try{Nr.TEST_VID.volume=.5}catch(e){return!1}return!(!Nr.TEST_VID||!Nr.TEST_VID.canPlayType)},Nr.canPlayType=function(e){return Nr.TEST_VID.canPlayType(e)},Nr.canPlaySource=function(e,t){return Nr.canPlayType(e.type)},Nr.canControlVolume=function(){try{var e=Nr.TEST_VID.volume;return Nr.TEST_VID.volume=e/2+.1,e!==Nr.TEST_VID.volume}catch(e){return!1}},Nr.canMuteVolume=function(){try{var e=Nr.TEST_VID.muted;return Nr.TEST_VID.muted=!e,Nr.TEST_VID.muted?M(Nr.TEST_VID,"muted","muted"):R(Nr.TEST_VID,"muted"),e!==Nr.TEST_VID.muted}catch(e){return!1}},Nr.canControlPlaybackRate=function(){if(Ke&&Je&&Ze<58)return!1;try{var e=Nr.TEST_VID.playbackRate;return Nr.TEST_VID.playbackRate=e/2+.1,e!==Nr.TEST_VID.playbackRate}catch(e){return!1}},Nr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(t.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Nr.supportsNativeTextTracks=function(){return st||at&&Je},Nr.supportsNativeVideoTracks=function(){return!(!Nr.TEST_VID||!Nr.TEST_VID.videoTracks)},Nr.supportsNativeAudioTracks=function(){return!(!Nr.TEST_VID||!Nr.TEST_VID.audioTracks)},Nr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],n=e[1];Or(Nr.prototype,t,(function(){return Nr[n]()}),!0)})),Nr.prototype.movingMediaElementInDOM=!at,Nr.prototype.featuresFullscreenResize=!0,Nr.prototype.featuresProgressEvents=!0,Nr.prototype.featuresTimeupdateEvents=!0,Nr.patchCanPlayType=function(){Ye>=4&&!Xe&&!Je&&(Pr=Nr.TEST_VID&&Nr.TEST_VID.constructor.prototype.canPlayType,Nr.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Pr.call(this,e)})},Nr.unpatchCanPlayType=function(){var e=Nr.TEST_VID.constructor.prototype.canPlayType;return Pr&&(Nr.TEST_VID.constructor.prototype.canPlayType=Pr),e},Nr.patchCanPlayType(),Nr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Nr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Nr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Nr.prototype["set"+Re(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Nr.prototype[e]=function(){if(this.el_)return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){Nr.prototype["set"+Re(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Nr.prototype[e]=function(){return this.el_[e]()}})),qn.withSourceHandlers(Nr),Nr.nativeSourceHandler={},Nr.nativeSourceHandler.canPlayType=function(e){try{return Nr.TEST_VID.canPlayType(e)}catch(e){return""}},Nr.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Nr.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Gt(e.src);return Nr.nativeSourceHandler.canPlayType("video/"+n)}return""},Nr.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Nr.nativeSourceHandler.dispose=function(){},Nr.registerSourceHandler(Nr.nativeSourceHandler),qn.registerTech("Html5",Nr);var Br=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ur={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Fr=["tiny","xsmall","small","medium","large","xlarge","huge"],jr={};Fr.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;jr[e]="vjs-layout-"+t}));var qr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Vr=function(i){function a(e,r,s){var l;if(e.id=e.id||r.id||"vjs_video_"+ne(),(r=c(a.getTagSettings(e),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof e.closest){var u=e.closest("[lang]");u&&u.getAttribute&&(r.language=u.getAttribute("lang"))}else for(var d=e;d&&1===d.nodeType;){if(I(d).hasOwnProperty("lang")){r.language=d.getAttribute("lang");break}d=d.parentNode}if((l=i.call(this,null,r,s)||this).boundDocumentFullscreenChange_=ye(Fe(l),l.documentFullscreenChange_),l.boundFullWindowOnEscKey_=ye(Fe(l),l.fullWindowOnEscKey),l.isFullscreen_=!1,l.log=o(l.id_),l.fsApi_=ft,l.isPosterFromTech_=!1,l.queuedCallbacks_=[],l.isReady_=!1,l.hasStarted_=!1,l.userActive_=!1,l.debugEnabled_=!1,!l.options_||!l.options_.techOrder||!l.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(l.tag=e,l.tagAttributes=e&&I(e),l.language(l.options_.language),r.languages){var p={};Object.getOwnPropertyNames(r.languages).forEach((function(e){p[e.toLowerCase()]=r.languages[e]})),l.languages_=p}else l.languages_=a.prototype.options_.languages;l.resetCache_(),l.poster_=r.poster||"",l.controls_=!!r.controls,e.controls=!1,e.removeAttribute("controls"),l.changingSrc_=!1,l.playCallbacks_=[],l.playTerminatedQueue_=[],e.hasAttribute("autoplay")?l.autoplay(!0):l.autoplay(l.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach((function(e){if("function"!=typeof l[e])throw new Error('plugin "'+e+'" does not exist')})),l.scrubbing_=!1,l.el_=l.createEl(),Pe(Fe(l),{eventBusKey:"el_"}),l.fsApi_.requestFullscreen&&(ue(t,l.fsApi_.fullscreenchange,l.boundDocumentFullscreenChange_),l.on(l.fsApi_.fullscreenchange,l.boundDocumentFullscreenChange_)),l.fluid_&&l.on("playerreset",l.updateStyleEl_);var h=De(l.options_);r.plugins&&Object.keys(r.plugins).forEach((function(e){l[e](r.plugins[e])})),r.debug&&l.debug(!0),l.options_.playerOptions=h,l.middleware_=[],l.initChildren(),l.isAudio("audio"===e.nodeName.toLowerCase()),l.controls()?l.addClass("vjs-controls-enabled"):l.addClass("vjs-controls-disabled"),l.el_.setAttribute("role","region"),l.isAudio()?l.el_.setAttribute("aria-label",l.localize("Audio Player")):l.el_.setAttribute("aria-label",l.localize("Video Player")),l.isAudio()&&l.addClass("vjs-audio"),l.flexNotSupported_()&&l.addClass("vjs-no-flex"),it&&l.addClass("vjs-touch-enabled"),at||l.addClass("vjs-workinghover"),a.players[l.id_]=Fe(l);var f=n.split(".")[0];return l.addClass("vjs-v"+f),l.userActive(!0),l.reportUserActivity(),l.one("play",l.listenForUserActivity_),l.on("stageclick",l.handleStageClick_),l.on("keydown",l.handleKeyDown),l.breakpoints(l.options_.breakpoints),l.responsive(l.options_.responsive),l}qe(a,i);var s=a.prototype;return s.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),de(t,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),de(t,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),a.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function(e){Hn[e.id()]=null}(this),dn.names.forEach((function(t){var n=dn[t],i=e[n.getterName]();i&&i.off&&i.off()})),i.prototype.dispose.call(this)},s.createEl=function(){var n,r=this.tag,o=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase();o?n=this.el_=r.parentNode:a||(n=this.el_=i.prototype.createEl.call(this,"div"));var s=I(r);if(a){for(n=this.el_=r,r=this.tag=t.createElement("video");n.children.length;)r.appendChild(n.firstChild);S(n,"video-js")||w(n,"video-js"),n.appendChild(r),o=this.playerElIngest_=n,Object.keys(n).forEach((function(e){try{r[e]=n[e]}catch(e){}}))}if(r.setAttribute("tabindex","-1"),s.tabindex="-1",(et||Je&&nt)&&(r.setAttribute("role","application"),s.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(e){a&&"class"===e||n.setAttribute(e,s[e]),a&&r.setAttribute(e,s[e])})),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=n.player=this,this.addClass("vjs-paused"),!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Z("vjs-styles-dimensions");var l=G(".vjs-styles-defaults"),u=G("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=r.getElementsByTagName("a"),c=0;c<d.length;c++){var p=d.item(c);w(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!o&&r.parentNode.insertBefore(n,r),C(r,n),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_=n,n},s.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):r.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},s.width=function(e){return this.dimension("width",e)},s.height=function(e){return this.dimension("height",e)},s.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?r.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},s.fluid=function(e){if(void 0===e)return!!this.fluid_;var t,n;this.fluid_=!!e,be(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),be(t=function(){this.on("playerreset",this.updateStyleEl_)})?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},s.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},s.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},s.updateStyleEl_=function(){if(!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){var t,n,i,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),o=r[1]/r[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/o:this.videoWidth()||300,n=void 0!==this.height_?this.height_:t*o,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),ee(this.styleEl_,"\n      ."+i+" {\n        width: "+t+"px;\n        height: "+n+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*o+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(a>=0&&(l.width=a),s>=0&&(l.height=s))}},s.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=Re(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(qn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var o={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};dn.names.forEach((function(e){var t=dn[e];o[t.getterName]=n[t.privateName]})),c(o,this.options_[i]),c(o,this.options_[r]),c(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var a=qn.getTech(e);if(!a)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new a(o),this.tech_.ready(ye(this,this.handleTechReady_),!0),At(this.textTracksJson_||[],this.tech_),Br.forEach((function(e){n.on(n.tech_,e,n["handleTech"+Re(e)+"_"])})),Object.keys(Ur).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Ur[e]+"_"].bind(n),event:t}):n["handleTech"+Ur[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||C(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},s.unloadTech_=function(){var e=this;dn.names.forEach((function(t){var n=dn[t];e[n.privateName]=e[n.getterName]()})),this.textTracksJson_=wt(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},s.tech=function(e){return void 0===e&&r.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},s.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},s.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},s.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},s.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},s.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,i=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var i=t.play();if(Tt(i))return i.catch(n)};if("any"===e&&!0!==this.muted()?Tt(n=this.play())&&(n=n.catch(i)):n="muted"===e&&!0!==this.muted()?i():this.play(),Tt(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(n){t.trigger({type:"autoplay-failure",autoplay:e})}))}},s.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var o=i[r];if(o.type&&o.src&&o.src===t)return o.type}return Zn(t)}(this,t)),this.cache_.source=De({},e,{src:t,type:n});for(var i=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),r=[],o=this.$$("source"),a=[],s=0;s<o.length;s++){var l=I(o[s]);r.push(l),l.src&&l.src===t&&a.push(l.src)}a.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},s.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(n=function(){}),n(r),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},s.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},s.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},s.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},s.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},s.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},s.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},s.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},s.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},s.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},s.handleTechFirstPlay_=function(){this.options_.starttime&&(r.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},s.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},s.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},s.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},s.handleTechClick_=function(e){H(e)&&this.controls_&&(this.paused()?Ct(this.play()):this.pause())},s.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},s.handleTechTap_=function(){this.userActive(!this.userActive())},s.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},s.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},s.handleTechTouchEnd_=function(e){e.preventDefault()},s.handleStageClick_=function(){this.reportUserActivity()},s.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},s.documentFullscreenChange_=function(e){var n=e.target.player;if(!n||n===this){var i=this.el(),r=t[this.fsApi_.fullscreenElement]===i;!r&&i.matches?r=i.matches(":"+this.fsApi_.fullscreen):!r&&i.msMatchesSelector&&(r=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}},s.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},s.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},s.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},s.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},s.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},s.handleTechError_=function(){var e=this.tech_.error();this.error(e)},s.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},s.getCache=function(){return this.cache_},s.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},s.techCall_=function(e,t){this.ready((function(){if(e in Yn)return function(e,t,n,i){return t[n](e.reduce(Xn(n),i))}(this.middleware_,this.tech_,e,t);if(e in Qn)return zn(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw r(e),e}}),!0)},s.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Kn)return function(e,t,n){return e.reduceRight(Xn(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Qn)return zn(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw r("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw r("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw r(t),t}}},s.play=function(){var t=this,n=this.options_.Promise||e.Promise;return n?new n((function(e){t.play_(e)})):this.play_()},s.play_=function(e){var t=this;void 0===e&&(e=Ct),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!st&&!at||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},s.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},s.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},s.pause=function(){this.techCall_("pause")},s.paused=function(){return!1!==this.techGet_("paused")},s.played=function(){return this.techGet_("played")||ct(0,0)},s.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},s.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},s.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},s.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},s.remainingTime=function(){return this.duration()-this.currentTime()},s.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},s.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=ct(0,0)),e},s.bufferedPercent=function(){return pt(this.buffered(),this.duration())},s.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},s.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},s.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},s.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},s.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},s.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},s.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},s.requestFullscreen=function(t){var n=this.options_.Promise||e.Promise;if(n){var i=this;return new n((function(e,n){function r(){i.off("fullscreenerror",a),i.off("fullscreenchange",o)}function o(){r(),e()}function a(e,t){r(),n(t)}i.one("fullscreenchange",o),i.one("fullscreenerror",a);var s=i.requestFullscreenHelper_(t);if(s)return s.then(r,r),s}))}return this.requestFullscreenHelper_()},s.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),i}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},s.exitFullscreen=function(){var t=this.options_.Promise||e.Promise;if(t){var n=this;return new t((function(e,t){function i(){n.off("fullscreenerror",o),n.off("fullscreenchange",r)}function r(){i(),e()}function o(e,n){i(),t(n)}n.one("fullscreenchange",r),n.one("fullscreenerror",o);var a=n.exitFullscreenHelper_();if(a)return a.then(i,i),a}))}return this.exitFullscreenHelper_()},s.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var n=t[this.fsApi_.exitFullscreen]();return n&&n.then((function(){return e.isFullscreen(!1)})),n}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},s.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=t.documentElement.style.overflow,ue(t,"keydown",this.boundFullWindowOnEscKey_),t.documentElement.style.overflow="hidden",w(t.body,"vjs-full-window"),this.trigger("enterFullWindow")},s.fullWindowOnEscKey=function(e){kt.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},s.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,de(t,"keydown",this.boundFullWindowOnEscKey_),t.documentElement.style.overflow=this.docOrigOverflow,A(t.body,"vjs-full-window"),this.trigger("exitFullWindow")},s.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},s.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},s.requestPictureInPicture=function(){if("pictureInPictureEnabled"in t&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},s.exitPictureInPicture=function(){if("pictureInPictureEnabled"in t)return t.exitPictureInPicture()},s.handleKeyDown=function(e){var t=this.options_.userActions;if(t&&t.hotkeys){(function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},s.handleHotkeys=function(e){var n=this.options_.userActions?this.options_.userActions.hotkeys:{},i=n.fullscreenKey,r=void 0===i?function(e){return kt.isEventKey(e,"f")}:i,o=n.muteKey,a=void 0===o?function(e){return kt.isEventKey(e,"m")}:o,s=n.playPauseKey,l=void 0===s?function(e){return kt.isEventKey(e,"k")||kt.isEventKey(e,"Space")}:s;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();var u=Ue.getComponent("FullscreenToggle");!1!==t[this.fsApi_.fullscreenEnabled]&&u.prototype.handleClick.call(this,e)}else if(a.call(this,e)){e.preventDefault(),e.stopPropagation(),Ue.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(l.call(this,e)){e.preventDefault(),e.stopPropagation(),Ue.getComponent("PlayToggle").prototype.handleClick.call(this,e)}},s.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var o=i[n],a=qn.getTech(o);if(a||(a=Ue.getComponent(o)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else r.error('The "'+o+'" tech is undefined. Skipped browser support check for that tech.')}return""},s.selectSource=function(e){var t,n=this,i=this.options_.techOrder.map((function(e){return[e,qn.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(r.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),o=function(e,t,n){var i;return e.some((function(e){return t.some((function(t){if(i=n(e,t))return!0}))})),i},a=function(e,t){var i=e[0];if(e[1].canPlaySource(t,n.options_[i.toLowerCase()]))return{source:t,tech:i}};return(this.options_.sourceOrder?o(e,i,(t=a,function(e,n){return t(n,e)})):o(i,e,a))||!1},s.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var n=ei(e);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),Gn(this,n[0],(function(e,i){var r,o;if(t.middleware_=i,t.cache_.sources=n,t.updateSourceCaches_(e),t.src_(e))return n.length>1?t.src(n.slice(1)):(t.changingSrc_=!1,t.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void t.triggerReady());r=i,o=t.tech_,r.forEach((function(e){return e.setTech&&e.setTech(o)}))}))):this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},s.src_=function(e){var t,n,i=this,r=this.selectSource([e]);return!r||(t=r.tech,n=this.techName_,Re(t)!==Re(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){i.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},s.load=function(){this.techCall_("load")},s.reset=function(){var t=this,n=this.options_.Promise||e.Promise;this.paused()||!n?this.doReset_():Ct(this.play().then((function(){return t.doReset_()})))},s.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),be(this)&&this.trigger("playerreset")},s.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},s.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},s.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},s.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},s.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},s.currentSource=function(){return this.cache_.source||{}},s.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},s.currentType=function(){return this.currentSource()&&this.currentSource().type||""},s.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},s.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},s.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},s.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},s.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},s.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},s.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},s.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},s.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&4===e.code){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new _t(e),this.addClass("vjs-error"),r.error("(CODE:"+this.error_.code+" "+_t.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},s.reportUserActivity=function(e){this.userActivity_=!0},s.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},s.listenForUserActivity_=function(){var e,t,n,i=ye(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",(function(){i(),this.clearInterval(e),e=this.setInterval(i,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);var o,a=this.getChild("controlBar");!a||at||Ke||(a.on("mouseenter",(function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0})),a.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},s.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},s.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},s.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},s.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},s.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},s.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},s.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},s.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},s.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},s.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},s.languages=function(){return De(a.prototype.options_.languages,this.languages_)},s.toJSON=function(){var e=De(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=De(i)).player=void 0,e.tracks[n]=i}return e},s.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new Pt(this,t);return this.addChild(i),i.on("dispose",(function(){n.removeChild(i)})),i.open(),i},s.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Fr.length;n++){var i=Fr[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(jr[e]),this.addClass(jr[i]),this.breakpoint_=i;break}}},s.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},s.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=c({},qr,e),this.updateCurrentBreakpoint_()),c(this.breakpoints_)},s.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},s.currentBreakpoint=function(){return this.breakpoint_},s.currentBreakpointClass=function(){return jr[this.breakpoint_]||""},s.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=De(e);var i=this.cache_.media,r=i.artwork,o=i.poster,a=i.src,s=i.textTracks;!r&&o&&(this.cache_.media.artwork=[{src:o,type:Zn(o)}]),a&&this.src(a),o&&this.poster(o),Array.isArray(s)&&s.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},s.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Zn(t.poster)}]),t}return De(this.cache_.media)},a.getTagSettings=function(e){var t={sources:[],tracks:[]},n=I(e),i=n["data-setup"];if(S(e,"vjs-fill")&&(n.fill=!0),S(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var o=Et(i||"{}"),a=o[0],s=o[1];a&&r.error(a),c(n,s)}if(c(t,n),e.hasChildNodes())for(var l=e.childNodes,u=0,d=l.length;u<d;u++){var p=l[u],h=p.nodeName.toLowerCase();"source"===h?t.sources.push(I(p)):"track"===h&&t.tracks.push(I(p))}return t},s.flexNotSupported_=function(){var e=t.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},s.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},a}(Ue);dn.names.forEach((function(e){var t=dn[e];Vr.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Vr.prototype.crossorigin=Vr.prototype.crossOrigin,Vr.players={};var Hr=e.navigator;Vr.prototype.options_={techOrder:qn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Hr&&(Hr.languages&&Hr.languages[0]||Hr.userLanguage||Hr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Vr.prototype[e]=function(){return this.techGet_(e)}})),Br.forEach((function(e){Vr.prototype["handleTech"+Re(e)+"_"]=function(){return this.trigger(e)}})),Ue.registerComponent("Player",Vr);var Wr=a((function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,i)}e.exports=t}));var Gr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}},zr=a((function(e){function t(n,i,r){return Gr()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Wr(r,n.prototype),r},t.apply(null,arguments)}e.exports=t})),Kr="plugin",Yr={},Qr=function(e){return Yr.hasOwnProperty(e)},Xr=function(e){return Qr(e)?Yr[e]:void 0},$r=function(e,t){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[t]=!0},Jr=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},Zr=function(e,t){return t.prototype.name=e,function(){Jr(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=zr(t,[this].concat(i));return this[e]=function(){return o},Jr(this,o.getEventHash()),o}},eo=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Pe(this),delete this.trigger,Le(this,this.constructor.defaultState),$r(t,this.name),this.dispose=ye(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),ce(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t.activePlugins_[e]=!1,this.player=this.state=null,t[e]=Zr(e,Yr[e])},e.isBasic=function(t){var n="string"==typeof t?Xr(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Qr(t))r.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Vr.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return Yr[t]=n,t!==Kr&&(e.isBasic(n)?Vr.prototype[t]=function(e,t){var n=function(){Jr(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return $r(this,e),Jr(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Vr.prototype[t]=Zr(t,n)),n},e.deregisterPlugin=function(e){if(e===Kr)throw new Error("Cannot de-register base plugin.");Qr(e)&&(delete Yr[e],delete Vr.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(Yr)),e.forEach((function(e){var n=Xr(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=Xr(e);return t&&t.VERSION||""},e}();eo.getPlugin=Xr,eo.BASE_PLUGIN_NAME=Kr,eo.registerPlugin(Kr,eo),Vr.prototype.usingPlugin=function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]},Vr.prototype.hasPlugin=function(e){return!!Qr(e)};var to=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)},no=function(e){return 0===e.indexOf("#")?e.slice(1):e};function io(e,t,n){var i=io.getPlayer(e);if(i)return t&&r.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var o="string"==typeof e?G("#"+no(e)):e;if(!v(o))throw new TypeError("The element or ID supplied is not valid. (videojs)");o.ownerDocument.defaultView&&o.ownerDocument.body.contains(o)||r.warn("The element supplied is not included in the DOM"),t=t||{},io.hooks("beforesetup").forEach((function(e){var n=e(o,De(t));p(n)&&!Array.isArray(n)?t=De(t,n):r.error("please return an object in beforesetup hooks")}));var a=Ue.getComponent("Player");return i=new a(o,t,n),io.hooks("setup").forEach((function(e){return e(i)})),i}if(io.hooks_={},io.hooks=function(e,t){return io.hooks_[e]=io.hooks_[e]||[],t&&(io.hooks_[e]=io.hooks_[e].concat(t)),io.hooks_[e]},io.hook=function(e,t){io.hooks(e,t)},io.hookOnce=function(e,t){io.hooks(e,[].concat(t).map((function(t){return function n(){return io.removeHook(e,n),t.apply(void 0,arguments)}})))},io.removeHook=function(e,t){var n=io.hooks(e).indexOf(t);return!(n<=-1)&&(io.hooks_[e]=io.hooks_[e].slice(),io.hooks_[e].splice(n,1),!0)},!0!==e.VIDEOJS_NO_DYNAMIC_STYLE&&y()){var ro=G(".vjs-styles-defaults");if(!ro){ro=Z("vjs-styles-defaults");var oo=G("head");oo&&oo.insertBefore(ro,oo.firstChild),ee(ro,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}X(1,io),io.VERSION=n,io.options=Vr.prototype.options_,io.getPlayers=function(){return Vr.players},io.getPlayer=function(e){var t,n=Vr.players;if("string"==typeof e){var i=no(e),r=n[i];if(r)return r;t=G("#"+i)}else t=e;if(v(t)){var o=t,a=o.player,s=o.playerId;if(a||n[s])return a||n[s]}},io.getAllPlayers=function(){return Object.keys(Vr.players).map((function(e){return Vr.players[e]})).filter(Boolean)},io.players=Vr.players,io.getComponent=Ue.getComponent,io.registerComponent=function(e,t){qn.isTech(t)&&r.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Ue.registerComponent.call(Ue,e,t)},io.getTech=qn.getTech,io.registerTech=qn.registerTech,io.use=function(e,t){Vn[e]=Vn[e]||[],Vn[e].push(t)},Object.defineProperty(io,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(io.middleware,"TERMINATOR",{value:Wn,writeable:!1,enumerable:!0}),io.browser=lt,io.TOUCH_ENABLED=it,io.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},i={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),to(n,e),e&&(n.super_=e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},io.mergeOptions=De,io.bind=ye,io.registerPlugin=eo.registerPlugin,io.deregisterPlugin=eo.deregisterPlugin,io.plugin=function(e,t){return r.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),eo.registerPlugin(e,t)},io.getPlugins=eo.getPlugins,io.getPlugin=eo.getPlugin,io.getPluginVersion=eo.getPluginVersion,io.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),io.options.languages=De(io.options.languages,((n={})[e]=t,n)),io.options.languages[e]},io.log=r,io.createLogger=o,io.createTimeRange=io.createTimeRanges=ct,io.formatTime=mi,io.setFormatTime=function(e){gi=e},io.resetFormatTime=function(){gi=fi},io.parseUrl=Ht,io.isCrossOrigin=zt,io.EventTarget=_e,io.on=ue,io.one=pe,io.off=de,io.trigger=ce,io.xhr=Xt,io.TextTrack=rn,io.AudioTrack=on,io.VideoTrack=an,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){io[e]=function(){return r.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),K[e].apply(null,arguments)}})),io.computedStyle=f,io.dom=K,io.url=Kt,io.defineLazyProperty=Or;var ao=a((function(e,t){!function(t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=i.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var d=s.path,c=d.substring(0,d.lastIndexOf("/")+1)+o.path;u.path=a.normalizePath(c)}else u.path=s.path,o.params||(u.params=s.params,o.query||(u.query=s.query));return null===u.path&&(u.path=n.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}()}));
/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */function so(){return so=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},so.apply(this,arguments)}function lo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var uo=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t,n,i,r=this.listeners[e];if(r)if(2===arguments.length)for(n=r.length,t=0;t<n;++t)r[t].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),n=r.length,t=0;t<n;++t)r[t].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),co=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return lo(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(uo),po=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i},ho=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}lo(t,e);var n=t.prototype;return n.push=function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var i=n(e);return i===e?t:t.concat([i])}),[e]).forEach((function(e){for(var r=0;r<i.customParsers.length;r++)if(i.customParsers[r].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var o=po(t[1]);if(o.URI&&(n.uri=o.URI),o.BYTERANGE){var a=o.BYTERANGE.split("@"),s=a[0],l=a[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),l&&(n.byterange.offset=parseInt(l,10))}}i.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=po(t[1]),n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION.split("x"),d={};u[0]&&(d.width=parseInt(u[0],10)),u[1]&&(d.height=parseInt(u[1],10)),n.attributes.RESOLUTION=d}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}i.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=po(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=po(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=po(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);i.trigger("data",{type:"tag",data:e.slice(4)})}}}else i.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,o=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:o}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(uo);function fo(t){for(var n=e.atob(t||""),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var go=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new co,t.parseStream=new ho,t.lineStream.pipe(t.parseStream);var n,i,r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=[],a={},s=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",(function(e){var t,d;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(a.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(a.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(a.duration=e.duration),0===e.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:fo(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(i.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,u=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(a.attributes||(a.attributes={}),so(a.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(d={default:/yes/i.test(e.attributes.DEFAULT)}).default?d.autoselect=!0:d.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(d.language=e.attributes.LANGUAGE),e.attributes.URI&&(d.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(d.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(d.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(d.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=d}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),a.dateTimeString=e.dateTimeString,a.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=e.data},"cue-out-cont":function(){a.cueOutCont=e.data},"cue-in":function(){a.cueIn=e.data}}[e.tagType]||s).call(r)},uri:function(){a.uri=e.uri,o.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),i&&(a.key=i),a.timeline=u,n&&(a.map=n),a={}},comment:function(){},custom:function(){e.segment?(a.custom=a.custom||{},a.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}lo(t,e);var n=t.prototype;return n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(uo);function mo(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var yo=mo(ao),vo=mo(e),_o=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=yo.buildAbsoluteURL(vo.location&&vo.location.href||"",e)),yo.buildAbsoluteURL(e,t))};var bo,Eo=(bo=e)&&"object"==typeof bo&&"default"in bo?bo.default:bo;var To=function(e){for(var t=function(e){return Eo.atob?Eo.atob(e):Buffer.from(e,"base64").toString("binary")}(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n},Co=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,So=new RegExp("[\\-\\.0-9"+Co.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),wo=new RegExp("^"+Co.source+So.source+"*(?::"+Co.source+So.source+"*)?$");function Ao(){}function ko(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function Po(e,t,n,i,r,o){for(var a,s=++t,l=0;;){var u=e.charAt(s);switch(u){case"=":if(1===l)a=e.slice(t,s),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(o.warning('attribute value must after "="'),a=e.slice(t,s)),t=s+1,!((s=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");d=e.slice(t,s).replace(/&#?\w+;/g,r),n.add(a,d,t-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');d=e.slice(t,s).replace(/&#?\w+;/g,r),n.add(a,d,t),o.warning('attribute "'+a+'" missed start quot('+u+")!!"),t=s+1,l=5}break;case"/":switch(l){case 0:n.setTagName(e.slice(t,s));case 5:case 6:case 7:l=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==l&&n.setTagName(e.slice(t,s)),s;case">":switch(l){case 0:n.setTagName(e.slice(t,s));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=e.slice(t,s)).slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case 2:2===l&&(d=a),4==l?(o.warning('attribute "'+d+'" missed quot(")!!'),n.add(a,d.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===i[""]&&d.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),n.add(d,d,t));break;case 3:throw new Error("attribute value missed!!")}return s;case"":u=" ";default:if(u<=" ")switch(l){case 0:n.setTagName(e.slice(t,s)),l=6;break;case 1:a=e.slice(t,s),l=2;break;case 4:var d=e.slice(t,s).replace(/&#?\w+;/g,r);o.warning('attribute "'+d+'" missed quot(")!!'),n.add(a,d,t);case 5:l=6}else switch(l){case 2:n.tagName;"http://www.w3.org/1999/xhtml"===i[""]&&a.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=s,l=1;break;case 5:o.warning('attribute space is required"'+a+'"!!');case 6:l=1,t=s;break;case 3:l=4,t=s;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function Io(e,t,n){for(var i=e.tagName,r=null,o=e.length;o--;){var a=e[o],s=a.qName,l=a.value;if((p=s.indexOf(":"))>0)var u=a.prefix=s.slice(0,p),d=s.slice(p+1),c="xmlns"===u&&d;else d=s,u=null,c="xmlns"===s&&"";a.localName=d,!1!==c&&(null==r&&(r={},Ro(n,n={})),n[c]=r[c]=l,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(c,l))}for(o=e.length;o--;){(u=(a=e[o]).prefix)&&("xml"===u&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(a.uri=n[u||""]))}var p;(p=i.indexOf(":"))>0?(u=e.prefix=i.slice(0,p),d=e.localName=i.slice(p+1)):(u=null,d=e.localName=i);var h=e.uri=n[u||""];if(t.startElement(h,d,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,!0;if(t.endElement(h,d,i),r)for(u in r)t.endPrefixMapping(u)}function Lo(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(r.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),o)}return t+1}function Mo(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function Ro(e,t){for(var n in e)t[n]=e[n]}function Do(e,t,n,i){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var o=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],l=a>3&&/^public$/i.test(o[2][0])&&o[3][0],u=a>4&&o[4][0],d=o[a-1];return n.startDTD(s,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),d.index+d[0].length}return-1}function xo(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function Oo(e){}function No(e,t){return e.__proto__=t,e}Ao.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),Ro(t,t={}),function(e,t,n,i,r){function o(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?o(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function s(t){if(t>g){var n=e.substring(g,t).replace(/&#?\w+;/g,a);p&&l(g),i.characters(n,0,t-g),g=t}}function l(t,n){for(;t>=d&&(n=c.exec(e));)u=n.index,d=u+n[0].length,p.lineNumber++;p.columnNumber=t-u+1}var u=0,d=0,c=/.*(?:\r\n?|\n)|.*$/g,p=i.locator,h=[{currentNSMap:t}],f={},g=0;for(;;){try{var m=e.indexOf("<",g);if(m<0){if(!e.substr(g).match(/^\s*$/)){var y=i.doc,v=y.createTextNode(e.substr(g));y.appendChild(v),i.currentElement=v}return}switch(m>g&&s(m),e.charAt(m+1)){case"/":var _=e.indexOf(">",m+3),b=e.substring(m+2,_),E=h.pop();_<0?(b=e.substring(m+2).replace(/[\s<].*/,""),r.error("end tag name: "+b+" is not complete:"+E.tagName),_=m+1+b.length):b.match(/\s</)&&(b=b.replace(/[\s<].*/,""),r.error("end tag name: "+b+" maybe not complete"),_=m+1+b.length);var T=E.localNSMap,C=E.tagName==b;if(C||E.tagName&&E.tagName.toLowerCase()==b.toLowerCase()){if(i.endElement(E.uri,E.localName,b),T)for(var S in T)i.endPrefixMapping(S);C||r.fatalError("end tag name: "+b+" is not match the current start tagName:"+E.tagName)}else h.push(E);_++;break;case"?":p&&l(m),_=xo(e,m,i);break;case"!":p&&l(m),_=Do(e,m,i,r);break;default:p&&l(m);var w=new Oo,A=h[h.length-1].currentNSMap,k=(_=Po(e,m,w,A,a,r),w.length);if(!w.closed&&Mo(e,_,w.tagName,f)&&(w.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),p&&k){for(var P=ko(p,{}),I=0;I<k;I++){var L=w[I];l(L.offset),L.locator=ko(p,{})}i.locator=P,Io(w,i,A)&&h.push(w),i.locator=p}else Io(w,i,A)&&h.push(w);"http://www.w3.org/1999/xhtml"!==w.uri||w.closed?_++:_=Lo(e,_,w.tagName,a,i)}}catch(e){r.error("element parse error: "+e),_=-1}_>g?g=_:s(Math.max(m,g)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},Oo.prototype={setTagName:function(e){if(!wo.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!wo.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},No({},No.prototype)instanceof No||(No=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n});var Bo={XMLReader:Ao};function Uo(e,t){for(var n in e)t[n]=e[n]}function Fo(e,t){var n=e.prototype;if(Object.create){var i=Object.create(t.prototype);n.__proto__=i}if(!(n instanceof t)){var r=function(){};r.prototype=t.prototype,Uo(n,r=new r),e.prototype=n=r}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var jo={},qo=jo.ELEMENT_NODE=1,Vo=jo.ATTRIBUTE_NODE=2,Ho=jo.TEXT_NODE=3,Wo=jo.CDATA_SECTION_NODE=4,Go=jo.ENTITY_REFERENCE_NODE=5,zo=jo.ENTITY_NODE=6,Ko=jo.PROCESSING_INSTRUCTION_NODE=7,Yo=jo.COMMENT_NODE=8,Qo=jo.DOCUMENT_NODE=9,Xo=jo.DOCUMENT_TYPE_NODE=10,$o=jo.DOCUMENT_FRAGMENT_NODE=11,Jo=jo.NOTATION_NODE=12,Zo={},ea={},ta=(Zo.INDEX_SIZE_ERR=(ea[1]="Index size error",1),Zo.DOMSTRING_SIZE_ERR=(ea[2]="DOMString size error",2),Zo.HIERARCHY_REQUEST_ERR=(ea[3]="Hierarchy request error",3)),na=(Zo.WRONG_DOCUMENT_ERR=(ea[4]="Wrong document",4),Zo.INVALID_CHARACTER_ERR=(ea[5]="Invalid character",5),Zo.NO_DATA_ALLOWED_ERR=(ea[6]="No data allowed",6),Zo.NO_MODIFICATION_ALLOWED_ERR=(ea[7]="No modification allowed",7),Zo.NOT_FOUND_ERR=(ea[8]="Not found",8)),ia=(Zo.NOT_SUPPORTED_ERR=(ea[9]="Not supported",9),Zo.INUSE_ATTRIBUTE_ERR=(ea[10]="Attribute in use",10));Zo.INVALID_STATE_ERR=(ea[11]="Invalid state",11),Zo.SYNTAX_ERR=(ea[12]="Syntax error",12),Zo.INVALID_MODIFICATION_ERR=(ea[13]="Invalid modification",13),Zo.NAMESPACE_ERR=(ea[14]="Invalid namespace",14),Zo.INVALID_ACCESS_ERR=(ea[15]="Invalid access",15);function ra(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ea[e]),this.message=ea[e],Error.captureStackTrace&&Error.captureStackTrace(this,ra);return n.code=e,t&&(this.message=this.message+": "+t),n}function oa(){}function aa(e,t){this._node=e,this._refresh=t,sa(this)}function sa(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);Fa(e,"length",n.length),Uo(n,e),e._inc=t}}function la(){}function ua(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function da(e,t,n,i){if(i?t[ua(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&ya(r,e,i),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function ca(e,t,n){var i=ua(t,n);if(!(i>=0))throw ra(na,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var o=e.ownerDocument;o&&(ya(o,e,n),n.ownerElement=null)}}function pa(e){if(this._features={},e)for(var t in e)this._features=e[t]}function ha(){}function fa(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function ga(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(ga(e,t))return!0}while(e=e.nextSibling)}function ma(){}function ya(e,t,n,i){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function va(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,o=0;r;)i[o++]=r,r=r.nextSibling;i.length=o}}}function _a(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,va(e.ownerDocument,e),t}function ba(e,t,n){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===$o){var r=t.firstChild;if(null==r)return t;var o=t.lastChild}else r=o=t;var a=n?n.previousSibling:e.lastChild;r.previousSibling=a,o.nextSibling=n,a?a.nextSibling=r:e.firstChild=r,null==n?e.lastChild=o:n.previousSibling=o;do{r.parentNode=e}while(r!==o&&(r=r.nextSibling));return va(e.ownerDocument||e,e),t.nodeType==$o&&(t.firstChild=t.lastChild=null),t}function Ea(){this._nsMap={}}function Ta(){}function Ca(){}function Sa(){}function wa(){}function Aa(){}function ka(){}function Pa(){}function Ia(){}function La(){}function Ma(){}function Ra(){}function Da(){}function xa(e,t){var n=[],i=9==this.nodeType?this.documentElement:this,r=i.prefix,o=i.namespaceURI;if(o&&null==r&&null==(r=i.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return Na(this,n,e,t,a),n.join("")}function Oa(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!i&&!r)return!1;if("xml"===i&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==i)return a.namespace!=r}return!0}function Na(e,t,n,i,r){if(i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case qo:r||(r=[]);r.length;var o=e.attributes,a=o.length,s=e.firstChild,l=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",l);for(var u=0;u<a;u++){"xmlns"==(d=o.item(u)).prefix?r.push({prefix:d.localName,namespace:d.value}):"xmlns"==d.nodeName&&r.push({prefix:"",namespace:d.value})}for(u=0;u<a;u++){var d;if(Oa(d=o.item(u),0,r)){var c=d.prefix||"",p=d.namespaceURI,h=c?" xmlns:"+c:" xmlns";t.push(h,'="',p,'"'),r.push({prefix:c,namespace:p})}Na(d,t,n,i,r)}if(Oa(e,0,r)){c=e.prefix||"",p=e.namespaceURI,h=c?" xmlns:"+c:" xmlns";t.push(h,'="',p,'"'),r.push({prefix:c,namespace:p})}if(s||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),n&&/^script$/i.test(l))for(;s;)s.data?t.push(s.data):Na(s,t,n,i,r),s=s.nextSibling;else for(;s;)Na(s,t,n,i,r),s=s.nextSibling;t.push("</",l,">")}else t.push("/>");return;case Qo:case $o:for(s=e.firstChild;s;)Na(s,t,n,i,r),s=s.nextSibling;return;case Vo:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,fa),'"');case Ho:return t.push(e.data.replace(/[<&]/g,fa));case Wo:return t.push("<![CDATA[",e.data,"]]>");case Yo:return t.push("\x3c!--",e.data,"--\x3e");case Xo:var f=e.publicId,g=e.systemId;if(t.push("<!DOCTYPE ",e.name),f)t.push(' PUBLIC "',f),g&&"."!=g&&t.push('" "',g),t.push('">');else if(g&&"."!=g)t.push(' SYSTEM "',g,'">');else{var m=e.internalSubset;m&&t.push(" [",m,"]"),t.push(">")}return;case Ko:return t.push("<?",e.target," ",e.data,"?>");case Go:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Ba(e,t,n){var i;switch(t.nodeType){case qo:(i=t.cloneNode(!1)).ownerDocument=e;case $o:break;case Vo:n=!0}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,n)for(var r=t.firstChild;r;)i.appendChild(Ba(e,r,n)),r=r.nextSibling;return i}function Ua(e,t,n){var i=new t.constructor;for(var r in t){var o=t[r];"object"!=typeof o&&o!=i[r]&&(i[r]=o)}switch(t.childNodes&&(i.childNodes=new oa),i.ownerDocument=e,i.nodeType){case qo:var a=t.attributes,s=i.attributes=new la,l=a.length;s._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(Ua(e,a.item(u),!0));break;case Vo:n=!0}if(n)for(var d=t.firstChild;d;)i.appendChild(Ua(e,d,n)),d=d.nextSibling;return i}function Fa(e,t,n){e[t]=n}ra.prototype=Error.prototype,Uo(Zo,ra),oa.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)Na(this[i],n,e,t);return n.join("")}},aa.prototype.item=function(e){return sa(this),this[e]},Fo(aa,oa),la.prototype={length:0,item:oa.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new ra(ia);var n=this.getNamedItem(e.nodeName);return da(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new ra(ia);return t=this.getNamedItemNS(e.namespaceURI,e.localName),da(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return ca(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return ca(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},pa.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var i=new ma;if(i.implementation=this,i.childNodes=new oa,i.doctype=n,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new ka;return i.name=e,i.nodeName=e,i.publicId=t,i.systemId=n,i}},ha.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return ba(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _a(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return Ua(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Ho&&e.nodeType==Ho?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(n[i]==e)return i;t=t.nodeType==Vo?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==Vo?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},Uo(jo,ha),Uo(jo,ha.prototype),ma.prototype={nodeName:"#document",nodeType:Qo,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==$o){for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return null==this.documentElement&&e.nodeType==qo&&(this.documentElement=e),ba(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_a(this,e)},importNode:function(e,t){return Ba(this,e,t)},getElementById:function(e){var t=null;return ga(this.documentElement,(function(n){if(n.nodeType==qo&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new Ea;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new oa,(t.attributes=new la)._ownerElement=t,t},createDocumentFragment:function(){var e=new Ma;return e.ownerDocument=this,e.childNodes=new oa,e},createTextNode:function(e){var t=new Sa;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new wa;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new Aa;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Ra;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Ta;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new La;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Ea,i=t.split(":"),r=n.attributes=new la;return n.childNodes=new oa,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Ta,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},Fo(ma,ha),Ea.prototype={nodeType:qo,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===$o?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var i=e.lastChild;n.removeChild(t),i=e.lastChild}return i=e.lastChild,t.parentNode=e,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:e.firstChild=t,e.lastChild=t,va(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new aa(this,(function(t){var n=[];return ga(t,(function(i){i===t||i.nodeType!=qo||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new aa(this,(function(n){var i=[];return ga(n,(function(r){r===n||r.nodeType!==qo||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}},ma.prototype.getElementsByTagName=Ea.prototype.getElementsByTagName,ma.prototype.getElementsByTagNameNS=Ea.prototype.getElementsByTagNameNS,Fo(Ea,ha),Ta.prototype.nodeType=Vo,Fo(Ta,ha),Ca.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ea[ta])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},Fo(Ca,ha),Sa.prototype={nodeName:"#text",nodeType:Ho,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},Fo(Sa,Ca),wa.prototype={nodeName:"#comment",nodeType:Yo},Fo(wa,Ca),Aa.prototype={nodeName:"#cdata-section",nodeType:Wo},Fo(Aa,Ca),ka.prototype.nodeType=Xo,Fo(ka,ha),Pa.prototype.nodeType=Jo,Fo(Pa,ha),Ia.prototype.nodeType=zo,Fo(Ia,ha),La.prototype.nodeType=Go,Fo(La,ha),Ma.prototype.nodeName="#document-fragment",Ma.prototype.nodeType=$o,Fo(Ma,ha),Ra.prototype.nodeType=Ko,Fo(Ra,ha),Da.prototype.serializeToString=function(e,t,n){return xa.call(e,t,n)},ha.prototype.toString=xa;try{if(Object.defineProperty){var ja=function e(t){switch(t.nodeType){case qo:case $o:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};Object.defineProperty(aa.prototype,"length",{get:function(){return sa(this),this.$$length}}),Object.defineProperty(ha.prototype,"textContent",{get:function(){return ja(this)},set:function(e){switch(this.nodeType){case qo:case $o:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Fa=function(e,t,n){e["$$"+t]=n}}}catch(e){}var qa,Va,Ha={DOMImplementation:pa,XMLSerializer:Da},Wa=a((function(e,t){function n(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function r(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function o(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function a(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function s(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var n=this.options,r=new l,a=n.domBuilder||new i,s=n.errorHandler,u=n.locator,d=n.xmlns||{},c={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&a.setDocumentLocator(u),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},a=e instanceof Function;function s(t){var i=e[t];!i&&a&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+o(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,a,u),r.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(c.nbsp=" ",c.copy="©",d[""]="http://www.w3.org/1999/xhtml"),d.xml=d.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,d,c):r.errorHandler.error("invalid doc source"),a.doc},i.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var o=this.doc,a=o.createElementNS(e,n||t),l=i.length;s(this,a),this.currentElement=a,this.locator&&r(this.locator,a);for(var u=0;u<l;u++){e=i.getURI(u);var d=i.getValue(u),c=(n=i.getQName(u),o.createAttributeNS(e,n));this.locator&&r(i.getLocator(u),c),c.value=c.nodeValue=d,a.setAttributeNode(c)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&r(this.locator,n),s(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=a.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&r(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=a.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&r(this.locator,i),s(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var o=i.createDocumentType(e,t,n);this.locator&&r(this.locator,o),s(this,o)}},warning:function(e){console.warn("[xmldom warning]\t"+e,o(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,o(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,o(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var l=Bo.XMLReader,u=t.DOMImplementation=Ha.DOMImplementation;t.XMLSerializer=Ha.XMLSerializer,t.DOMParser=n})),Ga=(Wa.DOMImplementation,Wa.XMLSerializer,Wa.DOMParser),za=function(e){return!!e&&"object"==typeof e},Ka=function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.reduce((function(t,n){return Object.keys(n).forEach((function(i){Array.isArray(t[i])&&Array.isArray(n[i])?t[i]=t[i].concat(n[i]):za(t[i])&&za(n[i])?t[i]=e(t[i],n[i]):t[i]=n[i]})),t}),{})},Ya=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},Qa=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},Xa="INVALID_NUMBER_OF_PERIOD",$a="DASH_EMPTY_MANIFEST",Ja="DASH_INVALID_XML",Za="NO_BASE_URL",es="SEGMENT_TIME_UNSPECIFIED",ts="UNSUPPORTED_UTC_TIMING_SCHEME",ns=function(e){var t=e.baseUrl,n=void 0===t?"":t,i=e.source,r=void 0===i?"":i,o=e.range,a=void 0===o?"":o,s=e.indexRange,l=void 0===s?"":s,u={uri:r,resolvedUri:_o(n||"",r)};if(a||l){var d=(a||l).split("-"),c=parseInt(d[0],10),p=parseInt(d[1],10);u.byterange={length:p-c+1,offset:c}}return u},is={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/i))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,o=void 0===r?1:r,a=e.duration,s=e.start,l=void 0===s?0:s,u=e.minimumUpdatePeriod,d=void 0===u?0:u,c=e.timeShiftBufferDepth,p=void 0===c?1/0:c,h=(t+n)/1e3,f=i+l,g=h+d-f,m=Math.ceil(g*o/a),y=Math.floor((h-f-p)*o/a),v=Math.floor((h-f)*o/a);return{start:Math.max(0,y),end:Math.min(m,v)}}},rs=function(e){var t=e.type,n=void 0===t?"static":t,i=e.duration,r=e.timescale,o=void 0===r?1:r,a=e.sourceDuration,s=is[n](e),l=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(s.start,s.end).map(function(e){return function(t,n){var i=e.duration,r=e.timescale,o=void 0===r?1:r,a=e.periodIndex,s=e.startNumber;return{number:(void 0===s?1:s)+t,duration:i/o,timeline:a,time:n*i}}}(e));if("static"===n){var u=l.length-1;l[u].duration=a-i/o*u}return l},os=function(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,r=e.sourceDuration,o=e.timescale,a=void 0===o?1:o,s=e.indexRange,l=void 0===s?"":s,u=e.duration;if(!t)throw new Error(Za);var d=ns({baseUrl:t,source:i.sourceURL,range:i.range}),c=ns({baseUrl:t,source:t,indexRange:l});if(c.map=d,u){var p=rs(e);p.length&&(c.duration=p[0].duration,c.timeline=p[0].timeline)}else r&&(c.duration=r/a,c.timeline=0);return c.number=0,[c]},as=function(e,t,n){for(var i=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,o=e.timeline||0,a=e.sidx.byterange,s=a.offset+a.length,l=t.timescale,u=t.references.filter((function(e){return 1!==e.referenceType})),d=[],c=s+t.firstOffset,p=0;p<u.length;p++){var h=t.references[p],f=h.referencedSize,g=h.subsegmentDuration,m=os({baseUrl:n,timescale:l,timeline:o,periodIndex:o,duration:g,sourceDuration:r,indexRange:c+"-"+(c+f-1)})[0];i&&(m.map=i),d.push(m),c+=f}return e.segments=d,e},ss=function(e){var t;return(t=e.reduce((function(e,t){var n,i=t.attributes.id+(t.attributes.lang||"");return e[i]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[i].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):e[i]=t,e}),{}),Object.keys(t).map((function(e){return t[e]}))).map((function(e){return e.discontinuityStarts=function(e,t){return e.reduce((function(e,n,i){return n[t]&&e.push(i),e}),[])}(e.segments,"discontinuity"),e}))},ls=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var i=e[n];if(i.sidx){var r=i.sidx.uri+"-"+(a=i.sidx.byterange,s=void 0,s=a.offset+a.length-1,a.offset+"-"+s),o=t[r]&&t[r].sidx;i.sidx&&o&&as(i,o,i.sidx.resolvedUri)}}var a,s;return e},us=function(e){var t,n=e.attributes,i=e.segments,r=e.sidx,o={attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(o.contentProtection=n.contentProtection),r&&(o.sidx=r),o},ds=function(e){var t,n=e.attributes,i=e.segments,r=e.sidx,o={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(o.contentProtection=n.contentProtection),r&&(o.sidx=r),o},cs=function(e,t){var n;if(void 0===t&&(t={}),!e.length)return{};var i=e[0].attributes,r=i.sourceDuration,o=i.type,a=void 0===o?"static":o,s=i.suggestedPresentationDelay,l=i.minimumUpdatePeriod,u=void 0===l?0:l,d=ss(e.filter((function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType}))).map(ds),c=ss(e.filter((function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType}))),p=e.filter((function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType})),h={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:r,playlists:ls(d,t),minimumUpdatePeriod:1e3*u};return"dynamic"===a&&(h.suggestedPresentationDelay=s),c.length&&(h.mediaGroups.AUDIO.audio=function(e,t){var n;void 0===t&&(t={});var i=e.reduce((function(e,i){var r=i.attributes.role&&i.attributes.role.value||"",o=i.attributes.lang||"",a="main";if(o){var s=r?" ("+r+")":"";a=""+i.attributes.lang+s}return e[a]&&e[a].playlists[0].attributes.BANDWIDTH>i.attributes.bandwidth||(e[a]={language:o,autoselect:!0,default:"main"===r,playlists:ls([us(i)],t),uri:""},void 0===n&&"main"===r&&((n=i).default=!0)),e}),{});return n||(i[Object.keys(i)[0]].default=!0),i}(c,t)),p.length&&(h.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var i,r,o,a,s=n.attributes.lang||"text";return e[s]||(e[s]={language:s,default:!1,autoselect:!1,playlists:ls([(i=n,o=i.attributes,a=i.segments,void 0===a&&(a=[{uri:o.baseUrl,timeline:o.periodIndex,resolvedUri:o.baseUrl||"",duration:o.sourceDuration,number:0}],o.duration=o.sourceDuration),{attributes:(r={NAME:o.id,BANDWIDTH:o.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:"static"===(o.type||"static"),timeline:o.periodIndex,resolvedUri:o.baseUrl||"",targetDuration:o.duration,segments:a,mediaSequence:a.length?a[0].number:1})],t),uri:""}),e}),{})}(p,t)),h},ps=function(e,t,n){var i=e.NOW,r=e.clientOffset,o=e.availabilityStartTime,a=e.timescale,s=void 0===a?1:a,l=e.start,u=void 0===l?0:l,d=e.minimumUpdatePeriod,c=(i+r)/1e3+(void 0===d?0:d)-(o+u);return Math.ceil((c*s-t)/n)},hs=function(e,t){for(var n=e.type,i=void 0===n?"static":n,r=e.minimumUpdatePeriod,o=void 0===r?0:r,a=e.media,s=void 0===a?"":a,l=e.sourceDuration,u=e.timescale,d=void 0===u?1:u,c=e.startNumber,p=void 0===c?1:c,h=e.periodIndex,f=[],g=-1,m=0;m<t.length;m++){var y=t[m],v=y.d,_=y.r||0,b=y.t||0;g<0&&(g=b),b&&b>g&&(g=b);var E=void 0;if(_<0){var T=m+1;E=T===t.length?"dynamic"===i&&o>0&&s.indexOf("$Number$")>0?ps(e,g,v):(l*d-g)/v:(t[T].t-g)/v}else E=_+1;for(var C=p+f.length+E,S=p+f.length;S<C;)f.push({number:S,duration:v/d,time:g,timeline:h}),g+=v,S++}return f},fs=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,gs=function(e,t){return e.replace(fs,function(e){return function(t,n,i,r){if("$$"===t)return"$";if(void 0===e[n])return t;var o=""+e[n];return"RepresentationID"===n?o:(r=i?parseInt(r,10):1,o.length>=r?o:""+new Array(r-o.length+1).join("0")+o)}}(t))},ms=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,r=void 0===i?{sourceURL:"",range:""}:i,o=ns({baseUrl:e.baseUrl,source:gs(r.sourceURL,n),range:r.range}),a=function(e,t){return e.duration||t?e.duration?rs(e):hs(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t);return a.map((function(t){n.Number=t.number,n.Time=t.time;var i=gs(e.media||"",n);return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:_o(e.baseUrl||"",i),map:o,number:t.number}}))},ys=function(e,t){var n=e.duration,i=e.segmentUrls,r=void 0===i?[]:i;if(!n&&!t||n&&t)throw new Error(es);var o,a=r.map((function(t){return function(e,t){var n=e.baseUrl,i=e.initialization,r=void 0===i?{}:i,o=ns({baseUrl:n,source:r.sourceURL,range:r.range}),a=ns({baseUrl:n,source:t.media,range:t.mediaRange});return a.map=o,a}(e,t)}));return n&&(o=rs(e)),t&&(o=hs(e,t)),o.map((function(e,t){if(a[t]){var n=a[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}})).filter((function(e){return e}))},vs=function(e){var t,n,i=e.attributes,r=e.segmentInfo;r.template?(n=ms,t=Ka(i,r.template)):r.base?(n=os,t=Ka(i,r.base)):r.list&&(n=ys,t=Ka(i,r.list));var o={attributes:i};if(!n)return o;var a=n(t,r.timeline);if(t.duration){var s=t,l=s.duration,u=s.timescale,d=void 0===u?1:u;t.duration=l/d}else a.length?t.duration=a.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return o.attributes=t,o.segments=a,r.base&&t.indexRange&&(o.sidx=a[0],o.segments=[]),o},_s=function(e,t){return Qa(e.childNodes).filter((function(e){return e.tagName===t}))},bs=function(e){return e.textContent.trim()},Es=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(o||0)+3600*parseFloat(a||0)+60*parseFloat(s||0)+parseFloat(l||0)},Ts={mediaPresentationDuration:function(e){return Es(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Es(e)},suggestedPresentationDelay:function(e){return Es(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Es(e)},start:function(e){return Es(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Es(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Cs=function(e){return e&&e.attributes?Qa(e.attributes).reduce((function(e,t){var n=Ts[t.name]||Ts.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},Ss={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ws=function(e,t){return t.length?Ya(e.map((function(e){return t.map((function(t){return _o(e,bs(t))}))}))):e},As=function(e){var t=_s(e,"SegmentTemplate")[0],n=_s(e,"SegmentList")[0],i=n&&_s(n,"SegmentURL").map((function(e){return Ka({tag:"SegmentURL"},Cs(e))})),r=_s(e,"SegmentBase")[0],o=n||t,a=o&&_s(o,"SegmentTimeline")[0],s=n||r||t,l=s&&_s(s,"Initialization")[0],u=t&&Cs(t);u&&l?u.initialization=l&&Cs(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var d={template:u,timeline:a&&_s(a,"S").map((function(e){return Cs(e)})),list:n&&Ka(Cs(n),{segmentUrls:i,initialization:Cs(l)}),base:r&&Ka(Cs(r),{initialization:Cs(l)})};return Object.keys(d).forEach((function(e){d[e]||delete d[e]})),d},ks=function(e,t,n){return function(i){var r=Cs(i),o=ws(t,_s(i,"BaseURL")),a=_s(i,"Role")[0],s={role:Cs(a)},l=Ka(e,r,s),u=_s(i,"ContentProtection").reduce((function(e,t){var n=Cs(t),i=Ss[n.schemeIdUri];if(i){e[i]={attributes:n};var r=_s(t,"cenc:pssh")[0];if(r){var o=bs(r),a=o&&To(o);e[i].pssh=a}}return e}),{});Object.keys(u).length&&(l=Ka(l,{contentProtection:u}));var d=As(i),c=_s(i,"Representation"),p=Ka(n,d);return Ya(c.map(function(e,t,n){return function(i){var r=_s(i,"BaseURL"),o=ws(t,r),a=Ka(e,Cs(i)),s=As(i);return o.map((function(e){return{segmentInfo:Ka(n,s),attributes:Ka(a,{baseUrl:e})}}))}}(l,o,p)))}},Ps=function(t,n){void 0===n&&(n={});var i=n,r=i.manifestUri,o=void 0===r?"":r,a=i.NOW,s=void 0===a?Date.now():a,l=i.clientOffset,u=void 0===l?0:l,d=_s(t,"Period");if(!d.length)throw new Error(Xa);var c=Cs(t),p=ws([o],_s(t,"BaseURL"));return c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=s,c.clientOffset=u,Ya(d.map(function(t,n){return function(i,r){var o=ws(n,_s(i,"BaseURL")),a=Cs(i),s=parseInt(a.id,10),l=e.isNaN(s)?r:s,u=Ka(t,{periodIndex:l}),d=_s(i,"AdaptationSet"),c=As(i);return Ya(d.map(ks(u,o,c)))}}(c,p)))},Is=function(e){if(""===e)throw new Error($a);var t=(new Ga).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(Ja);return n},Ls=function(e,t){return void 0===t&&(t={}),cs(Ps(Is(e),t).map(vs),t.sidxMapping)},Ms=function(e){return function(e){var t=_s(e,"UTCTiming")[0];if(!t)return null;var n=Cs(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error(ts)}return n}(Is(e))},Rs=function(e){return e>>>0},Ds=function(e){return("00"+e.toString(16)).slice(-2)},xs=Rs,Os=function(e){return new Date(1e3*e-20828448e5)},Ns=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Bs=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Us=function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r},Fs={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:qa(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,o=new DataView(e.buffer,e.byteOffset,e.byteLength),a={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(i=6,r=0;r<s;r++)n=o.getUint16(i),i+=2,a.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=o.getUint16(i),i+=2,a.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return a},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:Bs(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push(Bs(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:qa(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:qa(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:Bs(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:Us(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=Os(n.getUint32(i)),i+=8,r.modificationTime=Os(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8,r.duration=n.getUint32(i)):(r.creationTime=Os(n.getUint32(i)),i+=4,r.modificationTime=Os(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4,r.duration=n.getUint32(i)),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:qa(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:qa(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=qa(e.subarray(28))[0]),n},moof:function(e){return{boxes:qa(e)}},moov:function(e){return{boxes:qa(e)}},mvex:function(e){return{boxes:qa(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=Os(t.getUint32(n)),n+=8,i.modificationTime=Os(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8,i.duration=t.getUint32(n)):(i.creationTime=Os(t.getUint32(n)),n+=4,i.modificationTime=Os(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4,i.duration=t.getUint32(n)),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(t=24;r;t+=12,r--)i.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:qa(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:qa(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return Fs.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:xs(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=xs(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],o=2&i.flags[2],a=8&i.flags[2],s=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],d=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),o&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),a&&(i.defaultSampleDuration=n.getUint32(t),t+=4),s&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&d&&(i.baseDataOffsetIsMoof=!0),i},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=Os(t.getUint32(n)),n+=8,i.modificationTime=Os(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8,i.duration=t.getUint32(n)):(i.creationTime=Os(t.getUint32(n)),n+=4,i.modificationTime=Os(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4,i.duration=t.getUint32(n)),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/65536,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/65536,i},traf:function(e){return{boxes:qa(e)}},trak:function(e){return{boxes:qa(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],o=4&n.flags[2],a=1&n.flags[1],s=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],d=i.getUint32(4),c=8;for(r&&(n.dataOffset=i.getInt32(c),c+=4),o&&d&&(t={flags:Ns(e.subarray(c,c+4))},c+=4,a&&(t.duration=i.getUint32(c),c+=4),s&&(t.size=i.getUint32(c),c+=4),u&&(t.compositionTimeOffset=i.getUint32(c),c+=4),n.samples.push(t),d--);d--;)t={},a&&(t.duration=i.getUint32(c),c+=4),s&&(t.size=i.getUint32(c),c+=4),l&&(t.flags=Ns(e.subarray(c,c+4)),c+=4),u&&(t.compositionTimeOffset=i.getUint32(c),c+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};qa=function(e){for(var t,n,i,r,o,a=0,s=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),d=0;d<e.length;++d)u[d]=e[d];for(t=new DataView(l);a<e.byteLength;)n=t.getUint32(a),i=Bs(e.subarray(a+4,a+8)),r=n>1?a+n:e.byteLength,(o=(Fs[i]||function(e){return{data:e}})(e.subarray(a+8,r))).size=n,o.type=i,s.push(o),a=r;return s};var js,qs,Vs,Hs,Ws,Gs={inspect:qa,textify:Va=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map((function(e,i){return n+e.type+"\n"+Object.keys(e).filter((function(e){return"type"!==e&&"boxes"!==e})).map((function(t){var i=n+"  "+t+": ",r=e[t];if(r instanceof Uint8Array||r instanceof Uint32Array){var o=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return o?1===o.length?i+"<"+o.join("").slice(1)+">":i+"<\n"+o.map((function(e){return n+"  "+e})).join("\n")+"\n"+n+"  >":i+"<>"}return i+JSON.stringify(r,null,2).split("\n").map((function(e,t){return 0===t?e:n+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+Va(e.boxes,t+1):"")})).join("\n")},parseType:Bs,findBox:function e(t,n){var i,r,o,a,s,l=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=xs(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),o=Bs(t.subarray(i+4,i+8)),a=r>1?i+r:t.byteLength,o===n[0]&&(1===n.length?l.push(t.subarray(i+8,a)):(s=e(t.subarray(i+8,a),n.slice(1))).length&&(l=l.concat(s))),i=a;return l},parseTraf:Fs.traf,parseTfdt:Fs.tfdt,parseHdlr:Fs.hdlr,parseTfhd:Fs.tfhd,parseTrun:Fs.trun,parseSidx:Fs.sidx},zs=Rs,Ks=Ds;js=function(e){return Gs.findBox(e,["moov","trak"]).reduce((function(e,t){var n,i,r,o,a;return(n=Gs.findBox(t,["tkhd"])[0])?(i=n[0],o=zs(n[r=0===i?12:20]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),(a=Gs.findBox(t,["mdia","mdhd"])[0])?(r=0===(i=a[0])?12:20,e[o]=zs(a[r]<<24|a[r+1]<<16|a[r+2]<<8|a[r+3]),e):null):null}),{})},qs=function(e,t){var n,i,r;return n=Gs.findBox(t,["moof","traf"]),i=[].concat.apply([],n.map((function(t){return Gs.findBox(t,["tfhd"]).map((function(n){var i,r,o;return i=zs(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),r=e[i]||9e4,o=Gs.findBox(t,["tfdt"]).map((function(e){var t,n;return t=e[0],n=zs(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=zs(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n}))[0],(o=o||1/0)/r}))}))),r=Math.min.apply(null,i),isFinite(r)?r:0},Vs=function(e,t){var n,i=Gs.findBox(t,["moof","traf"]),r=0,o=0;if(i&&i.length)for(var a=Gs.parseTraf(i[0]),s=0;s<a.boxes.length;s++)"tfhd"===a.boxes[s].type?n=a.boxes[s].trackId:"tfdt"===a.boxes[s].type?r=a.boxes[s].baseMediaDecodeTime:"trun"===a.boxes[s].type&&a.boxes[s].samples.length&&(o=a.boxes[s].samples[0].compositionTimeOffset||0);return(r+o)/(e[n]||9e4)},Hs=function(e){var t=Gs.findBox(e,["moov","trak"]),n=[];return t.forEach((function(e){var t=Gs.findBox(e,["mdia","hdlr"]),i=Gs.findBox(e,["tkhd"]);t.forEach((function(e,t){var r,o,a=Gs.parseType(e.subarray(8,12)),s=i[t];"vide"===a&&(o=0===(r=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0)?r.getUint32(12):r.getUint32(20),n.push(o))}))})),n},Ws=function(e){var t=Gs.findBox(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},o=Gs.findBox(e,["tkhd"])[0];o&&(i=(t=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var a=Gs.findBox(e,["mdia","hdlr"])[0];if(a){var s=Gs.parseType(a.subarray(8,12));r.type="vide"===s?"video":"soun"===s?"audio":s}var l=Gs.findBox(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=Gs.parseType(u.subarray(4,8));var d,c=Gs.findBox(u,[r.codec])[0];c&&(/^[a-z]vc[1-9]$/i.test(r.codec)?(d=c.subarray(78),"avcC"===Gs.parseType(d.subarray(4,8))&&d.length>11?(r.codec+=".",r.codec+=Ks(d[9]),r.codec+=Ks(d[10]),r.codec+=Ks(d[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)&&(d=c.subarray(28),"esds"===Gs.parseType(d.subarray(4,8))&&d.length>20&&0!==d[19]?(r.codec+="."+Ks(d[19]),r.codec+="."+Ks(d[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"))}var p=Gs.findBox(e,["mdia","mdhd"])[0];if(p&&o){var h=0===i?12:20;r.timescale=zs(p[h]<<24|p[h+1]<<16|p[h+2]<<8|p[h+3])}n.push(r)})),n};var Ys={findBox:Gs.findBox,parseType:Gs.parseType,timescale:js,startTime:qs,compositionStartTime:Vs,videoTrackIds:Hs,tracks:Ws},Qs=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n},Xs=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},$s=function(e,t){var n,i,r,o,a=[];if(!(64&t[0]))return a;for(i=31&t[0],n=0;n<i;n++)o={type:3&t[(r=3*n)+2],pts:e},4&t[r+2]&&(o.ccData=t[r+3]<<8|t[r+4],a.push(o));return a},Js=function(e){for(var t,n,i=e.byteLength,r=[],o=1;o<i-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===r[0]&&(a++,r.shift()),n[o]=e[a];return n},Zs=4,el=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,o;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(o=[],i=arguments.length,i=1;i<arguments.length;++i)o.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,o)}},this.dispose=function(){e={}}}};el.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},el.prototype.push=function(e){this.trigger("data",e)},el.prototype.flush=function(e){this.trigger("done",e)},el.prototype.partialFlush=function(e){this.trigger("partialdone",e)},el.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},el.prototype.reset=function(e){this.trigger("reset",e)};var tl=el,nl=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new sl(0,0),new sl(0,1),new sl(1,0),new sl(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this)};(nl.prototype=new tl).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Qs(e.escapedRBSP)).payloadType===Zs&&(n=Xs(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=$s(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},nl.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},nl.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},nl.prototype.flush=function(){return this.flushStream("flush")},nl.prototype.partialFlush=function(){return this.flushStream("partialFlush")},nl.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},nl.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},nl.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},nl.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},nl.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var il={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},rl=function(e){return null===e?"":(e=il[e]||e,String.fromCharCode(e))},ol=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],al=function(){for(var e=[],t=15;t--;)e.push("");return e},sl=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,o;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=al();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=al();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=al()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))o=rl((i=(3&i)<<8)|r),this[this.mode_](e.pts,o),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),o=rl((i=(3&i)<<8)|r),this[this.mode_](e.pts,o),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var a=ol.indexOf(7968&t);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(e.pts,a)),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),o=rl(i),o+=rl(r),this[this.mode_](e.pts,o),this.column_+=o.length)}else this.lastControlCode_=null}};sl.prototype=new tl,sl.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},sl.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=al(),this.nonDisplayed_=al(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},sl.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},sl.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},sl.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},sl.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},sl.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},sl.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},sl.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},sl.prototype.isNormalChar=function(e){return e>=32&&e<=127},sl.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=al(),this.displayed_=al()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},sl.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},sl.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},sl.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},sl.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},sl.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},sl.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var ll=Js,ul=nl,dl=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},cl=function(e,t){var n=Ys.findBox(e,["moof","traf"]),i=Ys.findBox(e,["mdat"]),r={},o=[];return i.forEach((function(e,t){var i=n[t];o.push({mdat:e,traf:i})})),o.forEach((function(e){var n,i,o=e.mdat,a=e.traf,s=Ys.findBox(a,["tfhd"]),l=Gs.parseTfhd(s[0]),u=l.trackId,d=Ys.findBox(a,["tfdt"]),c=d.length>0?Gs.parseTfdt(d[0]).baseMediaDecodeTime:0,p=Ys.findBox(a,["trun"]);t===u&&p.length>0&&(n=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,o=n.defaultSampleSize||0,a=n.trackId,s=[];return e.forEach((function(e){var t=Gs.parseTrun(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=o),e.trackId=a,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=i+e.compositionTimeOffset,i+=e.duration})),s=s.concat(t)})),s}(p,c,l),i=function(e,t,n){var i,r,o,a,s=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=o)if(o=s.getUint32(r),r+=4,!(o<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+o),d=dl(r,t);if(i={nalUnitType:"sei_rbsp",size:o,data:u,escapedRBSP:ll(u),trackId:n},d)i.pts=d.pts,i.dts=d.dts,a=d;else{if(!a){console.log("We've encountered a nal unit without data. See mux.js#233.");break}i.pts=a.pts,i.dts=a.dts}l.push(i)}return l}(o,n,u),r[u]||(r[u]=[]),r[u]=r[u].concat(i))})),r},pl=function(){var e,t,n,i,r,o,a=!1;this.isInitialized=function(){return a},this.init=function(t){e=new ul,a=!0,o=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,o,a){var s;if(!this.isInitialized())return null;if(!o||!a)return null;if(this.isNewInit(o,a))n=o[0],i=a[n];else if(null===n||!i)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,o,a)}return s=function(e,t,n){return null===t?null:{seiNals:cl(e,t)[t],timescale:n}}(e,n,i),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),r):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;o?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},hl=27,fl=15,gl=21,ml="shared",yl=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},vl=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||ml,this.push=function(e){this.type_!==ml&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=yl(e.dts,i),e.pts=yl(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};vl.prototype=new tl;var _l,bl,El,Tl,Cl=function(e){var t=31&e[1];return t<<=8,t|=e[2]},Sl=function(e){return!!(64&e[1])},wl=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Al=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},kl={parseType:function(e,t){var n=Cl(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Sl(e),n=4+wl(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Sl(e),i=4+wl(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var o=12+((15&e[i+10])<<8|e[i+11]);o<r;){var a=i+o;t[(31&e[a+1])<<8|e[a+2]]=e[a],o+=5+((15&e[a+3])<<8|e[a+4])}return t}},parsePayloadUnitStartIndicator:Sl,parsePesType:function(e,t){switch(t[Cl(e)]){case hl:return"video";case fl:return"audio";case gl:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Sl(e))return null;var t=4+wl(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+wl(e),n=e.subarray(t),i=0,r=0,o=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===Al(31&n[r+3])&&(o=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Al(31&n[r+3])&&(o=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Al(31&n[r+3])&&(o=!0),o}},Pl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Il=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Ll={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return Pl[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=Il(e.subarray(10,14)));do{if((n=Il(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){var o=unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r));if("com.apple.streaming.transportStreamTimestamp"===o){var a=i.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}},Ml=9e4;var Rl=Ml,Dl=(_l=function(e){return e*Ml},bl=function(e,t){return e*t},El=function(e){return e/Ml},Tl=function(e,t){return e/t},yl),xl={};xl.ts=kl,xl.aac=Ll;var Ol=Rl,Nl=188,Bl=71,Ul=function(e,t,n){for(var i,r,o,a,s=0,l=Nl,u=!1;l<=e.byteLength;)if(e[s]!==Bl||e[l]!==Bl&&l!==e.byteLength)s++,l++;else{if(i=e.subarray(s,l),"pes"===xl.ts.parseType(i,t.pid))r=xl.ts.parsePesType(i,t.table),o=xl.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&o&&(a=xl.ts.parsePesTime(i))&&(a.type="audio",n.audio.push(a),u=!0);if(u)break;s+=Nl,l+=Nl}for(s=(l=e.byteLength)-Nl,u=!1;s>=0;)if(e[s]!==Bl||e[l]!==Bl&&l!==e.byteLength)s--,l--;else{if(i=e.subarray(s,l),"pes"===xl.ts.parseType(i,t.pid))r=xl.ts.parsePesType(i,t.table),o=xl.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&o&&(a=xl.ts.parsePesTime(i))&&(a.type="audio",n.audio.push(a),u=!0);if(u)break;s-=Nl,l-=Nl}},Fl=function(e,t,n){for(var i,r,o,a,s,l,u,d=0,c=Nl,p=!1,h={data:[],size:0};c<e.byteLength;)if(e[d]!==Bl||e[c]!==Bl)d++,c++;else{if(i=e.subarray(d,c),"pes"===xl.ts.parseType(i,t.pid))if(r=xl.ts.parsePesType(i,t.table),o=xl.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(o&&!p&&(a=xl.ts.parsePesTime(i))&&(a.type="video",n.video.push(a),p=!0),!n.firstKeyFrame)){if(o&&0!==h.size){for(s=new Uint8Array(h.size),l=0;h.data.length;)u=h.data.shift(),s.set(u,l),l+=u.byteLength;if(xl.ts.videoPacketContainsKeyFrame(s)){var f=xl.ts.parsePesTime(s);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(i),h.size+=i.byteLength}if(p&&n.firstKeyFrame)break;d+=Nl,c+=Nl}for(d=(c=e.byteLength)-Nl,p=!1;d>=0;)if(e[d]!==Bl||e[c]!==Bl)d--,c--;else{if(i=e.subarray(d,c),"pes"===xl.ts.parseType(i,t.pid))r=xl.ts.parsePesType(i,t.table),o=xl.ts.parsePayloadUnitStartIndicator(i),"video"===r&&o&&(a=xl.ts.parsePesTime(i))&&(a.type="video",n.video.push(a),p=!0);if(p)break;d-=Nl,c-=Nl}},jl=function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=Nl;r<e.byteLength;)if(e[i]!==Bl||e[r]!==Bl)i++,r++;else{switch(n=e.subarray(i,r),xl.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=xl.ts.parsePat(n));break;case"pmt":t.table||(t.table=xl.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=Nl,r+=Nl}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case hl:n.video=[],Fl(e,t,n),0===n.video.length&&delete n.video;break;case fl:n.audio=[],Ul(e,t,n),0===n.audio.length&&delete n.audio}}return n},ql=function(e,t){var n;return n=xl.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,o=null,a=0,s=0;e.length-s>=3;){switch(xl.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((a=xl.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===o&&(t=e.subarray(s,s+a),o=xl.aac.parseAacTimestamp(t)),s+=a;break;case"audio":if(e.length-s<7){n=!0;break}if((a=xl.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===r&&(t=e.subarray(s,s+a),r=xl.aac.parseSampleRate(t)),i++,s+=a;break;default:s++}if(n)return null}if(null===r||null===o)return null;var l=Ol/r;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*i*l,pts:o+1024*i*l}]}}(e):jl(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Dl(e.dts,n),e.pts=Dl(e.pts,n),e.dtsTime=e.dts/Ol,e.ptsTime=e.pts/Ol}))}if(e.video&&e.video.length){var i=t;if(void 0===i&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Dl(e.dts,i),e.pts=Dl(e.pts,i),e.dtsTime=e.dts/Ol,e.ptsTime=e.pts/Ol})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Dl(r.dts,i),r.pts=Dl(r.pts,i),r.dtsTime=r.dts/Ol,r.ptsTime=r.dts/Ol}}}(n,t),n):null};function Vl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Hl=function(e,t,n){return t&&Vl(e.prototype,t),n&&Vl(e,n),e},Wl=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),o=t.length,a=0;a<o;++a)t[a].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),Gl=Wl;
/*! @name @videojs/vhs-utils @version 1.3.0 @license MIT */
/*! @name aes-decrypter @version 3.0.2 @license Apache-2.0 */
var zl=null,Kl=function(){function e(e){var t,n,i;zl||(zl=function(){var e,t,n,i,r,o,a,s,l=[[[],[],[],[],[]],[[],[],[],[],[]]],u=l[0],d=l[1],c=u[4],p=d[4],h=[],f=[];for(e=0;e<256;e++)f[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!c[t];t^=i||1,n=f[n]||1)for(o=(o=n^n<<1^n<<2^n<<3^n<<4)>>8^255&o^99,c[t]=o,p[o]=t,s=16843009*h[r=h[i=h[t]]]^65537*r^257*i^16843008*t,a=257*h[o]^16843008*o,e=0;e<4;e++)u[e][t]=a=a<<24^a>>>8,d[e][o]=s=s<<24^s>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),d[e]=d[e].slice(0);return l}()),this._tables=[[zl[0][0].slice(),zl[0][1].slice(),zl[0][2].slice(),zl[0][3].slice(),zl[0][4].slice()],[zl[1][0].slice(),zl[1][1].slice(),zl[1][2].slice(),zl[1][3].slice(),zl[1][4].slice()]];var r=this._tables[0][4],o=this._tables[1],a=e.length,s=1;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size");var l=e.slice(0),u=[];for(this._key=[l,u],t=a;t<4*a+28;t++)i=l[t-1],(t%a==0||8===a&&t%a==4)&&(i=r[i>>>24]<<24^r[i>>16&255]<<16^r[i>>8&255]<<8^r[255&i],t%a==0&&(i=i<<8^i>>>24^s<<24,s=s<<1^283*(s>>7))),l[t]=l[t-a]^i;for(n=0;t;n++,t--)i=l[3&n?t:t-4],u[n]=t<=4||n<4?i:o[0][r[i>>>24]]^o[1][r[i>>16&255]]^o[2][r[i>>8&255]]^o[3][r[255&i]]}return e.prototype.decrypt=function(e,t,n,i,r,o){var a,s,l,u,d=this._key[1],c=e^d[0],p=i^d[1],h=n^d[2],f=t^d[3],g=d.length/4-2,m=4,y=this._tables[1],v=y[0],_=y[1],b=y[2],E=y[3],T=y[4];for(u=0;u<g;u++)a=v[c>>>24]^_[p>>16&255]^b[h>>8&255]^E[255&f]^d[m],s=v[p>>>24]^_[h>>16&255]^b[f>>8&255]^E[255&c]^d[m+1],l=v[h>>>24]^_[f>>16&255]^b[c>>8&255]^E[255&p]^d[m+2],f=v[f>>>24]^_[c>>16&255]^b[p>>8&255]^E[255&h]^d[m+3],m+=4,c=a,p=s,h=l;for(u=0;u<4;u++)r[(3&-u)+o]=T[c>>>24]<<24^T[p>>16&255]<<16^T[h>>8&255]<<8^T[255&f]^d[m++],a=c,c=p,p=h,h=f,f=a},e}(),Yl=function(e){function t(){var t;return(t=e.call(this,Gl)||this).jobs=[],t.delay=1,t.timeout_=null,t}qe(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(Gl),Ql=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},Xl=function(e,t,n){var i,r,o,a,s,l,u,d,c,p=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),h=new Kl(Array.prototype.slice.call(t)),f=new Uint8Array(e.byteLength),g=new Int32Array(f.buffer);for(i=n[0],r=n[1],o=n[2],a=n[3],c=0;c<p.length;c+=4)s=Ql(p[c]),l=Ql(p[c+1]),u=Ql(p[c+2]),d=Ql(p[c+3]),h.decrypt(s,l,u,d,g,c),g[c]=Ql(g[c]^i),g[c+1]=Ql(g[c+1]^r),g[c+2]=Ql(g[c+2]^o),g[c+3]=Ql(g[c+3]^a),i=s,r=l,o=u,a=d;return f},$l=function(){function e(t,n,i,r){var o=e.STEP,a=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new Yl,this.asyncStream_.push(this.decryptChunk_(a.subarray(l,l+o),n,i,s)),l=o;l<a.length;l+=o)i=new Uint32Array([Ql(a[l-4]),Ql(a[l-3]),Ql(a[l-2]),Ql(a[l-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(l,l+o),n,i,s));this.asyncStream_.push((function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var e;r(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,i){return function(){var r=Xl(e,t,n);i.set(r,e.byteOffset)}},Hl(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),Jl=function(t,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(t)||(t=ao.buildAbsoluteURL(e.location.href,t)),ao.buildAbsoluteURL(t,n))},Zl=function(e,t,n){return e&&n.responseURL&&t!==n.responseURL?n.responseURL:t},eu=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},tu=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),nu=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},iu=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ru=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ou=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},au=io.mergeOptions,su=io.EventTarget,lu=io.log,uu=function(e,t){["AUDIO","SUBTITLES"].forEach((function(n){for(var i in e.mediaGroups[n])for(var r in e.mediaGroups[n][i]){var o=e.mediaGroups[n][i][r];t(o,n,i,r)}}))},du=function(e,t){var n=au(e,{}),i=n.playlists[t.id];if(!i)return null;if(i.segments&&t.segments&&i.segments.length===t.segments.length&&i.endList===t.endList&&i.mediaSequence===t.mediaSequence)return null;var r=au(i,t);i.segments&&(r.segments=function(e,t,n){var i=t.slice();n=n||0;for(var r=Math.min(e.length,t.length+n),o=n;o<r;o++)i[o-n]=au(e[o],i[o-n]);return i}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)),r.segments.forEach((function(e){!function(e,t){e.resolvedUri||(e.resolvedUri=Jl(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Jl(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Jl(t,e.map.uri))}(e,r.resolvedUri)}));for(var o=0;o<n.playlists.length;o++)n.playlists[o].id===t.id&&(n.playlists[o]=r);return n.playlists[t.id]=r,n.playlists[t.uri]=r,n},cu=function(e,t){return e+"-"+t},pu=function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];n.resolvedUri=Jl(e.uri,n.uri),n.id=cu(t,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes||(n.attributes={},lu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},hu=function(e){uu(e,(function(t){t.uri&&(t.resolvedUri=Jl(e.uri,t.uri))}))},fu=function(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)},gu=function(t){function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};eu(this,n);var r=ru(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),o=i.withCredentials,a=void 0!==o&&o,s=i.handleManifestRedirects,l=void 0!==s&&s;r.srcUrl=e,r.hls_=t,r.withCredentials=a,r.handleManifestRedirects=l;var u=t.options_;if(r.customTagParsers=u&&u.customTagParsers||[],r.customTagMappers=u&&u.customTagMappers||[],!r.srcUrl)throw new Error("A non-empty playlist URL is required");return r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.hls_.xhr({uri:Jl(r.master.uri,r.media().uri),withCredentials:r.withCredentials},(function(e,t){if(r.request)return e?r.playlistRequestError(r.request,r.media(),"HAVE_METADATA"):void r.haveMetadata(r.request,r.media().uri,r.media().id)})))})),r}return iu(n,t),tu(n,[{key:"playlistRequestError",value:function(e,t,n){var i=t.uri,r=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+i+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,n,i){var r=this;this.request=null,this.state="HAVE_METADATA";var o=new go;this.customTagParsers.forEach((function(e){return o.addParser(e)})),this.customTagMappers.forEach((function(e){return o.addTagMapper(e)})),o.push(t.responseText),o.end(),o.manifest.uri=n,o.manifest.id=i,o.manifest.attributes=o.manifest.attributes||{};var a=du(this.master,o.manifest);this.targetDuration=o.manifest.targetDuration,a?(this.master=a,this.media_=this.master.playlists[i]):this.trigger("playlistunchanged"),this.media().endList||(e.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=e.setTimeout((function(){r.trigger("mediaupdatetimeout")}),fu(this.media(),!!a))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.finalRenditionTimeout),this.off()}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(t,n){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(e.clearTimeout(this.finalRenditionTimeout),n){var r=t.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=e.setTimeout(this.media.bind(this,t,!1),r)}else{var o=this.state,a=!this.media_||t.id!==this.media_.id;if(this.master.playlists[t.id].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(a&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(function(e,n){if(i.request){if(t.resolvedUri=Zl(i.handleManifestRedirects,t.resolvedUri,n),e)return i.playlistRequestError(i.request,t,o);i.haveMetadata(n,t.uri,t.id),"HAVE_MASTER"===o?i.trigger("loadedmetadata"):i.trigger("mediachange")}}))}}}},{key:"pause",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var n=this;e.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(t){var r=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.setTimeout((function(){return n.load()}),r)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var t=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(t.request){if(t.request=null,n)return t.error={status:i.status,message:"HLS playlist request error at URL: "+t.srcUrl+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");var r=new go;if(t.customTagParsers.forEach((function(e){return r.addParser(e)})),t.customTagMappers.forEach((function(e){return r.addTagMapper(e)})),r.push(i.responseText),r.end(),t.state="HAVE_MASTER",t.srcUrl=Zl(t.handleManifestRedirects,t.srcUrl,i),r.manifest.uri=t.srcUrl,r.manifest.playlists)return t.master=r.manifest,pu(t.master),hu(t.master),t.trigger("loadedplaylist"),void(t.request||t.media(r.manifest.playlists[0]));var o=cu(0,t.srcUrl);return t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:e.location.href,playlists:[{uri:t.srcUrl,id:o,resolvedUri:t.srcUrl,attributes:{}}]},t.master.playlists[o]=t.master.playlists[0],t.master.playlists[t.srcUrl]=t.master.playlists[0],t.haveMetadata(i,t.srcUrl,o),t.trigger("loadedmetadata")}}))}}]),n}(su),mu=io.createTimeRange,yu=function(e,t,n){var i,r;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t),i.precise?i.result:(r=function(e,t){for(var n=0,i=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t),r.precise?r.result:i.result+n))},vu=function(t,n,i){if(!t)return 0;if("number"!=typeof i&&(i=0),void 0===n){if(t.totalDuration)return t.totalDuration;if(!t.endList)return e.Infinity}return yu(t,n,i)},_u=function(e,t,n){var i=0;if(t>n){var r=[n,t];t=r[0],n=r[1]}if(t<0){for(var o=t;o<Math.min(0,n);o++)i+=e.targetDuration;t=0}for(var a=t;a<n;a++)i+=e.segments[a].duration;return i},bu=function(e,t){if(!e.segments.length)return 0;var n=e.segments.length,i=e.segments[n-1].duration||e.targetDuration,r="number"==typeof t?t:i+2*e.targetDuration;if(0===r)return n;for(var o=0;n--&&!((o+=e.segments[n].duration)>=r););return Math.max(0,n)},Eu=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return vu(e);if(null===t)return null;t=t||0;var r=n?bu(e,i):e.segments.length;return yu(e,e.mediaSequence+r,t)},Tu=function(e){return e-Math.floor(e)==0},Cu=function(e,t){if(Tu(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,i=1;i<=n;i++){var r=Math.pow(10,i),o=t*r;if(Tu(o)||i===n)return(o+e)/r}},Su=Cu.bind(null,1),wu=Cu.bind(null,-1),Au=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},ku=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Pu=function(e){var t=Au(e);return!e.disabled&&!t},Iu=function(e,t){return t.attributes&&t.attributes[e]},Lu=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!Pu(e)&&(e.attributes.BANDWIDTH||0)<n})).length},Mu={duration:vu,seekable:function(e,t,n){var i=t||0,r=Eu(e,t,!0,n);return null===r?mu():mu(i,r)},safeLiveIndex:bu,getMediaInfoForTime:function(e,t,n,i){var r=void 0,o=void 0,a=e.segments.length,s=t-i;if(s<0){if(n>0)for(r=n-1;r>=0;r--)if(o=e.segments[r],(s+=wu(o.duration))>0)return{mediaIndex:r,startTime:i-_u(e,n,r)};return{mediaIndex:0,startTime:t}}if(n<0){for(r=n;r<0;r++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(r=n;r<a;r++)if(o=e.segments[r],(s-=Su(o.duration))<0)return{mediaIndex:r,startTime:i+_u(e,n,r)};return{mediaIndex:a-1,startTime:t}},isEnabled:Pu,isDisabled:function(e){return e.disabled},isBlacklisted:Au,isIncompatible:ku,playlistEnd:Eu,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Iu,estimateSegmentRequestTime:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!Iu("BANDWIDTH",n))return NaN;var r=e*n.attributes.BANDWIDTH;return(r-8*i)/t},isLowestEnabledRendition:Lu},Ru=io.xhr,Du=io.mergeOptions,xu=function(){return function e(t,n){t=Du({timeout:45e3},t);var i=e.beforeRequest||io.Hls.xhr.beforeRequest;if(i&&"function"==typeof i){var r=i(t);r&&(t=r)}var o=Ru(t,(function(e,t){var i=o.response;!e&&i&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=i.byteLength||i.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),t.headers&&(o.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(o.timedout=!0),e||o.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(o&&(i||o.responseText)))),n(e,o)})),a=o.abort;return o.abort=function(){return o.aborted=!0,a.apply(o,arguments)},o.uri=t.uri,o.requestTime=Date.now(),o}},Ou=function(e){var t,n,i={};return e.byterange&&(i.Range=(t=e.byterange,n=t.offset+t.length-1,"bytes="+t.offset+"-"+n)),i},Nu=function(e,t){return e.start(t)+"-"+e.end(t)},Bu=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Uu=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Fu=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];ArrayBuffer.isView(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},ju=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},qu=function(e){return e.resolvedUri},Vu=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",r=0;r<t.length/n;r++)i+=t.slice(r*n,r*n+n).map(Bu).join("")+" "+t.slice(r*n,r*n+n).map(Uu).join("")+"\n";return i},Hu=Object.freeze({createTransferableMessage:Fu,initSegmentId:ju,segmentKeyId:qu,hexDump:Vu,tagDump:function(e){var t=e.bytes;return Vu(t)},textRanges:function(e){var t="",n=void 0;for(n=0;n<e.length;n++)t+=Nu(e,n)+" ";return t}}),Wu=function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return r({message:"getProgramTime: playlist and time must be provided"});var o=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n=0,i=void 0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var o=t.segments[t.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*o.duration)return null;i=o}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!o)return r({message:"valid programTime was not found"});if("estimate"===o.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});var a={mediaSeconds:i},s=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)}(i,o.segment);return s&&(a.programDateTime=s.toISOString()),r(null,a)},Gu=function e(t){var n=t.programTime,i=t.playlist,r=t.retryCount,o=void 0===r?2:r,a=t.seekTo,s=t.pauseAfterSeek,l=void 0===s||s,u=t.tech,d=t.callback;if(!d)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!i||!a)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!u.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(i))return d({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var c=function(e,t){var n=void 0;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(i=t.segments[r],!(n<t.segments[r+1].dateTimeObject));r++);var o,a=t.segments[t.segments.length-1],s=a.dateTimeObject,l=a.videoTimingInfo?(o=a.videoTimingInfo).transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds:a.duration+.25*a.duration;return n>new Date(s.getTime()+1e3*l)?null:(n>s&&(i=a),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Mu.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(n,i);if(!c)return d({message:n+" was not found in the stream"});var p=c.segment,h=function(e,t){var n=void 0,i=void 0;try{n=new Date(e),i=new Date(t)}catch(e){}var r=n.getTime();return(i.getTime()-r)/1e3}(p.dateTimeObject,n);if("estimate"===c.type)return 0===o?d({message:n+" is not buffered yet. Try again"}):(a(c.estimatedStart+h),void u.one("seeked",(function(){e({programTime:n,playlist:i,retryCount:o-1,seekTo:a,pauseAfterSeek:l,tech:u,callback:d})})));var f=p.start+h;u.one("seeked",(function(){return d(null,u.currentTime())})),l&&u.pause(),a(f)},zu=1/30,Ku=.1,Yu=function(e,t){var n=[],i=void 0;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return io.createTimeRanges(n)},Qu=function(e,t){return Yu(e,(function(e,n){return e-Ku<=t&&n+Ku>=t}))},Xu=function(e,t){return Yu(e,(function(e){return e-zu>=t}))},$u=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Ju=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},Zu=function(e,t,n){var i=void 0,r=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime<=t&&r.endTime>=e&&n.removeCue(r)},ed=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},td=function(t,n,i){var r=e.WebKitDataCue||e.VTTCue;if(n&&n.forEach((function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))}),t),i){var o=ed(t.mediaSource_.duration);if(i.forEach((function(t){var n=t.cueTime+this.timestampOffset;!("number"!=typeof n||e.isNaN(n)||n<0)&&n<1/0&&t.frames.forEach((function(e){var t=new r(n,n,e.value||e.url||e.data||"");t.frame=e,t.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return io.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return io.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return io.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(t),this.metadataTrack_.addCue(t)}),this)}),t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var a=t.metadataTrack_.cues,s=[],l=0;l<a.length;l++)a[l]&&s.push(a[l]);var u=s.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),d=Object.keys(u).sort((function(e,t){return Number(e)-Number(t)}));d.forEach((function(e,t){var n=u[e],i=Number(d[t+1])||o;n.forEach((function(e){e.endTime=i}))}))}}},nd="undefined"!=typeof window?window:{},id="undefined"==typeof Symbol?"__target":Symbol(),rd=nd.BlobBuilder||nd.WebKitBlobBuilder||nd.MozBlobBuilder||nd.MSBlobBuilder,od=nd.URL||nd.webkitURL||od&&od.msURL,ad=nd.Worker;function sd(e,t){return function(n){var i=this;if(!t)return new ad(e);if(ad&&!n){var r=cd(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[id]=new ad(r),function(e,t){if(!e||!t)return;var n=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&od.revokeObjectURL(e.objURL),n.call(e)}}(this[id],r),this[id]}var o={postMessage:function(e){i.onmessage&&setTimeout((function(){i.onmessage({data:e,target:o})}))}};t.call(o),this.postMessage=function(e){setTimeout((function(){o.onmessage({data:e,target:i})}))},this.isThisThread=!0}}if(ad){var ld,ud=cd("self.onmessage = function () {}"),dd=new Uint8Array(1);try{(ld=new ad(ud)).postMessage(dd,[dd.buffer])}catch(e){ad=null}finally{od.revokeObjectURL(ud),ld&&ld.terminate()}}function cd(e){try{return od.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new rd;return t.append(e),od.createObjectURL(t.getBlob(type))}}var pd=new sd("./transmuxer-worker.worker.js",(function(e,t){var n=this;!function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,o;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(o=[],i=arguments.length,i=1;i<arguments.length;++i)o.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,o)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,i,r,o,a,s,l,u,d,c,p,h,f,g,m,y,v,_,b,E,T,C,S,w,A,k,P,I,L,M,R,D,x,O,N,B,U,F,j,q,V=e,H=Math.pow(2,32)-1;!function(){var e;if(C={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in C)C.hasOwnProperty(e)&&(C[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),w=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:k,audio:P},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),M=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),x=D,O=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=D,L=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},i=function(){return t(C.dinf,t(C.dref,R))},r=function(e){return t(C.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return t(C.hdlr,I[e])},g=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(C.mdhd,n)},f=function(e){return t(C.mdia,g(e),m(e.type),s(e))},a=function(e){return t(C.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},s=function(e){return t(C.minf,"video"===e.type?t(C.vmhd,L):t(C.smhd,M),i(),v(e))},l=function(e,n){for(var i=[],r=n.length;r--;)i[r]=b(n[r]);return t.apply(null,[C.moof,a(e)].concat(i))},u=function(e){for(var n=e.length,i=[];n--;)i[n]=p(e[n]);return t.apply(null,[C.moov,c(4294967295)].concat(i).concat(d(e)))},d=function(e){for(var n=e.length,i=[];n--;)i[n]=E(e[n]);return t.apply(null,[C.mvex].concat(i))},c=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(C.mvhd,n)},y=function(e){var n,i,r=e.samples||[],o=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,o[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(C.sdtp,o)},v=function(e){return t(C.stbl,_(e),t(C.stts,N),t(C.stsc,x),t(C.stsz,O),t(C.stco,D))},_=function(e){return t(C.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?B(e):U(e))},B=function(e){var n,i,r=e.sps||[],o=e.pps||[],a=[],s=[];for(n=0;n<r.length;n++)a.push((65280&r[n].byteLength)>>>8),a.push(255&r[n].byteLength),a=a.concat(Array.prototype.slice.call(r[n]));for(n=0;n<o.length;n++)s.push((65280&o[n].byteLength)>>>8),s.push(255&o[n].byteLength),s=s.concat(Array.prototype.slice.call(o[n]));if(i=[C.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(C.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],a,[o.length],s))),t(C.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];i.push(t(C.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,i)},U=function(e){return t(C.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},h=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(C.tkhd,n)},b=function(e){var n,i,r,o,a,s;return n=t(C.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(H+1)),s=Math.floor(e.baseMediaDecodeTime%(H+1)),i=t(C.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),92,"audio"===e.type?(r=T(e,92),t(C.traf,n,i,r)):(o=y(e),r=T(e,o.length+92),t(C.traf,n,i,r,o))},p=function(e){return e.duration=e.duration||4294967295,t(C.trak,h(e),f(e))},E=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(C.trex,n)},q=function(e,t){var n=0,i=0,r=0,o=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,n|i|r|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},j=function(e,n){var i,r,o,a,s,l;for(n+=20+16*(a=e.samples||[]).length,o=q(a,n),(r=new Uint8Array(o.length+16*a.length)).set(o),i=o.length,l=0;l<a.length;l++)s=a[l],r[i++]=(4278190080&s.duration)>>>24,r[i++]=(16711680&s.duration)>>>16,r[i++]=(65280&s.duration)>>>8,r[i++]=255&s.duration,r[i++]=(4278190080&s.size)>>>24,r[i++]=(16711680&s.size)>>>16,r[i++]=(65280&s.size)>>>8,r[i++]=255&s.size,r[i++]=s.flags.isLeading<<2|s.flags.dependsOn,r[i++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,r[i++]=61440&s.flags.degradationPriority,r[i++]=15&s.flags.degradationPriority,r[i++]=(4278190080&s.compositionTimeOffset)>>>24,r[i++]=(16711680&s.compositionTimeOffset)>>>16,r[i++]=(65280&s.compositionTimeOffset)>>>8,r[i++]=255&s.compositionTimeOffset;return t(C.trun,r)},F=function(e,n){var i,r,o,a,s,l;for(n+=20+8*(a=e.samples||[]).length,o=q(a,n),(i=new Uint8Array(o.length+8*a.length)).set(o),r=o.length,l=0;l<a.length;l++)s=a[l],i[r++]=(4278190080&s.duration)>>>24,i[r++]=(16711680&s.duration)>>>16,i[r++]=(65280&s.duration)>>>8,i[r++]=255&s.duration,i[r++]=(4278190080&s.size)>>>24,i[r++]=(16711680&s.size)>>>16,i[r++]=(65280&s.size)>>>8,i[r++]=255&s.size;return t(C.trun,i)},T=function(e,t){return"audio"===e.type?F(e,t):j(e,t)};o=function(){return t(C.ftyp,S,w,S,A)};var W,G,z,K,Y,Q,X,$,J=function(e){return t(C.mdat,e)},Z=l,ee=function(e){var t,n=o(),i=u(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t},te=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ne=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},ie=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},re=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},oe=function(e,t){var n,i,r,o,a,s=t||0,l=[];for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i++)a=o[i],s+=(r=te(a,s)).size,l.push(r);return l},ae=function(e){var t,n,i,r,o,a,s=0,l=e.byteLength,u=e.nalCount,d=new Uint8Array(l+4*u),c=new DataView(d.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(o=r[n],i=0;i<o.length;i++)a=o[i],c.setUint32(s,a.data.byteLength),s+=4,d.set(a.data,s),s+=a.data.byteLength;return d},se=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(e){for(var t=[];e--;)t.push(0);return t},de=function(){if(!W){var e={96e3:[se,[227,64],ue(154),[56]],88200:[se,[231],ue(170),[56]],64e3:[se,[248,192],ue(240),[56]],48e3:[se,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[se,[255,192],ue(268),[55,163,128],ue(84),[112]],32e3:[se,[255,192],ue(268),[55,234],ue(226),[112]],24e3:[se,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16e3:[se,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12e3:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8e3:[le,ue(268),[3,121,16],ue(47),[7]]};t=e,W=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return W},ce=9e4;Q=function(e,t){return G(Y(e,t))},X=function(e,t){return z(K(e),t)},$=function(e,t,n){return K(n?e:e-t)};var pe=ce,he=(G=function(e){return e*ce},z=function(e,t){return e*t},K=function(e){return e/ce},Y=function(e,t){return e/t},Q),fe=X,ge=$,me=function(e,t,n,i){var r,o,a,s,l,u=0,d=0,c=0;if(t.length&&(r=he(e.baseMediaDecodeTime,e.samplerate),o=Math.ceil(pe/(e.samplerate/1024)),n&&i&&(u=r-Math.max(n,i),c=(d=Math.floor(u/o))*o),!(d<1||c>pe/2))){for((a=de()[e.samplerate])||(a=t[0].data),s=0;s<d;s++)l=t[0],t.splice(0,0,{data:a,dts:l.dts-o,pts:l.pts-o});e.baseMediaDecodeTime-=Math.floor(fe(c,e.samplerate))}},ye=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},ve=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},_e=function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r},be=pe,Ee=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Te=function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/be,n=Math.floor(n)),n},Ce=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Se=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,i=0,r=0}return n},we=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Ae=function(e,t){var n,i,r,o,a=[];if(!(64&t[0]))return a;for(i=31&t[0],n=0;n<i;n++)o={type:3&t[(r=3*n)+2],pts:e},4&t[r+2]&&(o.ccData=t[r+3]<<8|t[r+4],a.push(o));return a},ke=4,Pe=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new De(0,0),new De(0,1),new De(1,0),new De(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this)};(Pe.prototype=new V).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Se(e.escapedRBSP)).payloadType===ke&&(n=we(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=Ae(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Pe.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},Pe.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},Pe.prototype.flush=function(){return this.flushStream("flush")},Pe.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Pe.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},Pe.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Pe.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Pe.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Pe.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Ie={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Le=function(e){return null===e?"":(e=Ie[e]||e,String.fromCharCode(e))},Me=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Re=function(){for(var e=[],t=15;t--;)e.push("");return e},De=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,o;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Re();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Re();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Re()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))o=Le((i=(3&i)<<8)|r),this[this.mode_](e.pts,o),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),o=Le((i=(3&i)<<8)|r),this[this.mode_](e.pts,o),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var a=Me.indexOf(7968&t);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(e.pts,a)),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),o=Le(i),o+=Le(r),this[this.mode_](e.pts,o),this.column_+=o.length)}else this.lastControlCode_=null}};De.prototype=new V,De.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},De.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Re(),this.nonDisplayed_=Re(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},De.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},De.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},De.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},De.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},De.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},De.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},De.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},De.prototype.isNormalChar=function(e){return e>=32&&e<=127},De.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Re(),this.displayed_=Re()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},De.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},De.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},De.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},De.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},De.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},De.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var xe={CaptionStream:Pe,Cea608Stream:De},Oe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ne="shared",Be=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},Ue=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||Ne,this.push=function(e){this.type_!==Ne&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=Be(e.dts,i),e.pts=Be(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ue.prototype=new V;var Fe,je=Ue,qe=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},Ve=function(e,t,n){return decodeURIComponent(qe(e,t,n))},He=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},We={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ve(e.data,1,t),e.value=Ve(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ve(e.data,1,t),e.url=Ve(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(qe(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Fe=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},i=0,r=[],o=0;if(Fe.prototype.init.call(this),this.dispatchType=Oe.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,a,s,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(o=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))n.debug&&console.log("Skipping unrecognized metadata packet");else if(r.push(e),o+=e.data.byteLength,1===r.length&&(i=He(e.data.subarray(6,10)),i+=10),!(o<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<i;)t.data.set(r[0].data.subarray(0,i-u),u),u+=r[0].data.byteLength,o-=r[0].data.byteLength,r.shift();a=10,64&t.data[5]&&(a+=4,a+=He(t.data.subarray(10,14)),i-=He(t.data.subarray(16,20)));do{if((s=He(t.data.subarray(a+4,a+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((l={id:String.fromCharCode(t.data[a],t.data[a+1],t.data[a+2],t.data[a+3]),data:t.data.subarray(a+10,a+s+10)}).key=l.id,We[l.id]&&(We[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var d=l.data,c=(1&d[3])<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;c*=4,c+=3&d[7],l.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),a+=10,a+=s}while(a<i);this.trigger("data",t)}}},Fe.prototype=new V;var Ge,ze,Ke,Ye=Fe,Qe=je,Xe=188;(Ge=function(){var e=new Uint8Array(Xe),t=0;Ge.prototype.init.call(this),this.push=function(n){var i,r=0,o=Xe;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;o<i.byteLength;)71!==i[r]||71!==i[o]?(r++,o++):(this.trigger("data",i.subarray(r,o)),r+=Xe,o+=Xe);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===Xe&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new V,ze=function(){var e,t,n,i;ze.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var o=e[r],a=(31&e[r+1])<<8|e[r+2];o===Oe.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=a:o===Oe.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=a:o===Oe.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][a]=o),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Oe.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Oe.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},ze.prototype=new V,ze.STREAM_TYPES={h264:27,adts:15},Ke=function(){var e,t=this,n={data:[],size:0},i={data:[],size:0},r={data:[],size:0},o=function(e,n,i){var r,o,a=new Uint8Array(e.size),s={type:n},l=0,u=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,l=0;l<e.data.length;l++)o=e.data[l],a.set(o.data,u),u+=o.data.byteLength;var d,c,p;d=a,(c=s).packetLength=6+(d[4]<<8|d[5]),c.dataAlignmentIndicator=0!=(4&d[6]),192&(p=d[7])&&(c.pts=(14&d[9])<<27|(255&d[10])<<20|(254&d[11])<<12|(255&d[12])<<5|(254&d[13])>>>3,c.pts*=4,c.pts+=(6&d[13])>>>1,c.dts=c.pts,64&p&&(c.dts=(14&d[14])<<27|(255&d[15])<<20|(254&d[16])<<12|(255&d[17])<<5|(254&d[18])>>>3,c.dts*=4,c.dts+=(6&d[18])>>>1)),c.data=d.subarray(9+d[8]),r="video"===n||s.packetLength<=e.size,(i||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",s)}};Ke.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,t;switch(a.streamType){case Oe.H264_STREAM_TYPE:e=n,t="video";break;case Oe.ADTS_STREAM_TYPE:e=i,t="audio";break;case Oe.METADATA_STREAM_TYPE:e=r,t="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(e=a.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",n)}})[a.type]()},this.reset=function(){n.size=0,n.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(n,"video"),o(i,"audio"),o(r,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},Ke.prototype=new V;var $e={PAT_PID:0,MP2T_PACKET_LENGTH:Xe,TransportPacketStream:Ge,TransportParseStream:ze,ElementaryStream:Ke,TimestampRolloverStream:Qe,CaptionStream:xe.CaptionStream,Cea608Stream:xe.Cea608Stream,MetadataStream:Ye};for(var Je in Oe)Oe.hasOwnProperty(Je)&&($e[Je]=Oe[Je]);var Ze,et=$e,tt=pe,nt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ze=function(e){var t,n=0;Ze.prototype.init.call(this),this.push=function(i){var r,o,a,s,l,u,d=0;if(e||(n=0),"audio"===i.type)for(t?(s=t,(t=new Uint8Array(s.byteLength+i.data.byteLength)).set(s),t.set(i.data,s.byteLength)):t=i.data;d+5<t.length;)if(255===t[d]&&240==(246&t[d+1])){if(o=2*(1&~t[d+1]),r=(3&t[d+3])<<11|t[d+4]<<3|(224&t[d+5])>>5,u=(l=1024*(1+(3&t[d+6])))*tt/nt[(60&t[d+2])>>>2],a=d+r,t.byteLength<a)return;if(this.trigger("data",{pts:i.pts+n*u,dts:i.dts+n*u,sampleCount:l,audioobjecttype:1+(t[d+2]>>>6&3),channelcount:(1&t[d+2])<<2|(192&t[d+3])>>>6,samplerate:nt[(60&t[d+2])>>>2],samplingfrequencyindex:(60&t[d+2])>>>2,samplesize:16,data:t.subarray(d+7+o,a)}),n++,t.byteLength===a)return void(t=void 0);t=t.subarray(a)}else d++},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},Ze.prototype=new V;var it,rt,ot,at=Ze,st=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,o=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");o.set(e.subarray(r,r+a)),n=new DataView(o.buffer).getUint32(0),i=8*a,t-=a},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),o=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?o<<r|this.readBits(r):o},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};rt=function(){var e,t,n=0;rt.prototype.init.call(this),this.push=function(i){var r;t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var o=t.byteLength;n<o-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<o;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<o);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},rt.prototype=new V,ot={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},it=function(){var e,t,n,i,r,o,a,s=new rt;it.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,s.push(e))},s.on("data",(function(a){var s={trackId:t,pts:n,dts:i,data:a};switch(31&a[0]){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=r(a.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=r(a.subarray(1)),s.config=o(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},a=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},r=function(e){for(var t,n,i=e.byteLength,r=[],o=1;o<i-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===r[0]&&(a++,r.shift()),n[o]=e[a];return n},o=function(e){var t,n,i,r,o,s,l,u,d,c,p,h,f,g=0,m=0,y=0,v=0,_=1;if(n=(t=new st(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),ot[n]&&(3===(o=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==o?8:12,f=0;f<p;f++)t.readBoolean()&&a(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(_=h[0]/h[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*g-2*m)*_),height:(2-c)*(d+1)*16-2*y-2*v,sarRatio:h}}},it.prototype=new V;var lt,ut={H264Stream:it,NalByteStream:rt},dt=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},ct=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},pt=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n};(lt=function(){var e=new Uint8Array,t=0;lt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,o,a,s=0,l=0;for(e.length?(a=e.length,(e=new Uint8Array(n.byteLength+a)).set(e.subarray(0,a)),e.set(n,a)):e=n;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!=(255&e[l])||240!=(240&e[l+1]))l++;else{if(e.length-l<7)break;if(l+(s=pt(e,l))>e.length)break;o={type:"audio",data:e.subarray(l,l+s),pts:t,dts:t},this.trigger("data",o),l+=s}else{if(e.length-l<10)break;if(l+(s=ct(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+s)},this.trigger("data",r),l+=s}i=e.length-l,e=i>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var ht,ft,gt,mt,yt=lt,vt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],_t=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],bt=ut.H264Stream,Et=dt,Tt=pe,Ct=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},St=function(e,t,n,i,r,o){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:o,baseMediaDecodeTime:e}};ft=function(e,t){var n=[],i=0,r=0,o=0,a=1/0;t=t||{},ft.prototype.init.call(this),this.push=function(t){Ce(e,t),e&&vt.forEach((function(n){e[n]=t[n]})),n.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var s,l,u,d,c;0!==n.length?(s=ye(n,e,r),e.baseMediaDecodeTime=Te(e,t.keepOriginalTimestamps),me(e,s,o,a),e.samples=ve(s),u=J(_e(s)),n=[],l=Z(i,[e]),d=new Uint8Array(l.byteLength+u.byteLength),i++,d.set(l),d.set(u,l.byteLength),Ee(e),c=Math.ceil(1024*Tt/e.samplerate),s.length&&this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+s.length*c}),this.trigger("data",{track:e,boxes:d}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Ee(e),n=[],this.trigger("reset")}},ft.prototype=new V,ht=function(e,t){var n,i,r=0,o=[],a=[];t=t||{},ht.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){Ce(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],_t.forEach((function(t){e[t]=n[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),o.push(t)},this.flush=function(){for(var n,i,s,l,u,d,c,p,h=0;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=ne(o),(s=ie(n))[0][0].keyFrame||((i=this.getGopForFusion_(o[0],e))?(h=i.duration,s.unshift(i),s.byteLength+=i.byteLength,s.nalCount+=i.nalCount,s.pts=i.pts,s.dts=i.dts,s.duration+=i.duration):s=re(s)),a.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ee(e),s=f}Ce(e,s),e.samples=oe(s),u=J(ae(s)),e.baseMediaDecodeTime=Te(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),c=s[0],p=s[s.length-1],this.trigger("segmentTimingInfo",St(e.baseMediaDecodeTime,c.dts,c.pts,p.dts+p.duration,p.pts+p.duration,h)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=Z(r,[e]),d=new Uint8Array(l.byteLength+u.byteLength),r++,d.set(l),d.set(u,l.byteLength),this.trigger("data",{track:e,boxes:d}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),o=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){Ee(e),n=void 0,i=void 0},this.getGopForFusion_=function(t){var n,i,r,o,a,s=1/0;for(a=0;a<this.gopCache_.length;a++)r=(o=this.gopCache_[a]).gop,e.pps&&Ct(e.pps[0],o.pps[0])&&e.sps&&Ct(e.sps[0],o.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||s>n)&&(i=o,s=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,o,s,l,u;for(o=e.byteLength,s=e.nalCount,l=e.duration,t=n=0;t<a.length&&n<e.length&&(i=a[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,o-=r.byteLength,s-=r.nalCount,l-=r.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=o,u.duration=l,u.nalCount=s,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,o,s,l;for(t=a.length-1,n=e.length-1,o=null,s=!1;t>=0&&n>=0;){if(i=a[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===a.length-1&&(o=n),n--)}if(!s&&null===o)return null;if(0===(l=s?n:o))return e;var u=e.slice(l),d=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=d.byteLength,u.duration=d.duration,u.nalCount=d.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){a=e}},ht.prototype=new V,mt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,mt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},mt.prototype=new V,mt.prototype.flush=function(e){var t,n,i,r,o=0,a={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,_t.forEach((function(e){a.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,vt.forEach((function(e){a.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,i=ee(this.pendingTracks),a.initSegment=new Uint8Array(i.byteLength),a.initSegment.set(i),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],o),o+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=ge(t.startPts,s,this.keepOriginalTimestamps),t.endTime=ge(t.endPts,s,this.keepOriginalTimestamps),a.captionStreams[t.stream]=!0,a.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=ge(n.pts,s,this.keepOriginalTimestamps),a.metadata.push(n);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),r=0;r<a.captions.length;r++)t=a.captions[r],this.trigger("caption",t);for(r=0;r<a.metadata.length;r++)n=a.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},mt.prototype.setRemux=function(e){this.remuxTracks=e},gt=function(e){var t,n,i=this,r=!0;gt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new et.MetadataStream,r.aacStream=new yt,r.audioTimestampRolloverStream=new et.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new et.TimestampRolloverStream("timed-metadata"),r.adtsStream=new at,r.coalesceStream=new mt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(o){"timed-metadata"!==o.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ft(n,e),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new et.MetadataStream,r.packetStream=new et.TransportPacketStream,r.parseStream=new et.TransportParseStream,r.elementaryStream=new et.ElementaryStream,r.timestampRolloverStream=new et.TimestampRolloverStream,r.adtsStream=new at,r.h264Stream=new bt,r.captionStream=new et.CaptionStream,r.coalesceStream=new mt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(o){var a,s=e.keepOriginalTimestamps?0:i.baseMediaDecodeTime;if("metadata"===o.type){for(a=o.tracks.length;a--;)t||"video"!==o.tracks[a].type?n||"audio"!==o.tracks[a].type||((n=o.tracks[a]).timelineStartInfo.baseMediaDecodeTime=s):(t=o.tracks[a]).timelineStartInfo.baseMediaDecodeTime=s;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ht(t,e),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ft(n,e),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var i=this.transmuxPipeline_;this.baseMediaDecodeTime=e,n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,Ee(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Ee(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(r){var t=Et(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},gt.prototype=new V;var wt={Transmuxer:gt,VideoSegmentStream:ht,AudioSegmentStream:ft,AUDIO_PROPERTIES:vt,VIDEO_PROPERTIES:_t,generateVideoSegmentTimingInfo:St},At=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),kt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=n||{},this.self=t,this.init()}return At(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new wt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.captionStream&&t.captionStream.on("data",(function(t){e.postMessage({action:"caption",data:t})})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}))}(this.self,this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}(),Pt=new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new kt(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new kt(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(n)}()})),hd={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},fd=function(e){return e.map((function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)}))}))},gd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={codecCount:0},n=void 0;return t.codecCount=e.split(",").length,t.codecCount=t.codecCount||2,(n=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e))&&(t.videoCodec=n[2],t.videoObjectTypeIndicator=n[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},md=function(e,t,n){return e+"/"+t+'; codecs="'+n.filter((function(e){return!!e})).join(", ")+'"'},yd=function(e,t){var n=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"}(t),i=function(e){var t=e.attributes||{};return t.CODECS?gd(t.CODECS):hd}(t),r=t.attributes||{},o=!0,a=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&r.AUDIO){var s=e.mediaGroups.AUDIO[r.AUDIO];if(s)for(var l in a=!0,o=!1,s)if(!s[l].uri&&!s[l].playlists){o=!0;break}}a&&!i.audioProfile&&(o||(i.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return gd(r.playlists[0].attributes.CODECS).audioProfile}return null}(e,r.AUDIO)),i.audioProfile||(io.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),i.audioProfile=hd.audioProfile));var u={};i.videoCodec&&(u.video=""+i.videoCodec+i.videoObjectTypeIndicator),i.audioProfile&&(u.audio="mp4a.40."+i.audioProfile);var d=md("audio",n,[u.audio]),c=md("video",n,[u.video]),p=md("video",n,[u.video,u.audio]);return a?!o&&u.video?[c,d]:o||u.video?[p,d]:[d,d]:u.video?[p]:[d]},vd=function(e){var t={type:"",parameters:{}},n=e.trim().split(";");return t.type=n.shift().trim(),n.forEach((function(e){var n=e.trim().split("=");if(n.length>1){var i=n[0].replace(/"/g,"").trim(),r=n[1].replace(/"/g,"").trim();t.parameters[i]=r}})),t},_d=function(e){return/mp4a\.\d+.\d+/i.test(e)},bd=function(e){return/avc1\.[\da-f]+/i.test(e)},Ed=function(e,t,n){if(null==t||!e.length)return[];var i=Math.ceil(9e4*(t-n+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)},Td=9e4,Cd=function(e){function t(e,n){eu(this,t);var i=ru(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,io.EventTarget));i.timestampOffset_=0,i.pendingBuffers_=[],i.bufferUpdating_=!1,i.mediaSource_=e,i.codecs_=n,i.audioCodec_=null,i.videoCodec_=null,i.audioDisabled_=!1,i.appendAudioInitSegment_=!0,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=io.browser.IE_VERSION>=11;var r={remux:!1,alignGopsAtEnd:i.safeAppend_};return i.codecs_.forEach((function(e){_d(e)?i.audioCodec_=e:bd(e)&&(i.videoCodec_=e)})),i.transmuxer_=new pd,i.transmuxer_.postMessage({action:"init",options:r}),i.transmuxer_.onmessage=function(e){return"data"===e.data.action?i.data_(e):"done"===e.data.action?i.done_(e):"gopInfo"===e.data.action?i.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?i.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(i,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(i,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(i,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(i,"buffered",{get:function(){return function(e,t,n){var i=null,r=null,o=0,a=[],s=[];if(!e&&!t)return io.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return io.createTimeRange();for(var l=e.buffered,u=t.buffered,d=l.length;d--;)a.push({time:l.start(d),type:"start"}),a.push({time:l.end(d),type:"end"});for(d=u.length;d--;)a.push({time:u.start(d),type:"start"}),a.push({time:u.end(d),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),d=0;d<a.length;d++)"start"===a[d].type?2==++o&&(i=a[d].time):"end"===a[d].type&&1==--o&&(r=a[d].time),null!==i&&null!==r&&(s.push([i,r]),i=null,r=null);return io.createTimeRanges(s)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),i}return iu(t,e),tu(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,n){var i=t.player_;if(n.captions&&n.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[r]){i.tech_.trigger({type:"usage",name:"hls-608"});var o=i.textTracks().getTrackById(r);e.inbandTextTracks_[r]=o||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(e){var t={start:{decode:e.start.dts/Td,presentation:e.start.pts/Td},end:{decode:e.end.dts/Td,presentation:e.end.pts/Td},baseMediaDecodeTime:e.baseMediaDecodeTime/Td};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/Td),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach((function(n){if(e[n+"Codec_"]&&!e[n+"Buffer_"]){var i=null;if(e.mediaSource_[n+"Buffer_"])(i=e.mediaSource_[n+"Buffer_"]).updating=!1;else{var r=n+'/mp4;codecs="'+e[n+"Codec_"]+'"';i=function(e,t){var n=e.addSourceBuffer(t),i=Object.create(null);i.updating=!1,i.realBuffer_=n;var r=function(e){"function"==typeof n[e]?i[e]=function(){return n[e].apply(n,arguments)}:void 0===i[e]&&Object.defineProperty(i,e,{get:function(){return n[e]},set:function(t){return n[e]=t}})};for(var o in n)r(o);return i}(e.mediaSource_.nativeMediaSource_,r),e.mediaSource_[n+"Buffer_"]=i}e[n+"Buffer_"]=i,["update","updatestart","updateend"].forEach((function(r){i.addEventListener(r,(function(){if("audio"!==n||!e.audioDisabled_)return"updateend"===r&&(e[n+"Buffer_"].updating=!1),t.every((function(t){return!("audio"!==t||!e.audioDisabled_)||(n===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating)}))?e.trigger(r):void 0}))}))}}))}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:Ed(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil(9e4*(t-i)),o=Math.ceil(9e4*(n-i)),a=e.slice(),s=e.length;s--&&!(e[s].pts<=o););if(-1===s)return a;for(var l=s+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),a.splice(l,s-l+1),a}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),Zu(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)Zu(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce((function(e,t){var n=t.type,i=t.data,r=t.initSegment;return e[n].segments.push(i),e[n].bytes+=i.byteLength,e[n].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e}),e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),td(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,i=void 0;if(e.bytes){i=new Uint8Array(e.bytes),e.segments.forEach((function(e){i.set(e,n),n+=e.byteLength}));try{t.updating=!0,t.appendBuffer(i)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"dispose",value:function(){this.transmuxer_&&this.transmuxer_.terminate(),this.trigger("dispose"),this.off()}}]),t}(io.EventTarget),Sd=function(n){function i(){eu(this,i);var n=ru(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),r=void 0;for(r in n.nativeMediaSource_=new e.MediaSource,n.nativeMediaSource_)r in i.prototype||"function"!=typeof n.nativeMediaSource_[r]||(n[r]=n.nativeMediaSource_[r].bind(n.nativeMediaSource_));return n.duration_=NaN,Object.defineProperty(n,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){this.duration_=e,e===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(n,"seekable",{get:function(){return this.duration_===1/0?io.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(n,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(n,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),n.sourceBuffers=[],n.activeSourceBuffers_=[],n.updateActiveSourceBuffers_=function(){if(n.activeSourceBuffers_.length=0,1===n.sourceBuffers.length){var e=n.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void n.activeSourceBuffers_.push(e)}for(var t=!1,i=!0,r=0;r<n.player_.audioTracks().length;r++){var o=n.player_.audioTracks()[r];if(o.enabled&&"main"!==o.kind){t=!0,i=!1;break}}n.sourceBuffers.forEach((function(e,r){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,i=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=r?i:!i,e.audioDisabled_))return;n.activeSourceBuffers_.push(e)}))},n.onPlayerMediachange_=function(){n.sourceBuffers.forEach((function(e){e.appendAudioInitSegment_=!0}))},n.onHlsReset_=function(){n.sourceBuffers.forEach((function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})}))},n.onHlsSegmentTimeMapping_=function(e){n.sourceBuffers.forEach((function(t){return t.timeMapping_=e.mapping}))},["sourceopen","sourceclose","sourceended"].forEach((function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))}),n),n.on("sourceopen",(function(e){var i=t.querySelector('[src="'+n.url_+'"]');i&&(n.player_=io(i.parentNode),n.player_&&(n.player_.tech_.on("hls-reset",n.onHlsReset_),n.player_.tech_.on("hls-segment-time-mapping",n.onHlsSegmentTimeMapping_),n.player_.audioTracks&&n.player_.audioTracks()&&(n.player_.audioTracks().on("change",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("addtrack",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("removetrack",n.updateActiveSourceBuffers_)),n.player_.on("mediachange",n.onPlayerMediachange_)))})),n.on("sourceended",(function(e){for(var t=ed(n.duration),i=0;i<n.sourceBuffers.length;i++){var r=n.sourceBuffers[i],o=r.metadataTrack_&&r.metadataTrack_.cues;o&&o.length&&(o[o.length-1].endTime=t)}})),n.on("sourceclose",(function(e){this.sourceBuffers.forEach((function(e){e.transmuxer_&&e.transmuxer_.terminate()})),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})),n}return iu(i,n),tu(i,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=vd(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=n.parameters.codecs.split(","),i=(i=fd(i)).filter((function(e){return _d(e)||bd(e)}))),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),t=new Cd(this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}},{key:"dispose",value:function(){this.trigger("dispose"),this.off(),this.sourceBuffers.forEach((function(e){e.dispose&&e.dispose()})),this.sourceBuffers.length=0}}]),i}(io.EventTarget),wd=0;io.mediaSources={};var Ad=function(e,t){var n=io.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},kd=function(){return!!e.MediaSource&&!!e.MediaSource.isTypeSupported&&e.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Pd=function(){if(this.MediaSource={open:Ad,supportsNativeMediaSources:kd},kd())return new Sd;throw new Error("Cannot use create a virtual MediaSource for this video")};Pd.open=Ad,Pd.supportsNativeMediaSources=kd;var Id={createObjectURL:function(t){var n=void 0;return t instanceof Sd?(n=e.URL.createObjectURL(t.nativeMediaSource_),t.url_=n,n):t instanceof Sd?(n="blob:vjs-media-source/"+wd,wd++,io.mediaSources[n]=t,n):(n=e.URL.createObjectURL(t),t.url_=n,n)}};io.MediaSource=Pd,io.URL=Id;var Ld=io.EventTarget,Md=io.mergeOptions,Rd=function(e,t){for(var n=void 0,i=Md(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0;r<t.playlists.length;r++){var o=du(i,t.playlists[r]);o?i=o:n=!0}return uu(t,(function(e,t,r,o){if(e.playlists&&e.playlists.length){var a=e.playlists[0].id,s=du(i,e.playlists[0]);s&&((i=s).mediaGroups[t][r][o].playlists[0]=i.playlists[a],n=!1)}})),n?null:i},Dd=function(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t},xd=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Od=function(e,t){var n={};for(var i in e){var r=e[i].sidx;if(r){var o=Dd(r);if(!t[o])break;var a=t[o].sidxInfo;xd(a,r)&&(n[o]=t[o])}}return n},Nd=function(e,t,n,i,r){var o={uri:Zl(i.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return n(io.mergeOptions(o,{responseType:"arraybuffer",headers:Ou(o)}),r)},Bd=function(t){function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];eu(this,n);var o=ru(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),a=i.withCredentials,s=void 0!==a&&a,l=i.handleManifestRedirects,u=void 0!==l&&l;if(o.hls_=t,o.withCredentials=s,o.handleManifestRedirects=u,!e)throw new Error("A non-empty playlist URL or playlist is required");return o.on("minimumUpdatePeriod",(function(){o.refreshXml_()})),o.on("mediaupdatetimeout",(function(){o.refreshMedia_(o.media().id)})),o.state="HAVE_NOTHING",o.loadedPlaylists_={},"string"==typeof e?(o.srcUrl=e,o.sidxMapping_={},ru(o)):(o.setupChildLoader(r,e),o)}return iu(n,t),tu(n,[{key:"setupChildLoader",value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},e.clearTimeout(this.minimumUpdatePeriodTimeout_),e.clearTimeout(this.mediaRequest_),e.clearTimeout(this.mediaUpdateTimeout),this.off()}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"sidxRequestFinished_",value:function(e,t,n,i){var r=this;return function(o,a){if(r.request){if(r.request=null,o)return r.error={status:a.status,message:"DASH playlist request error at URL: "+e.uri,response:a.response,code:2},n&&(r.state=n),r.trigger("error"),i(t,null);var s=new Uint8Array(a.response),l=Gs.parseSidx(s.subarray(8));return i(t,l)}}}},{key:"media",value:function(t){var n=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}var r=!this.media_||t.id!==this.media_.id;if(r&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r)if(this.media_&&this.trigger("mediachanging"),t.sidx){var o=void 0,a=void 0;this.masterPlaylistLoader_?(o=this.masterPlaylistLoader_.master,a=this.masterPlaylistLoader_.sidxMapping_):(o=this.master,a=this.sidxMapping_);var s=Dd(t.sidx);a[s]={sidxInfo:t.sidx},this.request=Nd(t.sidx,t,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(t,o,i,(function(e,r){if(!e||!r)throw new Error("failed to request sidx");a[s].sidx=r,n.haveMetadata({startingState:i,playlist:e.playlists[t.id]})})))}else this.mediaRequest_=e.setTimeout(this.haveMetadata.bind(this,{startingState:i,playlist:t}),0)}},{key:"haveMetadata",value:function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(t){var n=this;e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.media();if(t){var r=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.setTimeout((function(){return n.load()}),r)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var e=Ls(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++){var n="placeholder-uri-"+t;e.playlists[t].uri=n}return uu(e,(function(t,n,i,r){if(t.playlists&&t.playlists.length){var o="placeholder-uri-"+n+"-"+i+"-"+r,a=cu(0,o);t.playlists[0].uri=o,t.playlists[0].id=a,e.playlists[a]=t.playlists[0],e.playlists[o]=t.playlists[0]}})),pu(e),hu(e),e}},{key:"start",value:function(){var t=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=e.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(e,n){if(t.request){if(t.request=null,e)return t.error={status:n.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?t.masterLoaded_=Date.parse(n.responseHeaders.date):t.masterLoaded_=Date.now(),t.srcUrl=Zl(t.handleManifestRedirects,t.srcUrl,n),t.syncClientServerClock_(t.onClientServerClockSync_.bind(t))}}))}},{key:"syncClientServerClock_",value:function(e){var t=this,n=Ms(this.masterXml_);return null===n?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.clientOffset_=n.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:Jl(this.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(i,r){if(t.request){if(i)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var o=void 0;o="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.clientOffset_=o-Date.now(),e()}})))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var t=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=e.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var t=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(t.request){if(t.request=null,n)return t.error={status:i.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=i.responseText,t.sidxMapping_=function(e,t,n,i){var r=Ls(e,{manifestUri:t,clientOffset:n}),o=Od(r.playlists,i);return uu(r,(function(e,t,n,r){if(e.playlists&&e.playlists.length){var a=e.playlists;o=Md(o,Od(a,i))}})),o}(t.masterXml_,t.srcUrl,t.clientOffset_,t.sidxMapping_);var r=t.parseMasterXml(),o=Rd(t.master,r),a=t.media().sidx;if(o)if(a){var s=Dd(a);if(!t.sidxMapping_[s]){var l=t.media();t.request=Nd(l.sidx,l,t.hls_.xhr,{handleManifestRedirects:t.handleManifestRedirects},t.sidxRequestFinished_(l,r,t.state,(function(n,i){if(!n||!i)throw new Error("failed to request sidx on minimumUpdatePeriod");t.sidxMapping_[s].sidx=i,t.minimumUpdatePeriodTimeout_=e.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),t.master.minimumUpdatePeriod),t.refreshMedia_(t.media().id)})))}}else t.master=o;t.minimumUpdatePeriodTimeout_=e.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),t.master.minimumUpdatePeriod)}}))}},{key:"refreshMedia_",value:function(t){var n=this;if(!t)throw new Error("refreshMedia_ must take a media id");var i=void 0,r=void 0;this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,r=this.masterPlaylistLoader_.parseMasterXml()):(i=this.master,r=this.parseMasterXml());var o=Rd(i,r);o?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=o:this.master=o,this.media_=o.playlists[t]):(this.media_=r.playlists[t],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=e.setTimeout((function(){n.trigger("mediaupdatetimeout")}),fu(this.media(),!!o))),this.trigger("loadedplaylist")}}]),n}(Ld),Ud=function(e){return io.log.debug?io.log.debug.bind(io,"VHS:",e+" >"):function(){}};function Fd(){}var jd=function(){function e(t,n,i,r){eu(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=i,this.mimeType_=n,this.logger_=Ud("SourceUpdater["+i+"]["+n+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,n,r)):this.createSourceBuffer_(n,r)}return tu(e,[{key:"createSourceBuffer_",value:function(e,t){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",(function(){n.start_()})):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.sourceBuffer_.removing=!1,e.logger_("buffered ["+$u(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_((function(){t.sourceBuffer_.abort()}),e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_((function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),n.sourceBuffer_.appendBuffer(e.bytes)}),(function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()}))}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:io.createTimeRanges()}},{key:"remove",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fd;this.processedAppend_&&this.queueCallback_((function(){n.logger_("remove ["+e+" => "+t+"]"),n.sourceBuffer_.removing=!0,n.sourceBuffer_.remove(e,t)}),i)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Fd}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_((function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()})),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){var e=this,t=function t(){e.sourceBuffer_&&"open"===e.mediaSource.readyState&&e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener("updateend",t)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",t):t()}}]),e}(),qd={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Vd=2,Hd=-101,Wd=-102,Gd=function(e){e.forEach((function(e){e.abort()}))},zd=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Hd,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Wd,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Vd,xhr:t}:null},Kd=function(e,t,n){var i=0,r=!1;return function(o,a){if(!r)return o?(r=!0,Gd(e),n(o,a)):(i+=1)===e.length?(a.endOfAllRequests=Date.now(),a.encryptedBytes?function(e,t,n){e.addEventListener("message",(function i(r){if(r.data.source===t.requestId){e.removeEventListener("message",i);var o=r.data.decrypted;return t.bytes=new Uint8Array(o.bytes,o.byteOffset,o.byteLength),n(null,t)}}));var i=void 0;i=t.key.bytes.slice?t.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.key.bytes)),e.postMessage(Fu({source:t.requestId,encrypted:t.encryptedBytes,key:i,iv:t.key.iv}),[t.encryptedBytes.buffer,i.buffer])}(t,a,n):n(null,a)):void 0}},Yd=function(e,t){return function(n){var i,r,o;return e.stats=io.mergeOptions(e.stats,(r=(i=n).target,(o={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0}).bytesReceived=i.loaded,o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3),o)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)}},Qd=function(e,t,n,i,r,o,a){var s=[],l=Kd(s,n,a);if(r.key&&!r.key.bytes){var u=io.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),d=function(e,t){return function(n,i){var r=i.response,o=zd(n,i);if(o)return t(o,e);if(16!==r.byteLength)return t({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:Vd,xhr:i},e);var a=new DataView(r);return e.key.bytes=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]),t(null,e)}}(r,l),c=e(u,d);s.push(c)}if(r.map&&!r.map.bytes){var p=io.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Ou(r.map)}),h=function(e,t,n){return function(i,r){var o=r.response,a=zd(i,r);return a?n(a,e):0===o.byteLength?n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Vd,xhr:r},e):(e.map.bytes=new Uint8Array(r.response),t&&!t.isInitialized()&&t.init(),e.map.timescales=Ys.timescale(e.map.bytes),e.map.videoTrackIds=Ys.videoTrackIds(e.map.bytes),n(null,e))}}(r,i,l),f=e(p,h);s.push(f)}var g=io.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Ou(r)}),m=function(e,t,n){return function(i,r){var o=r.response,a=zd(i,r),s=void 0;return a?n(a,e):0===o.byteLength?n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Vd,xhr:r},e):(e.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),e.key?e.encryptedBytes=new Uint8Array(r.response):e.bytes=new Uint8Array(r.response),t&&e.map&&e.map.bytes&&(t.isInitialized()||t.init(),(s=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&&s.captions&&(e.captionStreams=s.captionStreams,e.fmp4Captions=s.captions)),n(null,e))}}(r,i,l),y=e(g,m);return y.addEventListener("progress",Yd(r,o)),s.push(y),function(){return Gd(s)}},Xd=function(t,n){var i;return t&&(i=e.getComputedStyle(t))?i[n]:""},$d=function(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},Jd=function(t,n){var i=void 0,r=void 0;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||e.Number.MAX_VALUE,n.attributes.BANDWIDTH&&(r=n.attributes.BANDWIDTH),i-(r=r||e.Number.MAX_VALUE)},Zd=function(e,t,n){if(!e||!t)return!1;var i=n===e.segments.length;return e.endList&&"open"===t.readyState&&i},ec=function(e){return"number"==typeof e&&isFinite(e)},tc=function(t){function n(e){eu(this,n);var t=ru(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},"main"===t.loaderType_?t.captionParser_=new pl:t.captionParser_=null,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.triggerSyncInfoUpdate_=function(){return t.trigger("syncinfoupdate")},t.syncController_.on("syncinfoupdate",t.triggerSyncInfoUpdate_),t.mediaSource_.addEventListener("sourceopen",(function(){return t.ended_=!1})),t.fetchAtBuffer_=!1,t.logger_=Ud("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}return iu(n,t),tu(n,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset(),this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():io.createTimeRanges()}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=ju(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),i||e}},{key:"segmentKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=qu(e),i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new jd(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===e.uri){var o=e.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex&&(this.mediaIndex-=o),i&&(i.mediaIndex-=o,i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,1/0,e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,n){if(t===1/0&&(t=this.duration_()),this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,n),Zu(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)Zu(e,t,this.inbandTextTracks_[i])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"isEndOfStream_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.playlist_;return Zd(t,this.mediaSource_,e)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(e,t,n,i,r,o){var a=0,s=void 0;e.length&&(a=e.end(e.length-1));var l=Math.max(0,a-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!i&&l>=1)return null;if(null===o)return n=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,n,null,!0);if(null!==n){t.segments[n];return s=a,this.generateSegmentInfo_(t,n+1,s,!1)}if(this.fetchAtBuffer_){var u=Mu.getMediaInfoForTime(t,a,o.segmentIndex,o.time);n=u.mediaIndex,s=u.startTime}else{var d=Mu.getMediaInfoForTime(t,r,o.segmentIndex,o.time);n=d.mediaIndex,s=d.startTime}return this.generateSegmentInfo_(t,n,s,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===t.currentTimeline_}));return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,n,i){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:i,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=Mu.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=o)return!1;var a=function(e){var t=e.master,n=e.currentTime,i=e.bandwidth,r=e.duration,o=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,l=e.syncController,u=t.playlists.filter((function(e){return!Mu.isIncompatible(e)})),d=u.filter(Mu.isEnabled);d.length||(d=u.filter((function(e){return!Mu.isDisabled(e)})));var c=d.filter(Mu.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=l.getSyncPoint(e,r,s,n)?1:2;return{playlist:e,rebufferingImpact:Mu.estimateSegmentRequestTime(o,i,e)*t-a}})),p=c.filter((function(e){return e.rebufferingImpact<=0}));return $d(p,(function(e,t){return Jd(t.playlist,e.playlist)})),p.length?p[0]:($d(c,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),c[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(a){var s=r-o-a.rebufferingImpact,l=.5;return o<=zu&&(l=1),!a.playlist||a.playlist.uri===this.playlist_.uri||s<l?!1:(this.bandwidth=a.playlist.attributes.BANDWIDTH*qd.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Qd(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=function(e,t,n){var i=t-30;e.length&&(i=Math.max(i,e.start(0)));var r=t-n;return Math.min(r,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=i}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Wd?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Hd?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(!function(e,t,n){for(var i in n)if(!e[i]){t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(i);e[i]=r||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var r=window.WebKitDataCue||window.VTTCue;n.forEach((function(e){var n=e.stream,o=e.startTime,a=e.endTime;t[n]&&(o+=i,a+=i,t[n].addCue(new r(o,a,e.text)))}))}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,n=t.segment,i=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&i&&(i.containsAudio||i.containsVideo)&&(this.startingMedia_={containsAudio:i.containsAudio,containsVideo:i.containsVideo});var r,o,a,s=(r=this.loaderType_,o=this.startingMedia_,a=i,"main"===r&&o&&a?a.containsAudio||a.containsVideo?o.containsVideo&&!a.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!o.containsVideo&&a.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(s)return this.error({message:s,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(i&&i.segmentTimestampInfo){var l=i.segmentTimestampInfo[0].ptsTime,u=i.segmentTimestampInfo[0].dtsTime;t.timestampOffset-=l-u}this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset")}var d=this.syncController_.mappingForTimeline(t.timeline);if(null!==d&&this.trigger({type:"segmenttimemapping",mapping:d}),this.state="APPENDING",n.map){var c=ju(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==c){var p=this.initSegment(n.map);this.sourceUpdater_.appendBuffer({bytes:p.bytes},(function(){e.activeInitSegmentId_=c}))}}t.byteLength=t.bytes.byteLength,"number"==typeof n.start&&"number"==typeof n.end?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration,this.logger_(function(e){var t=e.segment,n=t.start,i=t.end,r=e.playlist,o=r.mediaSequence,a=r.id,s=r.segments,l=void 0===s?[]:s,u=e.mediaIndex,d=e.timeline;return["appending ["+u+"] of ["+o+", "+(o+l.length)+"] from playlist ["+a+"]","["+n+" => "+i+"] in timeline ["+d+"]"].join(" ")}(t)),this.sourceUpdater_.appendBuffer({bytes:t.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment;n.videoTimingInfo||(n.videoTimingInfo={}),n.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,n.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,n.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,n.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(t){if(this.segmentMetadataTrack_){var n=t.segment,i=n.start,r=n.end;if(ec(i)&&ec(r)){Zu(i,r,this.segmentMetadataTrack_);var o=e.WebKitDataCue||e.VTTCue,a={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:r},s=new o(i,r,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),n}(io.EventTarget),nc=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},ic=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),rc=function(t){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eu(this,n);var i=ru(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return i.mediaSource_=null,i.subtitlesTrack_=null,i.featuresNativeTextTracks_=e.featuresNativeTextTracks,i}return iu(n,t),tu(n,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return io.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return io.createTimeRanges([[t,n]])}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=ju(e),i=this.initSegments_[n];if(t&&!i&&e.bytes){var r=ic.byteLength+e.bytes.byteLength,o=new Uint8Array(r);o.set(e.bytes),o.set(ic,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return i||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){Zu(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var n=this.pendingSegment_,i=n.segment;if("function"!=typeof e.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=void 0,o=function(){t.subtitlesTrack_.tech_.off("vttjsloaded",r),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")};return r=function(){t.subtitlesTrack_.tech_.off("vttjserror",o),t.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",r),void this.subtitlesTrack_.tech_.one("vttjserror",o)}i.requested=!0;try{this.parseVTTCues_(n)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,n.cues.length&&this.remove(n.cues[0].endTime,n.cues[n.cues.length-1].endTime),n.cues.forEach((function(n){t.subtitlesTrack_.addCue(t.featuresNativeTextTracks_?new e.VTTCue(n.startTime,n.endTime,n.text):n)})),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var n=void 0,i=!1;"function"==typeof e.TextDecoder?n=new e.TextDecoder("utf8"):(n=e.WebVTT.StringDecoder(),i=!0);var r=new e.WebVTT.Parser(e,e.vttjs,n);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=t.cues.push.bind(t.cues),r.ontimestampmap=function(e){return t.timestampmap=e},r.onparsingerror=function(e){io.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var o=t.segment.map.bytes;i&&(o=nc(o)),r.parse(o)}var a=t.bytes;i&&(a=nc(a)),r.parse(a),r.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,o=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=o,e.endTime+=o})),!n.syncInfo){var a=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(a,s-i.duration)}}}else i.empty=!0}}]),n}(tc),oc=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},ac=ql,sc=[{name:"VOD",run:function(e,t,n,i,r){if(n!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!e.datetimeToDisplayTime)return null;var o=t.segments||[],a=null,s=null;r=r||0;for(var l=0;l<o.length;l++){var u=o[l];if(u.dateTimeObject){var d=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,c=Math.abs(r-d);if(null!==s&&(0===c||s<c))break;s=c,a={time:d,segmentIndex:l}}}return a}},{name:"Segment",run:function(e,t,n,i,r){var o=t.segments||[],a=null,s=null;r=r||0;for(var l=0;l<o.length;l++){var u=o[l];if(u.timeline===i&&void 0!==u.start){var d=Math.abs(r-u.start);if(null!==s&&s<d)break;(!a||null===s||s>=d)&&(s=d,a={time:u.start,segmentIndex:l})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,r){var o=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var a=null,s=0;s<t.discontinuityStarts.length;s++){var l=t.discontinuityStarts[s],u=t.discontinuitySequence+s+1,d=e.discontinuities[u];if(d){var c=Math.abs(r-d.time);if(null!==a&&a<c)break;(!o||null===a||a>=c)&&(a=c,o={time:d.time,segmentIndex:l})}}return o}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],lc=function(e){function t(){eu(this,t);var e=ru(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Ud("SyncController"),e}return iu(t,e),tu(t,[{key:"getSyncPoint",value:function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+_u(e,i.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,n,i){for(var r=[],o=0;o<sc.length;o++){var a=sc[o],s=a.run(this,e,t,n,i);s&&(s.strategy=a.name,r.push({strategy:a.name,syncPoint:s}))}return r}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,o=1;o<e.length;o++){var a=Math.abs(e[o].syncPoint[t.key]-t.value);a<i&&(i=a,n=e[o].syncPoint,r=e[o].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;n>=0;n--){var i=e.segments[n];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,n=e.playlist,i=void 0;return(i=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,i)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:t.start})),i}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=Ys.timescale(t.map.bytes),i=Ys.compositionStartTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=i),{start:i,end:i+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=ac(e.bytes,this.inspectCache_),n=void 0,i=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,i=t.video[1].dtsTime,r=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,i=t.audio[1].dtsTime,r=t.audio),{segmentTimestampInfo:r,start:n,end:i,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)i={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=i,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+i.time+"] [mapping: "+i.mapping+"]"),n.start=e.startOfSegment,n.end=t.end+i.mapping;else{if(!i)return!1;n.start=t.start+i.mapping,n.end=t.end+i.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],o=t.discontinuitySequence+i+1,a=r-e.mediaIndex,s=Math.abs(a);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>s){var l=void 0;l=a<0?n.start-_u(t,e.mediaIndex,r):n.end+_u(t,e.mediaIndex+1,r),this.discontinuities[o]={time:l,accuracy:s}}}}},{key:"dispose",value:function(){this.trigger("dispose"),this.off()}}]),t}(io.EventTarget),uc=new sd("./decrypter-worker.worker.js",(function(e,t){var n=this;!function(){var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=null,r=function(){function t(n){e(this,t),i||(i=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],o=void 0,a=void 0,s=void 0,l=[],u=[],d=void 0,c=void 0,p=void 0,h=void 0,f=void 0;for(o=0;o<256;o++)u[(l[o]=o<<1^283*(o>>7))^o]=o;for(a=s=0;!i[a];a^=d||1,s=u[s]||1)for(p=(p=s^s<<1^s<<2^s<<3^s<<4)>>8^255&p^99,i[a]=p,r[p]=a,f=16843009*l[c=l[d=l[a]]]^65537*c^257*d^16843008*a,h=257*l[p]^16843008*p,o=0;o<4;o++)t[o][a]=h=h<<24^h>>>8,n[o][p]=f=f<<24^f>>>8;for(o=0;o<5;o++)t[o]=t[o].slice(0),n[o]=n[o].slice(0);return e}()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=this._tables[0][4],d=this._tables[1],c=n.length,p=1;if(4!==c&&6!==c&&8!==c)throw new Error("Invalid aes key size");for(s=n.slice(0),l=[],this._key=[s,l],r=c;r<4*c+28;r++)a=s[r-1],(r%c==0||8===c&&r%c==4)&&(a=u[a>>>24]<<24^u[a>>16&255]<<16^u[a>>8&255]<<8^u[255&a],r%c==0&&(a=a<<8^a>>>24^p<<24,p=p<<1^283*(p>>7))),s[r]=s[r-c]^a;for(o=0;r;o++,r--)a=s[3&o?r:r-4],l[o]=r<=4||o<4?a:d[0][u[a>>>24]]^d[1][u[a>>16&255]]^d[2][u[a>>8&255]]^d[3][u[255&a]]}return t.prototype.decrypt=function(e,t,n,i,r,o){var a=this._key[1],s=e^a[0],l=i^a[1],u=n^a[2],d=t^a[3],c=void 0,p=void 0,h=void 0,f=a.length/4-2,g=void 0,m=4,y=this._tables[1],v=y[0],_=y[1],b=y[2],E=y[3],T=y[4];for(g=0;g<f;g++)c=v[s>>>24]^_[l>>16&255]^b[u>>8&255]^E[255&d]^a[m],p=v[l>>>24]^_[u>>16&255]^b[d>>8&255]^E[255&s]^a[m+1],h=v[u>>>24]^_[d>>16&255]^b[s>>8&255]^E[255&l]^a[m+2],d=v[d>>>24]^_[s>>16&255]^b[l>>8&255]^E[255&u]^a[m+3],m+=4,s=c,l=p,u=h;for(g=0;g<4;g++)r[(3&-g)+o]=T[s>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&d]^a[m++],c=s,s=l,l=u,u=d,d=c},t}(),o=function(){function t(){e(this,t),this.listeners={}}return t.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},t.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),o=t.length,a=0;a<o;++a)t[a].apply(this,r)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}))},t}(),a=function(t){function n(){e(this,n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,o));return i.jobs=[],i.delay=1,i.timeout_=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n}(o),s=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},l=function(){function n(t,i,r,o){e(this,n);var l=n.STEP,u=new Int32Array(t.buffer),d=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(u.subarray(c,c+l),i,r,d)),c=l;c<u.length;c+=l)r=new Uint32Array([s(u[c-4]),s(u[c-3]),s(u[c-2]),s(u[c-1])]),this.asyncStream_.push(this.decryptChunk_(u.subarray(c,c+l),i,r,d));this.asyncStream_.push((function(){var e;o(null,(e=d).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return n.prototype.decryptChunk_=function(e,t,n,i){return function(){var o=function(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),o=new r(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),l=new Int32Array(a.buffer),u=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0;for(u=n[0],d=n[1],c=n[2],p=n[3],y=0;y<i.length;y+=4)h=s(i[y]),f=s(i[y+1]),g=s(i[y+2]),m=s(i[y+3]),o.decrypt(h,f,g,m,l,y),l[y]=s(l[y]^u),l[y+1]=s(l[y+1]^d),l[y+2]=s(l[y+2]^c),l[y+3]=s(l[y+3]^p),u=h,d=f,c=g,p=m;return a}(e,t,n);i.set(o,e.byteOffset)}},t(n,null,[{key:"STEP",get:function(){return 32e3}}]),n}(),u=new function(e){e.onmessage=function(t){var n=t.data,i=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),r=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),o=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new l(i,r,o,(function(t,i){var r,o;e.postMessage((r={source:n.source,decrypted:i},o={},Object.keys(r).forEach((function(e){var t=r[e];ArrayBuffer.isView(t)?o[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:o[e]=t})),o),[i.buffer])}))}}(n)}()})),dc=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},cc=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},pc=function(e,t){t.activePlaylistLoader=e,e.load()},hc={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;cc(n,i);var o=i.activeTrack(),a=i.activeGroup(),s=(a.filter((function(e){return e.default}))[0]||a[0]).id,l=i.tracks[s];if(o!==l){for(var u in io.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[u].enabled=i.tracks[u]===l;i.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];io.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),cc(n,i);var r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}}},fc={AUDIO:function(e,t,n){if(t){var i=n.tech,r=n.requestOptions,o=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),r),i.paused()||o.load()})),t.on("error",hc[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,o=n.segmentLoaders[e],a=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,r),o.track(a.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),r),i.paused()||o.load()})),t.on("error",hc[e](e,n))}},gc={AUDIO:function(e,t){var n=t.hls,i=t.sourceType,r=t.segmentLoaders[e],o=t.requestOptions,a=t.master.mediaGroups,s=t.mediaTypes[e],l=s.groups,u=s.tracks,d=t.masterPlaylistLoader;for(var c in a[e]&&0!==Object.keys(a[e]).length||(a[e]={main:{default:{default:!0}}}),a[e])for(var p in l[c]||(l[c]=[]),a[e][c]){var h=a[e][c][p],f=void 0;if(f=h.resolvedUri?new gu(h.resolvedUri,n,o):h.playlists&&"dash"===i?new Bd(h.playlists[0],n,o,d):null,h=io.mergeOptions({id:p,playlistLoader:f},h),fc[e](e,h.playlistLoader,t),l[c].push(h),void 0===u[p]){var g=new io.AudioTrack({id:p,kind:dc(h),enabled:!1,language:h.language,default:h.default,label:p});u[p]=g}}r.on("error",hc[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.hls,r=t.sourceType,o=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,d=l.tracks,c=t.masterPlaylistLoader;for(var p in s[e])for(var h in u[p]||(u[p]=[]),s[e][p])if(!s[e][p][h].forced){var f=s[e][p][h],g=void 0;if("hls"===r?g=new gu(f.resolvedUri,i,a):"dash"===r&&(g=new Bd(f.playlists[0],i,a,c)),f=io.mergeOptions({id:h,playlistLoader:g},f),fc[e](e,f.playlistLoader,t),u[p].push(f),void 0===d[h]){var m=n.addRemoteTextTrack({id:h,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:h},!1).track;d[h]=m}}o.on("error",hc[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],o=r.groups,a=r.tracks;for(var s in i[e])for(var l in o[s]||(o[s]=[]),i[e][s]){var u=i[e][s][l];if(u.instreamId.match(/CC\d/)&&(o[s].push(io.mergeOptions({id:l},u)),void 0===a[l])){var d=n.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track;a[l]=d}}}},mc={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},yc=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){gc[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,r=e.hls;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var i=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,o=i.media();if(!o)return null;var a=null;return o.attributes[e]&&(a=r[o.attributes[e]]),a=a||r.main,void 0===n?a:null===n?null:a.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=mc[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,o=t.mediaTypes[e],a=o.activeTrack(),s=o.activeGroup(a),l=o.activePlaylistLoader;cc(i,o),s&&(s.playlistLoader?(i.resyncLoader(),pc(s.playlistLoader,o)):l&&r.resetEverything())}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,o=t.mediaTypes[e],a=o.activeTrack(),s=o.activeGroup(a),l=o.activePlaylistLoader;cc(i,o),s&&(s.playlistLoader?l!==s.playlistLoader?(i.track&&i.track(a),i.resetEverything(),pc(s.playlistLoader,o)):pc(s.playlistLoader,o):r.resetEverything())}}(n,e)}));var o=t.AUDIO.activeGroup(),a=(o.filter((function(e){return e.default}))[0]||o[0]).id;t.AUDIO.tracks[a].enabled=!0,t.AUDIO.onTrackChanged(),n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))}));var s=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})};for(var l in i.audioTracks().addEventListener("change",s),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){i.audioTracks().removeEventListener("change",s),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[l])},vc=void 0,_c=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],bc=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Ec=function(t){function n(e){eu(this,n);var t,i=ru(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r=e.url,o=e.handleManifestRedirects,a=e.withCredentials,s=e.tech,l=e.bandwidth,u=e.externHls,d=e.useCueTags,c=e.blacklistDuration,p=e.enableLowInitialPlaylist,h=e.cacheEncryptionKeys,f=e.sourceType;if(!r)throw new Error("A non-empty playlist URL is required");vc=u,i.withCredentials=a,i.tech_=s,i.hls_=s.hls,i.sourceType_=f,i.useCueTags_=d,i.blacklistDuration=c,i.enableLowInitialPlaylist=p,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:a,handleManifestRedirects:o,timeout:null},i.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Fd,activeTrack:Fd,onGroupChanged:Fd,onTrackChanged:Fd}})),t),i.mediaSource=new io.MediaSource,i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_.bind(i)),i.seekable_=io.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new lc(e),i.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new uc,i.inbandTextTracks_={};var g={hls:i.hls_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.mediaSource.duration},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:l,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:h};return i.masterPlaylistLoader_="dash"===i.sourceType_?new Bd(r,i.hls_,i.requestOptions_):new gu(r,i.hls_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new tc(io.mergeOptions(g,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),e),i.audioSegmentLoader_=new tc(io.mergeOptions(g,{loaderType:"audio"}),e),i.subtitleSegmentLoader_=new rc(io.mergeOptions(g,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),e),i.setupSegmentLoaderListeners_(),_c.forEach((function(e){i[e+"_"]=bc.bind(i,e)})),i.logger_=Ud("MPC"),i.masterPlaylistLoader_.load(),i}return iu(n,t),tu(n,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Lu(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),yc({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return io.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var n=void 0;return e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),e.initialMedia_=n,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var i=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};if(e.duration()!==1/0){e.tech_.one("durationchange",(function t(){e.duration()===1/0?i():e.tech_.one("durationchange",t)}))}else i()}})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Lu(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var o in n.AUDIO)for(var a in n.AUDIO[o]){n.AUDIO[o][a].uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),vc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),vc.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist(),n=e.masterPlaylistLoader_.media(),i=e.tech_.buffered();(function(e){var t=e.currentPlaylist,n=e.nextPlaylist,i=e.forwardBuffer,r=e.bufferLowWaterLine,o=e.duration;return e.log,n?!t.endList||o<qd.MAX_BUFFER_LOW_WATER_LINE||n.attributes.BANDWIDTH<t.attributes.BANDWIDTH||i>=r:(io.log.warn("We received no playlist to switch to. Please check your stream."),!1)})({currentPlaylist:n,nextPlaylist:t,forwardBuffer:i.length?i.end(i.length-1)-e.tech_.currentTime():0,bufferLowWaterLine:e.bufferLowWaterLine(),duration:e.duration(),log:e.logger_})&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("ended",(function(){e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)})),this.mainSegmentLoader_.on("reseteverything",(function(){e.tech_.trigger("hls-reset")})),this.mainSegmentLoader_.on("segmenttimemapping",(function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})})),this.audioSegmentLoader_.on("ended",(function(){e.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything((function(){io.browser.IE_VERSION||io.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())})))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(io.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return io.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){io.log.warn("Failed to call media source endOfStream",e)}}}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=vc.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=Ku;var o=r.end(r.length-1);return o-i<=Ku&&n-o<=Ku}},{key:"blacklistCurrentPlaylist",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=void 0,i=void 0;if(n=e.playlist||this.masterPlaylistLoader_.media(),t=t||e.blacklistDuration||this.blacklistDuration,!n){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(Pu).length,o=this.masterPlaylistLoader_.master.playlists;return 1===o.length?(io.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r)):(r&&(io.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),o.forEach((function(e){e.excludeUntil!==1/0&&delete e.excludeUntil})),this.tech_.trigger("retryplaylist")),n.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),i=this.selectPlaylist(),io.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(i,r))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Qu(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:vc.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null!==n){var i=this.masterPlaylistLoader_.master.suggestedPresentationDelay,r=vc.Playlist.seekable(t,n,i);if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.mediaSource.duration)))return;if(0===(e=vc.Playlist.seekable(t,n,i)).length)return}var o=void 0,a=void 0;this.seekable_&&this.seekable_.length&&(o=this.seekable_.end(0),a=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=io.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===o&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+$u(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,n=vc.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered(),r=function t(){e.logger_("Setting duration from "+e.mediaSource.duration+" => "+n);try{e.mediaSource.duration=n}catch(e){io.log.warn("Failed to set media source duration",e)}e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};i.length>0&&(n=Math.max(n,i.end(i.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){var e=this;this.trigger("dispose"),this.decrypter_&&this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var i in n)n[i].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.off(),this.mediaSource.dispose&&this.mediaSource.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=yd(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=e.length>1&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new io.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach((function(t){var n;t.attributes.CODECS&&e.MediaSource&&e.MediaSource.isTypeSupported&&!e.MediaSource.isTypeSupported('video/mp4; codecs="'+(n=t.attributes.CODECS,n.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return fd([e])[0]}))+'"'))&&(t.excludeUntil=1/0)}))}},{key:"excludeIncompatibleVariants_",value:function(e){var t=2,n=null,i=void 0;e.attributes.CODECS&&(i=gd(e.attributes.CODECS),n=i.videoCodec,t=i.codecCount),this.master().playlists.forEach((function(e){var i={codecCount:2,videoCodec:null};e.attributes.CODECS&&(i=gd(e.attributes.CODECS)),i.codecCount!==t&&(e.excludeUntil=1/0),i.videoCodec!==n&&(e.excludeUntil=1/0)}))}},{key:"updateAdCues_",value:function(t){var n=0,i=this.seekable();i.length&&(n=i.start(0)),function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t.segments)for(var r=i,o=void 0,a=0;a<t.segments.length;a++){var s=t.segments[a];if(o||(o=oc(n,r+s.duration/2)),o){if("cueIn"in s){o.endTime=r,o.adEndTime=r,r+=s.duration,o=null;continue}if(r<o.endTime){r+=s.duration;continue}o.endTime+=s.duration}else if("cueOut"in s&&((o=new e.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,o.adEndTime=r+parseFloat(s.cueOut),n.addCue(o)),"cueOutCont"in s){var l=void 0,u=void 0,d=s.cueOutCont.split("/").map(parseFloat),c=ou(d,2);l=c[0],u=c[1],(o=new e.VTTCue(r,r+s.duration,"")).adStartTime=r-l,o.adEndTime=o.adStartTime+u,n.addCue(o)}r+=s.duration}}(t,this.cueTagsTrack_,n)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=qd.GOAL_BUFFER_LENGTH,n=qd.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,qd.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=qd.BUFFER_LOW_WATER_LINE,n=qd.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,qd.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,i)}}]),n}(io.EventTarget),Tc=function e(t,n,i){eu(this,e);var r,o,a,s=t.masterPlaylistController_,l=s[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION;this.width=u.width,this.height=u.height}this.bandwidth=n.attributes.BANDWIDTH,this.id=i,this.enabled=(r=t.playlists,o=n.id,a=l,function(e){var t=r.master.playlists[o],n=ku(t),i=Pu(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(a(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},Cc=["seeking","seeked","pause","playing","error"],Sc=function(){function t(n){var i=this;eu(this,t),this.tech_=n.tech,this.seekable=n.seekable,this.allowSeeksWithinUnsafeLiveWindow=n.allowSeeksWithinUnsafeLiveWindow,this.media=n.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ud("PlaybackWatcher"),this.logger_("initialize");var r=function(){return i.monitorCurrentTime_()},o=function(){return i.techWaiting_()},a=function(){return i.cancelTimer_()},s=function(){return i.fixesBadSeeks_()};this.tech_.on("seekablechanged",s),this.tech_.on("waiting",o),this.tech_.on(Cc,a),this.tech_.on("canplay",r),this.dispose=function(){i.logger_("dispose"),i.tech_.off("seekablechanged",s),i.tech_.off("waiting",o),i.tech_.off(Cc,a),i.tech_.off("canplay",r),i.checkCurrentTimeTimeout_&&e.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}return tu(t,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&e.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=e.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Ku>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),n=void 0;this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1));this.beforeSeekableWindow_(e,t)&&(n=e.start(0)+Ku);return void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+$u(e)+". Seeking to "+n+"."),this.tech_.setCurrentTime(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Qu(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.buffered(),r=Xu(i,t);if(this.videoUnderflow_(r,i,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(r.length>0){var o=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+o+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*o,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.length)return!1;var r=e.end(e.length-1)+Ku,o=!n.endList;return o&&i&&(r=e.end(e.length-1)+3*n.targetDuration),t>r}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-Ku)}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var i=this.gapFromVideoUnderflow_(t,n);if(i)return this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=Xu(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+zu),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=function(e){if(e.length<2)return io.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return io.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),o=n.end(i);if(t-r<4&&t-r>2)return{start:r,end:o}}return null}}]),t}(),wc={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Ac=function e(t,n){var i=0,r=0,o=io.mergeOptions(wc,n);t.ready((function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var a=function(){r&&t.currentTime(r)},s=function(e){null!=e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){if(Date.now()-i<1e3*o.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(o.getSource&&"function"==typeof o.getSource)return i=Date.now(),o.getSource.call(t,s);io.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function e(){t.off("loadedmetadata",a),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(n){u(),e(t,n)}},kc=function(e){Ac(this,e)},Pc={PlaylistLoader:gu,Playlist:Mu,Decrypter:$l,AsyncStream:Yl,decrypt:Xl,utils:Hu,STANDARD_PLAYLIST_SELECTOR:function(){var t=this.useDevicePixelRatio&&e.devicePixelRatio||1;return function(t,n,i,r,o){var a=t.playlists.map((function(t){var n,i;return n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,{bandwidth:t.attributes.BANDWIDTH||e.Number.MAX_VALUE,width:n,height:i,playlist:t}}));$d(a,(function(e,t){return e.bandwidth-t.bandwidth}));var s=(a=a.filter((function(e){return!Mu.isIncompatible(e.playlist)}))).filter((function(e){return Mu.isEnabled(e.playlist)}));s.length||(s=a.filter((function(e){return!Mu.isDisabled(e.playlist)})));var l=s.filter((function(e){return e.bandwidth*qd.BANDWIDTH_VARIANCE<n})),u=l[l.length-1],d=l.filter((function(e){return e.bandwidth===u.bandwidth}))[0];if(!1===o){var c=d||s[0]||a[0];return c?c.playlist:null}var p=l.filter((function(e){return e.width&&e.height}));$d(p,(function(e,t){return e.width-t.width}));var h=p.filter((function(e){return e.width===i&&e.height===r}));u=h[h.length-1];var f=h.filter((function(e){return e.bandwidth===u.bandwidth}))[0],g=void 0,m=void 0,y=void 0;f||(m=(g=p.filter((function(e){return e.width>i||e.height>r}))).filter((function(e){return e.width===g[0].width&&e.height===g[0].height})),u=m[m.length-1],y=m.filter((function(e){return e.bandwidth===u.bandwidth}))[0]);var v=y||f||d||s[0]||a[0];return v?v.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Xd(this.tech_.el(),"width"),10)*t,parseInt(Xd(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(Mu.isEnabled);return $d(e,(function(e,t){return Jd(e,t)})),e.filter((function(e){return gd(e.attributes.CODECS).videoCodec}))[0]||null},comparePlaylistBandwidth:Jd,comparePlaylistResolution:function(t,n){var i=void 0,r=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||e.Number.MAX_VALUE,n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(r=n.attributes.RESOLUTION.width),i===(r=r||e.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?t.attributes.BANDWIDTH-n.attributes.BANDWIDTH:i-r},xhr:xu()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(Pc,e,{get:function(){return io.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),qd[e]},set:function(t){io.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?io.log.warn("value of Hls."+e+" must be greater than or equal to 0"):qd[e]=t}})}));var Ic="videojs-vhs",Lc=function(e){if(/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e))return"hls";return/^application\/dash\+xml/i.test(e)?"dash":null},Mc=function(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};Pc.canPlaySource=function(){return io.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Rc=function(e){var t=e.masterPlaylistController_.mainSegmentLoader_,n=e.masterPlaylistController_.audioSegmentLoader_,i=io.players[e.tech_.options_.playerId];if(i.eme){var r=function(e,t,n){if(!e)return e;var i=void 0,r=void 0;if(n.mimeType_)i=t.mimeType_,r=n.mimeType_;else{var o=vd(t.mimeType_),a=o.parameters.codecs.split(","),s=void 0,l=void 0;a.forEach((function(e){e=e.trim(),_d(e)?s=e:bd(e)&&(l=e)})),i=o.type+'; codecs="'+l+'"',r=o.type.replace("video","audio")+'; codecs="'+s+'"'}var u={},d=t.playlist_;for(var c in e)u[c]={audioContentType:r,videoContentType:i},d.contentProtection&&d.contentProtection[c]&&d.contentProtection[c].pssh&&(u[c].pssh=d.contentProtection[c].pssh),"string"==typeof e[c]&&(u[c].url=e[c]);return io.mergeOptions(e,u)}(e.source_.keySystems,t,n);r&&(i.currentSource().keySystems=r,11!==io.browser.IE_VERSION&&i.eme.initializeMediaKeys&&i.eme.initializeMediaKeys())}},Dc=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Ic);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};Pc.supportsNativeHls=function(){var e=t.createElement("video");if(!io.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Pc.supportsNativeDash=!!io.getTech("Html5").isSupported()&&/maybe|probably/i.test(t.createElement("video").canPlayType("application/dash+xml")),Pc.supportsTypeNatively=function(e){return"hls"===e?Pc.supportsNativeHls:"dash"===e&&Pc.supportsNativeDash},Pc.isSupported=function(){return io.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var xc=function(e){function n(e,i,r){eu(this,n);var o=ru(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i,r.hls));if(i.options_&&i.options_.playerId){var a=io(i.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return io.log.warn("player.hls is deprecated. Use player.tech().hls instead."),i.trigger({type:"usage",name:"hls-player-access"}),o},configurable:!0}),a.vhs=o,a.dash=o,o.player_=a}if(o.tech_=i,o.source_=e,o.stats={},o.ignoreNextSeekingEvent_=!1,o.setOptions_(),o.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(o.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return o.on(t,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var n=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement;n&&n.contains(o.tech_.el())&&o.masterPlaylistController_.smoothQualityChange_()})),o.on(o.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),o.on(o.tech_,"error",(function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),o.on(o.tech_,"play",o.play),o}return iu(n,e),tu(n,[{key:"setOptions_",value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Dc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=qd.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===qd.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function(e,t){var n=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Pc,this.options_.sourceType=Lc(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.masterPlaylistController_=new Ec(this.options_),this.playbackWatcher_=new Sc(io.mergeOptions(this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",(function(){io.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Pc.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Pc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){io.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Ju(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Ju(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!window.localStorage)return!1;var t=Dc();t=t?io.mergeOptions(t,e):e;try{window.localStorage.setItem(Ic,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e,t;t=(e=n).playlists,e.representations=function(){return t&&t.master&&t.master.playlists?t.master.playlists.filter((function(e){return!ku(e)})).map((function(t,n){return new Tc(e,t,t.id)})):[]},Rc(n)})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&this.tech_.src(io.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=io.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),Mc(t,n.playlists)})),this.playlists.on("mediachange",(function(){Mc(e.qualityLevels_,e.playlists)})))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,nu(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return Wu({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return Gu({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),n}(io.getComponent("Component")),Oc={name:"videojs-http-streaming",VERSION:"1.13.4",canHandleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=io.mergeOptions(io.options,t);return Oc.canPlayType(e.type,n)},handleSource:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=io.mergeOptions(io.options,n);return t.hls=new xc(e,t,i),t.hls.xhr=xu(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=io.mergeOptions(io.options,t),i=n.hls.overrideNative,r=Lc(e),o=r&&(!Pc.supportsTypeNatively(r)||i);return o?"maybe":""}};return void 0!==io.MediaSource&&void 0!==io.URL||(io.MediaSource=Pd,io.URL=Id),Pd.supportsNativeMediaSources()&&io.getTech("Html5").registerSourceHandler(Oc,0),io.HlsHandler=xc,io.HlsSourceHandler=Oc,io.Hls=Pc,io.use||io.registerComponent("Hls",Pc),io.options.hls=io.options.hls||{},io.registerPlugin?io.registerPlugin("reloadSourceOnError",kc):io.plugin("reloadSourceOnError",kc),io})),function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,(function(e){return r(t[a][1][e]||e)}),d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";var i,r,o,l=function(e){for(var t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t},u=function(e){for(var t=[],n=0;n<e.length;){var i=e[n++];i<128||(i<224?i=(31&i)<<6:(i<240?i=(15&i)<<12:(i=(7&i)<<18,i|=(63&e[n++])<<12),i|=(63&e[n++])<<6),i|=63&e[n++]),t.push(String.fromCharCode(i))}return t.join("")},d={};function c(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var o=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(i.charAt(63&o>>18)),n.push(i.charAt(63&o>>12)),n.push(i.charAt(63&o>>6)),n.push(i.charAt(63&o))}return 2==e.length-t?(o=(e[t]<<16)+(e[t+1]<<8),n.push(i.charAt(63&o>>18)),n.push(i.charAt(63&o>>12)),n.push(i.charAt(63&o>>6)),n.push("=")):1==e.length-t&&(o=e[t]<<16,n.push(i.charAt(63&o>>18)),n.push(i.charAt(63&o>>12)),n.push("==")),n.join("")}function p(e){for(var t=0,n=[],i=0|e.length/4;0<i--;){var o=(r[e.charCodeAt(t)]<<18)+(r[e.charCodeAt(t+1)]<<12)+(r[e.charCodeAt(t+2)]<<6)+r[e.charCodeAt(t+3)];n.push(255&o>>16),n.push(255&o>>8),n.push(255&o),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n}i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(){for(var e=[],t=0;t<i.length;++t)e[i.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),o={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},d.decodeArray=function(e){var t=p(e);return new Uint8Array(t)},d.encodeASCII=function(e){return c(o.encode(e))},d.decodeASCII=function(e){var t=p(e);return o.decode(t)},d.encode=function(e){return c(l(e))},d.decode=function(e){var t=p(e);return u(t)},void 0!==n&&(n.decode=d.decode,n.decodeArray=d.decodeArray,n.encode=d.encode,n.encodeASCII=d.encodeASCII)},{}],2:[function(e,t,n){"use strict";!function(e){function t(e){var t=e;return r.hasOwnProperty(e)&&(t=r[e]),String.fromCharCode(t)}function n(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function i(e,t,n,i,r){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}var r={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},l={25:2,26:4,29:6,30:8,31:10,27:13,28:15},u=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}};function c(e,t,n,r,o,a){this.uchar=e||" ",this.penState=new i(t,n,r,o,a)}function p(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new c);this.pos=0,this.currPenState=new i}function h(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new p);this.currRow=14,this.nrRollUpRows=null,this.reset()}function f(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new h,this.nonDisplayedMemory=new h,this.lastOutputScreen=new h,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function g(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new f(1,t),new f(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}i.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},c.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}},p.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var n=t(e);32<=this.pos?d.log("ERROR","Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},h.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n,i,r=this.rows[this.currRow];null!==e.indent&&(n=e.indent,i=Math.max(n-1,0),r.setCursor(e.indent),e.color=r.chars[i].penState.foreground);var o={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(o)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){var e,t;null!==this.nrRollUpRows?(d.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(t=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")):d.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<15;r++){var o=this.rows[r].getTextString();o&&(i=r+1,e?t.push("Row "+i+': "'+o+'"'):t.push(o.trim()))}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}},f.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){var e;d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t,n={flash:!1};n.underline=e%2==1,n.italics=46<=e,n.italics?n.foreground="white":(t=Math.floor(e/2)-16,n.foreground=["white","green","blue","cyan","red","yellow","magenta"][t]),d.log("INFO","MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}},g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var i,r=!1;this.lastTime=e,d.setTime(e);for(var o=0;o<t.length;o+=2){var a=127&t[o],s=127&t[o+1];16<=a&&a<=31&&a===this.lastCmdA&&s===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+n([a,s])+") is dropped")):0!=a||0!=s?(d.log("DATA","["+n([t[o],t[o+1]])+"] -> ("+n([a,s])+")"),(i=(i=(i=(i=this.parseCmd(a,s))||this.parseMidrow(a,s))||this.parsePAC(a,s))||this.parseBackgroundAttributes(a,s))||(r=this.parseChars(a,s))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(r):d.log("WARNING","No channel found yet. TEXT-MODE?")),i?this.dataCounters.cmd+=2:r?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+n([a,s])+" orig: "+n([t[o],t[o+1]])))):this.dataCounters.padding+=2}},parseCmd:function(e,t){var n;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var i=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?i.cc_RCL():33===t?i.cc_BS():34===t?i.cc_AOF():35===t?i.cc_AON():36===t?i.cc_DER():37===t?i.cc_RU(2):38===t?i.cc_RU(3):39===t?i.cc_RU(4):40===t?i.cc_FON():41===t?i.cc_RDC():42===t?i.cc_TR():43===t?i.cc_RTD():44===t?i.cc_EDM():45===t?i.cc_CR():46===t?i.cc_ENM():47===t&&i.cc_EOC():i.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var i=null;if((17===e||25===e)&&32<=t&&t<=47){if((i=17===e?1:2)!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[i-1];return r.insertChars([32]),r.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+n([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,i;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,i=64<=t&&t<=95?1==n?o[e]:s[e]:1==n?a[e]:l[e];var r=this.interpretPAC(i,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n={color:null,italics:!1,indent:null,underline:!1,row:e},i=95<t?t-96:t-64;return n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},parseChars:function(e,i){var r,o,a,s=null,l=null;return 17<=(a=25<=e?(s=2,e-8):(s=1,e))&&a<=19?(i,r=17===a?i+80:18===a?i+112:i+144,d.log("INFO","Special char '"+t(r)+"' in channel "+s),l=[r],this.lastCmdA=e,this.lastCmdB=i):32<=e&&e<=127&&(l=0===i?[e]:[e,i],this.lastCmdA=null,this.lastCmdB=null),l&&(o=n(l),d.log("DEBUG","Char codes =  "+o.join(","))),l},parseBackgroundAttributes:function(e,t){var n,i,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=u[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=d,e.PenState=i,e.CaptionScreen=h,e.Cea608Parser=g,e.findCea608Nalus=function(e,t,n){for(var i=0,r=t,o=[];r<t+n;){if(i=e.getUint32(r),6==(31&e.getUint8(r+4)))for(var a=r+5,s=-1;a<r+4+i-1;){s=0;for(var l=255;255===l;)s+=l=e.getUint8(a),a++;var u=0;for(l=255;255===l;)u+=l=e.getUint8(a),a++;!function(e,t,n,i){if(4!==e||t<8)return null;var r=n.getUint8(i),o=n.getUint16(i+1),a=n.getUint32(i+3),s=n.getUint8(i+7);return 181==r&&49==o&&1195456820==a&&3==s}(s,u,e,a)||o.push([a,u]),a+=u}r+=i+4}return o},e.extractCea608DataFromRange=function(e,t){var n=t[0],i=[[],[]];n+=8;var r=31&e.getUint8(n);n+=2;for(var o=0;o<r;o++){var a=e.getUint8(n),s=4&a,l=3&a;n++;var u=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&u)+(127&d)!=0&&(0==l?(i[0].push(u),i[0].push(d)):1==l&&(i[1].push(u),i[1].push(d)))}return i}}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1);var t=1,n=3,i=4,r=8,o=9;function a(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function s(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function l(e,t,n,i){for(var r=0;r<e.length;r++){var o=e[r];if("string"==typeof o){if(o==i)break}else if(o instanceof RegExp){if(o.test(i))break}else if("function"==typeof o&&o(t,n,i))break}return r!=e.length}function u(t,n,i){if("property"===e.arrayAccessForm)t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]];!(t[n]instanceof Array)&&0<e.arrayAccessFormPaths.length&&l(e.arrayAccessFormPaths,t,n,i)&&(t[n]=[t[n]])}function d(e){var t,n=e.split(/[-T:+Z]/g),i=new Date(n[0],n[1]-1,n[2]),r=n[5].split(".");return i.setHours(n[3],n[4],r[0]),1<r.length&&i.setMilliseconds(r[1]),n[6]&&n[7]?(t=60*n[6]+Number(n[7]),t=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*t:t),i.setMinutes(i.getMinutes()-t-i.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(i=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()))),i}function c(s,p){if(s.nodeType==o){for(var h=new Object,f=s.childNodes,g=0;g<f.length;g++)(y=f[g]).nodeType==t&&(e.ignoreRoot?h=c(y):(h={})[E=a(y)]=c(y));return h}if(s.nodeType==t){(h=new Object).__cnt=0;var m=[];for(f=s.childNodes,g=0;g<f.length;g++){var y,v,_,b,E=a(y=f[g]);y.nodeType!=r&&(L=h,M=E,R=v=p+"."+E,y.nodeType==t&&0<e.xmlElementsFilter.length&&!l(e.xmlElementsFilter,L,M,R)||(h.__cnt++,null==h[E]?(_=c(y,v),"#text"==E&&!/[^\s]/.test(_)||((b={})[E]=_,m.push(b)),h[E]=_,u(h,E,v)):(null!=h[E]&&(h[E]instanceof Array||(h[E]=[h[E]],u(h,E,v))),_=c(y,v),"#text"==E&&!/[^\s]/.test(_)||((b={})[E]=_,m.push(b)),h[E][h[E].length]=_)))}h.__children=m;for(var T=a(s),C=0;C<s.attributes.length;C++){var S=s.attributes[C];h.__cnt++;for(var w=S.value,A=0,k=e.matchers.length;A<k;A++){var P=e.matchers[A];P.test(S,T)&&(w=P.converter(S.value))}h[e.attributePrefix+S.name]=w}var I=s.prefix;return null!=I&&""!=I&&(h.__cnt++,h.__prefix=I),null!=h["#text"]&&(h.__text=h["#text"],h.__text instanceof Array&&(h.__text=h.__text.join("\n")),e.stripWhitespaces&&(h.__text=h.__text.trim()),delete h["#text"],"property"==e.arrayAccessForm&&delete h["#text_asArray"],h.__text=function(t,n,i){if(0<e.datetimeAccessFormPaths.length){var r=i.split(".#")[0];return l(e.datetimeAccessFormPaths,t,n,r)?d(t):t}return t}(h.__text,E,p+"."+E)),null!=h["#cdata-section"]&&(h.__cdata=h["#cdata-section"],delete h["#cdata-section"],"property"==e.arrayAccessForm&&delete h["#cdata-section_asArray"]),0==h.__cnt&&"text"==e.emptyNodeForm?h="":1==h.__cnt&&null!=h.__text?h=h.__text:1!=h.__cnt||null==h.__cdata||e.keepCData?1<h.__cnt&&null!=h.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==h.__text||""==h.__text.trim())&&delete h.__text:h=h.__cdata,delete h.__cnt,!e.enableToStringFunc||null==h.__text&&null==h.__cdata||(h.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),h}if(s.nodeType==n||s.nodeType==i)return s.nodeValue;var L,M,R}function p(t,n,i,r){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var a=0;a<i.length;a++){var l=i[a],u=t[l];e.escapeMode&&(u=s(u)),o+=" "+l.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+u+'"':o+="'"+u+"'"}return o+(r?"/>":">")}function h(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function f(t,n){return"property"==e.arrayAccessForm&&(r="_asArray",-1!==(i=n.toString()).indexOf(r,i.length-r.length))||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function;var i,r}function g(e){var t=0;if(e instanceof Object)for(var n in e)f(e,n)||t++;return t}function m(t){var n=[];if(t instanceof Object)for(var i in t)-1==i.toString().indexOf("__")&&0==i.toString().indexOf(e.attributePrefix)&&n.push(i);return n}function y(t){var n,i,r="";return t instanceof Object?r+=(i="",null!=(n=t).__cdata&&(i+="<![CDATA["+n.__cdata+"]]>"),null!=n.__text&&(e.escapeMode?i+=s(n.__text):i+=n.__text),i):null!=t&&(e.escapeMode?r+=s(t):r+=t),r}function v(e,t){return""===e?t:e+"."+t}function _(t,n){var i,r,o,a,s,u="";if(0<g(t))for(var d in t)f(t,d)||""!=n&&(o=t,s=v(n,a=d),0!=e.jsonPropertiesFilter.length&&""!=s&&!l(e.jsonPropertiesFilter,o,a,s))||(r=m(i=t[d]),null==i||null==i?u+=p(i,d,r,!0):i instanceof Object?i instanceof Array?u+=function(e,t,n,i){var r="";if(0==e.length)r+=p(e,t,n,!0);else for(var o=0;o<e.length;o++)r+=p(e[o],t,m(e[o]),!1),r+=_(e[o],v(i,t)),r+=h(e[o],t);return r}(i,d,r,n):i instanceof Date?(u+=p(i,d,r,!1),u+=i.toISOString(),u+=h(i,d)):0<g(i)||null!=i.__text||null!=i.__cdata?(u+=p(i,d,r,!1),u+=_(i,v(n,d)),u+=h(i,d)):u+=p(i,d,r,!0):(u+=p(i,d,r,!1),u+=y(i),u+=h(i,d)));return u+y(t)}this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?d(e):e},this.xml2json=function(e){return c(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return _(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},t.exports=n.default},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e(5),o=i(e(125)),a=i(e(162)),s=i(e(102)),l=i(e(45));dashjs.Protection=a.default,dashjs.MetricsReporting=o.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=l.default,n.default=dashjs,n.MediaPlayer=r.MediaPlayer,n.Protection=a.default,n.MetricsReporting=o.default,n.MediaPlayerFactory=s.default,n.Debug=l.default},{102:102,125:125,162:162,45:45,5:5}],5:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(100)),o=i(e(47)),a=i(e(45)),s=e(50),l="undefined"!=typeof window&&window||t,u=l.dashjs;(u=u||(l.dashjs={})).MediaPlayer=r.default,u.FactoryMaker=o.default,u.Debug=a.default,u.Version=(0,s.getVersionString)(),n.default=u,n.MediaPlayer=r.default,n.FactoryMaker=o.default,n.Debug=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{100:100,45:45,47:47,50:50}],6:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=function(e){for(var t,n=u(e),i=n[0],a=n[1],s=new o(function(e,t){return 3*(e+t)/4-t}(i,a)),l=0,d=0<a?i-4:i,c=0;c<d;c+=4)t=r[e.charCodeAt(c)]<<18|r[e.charCodeAt(c+1)]<<12|r[e.charCodeAt(c+2)]<<6|r[e.charCodeAt(c+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;return 2===a&&(t=r[e.charCodeAt(c)]<<2|r[e.charCodeAt(c+1)]>>4,s[l++]=255&t),1===a&&(t=r[e.charCodeAt(c)]<<10|r[e.charCodeAt(c+1)]<<4|r[e.charCodeAt(c+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],a=0,s=n-r;a<s;a+=16383)o.push(function(e,t,n){for(var r,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(function(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}(r));return o.join("")}(e,a,s<a+16383?s:a+16383));return 1==r?(t=e[n-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],7:[function(e,t,n){},{}],8:[function(e,t,n){"use strict";var i=e(6),r=e(13);n.Buffer=s,n.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(o<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,n){if("number"!=typeof e)return l(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),i=a(n),r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=s.prototype,i}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return s.from(i,t,n);var r=function(e){if(s.isBuffer(e)){var t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||R(e.length)?a(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|p(e))}function c(e){for(var t=e.length<0?0:0|p(e.length),n=a(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e){if(o<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(e).length;default:if(r)return i?-1:P(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var r,o,a,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||i<n)&&(n=i);for(var r="",o=t;o<n;++o)r+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return r}(this,t,n);case"utf8":case"utf-8":return b(this,t,n);case"ascii":return function(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}(this,t,n);case"latin1":case"binary":return function(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}(this,t,n);case"base64":return r=this,a=n,0===(o=t)&&a===r.length?i.fromByteArray(r):i.fromByteArray(r.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function g(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function m(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),R(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:y(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,i,r){var o=1,a=e.length,s=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a/=o=2,s/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r)for(var u=-1,d=n;d<a;d++)if(l(e,d)===l(t,-1===u?0:d-u)){if(-1===u&&(u=d),d-u+1===s)return u*o}else-1!==u&&(d-=d-u),u=-1;else for(a<n+s&&(n=a-s),d=n;0<=d;d--){for(var c=!0,p=0;p<s;p++)if(l(e,d+p)!==l(t,p)){c=!1;break}if(c)return d}return-1}function v(e,t,n,i){return L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function _(e,t,n,i){return L(function(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function b(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,a,s,l,u=e[r],d=null,c=239<u?4:223<u?3:191<u?2:1;if(r+c<=n)switch(c){case 1:u<128&&(d=u);break;case 2:128==(192&(o=e[r+1]))&&127<(l=(31&u)<<6|63&o)&&(d=l);break;case 3:o=e[r+1],a=e[r+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(d=l);break;case 4:o=e[r+1],a=e[r+2],s=e[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(d=l)}null===d?(d=65533,c=1):65535<d&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),r+=c}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=E));return n}(i)}n.kMaxLength=o,(s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=l,s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,n){return r=t,o=n,u(i=e),i<=0||void 0===r?a(i):"string"==typeof o?a(i).fill(r,o):a(i).fill(r);var i,r,o},s.allocUnsafe=d,s.allocUnsafeSlow=d,s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(M(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;for(var n=s.allocUnsafe(t),i=0,r=0;r<e.length;++r){var o=e[r];if(M(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):f.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,i,r){if(M(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=t)return 0;if(r<=i)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0),l=Math.min(o,a),u=this.slice(i,r),d=e.slice(t,n),c=0;c<l;++c)if(u[c]!==d[c]){o=u[c],a=d[c];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||r<n)&&(n=r),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var o,a,s,l,u=!1;;)switch(i){case"hex":return function(e,t,n,i){n=Number(n)||0;var r=e.length-n;(!i||r<(i=Number(i)))&&(i=r);var o=t.length;o/2<i&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(R(s))return a;e[n+a]=s}return a}(this,e,t,n);case"utf8":case"utf-8":return s=t,l=n,L(P(e,this.length-s),this,s,l);case"ascii":case"latin1":case"binary":return v(this,e,t,n);case"base64":return this,o=t,a=n,L(I(e),this,o,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),u=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,i,r,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function S(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function w(e,t,n,i,o){return t=+t,n>>>=0,o||S(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function A(e,t,n,i,o){return t=+t,n>>>=0,o||S(e,0,n,8),r.write(e,t,n,i,52,8),n+8}s.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=s.prototype,i},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},s.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*t)),i},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var i=t,r=1,o=this[e+--i];0<i&&(r*=256);)o+=this[e+--i]*r;return(r*=128)<=o&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),r.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),r.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),r.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),r.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||C(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||C(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;0<=--r&&(o*=256);)this[t+r]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,i){var r;e=+e,t>>>=0,i||C(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,i){var r;e=+e,t>>>=0,i||C(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return w(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return w(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return A(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return A(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,i){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),t=t||0,0<i&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var o=r-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return r},s.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var r;1===e.length&&(r=e.charCodeAt(0),("utf8"===i&&r<128||"latin1"===i)&&(e=r))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(o=t;o<n;++o)this[o]=e;else{var a=s.isBuffer(e)?e:s.from(e,i),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%l]}return this};var k=/[^+/0-9A-Za-z-_]/g;function P(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],a=0;a<i;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!r){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===i){-1<(t-=3)&&o.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(t-=3)&&o.push(239,191,189);if(r=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function I(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function M(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function R(e){return e!=e}},{13:13,6:6}],9:[function(e,t,n){var i={parseBuffer:function(e){return new r(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxProcessors[e]=t)},createFile:function(){return new r},createBox:function(e,t,n){var i=o.create(e);return t&&t.append(i,n),i},createFullBox:function(e,t,n){var r=i.createBox(e,t,n);return r.version=0,r.flags=0,r},Utils:{}};i.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var i=[],r=0;if("utf-8"===n)for(;r<e.byteLength;){var o=e.getUint8(r++);o<128||(o<224?o=(31&o)<<6:(o<240?o=(15&o)<<12:(o=(7&o)<<18,o|=(63&e.getUint8(r++))<<12),o|=(63&e.getUint8(r++))<<6),o|=63&e.getUint8(r++)),i.push(String.fromCharCode(o))}else for(;r<e.byteLength;)i.push(String.fromCharCode(e.getUint8(r++)));return i.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var i,r=-1;if("number"==typeof n)r=n;else{if("string"==typeof n)i=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);i=n.type}for(var o=0;o<e.boxes.length;o++)if(i===e.boxes[o].type){r=o+1;break}}e.boxes.splice(r,0,t)}else e.boxes.push(t)},void 0!==n&&(n.parseBuffer=i.parseBuffer,n.addBoxProcessor=i.addBoxProcessor,n.createFile=i.createFile,n.createBox=i.createBox,n.createFullBox=i.createFullBox,n.Utils=i.Utils),i.Cursor=function(e){this.offset=void 0===e?0:e};var r=function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};r.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},r.prototype.fetchAll=function(e,t){var n=[];return r._sweep.call(this,e,n,t),n},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},r._sweep=function(e,t,n){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;r._sweep.call(this.boxes[i],e,t,n)}},r.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},r.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)};var o=function(){this._cursor=new i.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},o.prototype._procFieldArray=function(e,t,n,i){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e][r]=this._readField(n,i);else for(r=0;r<this[e].length;r++)this._writeField(n,i,this[e][r])},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},o.prototype._procEntries=function(e,t,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e].push({}),n.call(this,this[e][i]);else for(i=0;i<t;i++)n.call(this,this[e][i])},o.prototype._procSubEntries=function(e,t,n,i){var r;if(this._parsing)for(e[t]=[],r=0;r<n;r++)e[t].push({}),i.call(this,e[t][r]);else for(r=0;r<n;r++)i.call(this,e[t][r])},o.prototype._procEntryField=function(e,t,n,i){this._parsing?e[t]=this._readField(n,i):this._writeField(n,i,e[t])},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var i=this._raw.getInt32(n),r=this._raw.getInt32(4+n);t=i*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,i=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:i=this._raw.getUint8(r);break;case 16:i=this._raw.getUint16(r);break;case 24:i=((t=this._raw.getUint16(r))<<8)+(n=this._raw.getUint8(2+r));break;case 32:i=this._raw.getUint32(r);break;case 64:t=this._raw.getUint32(r),n=this._raw.getUint32(4+r),i=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,i},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var i=this._readUint(8);t+=String.fromCharCode(i)}return t},o.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},o.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<t){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?i.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this))},o.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var i=Math.floor(t/Math.pow(2,32)),r=t-i*Math.pow(2,32);this._rawo.setUint32(n,i),this._rawo.setUint32(4+n,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var n,i,r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(r,t);break;case 16:this._rawo.setUint16(r,t);break;case 24:n=(16776960&t)>>8,i=255&t,this._rawo.setUint16(r,n),this._rawo.setUint8(2+r,i);break;case 32:this._rawo.setUint32(r,t);break;case 64:i=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,n),this._rawo.setUint32(4+r,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t),i=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,i)},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},o.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},o.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)}))},o.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},o.prototype._boxProcessors.free=o.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},o.prototype._boxProcessors.ftyp=o.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},o.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},o.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},o.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},o.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},o.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},o.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},o.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},o.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},o.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},o.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},o.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)}))},o.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},o.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,(function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)}))}))},o.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,(function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)}))}))},o.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},o.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},o.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},o.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},o.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},o.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},o.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},o.prototype._boxProcessors.vtte=function(){}},{}],10:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e(22)})},{22:22}],11:[function(e,t,n){var i=Object.create||function(e){function t(){}return t.prototype=e,new t},r=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=a).EventEmitter=a).prototype._events=void 0,a.prototype._maxListeners=void 0;var s,l=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),s=0===u.x}catch(e){s=!1}function d(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var o,a,s,l;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=i(null),e._eventsCount=0),a?("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),a.warned||(l=d(e))&&0<l&&a.length>l&&(a.warned=!0,(s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message))):(a=o[t]=n,++e._eventsCount),e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function h(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=o.call(p,i);return r.listener=n,i.wrapFn=r}function f(e,t,n){var i=e._events;if(!i)return[];var r=i[t];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length):[]}function g(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}s?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');l=e}}):a.defaultMaxListeners=l,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(e,t,n,i){var r,o,a,s,l="error"===e,u=this._events;if(u)l=l&&null==u.error;else if(!l)return!1;if(l){if(1<arguments.length&&(r=t),r instanceof Error)throw r;var d=new Error('Unhandled "error" event. ('+r+")");throw d.context=r,d}if(!(o=u[e]))return!1;var c,p="function"==typeof o;switch(c=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var i=e.length,r=m(e,i),o=0;o<i;++o)r[o].call(n)}(o,p,this);break;case 2:!function(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,o=m(e,r),a=0;a<r;++a)o[a].call(n,i)}(o,p,this,t);break;case 3:!function(e,t,n,i,r){if(t)e.call(n,i,r);else for(var o=e.length,a=m(e,o),s=0;s<o;++s)a[s].call(n,i,r)}(o,p,this,t,n);break;case 4:!function(e,t,n,i,r,o){if(t)e.call(n,i,r,o);else for(var a=e.length,s=m(e,a),l=0;l<a;++l)s[l].call(n,i,r,o)}(o,p,this,t,n,i);break;default:for(a=new Array(c-1),s=1;s<c;s++)a[s-1]=arguments[s];!function(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,o=m(e,r),a=0;a<r;++a)o[a].apply(n,i)}(o,p,this,a)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return c(this,e,t,!1)},a.prototype.prependListener=function(e,t){return c(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,o,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=i(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=i(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=i(null):delete n[e]),this;if(0===arguments.length){for(var o,a=r(n),s=0;s<a.length;++s)"removeListener"!==(o=a[s])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(s=t.length-1;0<=s;s--)this.removeListener(e,t[s]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],12:[function(e,t,n){"use strict";var i=Array.isArray,r=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var a,s,l=i(t),u=i(n);if(l&&u){if((f=t.length)!=n.length)return!1;for(a=f;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(l!=u)return!1;var d=t instanceof Date,c=n instanceof Date;if(d!=c)return!1;if(d&&c)return t.getTime()==n.getTime();var p=t instanceof RegExp,h=n instanceof RegExp;if(p!=h)return!1;if(p&&h)return t.toString()==n.toString();var f,g=r(t);if((f=g.length)!==r(n).length)return!1;for(a=f;0!=a--;)if(!o.call(n,g[a]))return!1;for(a=f;0!=a--;)if(!e(t[s=g[a]],n[s]))return!1;return!0}return t!=t&&n!=n}},{}],13:[function(e,t,n){n.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,u=l>>1,d=-7,c=n?r-1:0,p=n?-1:1,h=e[t+c];for(c+=p,o=h&(1<<-d)-1,h>>=-d,d+=s;0<d;o=256*o+e[t+c],c+=p,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=i;0<d;a=256*a+e[t+c],c+=p,d-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,i),o-=u}return(h?-1:1)*a*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var a,s,l,u=8*o-r-1,d=(1<<u)-1,c=d>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+c?p/l:p*Math.pow(2,1-c))*l&&(a++,l/=2),d<=a+c?(s=0,a=d):1<=a+c?(s=(t*l-1)*Math.pow(2,r),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,r),a=0));8<=r;e[n+h]=255&s,h+=f,s/=256,r-=8);for(a=a<<r|s,u+=r;0<u;e[n+h]=255&a,h+=f,a/=256,u-=8);e[n+h-f]|=128*g}},{}],14:[function(e,t,n){function i(e,t,n,r){var o=r&&"seq"===r.timeContainer,a=0;r&&(a=o&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+a:a;var s=t.begin,l=null;for(var u in t.sets)i(e,t.sets[u],l,t),s="seq"===t.timeContainer?t.sets[u].end:Math.max(s,t.sets[u].end),l=t.sets[u];if("contents"in t)for(var d in t.contents)i(e,t.contents[d],l,t),s="seq"===t.timeContainer?t.contents[d].end:Math.max(s,t.contents[d].end),l=t.contents[d];else s=o?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,a+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=a+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function r(e){this.node=e}function o(){this.events=[],this.head=null,this.body=null}function a(){this.styling=null,this.layout=null}function s(){this.styles={}}function l(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function u(){this.regions={}}function d(e){this.kind=e}function c(e){this.id=e}function p(e){this.regionID=e}function h(e){this.styleAttrs=e}function f(e){this.sets=e}function g(e){this.contents=e}function m(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function y(){d.call(this,"body")}function v(){d.call(this,"div")}function _(){d.call(this,"p")}function b(){d.call(this,"span")}function E(){d.call(this,"span")}function T(){d.call(this,"br")}function C(){}function S(){}function w(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function A(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function k(e,t){var n={};if(null!==e)for(var i in e.attributes){var r,o=e.attributes[i].uri+" "+e.attributes[i].local,a=F.byQName[o];void 0!==a&&(null!==(r=a.parse(e.attributes[i].value))?(n[o]=r,a===F.byName.zIndex&&R(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):D(t,"Cannot parse styling attribute "+o+" --\x3e "+e.attributes[i].value))}return n}function P(e,t,n){for(var i in e.attributes)if(e.attributes[i].uri===t&&e.attributes[i].local===n)return e.attributes[i].value;return null}function I(e,t,n){var i,r=null;return null!==(i=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(r=parseFloat(i[1])/t):null!==(i=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(r=parseFloat(i[1])/e):null!==(i=/^(\d+(?:\.\d+)?)ms$/.exec(n))?r=parseFloat(i[1])/1e3:null!==(i=/^(\d+(?:\.\d+)?)s$/.exec(n))?r=parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)h$/.exec(n))?r=3600*parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)m$/.exec(n))?r=60*parseFloat(i[1]):null!==(i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?r=3600*parseInt(i[1])+60*parseInt(i[2])+parseFloat(i[3]):null!==(i=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(r=3600*parseInt(i[1])+60*parseInt(i[2])+parseInt(i[3])+(null===i[4]?0:parseInt(i[4])/t)),r}function L(e,t,n,i){for(var r=t.length-1;0<=r;r--){var o=t[r];o in e.styles?M(e.styles[o].styleAttrs,n):D(i,"Non-existant style id referenced")}}function M(e,t){for(var n in e)n in t||(t[n]=e[n])}function R(e,t){if(e&&e.warn&&e.warn(t))throw t}function D(e,t){if(e&&e.error&&e.error(t))throw t}function x(e,t){throw e&&e.fatal&&e.fatal(t),t}function O(e,t){for(var n,i=0,r=e.length-1;i<=r;){var o=e[n=Math.floor((i+r)/2)];if(o<t)i=n+1;else{if(!(t<o))return{found:!0,index:n};r=n-1}}return{found:!1,index:i}}var N,B,U,F,j;N=void 0===n?this.imscDoc={}:n,B="undefined"==typeof sax?e(40):sax,U="undefined"==typeof imscNames?e(18):imscNames,F="undefined"==typeof imscStyles?e(19):imscStyles,j="undefined"==typeof imscUtils?e(20):imscUtils,N.fromXML=function(e,t,n){var d=B.parser(!0,{xmlns:!0}),c=[],p=[],h=[],f=0,g=null;d.onclosetag=function(e){if(c[0]instanceof s)for(var i in c[0].styles)!function e(t,n,i){for(;0<n.styleRefs.length;){var r=n.styleRefs.pop();r in t.styles?(e(t,t.styles[r],i),M(t.styles[r].styleAttrs,n.styleAttrs)):D(i,"Non-existant style id referenced")}}(c[0],c[0].styles[i],t);else if(c[0]instanceof _||c[0]instanceof b){if(1<c[0].contents.length){for(var o=[c[0].contents[0]],a=1;a<c[0].contents.length;a++)c[0].contents[a]instanceof E&&o[o.length-1]instanceof E?o[o.length-1].text+=c[0].contents[a].text:o.push(c[0].contents[a]);c[0].contents=o}c[0]instanceof b&&1===c[0].contents.length&&c[0].contents[0]instanceof E&&(c[0].text=c[0].contents[0].text,delete c[0].contents)}else c[0]instanceof r&&(c[0].node.uri===U.ns_tt&&"metadata"===c[0].node.local?f--:0<f&&n&&"onCloseTag"in n&&n.onCloseTag());h.shift(),p.shift(),c.shift()},d.ontext=function(e){var i;void 0===c[0]||(c[0]instanceof b||c[0]instanceof _?((i=new E).initFromText(g,c[0],e,h[0],t),c[0].contents.push(i)):c[0]instanceof r&&0<f&&n&&"onText"in n&&n.onText(e))},d.onopentag=function(e){var i=e.attributes["xml:space"];i?h.unshift(i.value):0===h.length?h.unshift("default"):h.unshift(h[0]);var d,m,E,w,A,k,P,I,L=e.attributes["xml:lang"];if(L?p.unshift(L.value):0===p.length?p.unshift(""):p.unshift(p[0]),e.uri===U.ns_tt?"tt"===e.local?(null!==g&&x(t,"Two <tt> elements at ("+this.line+","+this.column+")"),(g=new o).initFromNode(e,t),c.unshift(g)):"head"===e.local?(c[0]instanceof o||x(t,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==g.head&&x("Second <head> element at ("+this.line+","+this.column+")"),g.head=new a,c.unshift(g.head)):"styling"===e.local?(c[0]instanceof a||x(t,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==g.head.styling&&x("Second <styling> element at ("+this.line+","+this.column+")"),g.head.styling=new s,c.unshift(g.head.styling)):"style"===e.local?c[0]instanceof s?((d=new l).initFromNode(e,t),d.id?g.head.styling.styles[d.id]=d:D(t,"<style> element missing @id attribute"),c.unshift(d)):c[0]instanceof C?((d=new l).initFromNode(e,t),M(d.styleAttrs,c[0].styleAttrs),c.unshift(d)):x(t,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")"):"layout"===e.local?(c[0]instanceof a||x(t,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==g.head.layout&&x(t,"Second <layout> element at "+this.line+","+this.column+")"),g.head.layout=new u,c.unshift(g.head.layout)):"region"===e.local?(c[0]instanceof u||x(t,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(m=new C).initFromNode(g,e,t),!m.id||m.id in g.head.layout.regions?D(t,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):g.head.layout.regions[m.id]=m,c.unshift(m)):"body"===e.local?(c[0]instanceof o||x(t,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==g.body&&x(t,"Second <body> element at "+this.line+","+this.column+")"),(E=new y).initFromNode(g,e,t),g.body=E,c.unshift(E)):"div"===e.local?(c[0]instanceof v||c[0]instanceof y||x(t,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(w=new v).initFromNode(g,c[0],e,t),c[0].contents.push(w),c.unshift(w)):"p"===e.local?(c[0]instanceof v||x(t,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(A=new _).initFromNode(g,c[0],e,t),c[0].contents.push(A),c.unshift(A)):"span"===e.local?(c[0]instanceof b||c[0]instanceof _||x(t,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(k=new b).initFromNode(g,c[0],e,h[0],t),c[0].contents.push(k),c.unshift(k)):"br"===e.local?(c[0]instanceof b||c[0]instanceof _||x(t,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(P=new T).initFromNode(g,c[0],e,t),c[0].contents.push(P),c.unshift(P)):"set"===e.local?(c[0]instanceof b||c[0]instanceof _||c[0]instanceof v||c[0]instanceof y||c[0]instanceof C||c[0]instanceof T||x(t,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(I=new S).initFromNode(g,c[0],e,t),c[0].sets.push(I),c.unshift(I)):c.unshift(new r(e)):c.unshift(new r(e)),c[0]instanceof r)if(e.uri===U.ns_tt&&"metadata"===e.local)f++;else if(0<f&&n&&"onOpenTag"in n){var R=[];for(var O in e.attributes)R[e.attributes[O].uri+" "+e.attributes[O].local]={uri:e.attributes[O].uri,local:e.attributes[O].local,value:e.attributes[O].value};n.onOpenTag(e.uri,e.local,R)}},d.write(e).close(),null!==g.head?delete g.head.styling:g.head=new a,null===g.head.layout&&(g.head.layout=new u);var m,w=!1;for(var A in g.head.layout.regions){w=!0;break}for(var k in w||(m=C.prototype.createDefaultRegion(),g.head.layout.regions[m.id]=m),g.head.layout.regions)i(g,g.head.layout.regions[k],null,null);return g.body&&i(g,g.body,null,null),g},o.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var n,i=P(e,U.ns_ttp,"cellResolution"),r=15,o=32;return null!==i&&(null!==(n=/(\d+) (\d+)/.exec(i))?(o=parseInt(n[1]),r=parseInt(n[2])):R(t,"Malformed cellResolution value (using initial value instead)")),{w:o,h:r}}(e,t);var n=function(e,t){var n,i=P(e,U.ns_ttp,"frameRate"),r=30;null!==i&&(null!==(n=/(\d+)/.exec(i))?r=parseInt(n[1]):R(t,"Malformed frame rate attribute (using initial value instead)"));var o=P(e,U.ns_ttp,"frameRateMultiplier"),a=1;null!==o&&(null!==(n=/(\d+) (\d+)/.exec(o))?a=parseInt(n[1])/parseInt(n[2]):R(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var s=a*r,l=1,u=P(e,U.ns_ttp,"tickRate");return null===u?null!==i&&(l=s):null!==(n=/(\d+)/.exec(u))?l=parseInt(n[1]):R(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:s,tickRate:l}}(e,t);this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var n,i,r,o=P(e,U.ns_ittp,"aspectRatio"),a=null;return null!==o&&(null!==(n=/(\d+) (\d+)/.exec(o))?(i=parseInt(n[1]),r=parseInt(n[2]),0!==i&&0!==r?a=i/r:D(t,"Illegal aspectRatio values (ignoring)")):D(t,"Malformed aspectRatio attribute (ignoring)")),a}(e,t);var i=P(e,U.ns_ttp,"timeBase");null!==i&&"media"!==i&&x(t,"Unsupported time base");var r=function(e,t){var n=P(e,U.ns_tts,"extent");if(null===n)return null;var i=n.split(" ");if(2!==i.length)return R(t,"Malformed extent (ignoring)"),null;var r=j.parseLength(i[0]),o=j.parseLength(i[1]);return o&&r?{h:o,w:r}:(R(t,"Malformed extent values (ignoring)"),null)}(e,t);null===r?this.pxDimensions={h:480,w:640}:("px"===r.h.unit&&"px"===r.w.unit||x(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:r.h.value,w:r.w.value})},o.prototype._registerEvent=function(e){var t,n;e.end<=e.begin||((t=O(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY&&((n=O(this.events,e.end)).found||this.events.splice(n.index,0,e.end)))},o.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},o.prototype.getMediaTimeEvents=function(){return this.events},l.prototype.initFromNode=function(e,t){this.id=w(e),this.styleAttrs=k(e,t),this.styleRefs=A(e)},c.prototype.initFromNode=function(e,t,n,i){this.id=w(n)},p.prototype.initFromNode=function(e,t,n,i){var r;this.regionID=(r=n)&&"region"in r.attributes?r.attributes.region.value:""},h.prototype.initFromNode=function(e,t,n,i){this.styleAttrs=k(n,i),null!==e.head&&null!==e.head.styling&&L(e.head.styling,A(n),this.styleAttrs,i)},f.prototype.initFromNode=function(e,t,n,i){this.sets=[]},g.prototype.initFromNode=function(e,t,n,i){this.contents=[]},m.prototype.initFromNode=function(e,t,n,i){var r,o,a,s=function(e,t,n){var i=null;t&&"begin"in t.attributes&&null===(i=I(e.tickRate,e.effectiveFrameRate,t.attributes.begin.value))&&R(n,"Malformed begin value "+t.attributes.begin.value+" (using 0)");var r=null;t&&"dur"in t.attributes&&null===(r=I(e.tickRate,e.effectiveFrameRate,t.attributes.dur.value))&&R(n,"Malformed dur value "+t.attributes.dur.value+" (ignoring)");var o=null;return t&&"end"in t.attributes&&null===(o=I(e.tickRate,e.effectiveFrameRate,t.attributes.end.value))&&R(n,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:o,explicit_dur:r}}(e,n,i);this.explicit_begin=s.explicit_begin,this.explicit_end=s.explicit_end,this.explicit_dur=s.explicit_dur,this.timeContainer=(o=i,(a=(r=n)&&"timeContainer"in r.attributes?r.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?"seq":(D(o,"Illegal value of timeContainer (assuming 'par')"),"par"):"par")},y.prototype.initFromNode=function(e,t,n){h.prototype.initFromNode.call(this,e,null,t,n),m.prototype.initFromNode.call(this,e,null,t,n),f.prototype.initFromNode.call(this,e,null,t,n),p.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n)},v.prototype.initFromNode=function(e,t,n,i){h.prototype.initFromNode.call(this,e,t,n,i),m.prototype.initFromNode.call(this,e,t,n,i),f.prototype.initFromNode.call(this,e,t,n,i),p.prototype.initFromNode.call(this,e,t,n,i),g.prototype.initFromNode.call(this,e,t,n,i)},_.prototype.initFromNode=function(e,t,n,i){h.prototype.initFromNode.call(this,e,t,n,i),m.prototype.initFromNode.call(this,e,t,n,i),f.prototype.initFromNode.call(this,e,t,n,i),p.prototype.initFromNode.call(this,e,t,n,i),g.prototype.initFromNode.call(this,e,t,n,i)},b.prototype.initFromNode=function(e,t,n,i,r){h.prototype.initFromNode.call(this,e,t,n,r),m.prototype.initFromNode.call(this,e,t,n,r),f.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),this.space=i},E.prototype.initFromText=function(e,t,n,i,r){m.prototype.initFromNode.call(this,e,t,null,r),this.text=n,this.space=i},T.prototype.initFromNode=function(e,t,n,i){p.prototype.initFromNode.call(this,e,t,n,i),m.prototype.initFromNode.call(this,e,t,n,i)},C.prototype.createDefaultRegion=function(){var e=new C;return c.call(e,""),h.call(e,{}),f.call(e,[]),m.call(e,0,Number.POSITIVE_INFINITY,null),e},C.prototype.initFromNode=function(e,t,n){c.prototype.initFromNode.call(this,e,null,t,n),h.prototype.initFromNode.call(this,e,null,t,n),m.prototype.initFromNode.call(this,e,null,t,n),f.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&L(e.head.styling,A(t),this.styleAttrs,n)},S.prototype.initFromNode=function(e,t,n,i){m.prototype.initFromNode.call(this,e,t,n,i);var r=k(n,i);for(var o in this.qname=null,this.value=null,r){if(this.qname){D(i,"More than one style specified on set");break}this.qname=o,this.value=r[o]}}},{18:18,19:19,20:20,40:40}],15:[function(e,t,n){!function(e,t){function n(e,t,n){for(var i in e){var r=e[i].elements.length,o=e[i].elements[e[i].start_elem],a=e[i].elements[e[i].end_elem],s=Math.ceil(t)+"px",l="-"+Math.ceil(t)+"px";0!==r&&("lr"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=l):"rl"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=l):"tb"===n.ipd&&(o.node.style.borderTopColor=o.bgcolor||"#00000000",o.node.style.borderTopStyle="solid",o.node.style.borderTopWidth=s,o.node.style.marginTop=l),"lr"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=l):"rl"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=l):"tb"===n.ipd&&(a.node.style.borderBottomColor=a.bgcolor||"#00000000",a.node.style.borderBottomStyle="solid",a.node.style.borderBottomWidth=s,a.node.style.marginBottom=l))}}function i(e){for(var t=0;t<e.length-1;t++){var n,i,r=e[t].elements.length;0!==r&&!1===e[t].br&&(n=document.createElement("br"),(i=e[t].elements[r-1].node).parentElement.insertBefore(n,i.nextSibling))}}function r(e,t,n,i){for(var r=Math.sign(n-t),o=0;o<=e.length;o++){var a,s,l=0===o?t:o===e.length?n:(e[o].before+e[o-1].after)/2;if(0<o)for(var u=0;u<e[o-1].elements.length;u++)null!==e[o-1].elements[u].bgcolor&&r*((s=e[o-1].elements[u]).after-l)<0&&(a=Math.ceil(Math.abs(l-s.after))+"px",s.node.style.backgroundColor=s.bgcolor,"lr"===i.bpd?s.node.style.paddingRight=a:"rl"===i.bpd?s.node.style.paddingLeft=a:"tb"===i.bpd&&(s.node.style.paddingBottom=a));if(o<e.length)for(var d=0;d<e[o].elements.length;d++)null!==(s=e[o].elements[d]).bgcolor&&0<r*(s.before-l)&&(a=Math.ceil(Math.abs(s.before-l))+"px",s.node.style.backgroundColor=s.bgcolor,"lr"===i.bpd?s.node.style.paddingLeft=a:"rl"===i.bpd?s.node.style.paddingRight=a:"tb"===i.bpd&&(s.node.style.paddingTop=a))}}function o(e,t){this.id=e,this.plist=t}function a(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function s(e,t,n,i){var r,o,l,u,d=t.style.backgroundColor||i;if(0===t.childElementCount)if("span"===t.localName){var c=t.getBoundingClientRect();if(0===c.height||0===c.width)return;var p,h,f=a(c,e);0!==n.length&&(r=f.before,o=f.after,l=n[n.length-1].before,o<(u=n[n.length-1].after)&&l<r||u<=o&&r<=l)?(p=Math.sign(f.after-f.before),h=Math.sign(f.end-f.start),p*(f.before-n[n.length-1].before)<0&&(n[n.length-1].before=f.before),0<p*(f.after-n[n.length-1].after)&&(n[n.length-1].after=f.after),h*(f.start-n[n.length-1].start)<0&&(n[n.length-1].start=f.start,n[n.length-1].start_elem=n[n.length-1].elements.length),0<h*(f.end-n[n.length-1].end)&&(n[n.length-1].end=f.end,n[n.length-1].end_elem=n[n.length-1].elements.length)):n.push({before:f.before,after:f.after,start:f.start,end:f.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1}),n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:d,before:f.before,after:f.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var g=t.firstChild;g;)g.nodeType===Node.ELEMENT_NODE&&s(e,g,n,d),g=g.nextSibling}function l(e,t){this.qname=e,this.map=t}e.render=function(e,l,d,c,h,f,g,m,y){var v,_=c||l.clientHeight,b=h||l.clientWidth;null!==e.aspectRatio&&(b<(v=_*e.aspectRatio)?_=Math.round(b/e.aspectRatio):b=v);var E=document.createElement("div");E.style.position="relative",E.style.width=b+"px",E.style.height=_+"px",E.style.margin="auto",E.style.top=0,E.style.bottom=0,E.style.left=0,E.style.right=0,E.style.zIndex=0;var T={h:_,w:b,regionH:null,regionW:null,imgResolver:d,displayForcedOnlyMode:f||!1,isd:e,errorHandler:g,previousISDState:m,enableRollUp:y||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var C in l.appendChild(E),e.contents)!function e(l,d,c){var h;if("region"===c.kind?(h=document.createElement("div")).style.position="absolute":"body"===c.kind||"div"===c.kind?h=document.createElement("div"):"p"===c.kind?h=document.createElement("p"):"span"===c.kind?h=document.createElement("span"):"br"===c.kind&&(h=document.createElement("br")),h){for(var f in h.style.margin="0",u){var g=u[f],m=c.styleAttrs[g.qname];void 0!==m&&null!==g.map&&g.map(l,h,c,m)}var y,v=h;"region"===c.kind&&("lrtb"===(y=c.styleAttrs[t.byName.writingMode.qname])||"lr"===y?(l.ipd="lr",l.bpd="tb"):"rltb"===y||"rl"===y?(l.ipd="rl",l.bpd="tb"):"tblr"===y?(l.ipd="tb",l.bpd="lr"):"tbrl"!==y&&"tb"!==y||(l.ipd="tb",l.bpd="rl"));var _,b=c.styleAttrs[t.byName.linePadding.qname];b&&0<b&&(_=Math.ceil(b*l.h)+"px","tb"===l.bpd?(v.style.paddingLeft=_,v.style.paddingRight=_):(v.style.paddingTop=_,v.style.paddingBottom=_),l.lp=b);var E,T=c.styleAttrs[t.byName.multiRowAlign.qname];if(T&&"auto"!==T&&((E=document.createElement("span")).style.display="inline-block",E.style.textAlign=T,h.appendChild(E),v=E,l.mra=T),c.styleAttrs[t.byName.fillLineGap.qname]&&(l.flg=!0),"span"===c.kind&&c.text)if(l.lp||l.mra||l.flg)for(var C="",S=0;S<c.text.length;S++){C+=c.text.charAt(S);var w,A=c.text.charCodeAt(S);(A<55296||56319<A||S===c.text.length)&&((w=document.createElement("span")).textContent=C,h.appendChild(w),C="")}else h.textContent=c.text;for(var k in d.appendChild(h),c.contents)e(l,v,c.contents[k]);var P,I,L,M,R=[];(l.lp||l.mra||l.flg)&&"p"===c.kind&&(s(l,v,R,null),l.mra&&(i(R),l.mra=null),l.lp&&(n(R,l.lp*l.h,l),l.lp=null),l.flg&&(r(R,(P=a(v.getBoundingClientRect(),l)).before,P.after,l),l.flg=null)),"region"===c.kind&&(s(l,v,R),"tb"===l.bpd&&l.enableRollUp&&0<c.contents.length&&"after"===c.styleAttrs[t.byName.displayAlign.qname]&&(I=new o(""===c.id?"_":c.id,R),l.currentISDState[I.id]=I,l.previousISDState&&I.id in l.previousISDState&&0<l.previousISDState[I.id].plist.length&&1<I.plist.length&&I.plist[I.plist.length-2].text===l.previousISDState[I.id].plist[l.previousISDState[I.id].plist.length-1].text&&(L=h.firstElementChild,M=I.plist[I.plist.length-1].after-I.plist[I.plist.length-1].before,L.style.bottom="-"+M+"px",L.style.transition="transform 0.4s",L.style.position="relative",L.style.transform="translateY(-"+M+"px)")))}else p(l.errorHandler,"Error processing ISD element kind: "+c.kind)}(T,E,e.contents[C]);return T.currentISDState};var u=[new l("http://www.w3.org/ns/ttml#styling backgroundColor",(function(e,t,n,i){0!==i[3]&&(t.style.backgroundColor="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")")})),new l("http://www.w3.org/ns/ttml#styling color",(function(e,t,n,i){t.style.color="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")"})),new l("http://www.w3.org/ns/ttml#styling direction",(function(e,t,n,i){t.style.direction=i})),new l("http://www.w3.org/ns/ttml#styling display",(function(e,t,n,i){})),new l("http://www.w3.org/ns/ttml#styling displayAlign",(function(e,t,n,i){t.style.display="flex",t.style.flexDirection="column","before"===i?t.style.justifyContent="flex-start":"center"===i?t.style.justifyContent="center":"after"===i&&(t.style.justifyContent="flex-end")})),new l("http://www.w3.org/ns/ttml#styling extent",(function(e,t,n,i){e.regionH=i.h*e.h,e.regionW=i.w*e.w;var r=0,o=0,a=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];a&&(r=(a[0]+a[2])*e.h,o=(a[1]+a[3])*e.w),t.style.height=e.regionH-r+"px",t.style.width=e.regionW-o+"px"})),new l("http://www.w3.org/ns/ttml#styling fontFamily",(function(e,t,n,i){var r=[];for(var o in i)"monospaceSerif"===i[o]?(r.push("Courier New"),r.push('"Liberation Mono"'),r.push("Courier"),r.push("monospace")):"proportionalSansSerif"===i[o]?(r.push("Arial"),r.push("Helvetica"),r.push('"Liberation Sans"'),r.push("sans-serif")):"monospace"===i[o]?r.push("monospace"):"sansSerif"===i[o]?r.push("sans-serif"):"serif"===i[o]?r.push("serif"):"monospaceSansSerif"===i[o]?(r.push("Consolas"),r.push("monospace")):"proportionalSerif"===i[o]?r.push("serif"):r.push(i[o]);t.style.fontFamily=r.join(",")})),new l("http://www.w3.org/ns/ttml#styling fontSize",(function(e,t,n,i){t.style.fontSize=i*e.h+"px"})),new l("http://www.w3.org/ns/ttml#styling fontStyle",(function(e,t,n,i){t.style.fontStyle=i})),new l("http://www.w3.org/ns/ttml#styling fontWeight",(function(e,t,n,i){t.style.fontWeight=i})),new l("http://www.w3.org/ns/ttml#styling lineHeight",(function(e,t,n,i){t.style.lineHeight="normal"===i?"normal":i*e.h+"px"})),new l("http://www.w3.org/ns/ttml#styling opacity",(function(e,t,n,i){t.style.opacity=i})),new l("http://www.w3.org/ns/ttml#styling origin",(function(e,t,n,i){t.style.top=i.h*e.h+"px",t.style.left=i.w*e.w+"px"})),new l("http://www.w3.org/ns/ttml#styling overflow",(function(e,t,n,i){t.style.overflow=i})),new l("http://www.w3.org/ns/ttml#styling padding",(function(e,t,n,i){var r=[];r[0]=i[0]*e.h+"px",r[1]=i[3]*e.w+"px",r[2]=i[2]*e.h+"px",r[3]=i[1]*e.w+"px",t.style.padding=r.join(" ")})),new l("http://www.w3.org/ns/ttml#styling showBackground",null),new l("http://www.w3.org/ns/ttml#styling textAlign",(function(e,n,i,r){var o=i.styleAttrs[t.byName.direction.qname],a="start"===r?"rtl"===o?"right":"left":"end"===r?"rtl"===o?"left":"right":r;n.style.textAlign=a})),new l("http://www.w3.org/ns/ttml#styling textDecoration",(function(e,t,n,i){t.style.textDecoration=i.join(" ").replace("lineThrough","line-through")})),new l("http://www.w3.org/ns/ttml#styling textOutline",(function(e,t,n,i){t.style.textShadow="none"===i?"":"rgba("+i.color[0].toString()+","+i.color[1].toString()+","+i.color[2].toString()+","+(i.color[3]/255).toString()+") 0px 0px "+i.thickness*e.h+"px"})),new l("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(e,t,n,i){var r="bidiOverride"===i?"bidi-override":i;t.style.unicodeBidi=r})),new l("http://www.w3.org/ns/ttml#styling visibility",(function(e,t,n,i){t.style.visibility=i})),new l("http://www.w3.org/ns/ttml#styling wrapOption",(function(e,t,n,i){"wrap"===i?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"})),new l("http://www.w3.org/ns/ttml#styling writingMode",(function(e,t,n,i){"lrtb"===i||"lr"===i||"rltb"===i||"rl"===i?t.style.writingMode="horizontal-tb":"tblr"===i?t.style.writingMode="vertical-lr":"tbrl"!==i&&"tb"!==i||(t.style.writingMode="vertical-rl")})),new l("http://www.w3.org/ns/ttml#styling zIndex",(function(e,t,n,i){t.style.zIndex=i})),new l("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",(function(e,t,n,i){var r,o;null!==e.imgResolver&&null!==i&&(r=document.createElement("img"),(o=e.imgResolver(i,r))&&(r.src=o),r.height=e.regionH,r.width=e.regionW,t.appendChild(r))})),new l("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(e,t,n,i){e.displayForcedOnlyMode&&!1===i&&(t.style.visibility="hidden")}))],d={};for(var c in u)d[u[c].qname]=u[c];function p(e,t){if(e&&e.error&&e.error(t))throw t}}(void 0===n?this.imscHTML={}:n,("undefined"==typeof imscNames&&e(18),"undefined"==typeof imscStyles?e(19):imscStyles))},{18:18,19:19}],16:[function(e,t,n){function i(e,t){if("contents"in e)for(var n in e.contents)i(e.contents[n],t);else t.push(e)}function r(e){if("br"!==e.kind){if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)r(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}}function o(e){this.contents=[],this.aspectRatio=e.aspectRatio}function a(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function s(e,t){if(e&&e.error&&e.error(t))throw t}var l,u;l=void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames&&e(18),u="undefined"==typeof imscStyles?e(19):imscStyles,l.generateISD=function(e,t,n){var l=new o(e),d={};for(var c in e.head.layout.regions){var p=function e(t,n,o,l,d,c,p,h,f){if(n<p.begin||n>=p.end)return null;var g="regionID"in p&&""!==p.regionID?p.regionID:c;if(null!==d&&g!==o.id&&(!("contents"in p)||"contents"in p&&0===p.contents.length||""!==g))return null;var m=new a(p);for(var y in p.sets)n<p.sets[y].begin||n>=p.sets[y].end||(m.styleAttrs[p.sets[y].qname]=p.sets[y].value);var v,_,b={};for(var E in m.styleAttrs){var T;b[E]=!0,E!==u.byName.writingMode.qname||u.byName.direction.qname in m.styleAttrs||("lrtb"===(T=m.styleAttrs[E])||"lr"===T?m.styleAttrs[u.byName.direction.qname]="ltr":"rltb"!==T&&"rl"!==T||(m.styleAttrs[u.byName.direction.qname]="rtl"))}if(null!==d)for(var C in u.all){var S,w,A,k=u.all[C];k.qname===u.byName.textDecoration.qname?(S=d.styleAttrs[k.qname],A=[],void 0===(w=m.styleAttrs[k.qname])?A=S:-1===w.indexOf("none")?((-1===w.indexOf("noUnderline")&&-1!==S.indexOf("underline")||-1!==w.indexOf("underline"))&&A.push("underline"),(-1===w.indexOf("noLineThrough")&&-1!==S.indexOf("lineThrough")||-1!==w.indexOf("lineThrough"))&&A.push("lineThrough"),(-1===w.indexOf("noOverline")&&-1!==S.indexOf("overline")||-1!==w.indexOf("overline"))&&A.push("overline")):A.push("none"),m.styleAttrs[k.qname]=A):k.inherit&&k.qname in d.styleAttrs&&!(k.qname in m.styleAttrs)&&(m.styleAttrs[k.qname]=d.styleAttrs[k.qname])}for(var P in u.all){var I=u.all[P];I.qname in m.styleAttrs||("region"===m.kind||!1===I.inherit&&null!==I.initial)&&(m.styleAttrs[I.qname]=I.parse(I.initial),b[I.qname]=!0)}for(var L in u.all){var M,R=u.all[L];R.qname in b&&null!==R.compute&&(null!==(M=R.compute(t,d,m,m.styleAttrs[R.qname],f))?m.styleAttrs[R.qname]=M:s(h,"Style '"+R.qname+"' on element '"+m.kind+"' cannot be computed"))}if("none"===m.styleAttrs[u.byName.display.qname])return null;for(var D in null===d?v=null===l?[]:[l]:"contents"in p&&(v=p.contents),v){var x=e(t,n,o,l,m,g,v[D],h,f);null!==x&&m.contents.push(x.element)}for(var O in m.styleAttrs){-1===u.byQName[O].applies.indexOf(m.kind)&&delete m.styleAttrs[O]}if("span"===m.kind&&m.text&&"default"===m.space&&(_=m.text.replace(/\s+/g," "),m.text=_),"p"===m.kind){var N=[];i(m,N);for(var B=0,U="after_br",F=0;;)if("after_br"===U)B>=N.length||"br"===N[B].kind?(U="before_br",F=B,B--):("preserve"!==N[B].space&&(N[B].text=N[B].text.replace(/^\s+/g,"")),0<N[B].text.length?(U="looking_br",B++):N.splice(B,1));else if("before_br"===U)if(B<0||"br"===N[B].kind){if(U="after_br",(B=F+1)>=N.length)break}else if("preserve"!==N[B].space&&(N[B].text=N[B].text.replace(/\s+$/g,"")),0<N[B].text.length){if(U="after_br",(B=F+1)>=N.length)break}else N.splice(B,1),B--;else B>=N.length||"br"===N[B].kind?(U="before_br",F=B,B--):B++;r(m)}return"div"===m.kind&&u.byName.backgroundImage.qname in m.styleAttrs||"br"===m.kind||"contents"in m&&0<m.contents.length||"span"===m.kind&&null!==m.text||"region"===m.kind&&"always"===m.styleAttrs[u.byName.showBackground.qname]?{region_id:g,element:m}:null}(e,t,e.head.layout.regions[c],e.body,null,"",e.head.layout.regions[c],n,d);null!==p&&l.contents.push(p.element)}return l}},{18:18,19:19}],17:[function(e,t,n){n.generateISD=e(16).generateISD,n.fromXML=e(14).fromXML,n.renderHTML=e(15).render},{14:14,15:15,16:16}],18:[function(e,t,n){var i;(i=void 0===n?this.imscNames={}:n).ns_tt="http://www.w3.org/ns/ttml",i.ns_tts="http://www.w3.org/ns/ttml#styling",i.ns_ttp="http://www.w3.org/ns/ttml#parameter",i.ns_xml="http://www.w3.org/XML/1998/namespace",i.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",i.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",i.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",i.ns_ebutts="urn:ebu:tt:style"},{}],19:[function(e,t,n){!function(e,t,n){function i(e,t,n,i,r,o,a,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=r,this.animatable=o,this.initial=n,this.applies=i,this.parse=a,this.compute=s}for(var r in e.all=[new i(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new i(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new i(t.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(e){return e}),null),new i(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(e){return e}),null),new i(t.ns_tts,"displayAlign","before",["region"],!1,!0,(function(e){return e}),null),new i(t.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var i=n.parseLength(t[0]),r=n.parseLength(t[1]);return r&&i?{h:r,w:i}:null}),(function(e,t,n,i,r){var o,a;if("auto"===i)o=1;else if("%"===i.h.unit)o=i.h.value/100;else{if("px"!==i.h.unit)return null;o=i.h.value/e.pxDimensions.h}if("auto"===i)a=1;else if("%"===i.w.unit)a=i.w.value/100;else{if("px"!==i.w.unit)return null;a=i.w.value/e.pxDimensions.w}return{h:o,w:a}})),new i(t.ns_tts,"fontFamily","default",["span"],!0,!0,(function(e){var t=e.split(","),n=[];for(var i in t)"'"!==t[i].charAt(0)&&'"'!==t[i].charAt(0)&&"default"===t[i]?n.push("monospaceSerif"):n.push(t[i]);return n}),null),new i(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,(function(t,n,i,r,o){var a;if("%"===r.unit)a=null!==n?n.styleAttrs[e.byName.fontSize.qname]*r.value/100:r.value/100/t.cellResolution.h;else if("em"===r.unit)a=null!==n?n.styleAttrs[e.byName.fontSize.qname]*r.value:r.value/t.cellResolution.h;else if("c"===r.unit)a=r.value/t.cellResolution.h;else{if("px"!==r.unit)return null;a=r.value/t.pxDimensions.h}return a})),new i(t.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(e){return e}),null),new i(t.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(e){return e}),null),new i(t.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(e){return"normal"===e?e:n.parseLength(e)}),(function(t,n,i,r,o){var a;if("normal"===r)a=r;else if("%"===r.unit)a=i.styleAttrs[e.byName.fontSize.qname]*r.value/100;else if("em"===r.unit)a=i.styleAttrs[e.byName.fontSize.qname]*r.value;else if("c"===r.unit)a=r.value/t.cellResolution.h;else{if("px"!==r.unit)return null;a=r.value/t.pxDimensions.h}return a})),new i(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new i(t.ns_tts,"origin","auto",["region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var i=n.parseLength(t[0]),r=n.parseLength(t[1]);return r&&i?{h:r,w:i}:null}),(function(e,t,n,i,r){var o,a;if("auto"===i)o=0;else if("%"===i.h.unit)o=i.h.value/100;else{if("px"!==i.h.unit)return null;o=i.h.value/e.pxDimensions.h}if("auto"===i)a=0;else if("%"===i.w.unit)a=i.w.value/100;else{if("px"!==i.w.unit)return null;a=i.w.value/e.pxDimensions.w}return{h:o,w:a}})),new i(t.ns_tts,"overflow","hidden",["region"],!1,!0,(function(e){return e}),null),new i(t.ns_tts,"padding","0px",["region"],!1,!0,(function(e){var t=e.split(" ");if(4<t.length)return null;var i=[];for(var r in t){var o=n.parseLength(t[r]);if(!o)return null;i.push(o)}return i}),(function(t,n,i,r,o){var a;if(1===r.length)a=[r[0],r[0],r[0],r[0]];else if(2===r.length)a=[r[0],r[1],r[0],r[1]];else if(3===r.length)a=[r[0],r[1],r[2],r[1]];else{if(4!==r.length)return null;a=[r[0],r[1],r[2],r[3]]}var s=i.styleAttrs[e.byName.writingMode.qname];if("lrtb"===s||"lr"===s)a=[a[0],a[3],a[2],a[1]];else if("rltb"===s||"rl"===s)a=[a[0],a[1],a[2],a[3]];else if("tblr"===s)a=[a[3],a[0],a[1],a[2]];else{if("tbrl"!==s&&"tb"!==s)return null;a=[a[3],a[2],a[1],a[0]]}var l=[];for(var u in a)if(0===a[u].value)l[u]=0;else if("%"===a[u].unit)l[u]="0"===u||"2"===u?i.styleAttrs[e.byName.extent.qname].h*a[u].value/100:i.styleAttrs[e.byName.extent.qname].w*a[u].value/100;else if("em"===a[u].unit)l[u]=i.styleAttrs[e.byName.fontSize.qname]*a[u].value;else if("c"===a[u].unit)l[u]=a[u].value/t.cellResolution.h;else{if("px"!==a[u].unit)return null;l[u]="0"===u||"2"===u?a[u].value/t.pxDimensions.h:a[u].value/t.pxDimensions.w}return l})),new i(t.ns_tts,"showBackground","always",["region"],!1,!0,(function(e){return e}),null),new i(t.ns_tts,"textAlign","start",["p"],!0,!0,(function(e){return e}),(function(e,t,n,i,r){return"left"===i?"start":"right"===i?"end":i})),new i(t.ns_tts,"textDecoration","none",["span"],!0,!0,(function(e){return e.split(" ")}),null),new i(t.ns_tts,"textOutline","none",["span"],!0,!0,(function(e){if("none"===e)return e;var t={},i=e.split(" ");if(0===i.length||2<i.length)return null;var r=n.parseColor(i[0]);if(null!==(t.color=r)&&i.shift(),1!==i.length)return null;var o=n.parseLength(i[0]);return o?(t.thickness=o,t):null}),(function(t,n,i,r,o){if("none"===r)return r;var a={};if(null===r.color?a.color=i.styleAttrs[e.byName.color.qname]:a.color=r.color,"%"===r.thickness.unit)a.thickness=i.styleAttrs[e.byName.fontSize.qname]*r.thickness.value/100;else if("em"===r.thickness.unit)a.thickness=i.styleAttrs[e.byName.fontSize.qname]*r.thickness.value;else if("c"===r.thickness.unit)a.thickness=r.thickness.value/t.cellResolution.h;else{if("px"!==r.thickness.unit)return null;a.thickness=r.thickness.value/t.pxDimensions.h}return a})),new i(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(e){return e}),null),new i(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(e){return e}),null),new i(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(e){return e}),null),new i(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(e){return e}),null),new i(t.ns_tts,"zIndex","auto",["region"],!1,!0,(function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t}),null),new i(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(e,t,n,i,r){return"c"===i.unit?i.value/e.cellResolution.h:null})),new i(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(e){return e}),null),new i(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(e){return e}),null),new i(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(e){return"true"===e}),null),new i(t.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(e){return"true"===e}),null)],e.byQName={},e.all)e.byQName[e.all[r].qname]=e.all[r];for(var o in e.byName={},e.all)e.byName[e.all[o].name]=e.all[o]}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(18):imscNames,"undefined"==typeof imscUtils?e(20):imscUtils)},{18:18,20:20}],20:[function(e,t,n){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var o,a=null,s=r[e.toLowerCase()];return void 0!==s?a=s:null!==(o=t.exec(e))?a=[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),void 0!==o[4]?parseInt(o[4],16):255]:null!==(o=n.exec(e))?a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),255]:null!==(o=i.exec(e))&&(a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),parseInt(o[4])]),a};var o=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=o.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}}(void 0===n?this.imscUtils={}:n)},{}],21:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(i(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))||!!e._isBuffer);var t}},{}],23:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],24:[function(e,t,n){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,i)}));case 4:return e.nextTick((function(){t.call(null,n,i,r)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,e(25))},{25:25}],25:[function(e,t,n){var i,r,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,d=[],c=!1,p=-1;function h(){c&&u&&(c=!1,u.length?d=u.concat(d):p=-1,d.length&&f())}function f(){if(!c){var e=l(h);c=!0;for(var t=d.length;t;){for(u=d,d=[];++p<t;)u&&u[p].run();p=-1,t=d.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new g(e,t)),1!==d.length||c||l(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],26:[function(e,t,n){t.exports=e(27)},{27:27}],27:[function(e,t,n){"use strict";var i=e(24),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var o=e(10);o.inherits=e(21);var a=e(29),s=e(31);o.inherits(c,a);for(var l=r(s.prototype),u=0;u<l.length;u++){var d=l[u];c.prototype[d]||(c.prototype[d]=s.prototype[d])}function c(e){if(!(this instanceof c))return new c(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},{10:10,21:21,24:24,29:29,31:31}],28:[function(e,t,n){"use strict";t.exports=o;var i=e(30),r=e(10);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}r.inherits=e(21),r.inherits(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},{10:10,21:21,30:30}],29:[function(e,t,n){(function(n,i){"use strict";var r=e(24);t.exports=_;var o,a=e(23);function s(e,t){return e.listeners(t).length}_.ReadableState=v,e(11).EventEmitter;var l=e(34),u=e(39).Buffer,d=i.Uint8Array||function(){},c=e(10);c.inherits=e(21);var p,h=e(7),f=void 0,g=(f=h&&h.debuglog?h.debuglog("stream"):function(){},e(32)),m=e(33);c.inherits(_,l);var y=["error","close","destroy","pause","resume"];function v(t,n){t=t||{};var i=n instanceof(o=o||e(27));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p=p||e(42).StringDecoder,this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||e(27),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function b(e,t,n,i,r){var o,a,s,l=e._readableState;return null===t?(l.reading=!1,function(e,t){var n;t.ended||(!t.decoder||(n=t.decoder.end())&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length),t.ended=!0,S(e))}(e,l)):(r||(o=function(e,t){var n;return function(e){return u.isBuffer(e)||e instanceof d}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(l,t)),o?e.emit("error",o):l.objectMode||t&&0<t.length?("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===u.prototype||(a=t,t=u.from(a)),i?l.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):E(e,l,t,!0):l.ended?e.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!n?(t=l.decoder.write(t),l.objectMode||0!==t.length?E(e,l,t,!1):A(e,l)):E(e,l,t,!1))):i||(l.reading=!1)),!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function E(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&S(e)),A(e,t)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=u.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},_.prototype.unshift=function(e){return b(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p=p||e(42).StringDecoder,this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var T=8388608;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(T<=(n=e)?n=T:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(w,e):w(e))}function w(e){f("emit readable"),e.emit("readable"),L(e)}function A(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(k,e,t))}function k(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function P(e){f("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():(n?function(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?r+=o:r+=o.slice(0,e),0==(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=o.slice(a);break}++i}return t.length-=i,r}:function(e,t){var n=u.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var o=i.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0==(e-=a)){a===o.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i).data=o.slice(a);break}++r}return t.length-=r,n})(e,t),i}(e,t.buffer,t.decoder),n);var n}function R(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(D,t,e))}function D(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function x(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?R:S)(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&R(this),null;var i,r=t.needReadable;return f("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",r=!0),t.ended||t.reading?f("reading or ended",r=!1):r&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(n,t))),null===(i=0<e?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==i&&this.emit("data",i),i},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,t);var l=t&&!1===t.end||e===n.stdout||e===n.stderr?_:u;function u(){f("onend"),e.end()}o.endEmitted?r.nextTick(l):i.once("end",l),e.on("unpipe",(function t(n,r){f("onunpipe"),n===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),e.removeListener("close",y),e.removeListener("finish",v),e.removeListener("drain",c),e.removeListener("error",m),e.removeListener("unpipe",t),i.removeListener("end",u),i.removeListener("end",_),i.removeListener("data",g),p=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var d,c=(d=i,function(){var e=d._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(d,"data")&&(e.flowing=!0,L(d))});e.on("drain",c);var p=!1,h=!1;function g(t){f("ondata"),(h=!1)!==e.write(t)||h||((1===o.pipesCount&&o.pipes===e||1<o.pipesCount&&-1!==x(o.pipes,e))&&!p&&(f("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,h=!0),i.pause())}function m(t){f("onerror",t),_(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",v),_()}function v(){f("onfinish"),e.removeListener("close",y),_()}function _(){f("unpipe"),i.unpipe(e)}return i.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",y),e.once("finish",v),e.emit("pipe",i),o.flowing||(f("pipe resume"),i.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var a=x(t.pipes,e);return-1===a||(t.pipes.splice(a,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},_.prototype.addListener=_.prototype.on=function(e,t){var n,i=l.prototype.on.call(this,e,t);return"data"===e?!1!==this._readableState.flowing&&this.resume():"readable"===e&&((n=this._readableState).endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):r.nextTick(P,this))),i},_.prototype.resume=function(){var e,t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,this,(e=t).resumeScheduled||(e.resumeScheduled=!0,r.nextTick(I,this,e))),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){var e;f("wrapped end"),!n.decoder||n.ended||(e=n.decoder.end())&&e.length&&t.push(e),t.push(null)})),e.on("data",(function(r){f("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<y.length;o++)e.on(y[o],this.emit.bind(this,y[o]));return this._read=function(t){f("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=M}).call(this,e(25),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,11:11,21:21,23:23,24:24,25:25,27:27,32:32,33:33,34:34,39:39,42:42,7:7}],30:[function(e,t,n){"use strict";t.exports=o;var i=e(27),r=e(10);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){s(e,t,n)})):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}r.inherits=e(21),r.inherits(o,i),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var i,r=this._transformState;r.writecb=n,r.writechunk=e,r.writeencoding=t,r.transforming||(i=this._readableState,(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark))},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},{10:10,21:21,27:27}],31:[function(e,t,n){(function(n,i,r){"use strict";var o=e(24);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(undefined),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=v;var s,l=!n.browser&&-1<["v0.10","v0.9."].indexOf(n.version.slice(0,5))?r:o.nextTick;v.WritableState=y;var u=e(10);u.inherits=e(21);var d,c={deprecate:e(44)},p=e(34),h=e(39).Buffer,f=i.Uint8Array||function(){},g=e(33);function m(){}function y(t,n){s=s||e(27),t=t||{};var i=n instanceof s;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,u=t.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(u||0===u)?u:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var c=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n,i=e._writableState,r=i.sync,a=i.writecb;(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0})(i),t?function(e,t,n,i,r){--t.pendingcb,n?(o.nextTick(r,i),o.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(r(i),e._writableState.errorEmitted=!0,e.emit("error",i),S(e,t))}(e,i,r,t,a):((n=T(i))||i.corked||i.bufferProcessing||!i.bufferedRequest||E(e,i),r?l(b,e,i,n,a):b(e,i,n,a))}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(s=s||e(27),!(d.call(v,this)||this instanceof s))return new v(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),p.call(this)}function _(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function b(e,t,n,i){var r,o;n||(r=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,r.emit("drain"))),t.pendingcb--,i(),S(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)(r[s]=n).isBuf||(l=!1),n=n.next,s+=1;r.allBuffers=l,_(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,d=n.encoding,c=n.callback;if(_(e,t,!1,t.objectMode?1:u.length,u,d,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var n,i,r=T(t);return r&&(n=e,(i=t).prefinished||i.finalCalled||("function"==typeof n._final?(i.pendingcb++,i.finalCalled=!0,o.nextTick(C,n,i)):(i.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(v,p),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===v&&e&&e._writableState instanceof y}})):d=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var i,r,a,s,l,u,d,c,p,g=this._writableState,y=!1,v=!g.objectMode&&(i=e,h.isBuffer(i)||i instanceof f);return v&&!h.isBuffer(e)&&(r=e,e=h.from(r)),"function"==typeof t&&(n=t,t=null),t=v?"buffer":t||g.defaultEncoding,"function"!=typeof n&&(n=m),g.ended?(this,c=n,p=new Error("write after end"),this.emit("error",p),o.nextTick(c,p)):(v||(this,a=g,l=n,d=!(u=!0),null===(s=e)?d=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(d=new TypeError("Invalid non-string/buffer chunk")),d&&(this.emit("error",d),o.nextTick(l,d),u=!1),u))&&(g.pendingcb++,y=function(e,t,n,i,r,o){var a;n||(a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n)),t}(t,i,r),i!==a&&(n=!0,r="buffer",i=a));var s=t.objectMode?1:i.length;t.length+=s;var l,u=t.length<t.highWaterMark;return u||(t.needDrain=!0),t.writing||t.corked?(l=t.lastBufferedRequest,t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):_(e,t,!1,s,i,r,o),u}(this,g,v,e,t,n)),y},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e(25),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e(43).setImmediate)},{10:10,21:21,24:24,25:25,27:27,33:33,34:34,39:39,43:43,44:44}],32:[function(e,t,n){"use strict";var i=e(39).Buffer,r=e(7);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.head=null,this.tail=null,this.length=0}t.exports=(o.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},o.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},o.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},o.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r=i.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=r,n=a,o.data.copy(t,n),a+=o.data.length,o=o.next;return r},o),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{39:39,7:7}],33:[function(e,t,n){"use strict";var i=e(24);function r(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{24:24}],34:[function(e,t,n){t.exports=e(11).EventEmitter},{11:11}],35:[function(e,t,n){t.exports=e(36).PassThrough},{36:36}],36:[function(e,t,n){(((n=t.exports=e(29)).Stream=n).Readable=n).Writable=e(31),n.Duplex=e(27),n.Transform=e(30),n.PassThrough=e(28)},{27:27,28:28,29:29,30:30,31:31}],37:[function(e,t,n){t.exports=e(36).Transform},{36:36}],38:[function(e,t,n){t.exports=e(31)},{31:31}],39:[function(e,t,n){var i=e(8),r=i.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,n),n.Buffer=a),o(r,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{8:8}],40:[function(e,t,n){(function(t){!function(n){n.parser=function(e,t){return new o(e,t)},n.SAXParser=o,n.SAXStream=s,n.createStream=function(e,t){return new s(e,t)},n.MAX_BUFFER_LENGTH=65536;var i,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,t){if(!(this instanceof o))return new o(e,t);var i=this;!function(e){for(var t=0,n=r.length;t<n;t++)e[r[t]]=""}(i),i.q=i.c="",i.bufferCheckPosition=n.MAX_BUFFER_LENGTH,i.opt=t||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=k.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(m)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),I(i,"onready")}n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.prototype={end:function(){x(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return D(t,"Cannot write after close. Assign an onready handler.");if(null===e)return x(t);"object"==typeof e&&(e=e.toString());for(var i,o,a=0,s="";s=q(e,a++),t.c=s;)switch(t.trackPosition&&(t.position++,"\n"===s?(t.line++,t.column=0):t.column++),t.state){case k.BEGIN:if(t.state=k.BEGIN_WHITESPACE,"\ufeff"===s)continue;j(t,s);continue;case k.BEGIN_WHITESPACE:j(t,s);continue;case k.TEXT:if(t.sawRoot&&!t.closedRoot){for(var l=a-1;s&&"<"!==s&&"&"!==s;)(s=q(e,a++))&&t.trackPosition&&(t.position++,"\n"===s?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(l,a-1)}"<"!==s||t.sawRoot&&t.closedRoot&&!t.strict?(!S(y,s)||t.sawRoot&&!t.closedRoot||O(t,"Text data outside of root node."),"&"===s?t.state=k.TEXT_ENTITY:t.textNode+=s):(t.state=k.OPEN_WAKA,t.startTagPosition=t.position);continue;case k.SCRIPT:"<"===s?t.state=k.SCRIPT_ENDING:t.script+=s;continue;case k.SCRIPT_ENDING:"/"===s?t.state=k.CLOSE_TAG:(t.script+="<"+s,t.state=k.SCRIPT);continue;case k.OPEN_WAKA:var u;"!"===s?(t.state=k.SGML_DECL,t.sgmlDecl=""):C(y,s)||(C(v,s)?(t.state=k.OPEN_TAG,t.tagName=s):"/"===s?(t.state=k.CLOSE_TAG,t.tagName=""):"?"===s?(t.state=k.PROC_INST,t.procInstName=t.procInstBody=""):(O(t,"Unencoded <"),t.startTagPosition+1<t.position&&(u=t.position-t.startTagPosition,s=new Array(u).join(" ")+s),t.textNode+="<"+s,t.state=k.TEXT));continue;case k.SGML_DECL:(t.sgmlDecl+s).toUpperCase()===p?(L(t,"onopencdata"),t.state=k.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+s==="--"?(t.state=k.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+s).toUpperCase()===h?(t.state=k.DOCTYPE,(t.doctype||t.sawRoot)&&O(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===s?(L(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=k.TEXT):(C(d,s)&&(t.state=k.SGML_DECL_QUOTED),t.sgmlDecl+=s);continue;case k.SGML_DECL_QUOTED:s===t.q&&(t.state=k.SGML_DECL,t.q=""),t.sgmlDecl+=s;continue;case k.DOCTYPE:">"===s?(t.state=k.TEXT,L(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=s,"["===s?t.state=k.DOCTYPE_DTD:C(d,s)&&(t.state=k.DOCTYPE_QUOTED,t.q=s));continue;case k.DOCTYPE_QUOTED:t.doctype+=s,s===t.q&&(t.q="",t.state=k.DOCTYPE);continue;case k.DOCTYPE_DTD:t.doctype+=s,"]"===s?t.state=k.DOCTYPE:C(d,s)&&(t.state=k.DOCTYPE_DTD_QUOTED,t.q=s);continue;case k.DOCTYPE_DTD_QUOTED:t.doctype+=s,s===t.q&&(t.state=k.DOCTYPE_DTD,t.q="");continue;case k.COMMENT:"-"===s?t.state=k.COMMENT_ENDING:t.comment+=s;continue;case k.COMMENT_ENDING:"-"===s?(t.state=k.COMMENT_ENDED,t.comment=R(t.opt,t.comment),t.comment&&L(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+s,t.state=k.COMMENT);continue;case k.COMMENT_ENDED:">"!==s?(O(t,"Malformed comment"),t.comment+="--"+s,t.state=k.COMMENT):t.state=k.TEXT;continue;case k.CDATA:"]"===s?t.state=k.CDATA_ENDING:t.cdata+=s;continue;case k.CDATA_ENDING:"]"===s?t.state=k.CDATA_ENDING_2:(t.cdata+="]"+s,t.state=k.CDATA);continue;case k.CDATA_ENDING_2:">"===s?(t.cdata&&L(t,"oncdata",t.cdata),L(t,"onclosecdata"),t.cdata="",t.state=k.TEXT):"]"===s?t.cdata+="]":(t.cdata+="]]"+s,t.state=k.CDATA);continue;case k.PROC_INST:"?"===s?t.state=k.PROC_INST_ENDING:C(y,s)?t.state=k.PROC_INST_BODY:t.procInstName+=s;continue;case k.PROC_INST_BODY:if(!t.procInstBody&&C(y,s))continue;"?"===s?t.state=k.PROC_INST_ENDING:t.procInstBody+=s;continue;case k.PROC_INST_ENDING:">"===s?(L(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=k.TEXT):(t.procInstBody+="?"+s,t.state=k.PROC_INST_BODY);continue;case k.OPEN_TAG:C(_,s)?t.tagName+=s:(function(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,L(e,"onopentagstart",n)}(t),">"===s?U(t):"/"===s?t.state=k.OPEN_TAG_SLASH:(S(y,s)&&O(t,"Invalid character in tag name"),t.state=k.ATTRIB));continue;case k.OPEN_TAG_SLASH:">"===s?(U(t,!0),F(t)):(O(t,"Forward-slash in opening tag not followed by >"),t.state=k.ATTRIB);continue;case k.ATTRIB:if(C(y,s))continue;">"===s?U(t):"/"===s?t.state=k.OPEN_TAG_SLASH:C(v,s)?(t.attribName=s,t.attribValue="",t.state=k.ATTRIB_NAME):O(t,"Invalid attribute name");continue;case k.ATTRIB_NAME:"="===s?t.state=k.ATTRIB_VALUE:">"===s?(O(t,"Attribute without value"),t.attribValue=t.attribName,B(t),U(t)):C(y,s)?t.state=k.ATTRIB_NAME_SAW_WHITE:C(_,s)?t.attribName+=s:O(t,"Invalid attribute name");continue;case k.ATTRIB_NAME_SAW_WHITE:if("="===s)t.state=k.ATTRIB_VALUE;else{if(C(y,s))continue;O(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",L(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===s?U(t):C(v,s)?(t.attribName=s,t.state=k.ATTRIB_NAME):(O(t,"Invalid attribute name"),t.state=k.ATTRIB)}continue;case k.ATTRIB_VALUE:if(C(y,s))continue;C(d,s)?(t.q=s,t.state=k.ATTRIB_VALUE_QUOTED):(O(t,"Unquoted attribute value"),t.state=k.ATTRIB_VALUE_UNQUOTED,t.attribValue=s);continue;case k.ATTRIB_VALUE_QUOTED:if(s!==t.q){"&"===s?t.state=k.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=s;continue}B(t),t.q="",t.state=k.ATTRIB_VALUE_CLOSED;continue;case k.ATTRIB_VALUE_CLOSED:C(y,s)?t.state=k.ATTRIB:">"===s?U(t):"/"===s?t.state=k.OPEN_TAG_SLASH:C(v,s)?(O(t,"No whitespace between attributes"),t.attribName=s,t.attribValue="",t.state=k.ATTRIB_NAME):O(t,"Invalid attribute name");continue;case k.ATTRIB_VALUE_UNQUOTED:if(S(c,s)){"&"===s?t.state=k.ATTRIB_VALUE_ENTITY_U:t.attribValue+=s;continue}B(t),">"===s?U(t):t.state=k.ATTRIB;continue;case k.CLOSE_TAG:if(t.tagName)">"===s?F(t):C(_,s)?t.tagName+=s:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=k.SCRIPT):(S(y,s)&&O(t,"Invalid tagname in closing tag"),t.state=k.CLOSE_TAG_SAW_WHITE);else{if(C(y,s))continue;S(v,s)?t.script?(t.script+="</"+s,t.state=k.SCRIPT):O(t,"Invalid tagname in closing tag."):t.tagName=s}continue;case k.CLOSE_TAG_SAW_WHITE:if(C(y,s))continue;">"===s?F(t):O(t,"Invalid characters in closing tag");continue;case k.TEXT_ENTITY:case k.ATTRIB_VALUE_ENTITY_Q:case k.ATTRIB_VALUE_ENTITY_U:switch(t.state){case k.TEXT_ENTITY:i=k.TEXT,o="textNode";break;case k.ATTRIB_VALUE_ENTITY_Q:i=k.ATTRIB_VALUE_QUOTED,o="attribValue";break;case k.ATTRIB_VALUE_ENTITY_U:i=k.ATTRIB_VALUE_UNQUOTED,o="attribValue"}";"===s?(t[o]+=function(e){var t,n=e.entity,i=n.toLowerCase(),r="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[i]?e.ENTITIES[i]:("#"===(n=i).charAt(0)&&(r="x"===n.charAt(1)?(n=n.slice(2),(t=parseInt(n,16)).toString(16)):(n=n.slice(1),(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),r.toLowerCase()===n?String.fromCodePoint(t):(O(e,"Invalid character entity"),"&"+e.entity+";"))}(t),t.entity="",t.state=i):C(t.entity.length?E:b,s)?t.entity+=s:(O(t,"Invalid character in entity name"),t[o]+="&"+t.entity+s,t.entity="",t.state=i);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),i=0,o=0,a=r.length;o<a;o++){var s=e[r[o]].length;if(t<s)switch(r[o]){case"textNode":M(e);break;case"cdata":L(e,"oncdata",e.cdata),e.cdata="";break;case"script":L(e,"onscript",e.script),e.script="";break;default:D(e,"Max buffer length exceeded: "+r[o])}i=Math.max(i,s)}var l=n.MAX_BUFFER_LENGTH-i;e.bufferCheckPosition=l+e.position}(t),t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;M(e=this),""!==e.cdata&&(L(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(L(e,"onscript",e.script),e.script="")}};try{i=e(41).Stream}catch(l){i=function(){}}var a=n.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,t){if(!(this instanceof s))return new s(e,t);i.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t;n.on(e,t)},enumerable:!0,configurable:!1})}))}(s.prototype=Object.create(i.prototype,{constructor:{value:s}})).write=function(n){var i;return"function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)&&(this._decoder||(i=e(42).StringDecoder,this._decoder=new i("utf8")),n=this._decoder.write(n)),this._parser.write(n.toString()),this.emit("data",n),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===a.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),i.prototype.on.call(n,e,t)};var l="0124356789",u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d="'\"",c=(y="\r\n\t ")+">",p="[CDATA[",h="DOCTYPE",f="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",m={xml:f,xmlns:g},y=T(y),v=(l=T(l),u=T(u),/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function T(e){return e.split("").reduce((function(e,t){return e[t]=!0,e}),{})}function C(e,t){return n=e,"[object RegExp]"===Object.prototype.toString.call(n)?t.match(e):e[t];var n}function S(e,t){return!C(e,t)}d=T(d),c=T(c);var w,A,k=0;for(var P in n.STATE={BEGIN:k++,BEGIN_WHITESPACE:k++,TEXT:k++,TEXT_ENTITY:k++,OPEN_WAKA:k++,SGML_DECL:k++,SGML_DECL_QUOTED:k++,DOCTYPE:k++,DOCTYPE_QUOTED:k++,DOCTYPE_DTD:k++,DOCTYPE_DTD_QUOTED:k++,COMMENT_STARTING:k++,COMMENT:k++,COMMENT_ENDING:k++,COMMENT_ENDED:k++,CDATA:k++,CDATA_ENDING:k++,CDATA_ENDING_2:k++,PROC_INST:k++,PROC_INST_BODY:k++,PROC_INST_ENDING:k++,OPEN_TAG:k++,OPEN_TAG_SLASH:k++,ATTRIB:k++,ATTRIB_NAME:k++,ATTRIB_NAME_SAW_WHITE:k++,ATTRIB_VALUE:k++,ATTRIB_VALUE_QUOTED:k++,ATTRIB_VALUE_CLOSED:k++,ATTRIB_VALUE_UNQUOTED:k++,ATTRIB_VALUE_ENTITY_Q:k++,ATTRIB_VALUE_ENTITY_U:k++,CLOSE_TAG:k++,CLOSE_TAG_SAW_WHITE:k++,SCRIPT:k++,SCRIPT_ENDING:k++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach((function(e){var t=n.ENTITIES[e],i="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=i})),n.STATE)n.STATE[n.STATE[P]]=P;function I(e,t,n){e[t]&&e[t](n)}function L(e,t,n){e.textNode&&M(e),I(e,t,n)}function M(e){e.textNode=R(e.opt,e.textNode),e.textNode&&I(e,"ontext",e.textNode),e.textNode=""}function R(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function D(e,t){return M(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,I(e,"onerror",t),e}function x(e){return e.sawRoot&&!e.closedRoot&&O(e,"Unclosed root tag"),e.state!==k.BEGIN&&e.state!==k.BEGIN_WHITESPACE&&e.state!==k.TEXT&&D(e,"Unexpected end"),M(e),e.c="",e.closed=!0,I(e,"onend"),o.call(e,e.strict,e.opt),e}function O(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&D(e,t)}function N(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),i=n[0],r=n[1];return t&&"xmlns"===e&&(i="xmlns",r=""),{prefix:i,local:r}}function B(e){var t,n,i,r,o;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(n=(t=N(e.attribName,!0)).prefix,i=t.local,"xmlns"===n&&("xml"===i&&e.attribValue!==f?O(e,"xml: prefix must be bound to "+f+"\nActual: "+e.attribValue):"xmlns"===i&&e.attribValue!==g?O(e,"xmlns: prefix must be bound to "+g+"\nActual: "+e.attribValue):(r=e.tag,o=e.tags[e.tags.length-1]||e,r.ns===o.ns&&(r.ns=Object.create(o.ns)),r.ns[i]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,L(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue=""}function U(e,t){if(e.opt.xmlns){var n=e.tag,i=N(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(O(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix);var r=e.tags[e.tags.length-1]||e;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){L(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],l=s[0],u=s[1],d=N(l,!0),c=d.prefix,p=d.local,h=""!==c&&n.ns[c]||"",f={name:l,value:u,prefix:c,local:p,uri:h};c&&"xmlns"!==c&&!h&&(O(e,"Unbound namespace prefix: "+JSON.stringify(c)),f.uri=c),e.tag.attributes[l]=f,L(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),L(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=k.TEXT:e.state=k.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function F(e){if(!e.tagName)return O(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=k.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=k.SCRIPT);L(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var i=n;t--&&e.tags[t].name!==i;)O(e,"Unexpected close tag");if(t<0)return O(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=k.TEXT);e.tagName=n;for(var r=e.tags.length;r-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,L(e,"onclosetag",e.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==l.ns&&Object.keys(o.ns).forEach((function(t){var n=o.ns[t];L(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=k.TEXT}function j(e,t){"<"===t?(e.state=k.OPEN_WAKA,e.startTagPosition=e.position):S(y,t)&&(O(e,"Non-whitespace before first tag."),e.textNode=t,e.state=k.TEXT)}function q(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function V(){var e,t,n=[],i=-1,r=arguments.length;if(!r)return"";for(var o="";++i<r;){var a=Number(arguments[i]);if(!isFinite(a)||a<0||1114111<a||A(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?n.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,n.push(e,t)),(i+1===r||16384<n.length)&&(o+=w.apply(null,n),n.length=0)}return o}k=n.STATE,String.fromCodePoint||(w=String.fromCharCode,A=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:V,configurable:!0,writable:!0}):String.fromCodePoint=V)}(void 0===n?this.sax={}:n)}).call(this,e(8).Buffer)},{41:41,42:42,8:8}],41:[function(e,t,n){t.exports=r;var i=e(11).EventEmitter;function r(){i.call(this)}e(21)(r,i),r.Readable=e(36),r.Writable=e(38),r.Duplex=e(26),r.Transform=e(37),r.PassThrough=e(35),(r.Stream=r).prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",l));var a=!1;function s(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(d(),0===i.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",r),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",u),e.on("error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},{11:11,21:21,26:26,35:35,36:36,37:37,38:38}],42:[function(e,t,n){"use strict";var i=e(39).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=d,this.end=c,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=a(t[i]);return 0<=r?(0<r&&(e.lastNeed=r-1),r):--i<n||-2===r?0:0<=(r=a(t[i]))?(0<r&&(e.lastNeed=r-2),r):--i<n||-2===r?0:0<=(r=a(t[i]))?(0<r&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{39:39}],43:[function(e,t,n){(function(t,i){var r=e(25).nextTick,o=Function.prototype.apply,a=Array.prototype.slice,s={},l=0;function u(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new u(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new u(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,i=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,r((function(){s[t]&&(i?e.apply(null,i):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof i?i:function(e){delete s[e]}}).call(this,e(43).setImmediate,e(43).clearImmediate)},{25:25,43:43}],44:[function(e,t,n){(function(e){function n(t){try{if(!e.localStorage)return}catch(t){return}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(46)),o=i(e(54)),a=i(e(47)),s=1,l=2,u=3,d=4,c=5;function p(e){e=e||{};var t,n=this.context,i=(0,r.default)(n).getInstance(),a=e.settings,p=[],h=void 0,f=void 0,g=void 0;function m(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function y(e,t){var n="",r=null;h&&(r=(new Date).getTime(),n+="["+(r-g)+"]"),f&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),0<n.length&&(n+=" ");for(var s=arguments.length,l=Array(2<s?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];Array.apply(null,l).forEach((function(e){n+=e+" "})),p[e]&&a.get().debug.logLevel>=e&&p[e](n),i.trigger(o.default.LOG,{message:n,level:e})}return t={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];y.apply(void 0,[s,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];y.apply(void 0,[l,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];y.apply(void 0,[u,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];y.apply(void 0,[d,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];y.apply(void 0,[c,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){h=e},setCalleeNameVisible:function(e){f=e}},f=h=!0,g=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(p[s]=m(window.console.error),p[l]=m(window.console.error),p[u]=m(window.console.warn),p[d]=m(window.console.info),p[c]=m(window.console.debug)),t}p.__dashjs_factory_name="Debug";var h=a.default.getSingletonFactory(p);h.LOG_LEVEL_NONE=0,h.LOG_LEVEL_FATAL=s,h.LOG_LEVEL_ERROR=l,h.LOG_LEVEL_WARNING=u,h.LOG_LEVEL_INFO=d,h.LOG_LEVEL_DEBUG=c,a.default.updateSingletonFactory(p.__dashjs_factory_name,h),n.default=h,t.exports=n.default},{46:46,47:47,54:54}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(){var e={};function t(t,n,i){var r=-1;return e[t]&&e[t].some((function(e,t){if(e&&e.callback===n&&(!i||i===e.scope))return r=t,!0})),r}return{on:function(n,i,r){var o,a=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!i||"function"!=typeof i)throw new Error("listener must be a function: "+i);0<=t(n,i,r)||(e[n]=e[n]||[],o={callback:i,scope:r,priority:a},e[n].some((function(t,i){if(t&&a>t.priority)return e[n].splice(i,0,o),!0}))||e[n].push(o))},off:function(n,i,r){var o;n&&i&&e[n]&&((o=t(n,i,r))<0||(e[n][o]=null))},trigger:function(t,n){if(t&&e[t]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=t,e[t]=e[t].filter((function(e){return e})),e[t].forEach((function(e){return e&&e.callback.call(e.scope,n)}))}},reset:function(){e={}}}}o.__dashjs_factory_name="EventBus";var a=r.default.getSingletonFactory(o);a.EVENT_PRIORITY_LOW=0,a.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(o.__dashjs_factory_name,a),n.default=a,t.exports=n.default},{47:47}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r,o,a,s=(void 0,r=[],o={},a={},i={extend:function(e,t,n,i){!i[e]&&t&&(i[e]={instance:t,override:n})},getSingletonInstance:l,setSingletonInstance:function(e,t,n){for(var i in r){var o=r[i];if(o.context===e&&o.name===t)return void(r[i].instance=n)}r.push({name:t,context:e,instance:n})},getSingletonFactory:function(e){var t=u(e.__dashjs_factory_name,o);return t||(t=function(t){var n=void 0;return void 0===t&&(t={}),{getInstance:function(){return(n=n||l(t,e.__dashjs_factory_name))||(n=c(e,t,arguments),r.push({name:e.__dashjs_factory_name,context:t,instance:n})),n}}},o[e.__dashjs_factory_name]=t),t},getSingletonFactoryByName:function(e){return u(e,o)},updateSingletonFactory:function(e,t){d(e,t,o)},getClassFactory:function(e){var t=u(e.__dashjs_factory_name,a);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return c(e,t,arguments)}}},a[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return u(e,a)},updateClassFactory:function(e,t){d(e,t,a)}});function l(e,t){for(var n in r){var i=r[n];if(i.context===e&&i.name===t)return i.instance}return null}function u(e,t){return t[e]}function d(e,t,n){e in n&&(n[e]=t)}function c(e,t,n){var r=void 0,o=e.__dashjs_factory_name,a=t[o];if(a){var s=a.instance;if(!a.override)return s.apply({context:t,factory:i},n);for(var l in r=e.apply({context:t},n),s=s.apply({context:t,factory:i,parent:r},n))r.hasOwnProperty(l)&&(r[l]=s[l])}else r=e.apply({context:t},n);return r.getClassName=function(){return o},r}n.default=s,t.exports=n.default},{}],48:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(47)),a=i(e(49)),s=i(e(45)),l=i(e(108)),u=e(242);function d(){var e,t,n={debug:{logLevel:s.default.LOG_LEVEL_WARNING},streaming:{metricsMaxListDepth:1e3,abandonLoadTimeout:1e4,liveDelayFragmentCount:NaN,liveDelay:null,scheduleWhilePaused:!0,fastSwitchEnabled:!1,flushBufferAtTrackSwitch:!1,calcSegmentAvailabilityRangeFromTimeline:!0,bufferPruningInterval:10,bufferToKeep:20,jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,stableBufferTime:12,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600,wallclockTimeUpdateInterval:50,lowLatencyEnabled:!1,keepProtectionMediaKeys:!1,useManifestDateHeaderTimeSource:!0,useSuggestedPresentationDelay:!0,useAppendWindow:!0,manifestUpdateRetryInterval:100,liveCatchUpMinDrift:.02,liveCatchUpMaxDrift:0,liveCatchUpPlaybackRate:.5,liveCatchupLatencyThreshold:NaN,lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},retryIntervals:(r(e={},u.HTTPRequest.MPD_TYPE,500),r(e,u.HTTPRequest.XLINK_EXPANSION_TYPE,500),r(e,u.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),r(e,u.HTTPRequest.INIT_SEGMENT_TYPE,1e3),r(e,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),r(e,u.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),r(e,u.HTTPRequest.OTHER_TYPE,1e3),r(e,"lowLatencyReductionFactor",10),e),retryAttempts:(r(t={},u.HTTPRequest.MPD_TYPE,3),r(t,u.HTTPRequest.XLINK_EXPANSION_TYPE,1),r(t,u.HTTPRequest.MEDIA_SEGMENT_TYPE,3),r(t,u.HTTPRequest.INIT_SEGMENT_TYPE,3),r(t,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),r(t,u.HTTPRequest.INDEX_SEGMENT_TYPE,3),r(t,u.HTTPRequest.OTHER_TYPE,3),r(t,"lowLatencyMultiplyFactor",5),t),abr:{movingAverageMethod:l.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:l.default.ABR_STRATEGY_DYNAMIC,bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useBufferOccupancyABR:!1,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{enabled:!1,sid:null,cid:null,did:null}}},i=a.default.clone(n);return{get:function(){return i},update:function(e){"object"==typeof e&&function e(t,n,i){for(var r in t)t.hasOwnProperty(r)&&n.hasOwnProperty(r)&&("object"==typeof t[r]&&null!==t[r]?e(t[r],n[r],i.slice()+r+"."):n[r]=a.default.clone(t[r]))}(e,i,"")},reset:function(){i=a.default.clone(n)}}}d.__dashjs_factory_name="Settings";var c=o.default.getSingletonFactory(d);n.default=c,t.exports=n.default},{108:108,242:242,45:45,47:47,49:49}],49:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){n&&i(e,n)}(o,0,[{key:"mixin",value:function(e,t,n){var i=void 0,r={};if(e)for(var a in t)t.hasOwnProperty(a)&&(i=t[a],a in e&&(e[a]===i||a in r&&r[a]===i)||("object"==typeof e[a]&&null!==e[a]?e[a]=o.mixin(e[a],i,n):e[a]=n(i)));return e}},{key:"clone",value:function(e){if(!e||"object"!=typeof e)return e;var t=void 0;if(e instanceof Array){t=[];for(var n=0,i=e.length;n<i;++n)n in e&&t.push(o.clone(e[n]))}else t={};return o.mixin(t,e,o.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{var n=function(){if(!t||0===t.length)return{v:e};var n=new URL(e);return t.forEach((function(e){e.key&&e.value&&n.searchParams.set(e.key,e.value)})),{v:n.href}}();if("object"==typeof n)return n.v}catch(t){return e}}},{key:"generateUuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=r,t.exports=n.default},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return i};var i="3.1.3"},{}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,((i=e(52))&&i.__esModule?i:{default:i}).default),r);n.default=o,t.exports=n.default},{52:52}],52:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){t&&i(e.prototype,t)}(o,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,i=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=r,t.exports=n.default},{}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=e(55))&&i.__esModule?i:{default:i}).default),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INBAND_EVENTS="inbandEvents",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATE_STARTED="representationUpdateStarted",this.REPRESENTATION_UPDATE_COMPLETED="representationUpdateCompleted",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEGMENTBASE_INIT_REQUEST_NEEDED="segmentBaseInitRequestNeeded",this.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED="segmentBaseSegmentsListRequestNeeded",this.SEEK_TARGET="seekTarget",this.DYNAMIC_STREAM_COMPLETED="dynamicStreamCompleted"}n.default=r,t.exports=n.default},{55:55}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}};function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).apply(this,arguments)}var a=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=e(53))&&i.__esModule?i:{default:i}).default),o);n.default=a,t.exports=n.default},{53:53}],55:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){t&&i(e.prototype,t)}(o,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,i=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=r,t.exports=n.default},{}],56:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(61)),o=i(e(93)),a=i(e(89)),s=i(e(95)),l=i(e(88)),u=i(e(86)),d=i(e(47)),c=i(e(65));function p(){var e,t=void 0,n=void 0,i=void 0,d=void 0,p=void 0,h=void 0,f=this.context;function g(e,i,o){var a,s=t.getAdaptationsForType(n[0].mpd.manifest,e,i);if(!s||0===s.length)return null;if(1<s.length&&o){var l=m(o,i);if(d[o.id]&&d[o.id][i])for(var u=0,c=s.length;u<c;u++)if(d[o.id][i].isMediaInfoEqual(l[u]))return s[u];for(u=0,c=s.length;u<c;u++)if(a=s[u],t.getRolesForAdaptation(a).filter((function(e){return e.value===r.default.MAIN}))[0])return s[u]}return s[0]}function m(e,r,o){var a,s=n,l=o,u=[],d=void 0,c=void 0,h=void 0,f=void 0,g=void 0,m=void 0;if(l)A(),s=y(l);else{if(!(0<n.length))return u;l=n[0].mpd.manifest}var v=T(e,s);v&&(m=v.id);var _=t.getAdaptationsForType(l,e?e.index:null,r!==p.EMBEDDED_TEXT?r:p.VIDEO);if(!_||0===_.length)return u;for(i[m]=i[m]||t.getAdaptationsForPeriod(v),f=0,a=_.length;f<a;f++)if(d=_[f],h=t.getIndexForAdaptation(d,l,e.index),c=C(i[m][h]),r===p.EMBEDDED_TEXT){var b=c.accessibility.length;for(g=0;g<b;g++)if(c){var E=c.accessibility[g];if(0===E.indexOf("cea-608:")){var w=E.substring(8).split(";");if("CC"===w[0].substring(0,2))for(g=0;g<w.length;g++)S(c=c||C.call(this,i[m][h]),w[g].substring(0,3),w[g].substring(4)),u.push(c),c=null;else for(g=0;g<w.length;g++)S(c=c||C.call(this,i[m][h]),"CC"+(g+1),w[g]),u.push(c),c=null}else 0===E.indexOf("cea-608")&&(S(c,p.CC1,"eng"),u.push(c),c=null)}}else r===p.IMAGE?(c.type=p.IMAGE,u.push(c),c=null):c&&u.push(c);return u}function y(e){var n=v(e);return t.getRegularPeriods(n)}function v(e){var n=b(e);return t.getMpd(n)}function _(){n=[],i={},d={}}function b(e){return e||(0<n.length?n[0].mpd.manifest:null)}function E(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&i[e.streamInfo.id]?i[e.streamInfo.id][e.index]:null}function T(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i];if(e&&e.id===r.id)return r}return null}function C(e){if(!e)return null;var n,i=new a.default,r=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return i.id=e.id,i.index=e.index,i.type=e.type,i.streamInfo=w(e.period),i.representationCount=t.getRepresentationCount(r),i.labels=t.getLabelsForAdaptation(r),i.lang=t.getLanguageForAdaptation(r),n=t.getViewpointForAdaptation(r),i.viewpoint=n?n.value:void 0,i.accessibility=t.getAccessibilityForAdaptation(r).map((function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==h&&(n=t?"cea-608:"+t:"cea-608",i.embeddedCaptions=!0),n})),i.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(r).map((function(e){return e.value})),0===i.audioChannelConfiguration.length&&Array.isArray(r.Representation_asArray)&&0<r.Representation_asArray.length&&(i.audioChannelConfiguration=t.getAudioChannelConfigurationForRepresentation(r.Representation_asArray[0]).map((function(e){return e.value}))),i.roles=t.getRolesForAdaptation(r).map((function(e){return e.value})),i.codec=t.getCodec(r),i.mimeType=t.getMimeType(r),i.contentProtection=t.getContentProtectionData(r),i.bitrateList=t.getBitrateListForAdaptation(r),i.contentProtection&&i.contentProtection.forEach((function(e){e.KID=t.getKID(e)})),i.isText=t.getIsTextTrack(i.mimeType),i.supplementalProperties=t.getSupplementalPropperties(r),i}function S(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=p.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function w(e){var n,i,r=new s.default;return r.id=e.id,r.index=e.index,r.start=e.start,r.duration=e.duration,r.manifestInfo=(n=e.mpd,(i=new l.default).DVRWindowSize=n.timeShiftBufferDepth,i.loadedTime=n.manifest.loadedTime,i.availableFrom=n.availabilityStartTime,i.minBufferTime=n.manifest.minBufferTime,i.maxFragmentDuration=n.maxSegmentDuration,i.duration=t.getDuration(n.manifest),i.isDynamic=t.getIsDynamic(n.manifest),i.serviceDescriptions=t.getServiceDescriptions(n.manifest),i.protocol=n.manifest.protocol,i),r.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<1,r}function A(){if(!p)throw new Error("setConfig function has to be called previously")}function k(e){return 0<n.length?n[0].mpd.manifest.Period_asArray[e]:null}function P(e,t,n){var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0;if(e)for(i=e.AdaptationSet_asArray,a=0;a<i.length;a+=1)for(o=i[a].Representation_asArray,s=0;s<o.length;s+=1)if(t===(r=o[s]).id)return n?s:r;return null}return e={getBandwidthForRepresentation:function(e,t){var n;return(n=P(k(t),e))?n.bandwidth:null},getIndexForRepresentation:function(e,t){var n;return null!==(n=P(k(t),e,!0))?n:-1},getMaxIndexForBufferType:function(e,n){return function(e,n){var i,r=void 0,o=void 0,a=void 0;if(!e||!n)return-1;for(i=e.AdaptationSet_asArray,a=0;a<i.length;a+=1)if(o=(r=i[a]).Representation_asArray,t.getIsTypeOf(r,n))return o.length;return-1}(k(n),e)},convertDataToRepresentationInfo:function(e){if(e){var n=new o.default,i=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=t.getRepresentationFor(e.index,i);return n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(r),n.DVRWindow=e.segmentAvailabilityRange,n.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.mediaInfo=C(e.adaptation),n}return null},getDataForMedia:E,getStreamsInfo:function(e,t){var i=[],r=n;if(e&&(A(),r=y(e)),0<r.length){(!t||t>r.length)&&(t=r.length);for(var o=0;o<t;o++)i.push(w(r[o]))}return i},getMediaInfoForType:function(e,r){if(0===n.length||!e)return null;var o=T(e,n);if(!o)return null;var a=o.id;i[a]=i[a]||t.getAdaptationsForPeriod(o);var s=g(e.index,r,e);if(!s)return null;var l=t.getIndexForAdaptation(s,n[0].mpd.manifest,e.index);return C(i[a][l])},getAllMediaInfoForType:m,getAdaptationForType:g,getRealAdaptation:function(e,i){var r=void 0,o=T(e,n),a=i?i.id:null;return 0<n.length&&o&&(r=a?t.getAdaptationForId(a,n[0].mpd.manifest,o.index):t.getAdaptationForIndex(i?i.index:null,n[0].mpd.manifest,o.index)),r},getVoRepresentations:function(e){var n=E(e);return t.getRepresentationsForAdaptation(n)},getEventsFor:function(e,i){var r,l=[];return 0<n.length&&(r=n[0].mpd.manifest,e instanceof s.default?l=t.getEventsForPeriod(T(e,n)):e instanceof a.default?l=t.getEventStreamForAdaptationSet(r,E(e)):e instanceof o.default&&(l=t.getEventStreamForRepresentation(r,i))),l},getEvent:function(e,t,n){if(!e||!t)return null;var i=new u.default,r=e.scheme_id_uri,o=e.value,a=e.timescale,s=void 0,l=0===e.version?n*a+(s=e.presentation_time_delta):(s=0,e.presentation_time_delta),d=e.event_duration,c=e.id,p=e.message_data;return t[r+"/"+o]?(i.eventStream=t[r+"/"+o],i.eventStream.value=o,i.eventStream.timescale=a,i.duration=d,i.id=c,i.calculatedPresentationTime=l,i.messageData=p,i.presentationTimeDelta=s,i):null},getMpd:v,setConfig:function(e){e&&(e.constants&&(p=e.constants),e.cea608parser&&(h=e.cea608parser),e.errHandler&&t.setConfig({errHandler:e.errHandler}),e.BASE64&&t.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;A(),n=y(e),i={}},getIsTextTrack:function(e){return t.getIsTextTrack(e)},getUTCTimingSources:function(){var e=b();return t.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<n.length?n[0].mpd:null;return t.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){var n=v(e);return t.getAvailabilityStartTime(n)},getIsDynamic:function(e){var n=b(e);return t.getIsDynamic(n)},getDuration:function(e){var n=b(e);return t.getDuration(n)},getRegularPeriods:y,getLocation:function(e){return t.getLocation(e)},getManifestUpdatePeriod:function(e){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return t.getManifestUpdatePeriod(e,n)},getIsDVB:function(e){return t.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getBaseURLsFromElement:function(e){return t.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return t.getRepresentationSortFunction()},getCodec:function(e,n,i){return t.getCodec(e,n,i)},getVoAdaptations:function(){return i},getVoPeriods:function(){return n},getPeriodById:function(e){if(!e||0===n.length)return null;var t=n.filter((function(t){return t.id===e}));return t&&0<t.length?t[0]:null},setCurrentMediaInfo:function(e,t,n){d[e]=d[e]||{},d[e][t]=d[e][t]||{},d[e][t]=n},reset:_},t=(0,c.default)(f).getInstance(),_(),e}p.__dashjs_factory_name="DashAdapter",n.default=d.default.getSingletonFactory(p),t.exports=n.default},{47:47,61:61,65:65,86:86,88:88,89:89,93:93,95:95}],57:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(228)),o=e(242),a=i(e(47)),s=e(80),l=i(e(64));function u(e){e=e||{};var t=this.context,n=e.eventBus,i=e.events,a=e.debug,u=e.dashConstants,d=e.urlUtils,c=e.type,p=e.streamInfo,h=e.timelineConverter,f=e.dashMetrics,g=e.baseURLController,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,E=void 0,T=void 0,C=void 0,S=void 0;function w(){v=-1,_=null}function A(){w(),C=S=b=null}function k(e,t,n){var i=g.resolve(n.path),r=void 0,o=void 0;return i&&t!==i.url&&d.isRelative(t)?(r=i.url,o=i.serviceLocation,t&&(r=d.resolve(t,r))):r=t,!d.isRelative(r)&&(e.url=r,e.serviceLocation=o,1)}function P(e){var t,r,o;e.sender.getType()===c&&(r=(t=e.representation).hasInitialization(),o=t.hasSegments(),r&&o?n.trigger(i.REPRESENTATION_UPDATE_COMPLETED,{sender:m,representation:t}):S.update(t,c,C,r,o))}function I(e,t){if(null==t)return null;var n=new r.default,i=t.representation,a=i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].bandwidth,l=t.media;l=(0,s.replaceTokenForTemplate)(l,"Number",t.replacementNumber);return l=(0,s.replaceTokenForTemplate)(l,"Time",t.replacementTime),l=(0,s.replaceTokenForTemplate)(l,"Bandwidth",a),l=(0,s.replaceIDForTemplate)(l,i.id),l=(0,s.unescapeDollarsInTemplate)(l),n.mediaType=c,n.type=o.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.duration=t.duration,n.timescale=i.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.wallStartTime=t.wallStartTime,n.quality=i.index,n.index=t.availabilityIdx,n.mediaInfo=e,n.adaptationIndex=i.adaptation.index,n.representationId=i.id,k(n,l,i)?n:void 0}function L(e){var t,n,i=!1;return e&&(E?T?i=!0:_&&(t=parseFloat((_.presentationStartTime-e.adaptation.period.start).toFixed(5)),n=0<_.duration?t+1.5*_.duration:t,i=e.adaptation.period.duration<=n):v>=e.availableSegmentsNumber&&(i=!0)),i}function M(e){var t=e.representation;t.segments&&n.trigger(i.REPRESENTATION_UPDATE_COMPLETED,{sender:this,representation:t})}function R(e){if(!e.error&&c===e.mediaType){for(var t,r=e.segments,o=e.representation,a=[],l=0,u=void 0,d=void 0,p=void 0,g=(u=0,r?r.length:0);u<g;u++)d=r[u],(p=(0,s.getTimeBasedSegment)(h,E,o,d.startTime,d.duration,d.timescale,d.media,d.mediaRange,l))&&(a.push(p),p=null,l++);0<a.length&&(o.segmentAvailabilityRange={start:a[0].presentationStartTime,end:a[a.length-1].presentationStartTime},o.availableSegmentsNumber=a.length,o.segments=a,E&&(t=a[a.length-1].presentationStartTime-8,h.setExpectedLiveEdge(t),f.updateManifestUpdateInfo({presentationStartTime:t}))),o.hasInitialization()&&n.trigger(i.REPRESENTATION_UPDATE_COMPLETED,{sender:this,representation:o})}}function D(){y.debug("Dynamic stream complete"),T=!0}return m={initialize:function(e){E=e,T=!1,S.initialize(e)},getType:function(){return c},getStreamInfo:function(){return p},getInitRequest:function(e,t){return t?function(e,t,n){var i=new r.default,a=t.adaptation.period,l=a.start;if(i.mediaType=n,i.type=o.HTTPRequest.INIT_SEGMENT_TYPE,i.range=t.range,i.availabilityStartTime=h.calcAvailabilityStartTimeFromPresentationTime(l,a.mpd,E),i.availabilityEndTime=h.calcAvailabilityEndTimeFromPresentationTime(l+a.duration,a.mpd,E),i.quality=t.index,i.mediaInfo=e,i.representationId=t.id,k(i,t.initialization,t))return i.url=(0,s.replaceTokenForTemplate)(i.url,"Bandwidth",t.bandwidth),i}(e,t,c):null},getRequestForSegment:I,getSegmentRequestForTime:function(e,t,n,i){var o=null;if(!t||!t.segmentInfoType)return o;var a=v,s=!!i&&i.keepIdx,l=!(!i||!i.ignoreIsFinished);b!==n&&(b=n,y.debug("Getting the request for time : "+n));var d=S.getSegmentByTime(t,n);return d?(v=d.availabilityIdx,_=d,y.debug("Index for time "+n+" is "+v),o=I(e,d)):!l&&L(t)&&((o=new r.default).action=r.default.ACTION_COMPLETE,o.index=v-1,o.mediaType=c,o.mediaInfo=e,y.debug("Signal complete in getSegmentRequestForTime")),s&&0<=a&&(v=t.segmentInfoType===u.SEGMENT_TIMELINE&&E?v:a),o},getNextSegmentRequest:function(e,t){var n=null;if(!t||!t.segmentInfoType)return null;b=null;var i=v+1;y.debug("Getting the next request at index: "+i);var o=S.getSegmentByIndex(t,i,_?_.mediaStartTime:-1);return o||isFinite(t.adaptation.period.duration)||T?(v=o?(n=I(e,o),o.availabilityIdx):E?i-1:i,o?_=o:L(t)&&((n=new r.default).action=r.default.ACTION_COMPLETE,n.index=v-1,n.mediaType=c,n.mediaInfo=e,y.debug("Signal complete")),n):(y.debug(c+" No segment found at index: "+i+". Wait for next loop"),null)},setCurrentIndex:function(e){v=e},getCurrentIndex:function(){return v},isMediaFinished:L,reset:function(){A(),n.off(i.INITIALIZATION_LOADED,M,m),n.off(i.SEGMENTS_LOADED,R,m),n.off(i.REPRESENTATION_UPDATE_STARTED,P,m),n.off(i.DYNAMIC_STREAM_COMPLETED,D,m)},resetIndex:w,setMimeType:function(e){C=e}},y=a.getLogger(m),A(),S=(0,l.default)(t).create(e),n.on(i.INITIALIZATION_LOADED,M,m),n.on(i.SEGMENTS_LOADED,R,m),n.on(i.REPRESENTATION_UPDATE_STARTED,P,m),n.on(i.DYNAMIC_STREAM_COMPLETED,D,m),m}u.__dashjs_factory_name="DashHandler",n.default=a.default.getClassFactory(u),t.exports=n.default},{228:228,242:242,47:47,64:64,80:80}],58:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=e(242),a=i(e(47)),s=i(e(109)),l=i(e(78)),u=i(e(153)),d=e(244);function c(e){e=e||{};var t,n=this.context,i=void 0,a=void 0,c=void 0,p=e.metricsModel;function h(e){var t=p.getMetricsFor(e,!0);if(!t)return null;var n=t.HttpList,i=null,r=void 0;if(!n||n.length<=0)return null;for(r=n.length-1;0<=r;){if(n[r].responsecode){i=n[r];break}r--}return i}function f(e){var t=p.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function g(e,t){if(!e)return null;var n=e[t];return n&&0!==n.length?n[n.length-1]:null}function m(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),i=0,r=n.length;i<r;i++){var o=n[i],a=o.indexOf(": ");0<a&&(t[o.substring(0,a)]=o.substring(a+2))}return t}return t={getCurrentRepresentationSwitch:function(e){return g(p.getMetricsFor(e,!0),s.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return g(p.getMetricsFor(e,!0),s.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){var t=g(p.getMetricsFor(e,!0),s.default.BUFFER_LEVEL);return t?l.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:h,getHttpRequests:f,getCurrentDroppedFrames:function(){return g(p.getMetricsFor(r.default.VIDEO,!0),s.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return g(p.getMetricsFor(e,!0),s.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return g(e?p.getMetricsFor(e,!0):p.getMetricsFor(r.default.VIDEO,!0)||p.getMetricsFor(r.default.AUDIO,!0),s.default.DVR_INFO)},getCurrentManifestUpdate:function(){return g(p.getMetricsFor(r.default.STREAM),s.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={},i=h(e);return i&&(n=m(i._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e){var t,n={},i=void 0,a=void 0;for(a=(t=f(r.default.STREAM)).length-1;0<=a;a--)if((i=t[a]).type===o.HTTPRequest.MPD_TYPE){n=m(i._responseHeaders);break}return void 0===n[e]?null:n[e]},addRepresentationSwitch:function(e,t,n,i,r){p.addRepresentationSwitch(e,t,n,i,r)},addDVRInfo:function(e,t,n,i){p.addDVRInfo(e,t,n,i)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();p.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),p.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration))},addManifestUpdateRepresentationInfo:function(e,t){var n;e&&(n=this.getCurrentManifestUpdate(),p.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType))},addManifestUpdate:function(e){p.addManifestUpdate(r.default.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,i,r){p.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,i,r)},addSchedulingInfo:function(e,t){p.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){p.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){p.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){p.addBufferState(e,t,n)},addDroppedFrames:function(e){p.addDroppedFrames(r.default.VIDEO,e)},addPlayList:function(){c&&(p.addPlayList(c),c=null)},addDVBErrors:function(e){p.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(c=new d.PlayList).start=new Date,c.mstart=e,c.starttype=t},createPlaylistTraceMetrics:function(e,t,n){!0===i&&(i=!1,(a=new d.PlayListTrace).representationid=e,a.start=new Date,a.mstart=t,a.playbackspeed=null!==n?n.toString():null)},updatePlayListTraceMetrics:function(e){if(a)for(var t in a)a[t]=e[t]},pushPlayListTraceMetrics:function(e,t){var n,r;!1===i&&c&&a&&a.start&&(n=a.start,r=e.getTime()-n.getTime(),a.duration=r,a.stopreason=t,c.trace.push(a),i=!0)},clearAllCurrentMetrics:function(){p.clearAllCurrentMetrics()}},p=p||(0,u.default)(n).getInstance({settings:e.settings}),i=!0,c=a=null,t}c.__dashjs_factory_name="DashMetrics",n.default=a.default.getSingletonFactory(c),t.exports=n.default},{108:108,109:109,153:153,242:242,244:244,47:47,78:78}],59:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(94)),o=i(e(226)),a=i(e(47)),s=i(e(228)),l=i(e(159));function u(){var e=this.context,t=void 0,n=void 0,i=void 0,a=void 0,u=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0;function E(){if(!b||!b.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function T(e){if(e.url){var t=new s.default;return t.setInfo(e),t}}function C(e,t,n){e?g.trigger(f.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):g.trigger(f.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new o.default(m.SEGMENT_BASE_LOADER_ERROR_CODE,m.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}return t={setConfig:function(e){e.baseURLController&&(b=e.baseURLController),e.dashMetrics&&(d=e.dashMetrics),e.mediaPlayerModel&&(p=e.mediaPlayerModel),e.errHandler&&(i=e.errHandler),e.settings&&(c=e.settings),e.boxParser&&(a=e.boxParser),e.events&&(f=e.events),e.eventBus&&(g=e.eventBus),e.debug&&(n=e.debug.getLogger(t)),e.requestModifier&&(u=e.requestModifier),e.errors&&(m=e.errors),e.urlUtils&&(_=e.urlUtils),e.constants&&(y=e.constants),e.dashConstants&&(v=e.dashConstants)},initialize:function(){h=(0,l.default)(e).create({errHandler:i,dashMetrics:d,mediaPlayerModel:p,requestModifier:u,useFetch:c?c.get().streaming.lowLatencyEnabled:null,boxParser:a,errors:m,urlUtils:_,constants:y,dashConstants:v})},loadInitialization:function e(t,i){E();var r=null,o=t?b.resolve(t.path):null,s=i||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:t&&t.adaptation?t.adaptation.type:null};n.debug("Start searching for initialization.");var l=T(s);h.load({request:l,success:function(n){s.bytesLoaded=s.range.end,(r=a.findInitRange(n))?(t.range=r,g.trigger(f.INITIALIZATION_LOADED,{representation:t})):(s.range.end=s.bytesLoaded+s.bytesToLoad,e(t,s))},error:function(){g.trigger(f.INITIALIZATION_LOADED,{representation:t})}}),n.debug("Perform init search: "+s.url)},loadSegments:function e(t,i,o,s,l){var u;E(),!o||void 0!==o.start&&void 0!==o.end||(o=(u=o?o.toString().split("-"):null)?{start:parseFloat(u[0]),end:parseFloat(u[1])}:null),s=s||C;var d=null,c=null,p=!!o,f=t?b.resolve(t.path):null,g={init:!1,url:f?f.url:void 0,range:p?o:{start:0,end:1500},searching:!p,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:t&&t.adaptation?t.adaptation.type:null},m=T(g);h.load({request:m,success:function(o){var l=g.bytesToLoad,u=o.byteLength;if(g.bytesLoaded=g.range.end-g.range.start,d=a.parse(o),(c=d.getBox("sidx"))&&c.isComplete){var p=c.references,h=void 0,f=void 0;null!=p&&0<p.length&&(h=1===p[0].reference_type),h?function(){n.debug("Initiate multiple SIDX load."),g.range.end=g.range.start+c.size;var r=void 0,o=void 0,a=void 0,l=void 0,u=[],d=0,h=(c.offset||g.range.start)+c.size,f=function(e){e?(u=u.concat(e),o<=++d&&(u.sort((function(e,t){return e.startTime-t.startTime<0?-1:0})),s(u,t,i))):s(null,t,i)};for(r=0,o=p.length;r<o;r++)l=(a=h)+p[r].referenced_size-1,h+=p[r].referenced_size,e(t,null,{start:a,end:l},f,g)}():(n.debug("Parsing segments from SIDX. representation "+t.adaptation.type+" - id: "+t.id+" for range : "+g.range.start+" - "+g.range.end),f=function(e,t){for(var n=e.references,i=n.length,o=e.timescale,a=e.earliest_presentation_time,s=t.range.start+e.offset+e.first_offset+e.size,l=[],u=void 0,d=void 0,c=void 0,p=void 0,h=0;h<i;h++)c=n[h].subsegment_duration,p=n[h].referenced_size,(u=new r.default).duration=c,u.startTime=a,u.timescale=o,d=s+p-1,u.mediaRange=s+"-"+d,l.push(u),a+=c,s+=p;return l}(c,g),s(f,t,i))}else{if(c)g.range.start=c.offset||g.range.start,g.range.end=g.range.start+(c.size||l);else{if(u<g.bytesLoaded)return void s(null,t,i);var m=d.getLastBox();m&&m.size?(g.range.start=m.offset+m.size,g.range.end=g.range.start+l):g.range.end+=l}e(t,i,g.range,s,g)}},error:function(){s(null,t,i)}}),n.debug("Perform SIDX load: "+g.url+" with range : "+g.range.start+" - "+g.range.end)},reset:function(){h.abort(),u=a=i=h=null}}}u.__dashjs_factory_name="SegmentBaseLoader",n.default=a.default.getSingletonFactory(u),t.exports=n.default},{159:159,226:226,228:228,47:47,94:94}],60:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(212)),o=i(e(108)),a=i(e(47)),s=i(e(94)),l=i(e(228)),u=i(e(159)),d=i(e(226));function c(){var e=this.context,t=void 0,n=void 0,i=void 0,a=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0;function b(){if(!_||!_.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function E(e,t,n){e?m.trigger(y.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):m.trigger(y.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new d.default(v.SEGMENT_BASE_LOADER_ERROR_CODE,v.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function T(e){var t=new l.default;return t.setInfo(e),t}return t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(o.default.MISSING_CONFIG_ERROR);_=e.baseURLController,p=e.dashMetrics,h=e.mediaPlayerModel,a=e.errHandler,g=e.settings,y=e.events,m=e.eventBus,v=e.errors,n=e.debug.getLogger(t),c=e.requestModifier},initialize:function(){f=(0,u.default)(e).create({errHandler:a,dashMetrics:p,mediaPlayerModel:h,requestModifier:c,useFetch:g?g.get().streaming.lowLatencyEnabled:null,errors:v})},loadInitialization:function(e,t){b();var i=null,r=e?_.resolve(e.path):null,o=e?e.range.split("-"):null,a=t||{range:{start:o?parseFloat(o[0]):null,end:o?parseFloat(o[1]):null},request:i,url:r?r.url:void 0,init:!0,mediaType:e&&e.adaptation?e.adaptation.type:null};n.info("Start loading initialization."),i=T(a),f.load({request:i,success:function(){m.trigger(y.INITIALIZATION_LOADED,{representation:e})},error:function(){m.trigger(y.INITIALIZATION_LOADED,{representation:e})}}),n.debug("Perform init load: "+a.url)},loadSegments:function(t,o,a,l){b();var u=null,d=t?_.resolve(t.path):null,c=d?d.url:void 0,p={bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:u,url:c,init:!1,mediaType:t&&t.adaptation?t.adaptation.type:null};l=l||E,u=T(p),n.debug("Parsing ebml header"),f.load({request:u,success:function(u){!function(t,o,a,l){if(t&&0!==t.byteLength){var u,d,c=(0,r.default)(e).create({data:t}),p=void 0,h=void 0,g=a?a.split("-"):null,m=null,y={url:o,range:{start:g?parseFloat(g[0]):null,end:g?parseFloat(g[1]):null},request:m};for(n.debug("Parse EBML header: "+y.url),c.skipOverElement(i.EBML),c.consumeTag(i.Segment),u=c.getMatroskaCodedNum(),u+=c.getPos(),d=c.getPos();c.moreData()&&!c.consumeTagAndSize(i.Segment.Info,!0);)if(!(c.skipOverElement(i.Segment.SeekHead,!0)||c.skipOverElement(i.Segment.Tracks,!0)||c.skipOverElement(i.Segment.Cues,!0)||c.skipOverElement(i.Void,!0)))throw new Error("no valid top level element found");for(;void 0===p;){var v=c.getMatroskaCodedNum(!0),_=c.getMatroskaCodedNum();if(v===i.Segment.Info.Duration.tag)p=c[i.Segment.Info.Duration.parse](_);else c.setPos(c.getPos()+_)}m=T(y),f.load({request:m,success:function(t){h=function(t,o,a,l){for(var u,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=(c=[],h=0,(u=function(t){var n=[],o=(0,r.default)(e).create({data:t}),a=void 0,s=void 0;for(o.consumeTagAndSize(i.Segment.Cues);o.moreData()&&o.consumeTagAndSize(i.Segment.Cues.CuePoint,!0);){for((a={}).CueTime=o.parseTag(i.Segment.Cues.CuePoint.CueTime),a.CueTracks=[];o.moreData()&&o.consumeTag(i.Segment.Cues.CuePoint.CueTrackPositions,!0);){var l=o.getMatroskaCodedNum(),u=o.getPos();if((s={}).Track=o.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===s.Track)throw new Error("Cue track cannot be 0");s.ClusterPosition=o.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),a.CueTracks.push(s),o.setPos(u+l)}if(0===a.CueTracks.length)throw new Error("Mandatory cuetrack not found");n.push(a)}if(0===n.length)throw new Error("mandatory cuepoint not found");return n}(t)).length);h<m;h+=1)p=new s.default,d=0,d=h<u.length-1?u[h+1].CueTime-u[h].CueTime:l-u[h].CueTime,p.duration=d,p.startTime=u[h].CueTime,p.timescale=1e3,f=u[h].CueTracks[0].ClusterPosition+o,g=h<u.length-1?u[h+1].CueTracks[0].ClusterPosition+o-1:a-1,p.mediaRange=f+"-"+g,c.push(p);return n.debug("Parsed cues: "+c.length+" cues."),c}(t,d,u,p),l(h)},error:function(){n.error("Download Error: Cues "+y.url),l(null)}}),n.debug("Perform cues load: "+y.url+" bytes="+y.range.start+"-"+y.range.end)}else l(null)}(u,c,a,(function(e){l(e,t,o)}))},error:function(){l(null,t,o)}})},reset:function(){c=a=null}},i={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t}c.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=a.default.getSingletonFactory(c),t.exports=n.default},{108:108,159:159,212:212,226:226,228:228,47:47,94:94}],61:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var o=new(function(e,t,n){t&&i(e.prototype,t)}(r,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate"}}]),r);n.default=o,t.exports=n.default},{}],62:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(226)),a=i(e(47));function s(e){var t=(e=e||{}).eventBus,n=e.events,i=e.errors,a=e.abrController,s=e.dashMetrics,l=e.playbackController,u=e.timelineConverter,d=e.type,c=e.streamId,p=e.dashConstants,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0;function v(){if(!(a&&s&&l&&u))throw new Error(r.default.MISSING_CONFIG_ERROR)}function _(){g=!(f=null),m=[]}function b(){v();var e=new Date,t=y,n=1e3*l.getTime();t&&s.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function E(e){return null==e||e>=m.length?null:m[e]}function T(e,t){var n;e.segmentAvailabilityRange=u.calcSegmentAvailabilityRange(e,t),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start?w(new o.default(i.SEGMENTS_UNAVAILABLE_ERROR_CODE,i.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end})):t&&(n=e.segmentAvailabilityRange.end,u.setExpectedLiveEdge(n),s.updateManifestUpdateInfo({presentationStartTime:n}))}function C(e,i){v();for(var r=0,o=m.length;r<o;r++)T(m[r],e),i&&t.trigger(n.REPRESENTATION_UPDATE_STARTED,{sender:h,representation:m[r]})}function S(){g=!0,t.trigger(n.DATA_UPDATE_STARTED,{sender:h})}function w(e){g=!1;var i={sender:h,data:f,currentRepresentation:y};e&&(i.error=e),t.trigger(n.DATA_UPDATE_COMPLETED,i)}function A(e){var i=e;t.trigger(n.AST_IN_FUTURE,{delay:i}),setTimeout((function(){g||(S(),m.forEach((function(e){e.segmentAvailabilityRange=null})),C(l.getIsDynamic(),!0))}),i)}function k(e){if(e.sender.getType()===d&&e.sender.getStreamInfo().id===c&&g)if(e.error)w(e.error);else{var t,n=e.sender.getStreamInfo(),r=e.representation,u=s.getCurrentManifestUpdate(),h=!1,f=0,v=void 0;if(r.adaptation.period.mpd.manifest.type===p.DYNAMIC&&!r.adaptation.period.mpd.manifest.ignorePostponeTimePeriod&&l.getStreamController().getStreams().length<=1&&(f=function(e,t){try{var n=l.getStreamController().getActiveStreamInfo(),i=e.segmentAvailabilityRange.start;n&&n.id&&n.id!==t.id&&(i=Math.min(l.getTime(),i));var r=e.segmentAvailabilityRange.end-i;return 1e3*(l.getLiveDelay()-r)}catch(e){return 0}}(r,n)),0<f)return A(f),void w(new o.default(i.SEGMENTS_UPDATE_FAILED_ERROR_CODE,i.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE));if(u){for(var _=0;_<u.representationInfo.length;_++)if((v=u.representationInfo[_]).index===r.index&&v.mediaType===d){h=!0;break}h||s.addManifestUpdateRepresentationInfo(r,d)}!function(){for(var e=0,t=m.length;e<t;e++){var n=m[e].segmentInfoType;if(null===m[e].segmentAvailabilityRange||!m[e].hasInitialization()||(n===p.SEGMENT_BASE||n===p.BASE_URL)&&!m[e].segments)return}return 1}()||(a.setPlaybackQuality(d,n,(t=y,m.indexOf(t))),s.updateManifestUpdateInfo({latency:y.segmentAvailabilityRange.end-l.getTime()}),s.getCurrentRepresentationSwitch(y.adaptation.type)||b(),w())}}function P(e){e.isDynamic&&C(e.isDynamic)}function I(e){e.mediaType===d&&c===e.streamInfo.id&&(y=E(e.newQuality),b())}function L(e){e.newDuration&&y&&y.adaptation.period&&(y.adaptation.period.duration=e.newDuration)}return h={getData:function(){return f},isUpdating:function(){return g},updateData:function(e,t,n,i){v(),S(),m=t,y=E(i),f=e,n===r.default.VIDEO||n===r.default.AUDIO||n===r.default.FRAGMENTED_TEXT?C(l.getIsDynamic(),!0):w()},updateRepresentation:T,getCurrentRepresentation:function(){return y},getRepresentationForQuality:E,getType:function(){return d},getStreamId:function(){return c},reset:function(){t.off(n.QUALITY_CHANGE_REQUESTED,I,h),t.off(n.REPRESENTATION_UPDATE_COMPLETED,k,h),t.off(n.WALLCLOCK_TIME_UPDATED,P,h),t.off(n.MANIFEST_VALIDITY_CHANGED,L,h),_()}},_(),t.on(n.QUALITY_CHANGE_REQUESTED,I,h),t.on(n.REPRESENTATION_UPDATE_COMPLETED,k,h),t.on(n.WALLCLOCK_TIME_UPDATED,P,h),t.on(n.MANIFEST_VALIDITY_CHANGED,L,h),h}s.__dashjs_factory_name="RepresentationController",n.default=a.default.getClassFactory(s),t.exports=n.default},{108:108,226:226,47:47}],63:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(59)),a=i(e(60));function s(e){e=e||{};var t=this.context,n=e.eventBus,i=e.events,r=e.dashMetrics,s=e.mediaPlayerModel,l=e.errHandler,u=e.baseURLController,d=e.debug,c=e.boxParser,p=e.requestModifier,h=e.errors,f=void 0,g=void 0,m=void 0;function y(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}function v(e){y(e.mimeType)?m.loadInitialization(e.representation):g.loadInitialization(e.representation)}function _(e){y(e.mimeType)?m.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null,e.callback):g.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null,e.callback)}return f={initialize:function(){n.on(i.SEGMENTBASE_INIT_REQUEST_NEEDED,v,f),n.on(i.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,_,f),g.initialize(),m.initialize()},reset:function(){n.off(i.SEGMENTBASE_INIT_REQUEST_NEEDED,v,f),n.off(i.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,_,f)}},g=(0,o.default)(t).getInstance(),m=(0,a.default)(t).getInstance(),g.setConfig({baseURLController:u,dashMetrics:r,mediaPlayerModel:s,errHandler:l,eventBus:n,events:i,errors:h,debug:d,boxParser:c,requestModifier:p}),m.setConfig({baseURLController:u,dashMetrics:r,mediaPlayerModel:s,errHandler:l,eventBus:n,events:i,errors:h,debug:d,requestModifier:p}),f}s.__dashjs_factory_name="SegmentBaseController";var l=r.default.getSingletonFactory(s);n.default=l,t.exports=n.default},{47:47,59:59,60:60}],64:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(83)),a=i(e(81)),s=i(e(77)),l=i(e(79));function u(e){e=e||{};var t,n=this.context,i=e.events,r=e.eventBus,u=e.dashConstants,d=void 0;function c(e){return e?e.segments?d[u.SEGMENT_BASE]:d[e.segmentInfoType]:null}return t={initialize:function(t){d[u.SEGMENT_TIMELINE]=(0,o.default)(n).create(e,t),d[u.SEGMENT_TEMPLATE]=(0,a.default)(n).create(e,t),d[u.SEGMENT_LIST]=(0,s.default)(n).create(e,t),d[u.SEGMENT_BASE]=(0,l.default)(n).create(e,t)},update:function(e,t,n,o,a){o||r.trigger(i.SEGMENTBASE_INIT_REQUEST_NEEDED,{mimeType:n,representation:e}),a||r.trigger(i.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{mimeType:n,mediaType:t,representation:e})},getSegmentByIndex:function(e,t,n){var i=c(e);return i?i.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=c(e);return n?n.getSegmentByTime(e,t):null}},d={},t}u.__dashjs_factory_name="SegmentsController";var d=r.default.getClassFactory(u);n.default=d,t.exports=n.default},{47:47,77:77,79:79,81:81,83:83}],65:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(61)),a=i(e(92)),s=i(e(84)),l=i(e(91)),u=i(e(90)),d=i(e(96)),c=i(e(86)),p=i(e(85)),h=i(e(87)),f=i(e(217)),g=i(e(221)),m=i(e(47)),y=i(e(45)),v=i(e(226)),_=i(e(51)),b=e(205);function E(){var e,t=void 0,n=void 0,i=void 0,m=this.context,E=(0,g.default)(m).getInstance(),T=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function C(e,t){var n=void 0,i=void 0,a=void 0,s=void 0,l=void 0,u=void 0,d=!1,c=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(s=e.ContentComponent_asArray),l=t!==r.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length){var p=I(e.Representation_asArray[0]);if(p&&0<p.length&&0<=b.THUMBNAILS_SCHEME_ID_URIS.indexOf(p[0].schemeIdUri))return t===r.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(o.default.CODECS)&&(0===(u=e.Representation_asArray[0].codecs).search(r.default.STPP)||0===u.search(r.default.WVTT)))return t===r.default.FRAGMENTED_TEXT}if(s){if(1<s.length)return t===r.default.MUXED;s[0]&&s[0].contentType===t&&(c=d=!0)}if(e.hasOwnProperty(o.default.MIME_TYPE)&&(d=l.test(e.mimeType),c=!0),!c)for(n=0,i=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!c&&n<i;)(a=e.Representation_asArray[n]).hasOwnProperty(o.default.MIME_TYPE)&&(d=l.test(a.mimeType),c=!0),n++;return d}function S(e){return"text/vtt"===e||"application/ttml+xml"===e}function w(){return function(e,t){return e.bandwidth-t.bandwidth}}function A(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e}function k(e,t){return e&&e.Period_asArray&&T(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function P(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===o.default.DYNAMIC),t}function I(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function L(e,t){var n=[],i=void 0;if(!e)return n;for(i=0;i<e.length;i++){var a=new h.default;if(a.timescale=1,a.representation=t,!e[i].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");a.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty(o.default.TIMESCALE)&&(a.timescale=e[i].timescale),e[i].hasOwnProperty(o.default.VALUE)&&(a.value=e[i].value),n.push(a)}return n}function M(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],i=!1;return n.some((function(n){if(n){var r=new p.default,a=n.__text||n;return E.isRelative(a)&&(i=!0,e.baseUri&&(a=E.resolve(a,e.baseUri))),r.url=a,n.hasOwnProperty(o.default.SERVICE_LOCATION)&&n.serviceLocation.length?r.serviceLocation=n.serviceLocation:r.serviceLocation=a,n.hasOwnProperty(o.default.DVB_PRIORITY)&&(r.dvb_priority=n[o.default.DVB_PRIORITY]),n.hasOwnProperty(o.default.DVB_WEIGHT)&&(r.dvb_weight=n[o.default.DVB_WEIGHT]),n.hasOwnProperty(o.default.AVAILABILITY_TIME_OFFSET)&&(r.availabilityTimeOffset=n[o.default.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(o.default.AVAILABILITY_TIME_COMPLETE)&&(r.availabilityTimeComplete="false"!==n[o.default.AVAILABILITY_TIME_COMPLETE]),t.push(r),i}})),t}return e={getIsTypeOf:C,getIsTextTrack:S,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(o.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(o.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var i=k(t,n);return 0<i.length&&T(e)?i[e]:null},getIndexForAdaptation:function(e,t,n){if(!e)return-1;for(var i=k(t,n),r=0;r<i.length;r++)if((0,f.default)(m).getInstance().areEqual(i[r],e))return r;return-1},getAdaptationForId:function(e,t,n){for(var i=k(t,n),r=void 0,a=(r=0,i.length);r<a;r++)if(i[r].hasOwnProperty(o.default.ID)&&i[r].id===e)return i[r];return null},getAdaptationsForType:function(e,t,n){for(var i=k(e,t),r=void 0,o=[],a=(r=0,i.length);r<a;r++)C(i[r],n)&&o.push(A(i[r]));return o},getCodec:function(e,t,n){var i,r=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&(i=T(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"')),r&&r.replace(/\sprofiles=[^;]*/g,"")},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(o.default.CENC_DEFAULT_KID)?e[o.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(o.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:P,hasProfile:function(e,t){var n=!1;return e&&e.profiles&&0<e.profiles.length&&(n=-1!==e.profiles.indexOf(t)),n},getDuration:function(e){return e&&e.hasOwnProperty(o.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(o.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=A(e);return(t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map((function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}}))},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&T(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,i,r,s,l,u=[],d=function(e){if(e&&e.period&&T(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&T(e.index))return A(t.AdaptationSet_asArray[e.index])}}(e),c=void 0,p=void 0;if(d&&d.Representation_asArray){e&&e.period&&T(e.period.index)&&(t=M(e.period.mpd.manifest))&&(p=t[0]);for(var h=0,f=d.Representation_asArray.length;h<f;++h){var g,m=d.Representation_asArray[h],y=new a.default;y.index=h,y.adaptation=e,m.hasOwnProperty(o.default.ID)&&(y.id=m.id),m.hasOwnProperty(o.default.CODECS)&&(y.codecs=m.codecs),m.hasOwnProperty(o.default.CODEC_PRIVATE_DATA)&&(y.codecPrivateData=m.codecPrivateData),m.hasOwnProperty(o.default.BANDWITH)&&(y.bandwidth=m.bandwidth),m.hasOwnProperty(o.default.WIDTH)&&(y.width=m.width),m.hasOwnProperty(o.default.HEIGHT)&&(y.height=m.height),m.hasOwnProperty(o.default.SCAN_TYPE)&&(y.scanType=m.scanType),m.hasOwnProperty(o.default.MAX_PLAYOUT_RATE)&&(y.maxPlayoutRate=m.maxPlayoutRate),m.hasOwnProperty(o.default.SEGMENT_BASE)?(c=m.SegmentBase,y.segmentInfoType=o.default.SEGMENT_BASE):m.hasOwnProperty(o.default.SEGMENT_LIST)?(c=m.SegmentList).hasOwnProperty(o.default.SEGMENT_TIMELINE)?y.segmentInfoType=o.default.SEGMENT_TIMELINE:y.segmentInfoType=o.default.SEGMENT_LIST:m.hasOwnProperty(o.default.SEGMENT_TEMPLATE)?((c=m.SegmentTemplate).hasOwnProperty(o.default.SEGMENT_TIMELINE)?y.segmentInfoType=o.default.SEGMENT_TIMELINE:y.segmentInfoType=o.default.SEGMENT_TEMPLATE,c.hasOwnProperty(o.default.INITIALIZATION_MINUS)&&(y.initialization=c.initialization.split("$Bandwidth$").join(m.bandwidth).split("$RepresentationID$").join(m.id))):y.segmentInfoType=o.default.BASE_URL,y.essentialProperties=I(m),c&&(c.hasOwnProperty(o.default.INITIALIZATION)?((g=c.Initialization).hasOwnProperty(o.default.SOURCE_URL)&&(y.initialization=g.sourceURL),g.hasOwnProperty(o.default.RANGE)&&(y.range=g.range)):m.hasOwnProperty(o.default.MIME_TYPE)&&S(m.mimeType)&&(y.range=0),c.hasOwnProperty(o.default.TIMESCALE)&&(y.timescale=c.timescale),c.hasOwnProperty(o.default.DURATION)?y.segmentDuration=c.duration/y.timescale:m.hasOwnProperty(o.default.SEGMENT_TEMPLATE)&&(c=m.SegmentTemplate).hasOwnProperty(o.default.SEGMENT_TIMELINE)&&(y.segmentDuration=(s=void 0,s=(r=c.SegmentTimeline).S_asArray[0],l=r.S_asArray[1],(s.hasOwnProperty("d")?s.d:l.t-s.t)/y.timescale)),c.hasOwnProperty(o.default.MEDIA)&&(y.media=c.media),c.hasOwnProperty(o.default.START_NUMBER)&&(y.startNumber=c.startNumber),c.hasOwnProperty(o.default.INDEX_RANGE)&&(y.indexRange=c.indexRange),c.hasOwnProperty(o.default.PRESENTATION_TIME_OFFSET)&&(y.presentationTimeOffset=c.presentationTimeOffset/y.timescale),c.hasOwnProperty(o.default.AVAILABILITY_TIME_OFFSET)?y.availabilityTimeOffset=c.availabilityTimeOffset:p&&void 0!==p.availabilityTimeOffset&&(y.availabilityTimeOffset=p.availabilityTimeOffset),c.hasOwnProperty(o.default.AVAILABILITY_TIME_COMPLETE)?y.availabilityTimeComplete="false"!==c.availabilityTimeComplete:p&&void 0!==p.availabilityTimeComplete&&(y.availabilityTimeComplete=p.availabilityTimeComplete)),y.MSETimeOffset=(i=(n=y).presentationTimeOffset,n.adaptation.period.start-i),y.path=[e.period.index,e.index,h],u.push(y)}}return u},getAdaptationsForPeriod:function(e){var t=e&&T(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],i=void 0,a=void 0,l=void 0;if(t&&t.AdaptationSet_asArray)for(l=0;l<t.AdaptationSet_asArray.length;l++)a=t.AdaptationSet_asArray[l],i=new s.default,a.hasOwnProperty(o.default.ID)&&(i.id=a.id),i.index=l,i.period=e,C(a,r.default.MUXED)?i.type=r.default.MUXED:C(a,r.default.AUDIO)?i.type=r.default.AUDIO:C(a,r.default.VIDEO)?i.type=r.default.VIDEO:C(a,r.default.FRAGMENTED_TEXT)?i.type=r.default.FRAGMENTED_TEXT:C(a,r.default.IMAGE)?i.type=r.default.IMAGE:i.type=r.default.TEXT,n.push(i);return n},getRegularPeriods:function(e){for(var i=!!e&&P(e.manifest),a=[],s=null,u=null,d=null,c=null,p=void 0,h=(p=0,e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0);p<h;p++)(u=e.manifest.Period_asArray[p]).hasOwnProperty(o.default.START)?(c=new l.default).start=u.start:null!==s&&s.hasOwnProperty(o.default.DURATION)&&null!==d?(c=new l.default).start=parseFloat((d.start+d.duration).toFixed(5)):0!==p||i||((c=new l.default).start=0),null!==d&&isNaN(d.duration)&&(null!==c?d.duration=parseFloat((c.start-d.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==c&&(c.id=function(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=l.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(o.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(n=e.id),n}(u,p),c.index=p,c.mpd=e,u.hasOwnProperty(o.default.DURATION)&&(c.duration=u.duration),a.push(c),s=u,d=c),c=u=null;return 0===a.length||null!==d&&isNaN(d.duration)&&(d.duration=parseFloat((function(e){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(r.default.MISSING_CONFIG_ERROR)}();var t=P(e.mpd.manifest),i=void 0;return e.mpd.manifest.mediaPresentationDuration?i=e.mpd.manifest.mediaPresentationDuration:e.duration?i=e.duration:t?i=Number.POSITIVE_INFINITY:n.error(new v.default(_.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),i}(d)-d.start).toFixed(5))),a},getMpd:function(e){var t=new u.default;return e&&((t.manifest=e).hasOwnProperty(o.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(o.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(o.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(o.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(o.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(o.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(o.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,a=n&&e&&T(e.index)?n[e.index].EventStream_asArray:null,s=[],l=void 0,u=void 0;if(a)for(l=0;l<a.length;l++){var d=new h.default;if(d.period=e,d.timescale=1,!a[l].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(d.schemeIdUri=a[l].schemeIdUri,a[l].hasOwnProperty(o.default.TIMESCALE)&&(d.timescale=a[l].timescale),a[l].hasOwnProperty(o.default.VALUE)&&(d.value=a[l].value),u=0;a[l].Event_asArray&&u<a[l].Event_asArray.length;u++){var p,f=new c.default;f.presentationTime=0,f.eventStream=d,a[l].Event_asArray[u].hasOwnProperty(o.default.PRESENTATION_TIME)&&(f.presentationTime=a[l].Event_asArray[u].presentationTime,p=d.presentationTimeOffset?d.presentationTimeOffset*d.timescale:0,f.calculatedPresentationTime=f.presentationTime+e.start*d.timescale+p),a[l].Event_asArray[u].hasOwnProperty(o.default.DURATION)&&(f.duration=a[l].Event_asArray[u].duration),a[l].Event_asArray[u].hasOwnProperty(o.default.ID)&&(f.id=a[l].Event_asArray[u].id),a[l].Event_asArray[u].Signal&&a[l].Event_asArray[u].Signal.Binary?f.messageData=i.decodeArray(a[l].Event_asArray[u].Signal.Binary.toString()):f.messageData=a[l].Event_asArray[u].messageData||a[l].Event_asArray[u].__text,s.push(f)}}return s},getEventStreamForAdaptationSet:function(e,t){var n=void 0,i=void 0,r=void 0;return e&&e.Period_asArray&&t&&t.period&&T(t.period.index)&&(i=e.Period_asArray[t.period.index])&&i.AdaptationSet_asArray&&T(t.index)&&(r=i.AdaptationSet_asArray[t.index])&&(n=r.InbandEventStream_asArray),L(n,null)},getEventStreamForRepresentation:function(e,t){var n=void 0,i=void 0,r=void 0,o=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&T(t.adaptation.period.index)&&(i=e.Period_asArray[t.adaptation.period.index])&&i.AdaptationSet_asArray&&T(t.adaptation.index)&&(r=i.AdaptationSet_asArray[t.adaptation.index])&&r.Representation_asArray&&T(t.index)&&(o=r.Representation_asArray[t.index])&&(n=o.InbandEventStream_asArray),L(n,t)},getUTCTimingSources:function(e){var t=P(e),n=!!e&&e.hasOwnProperty(o.default.AVAILABILITY_START_TIME),i=e?e.UTCTiming_asArray:null,a=[];return(t||n)&&i&&i.forEach((function(e){var t=new d.default;e.hasOwnProperty(r.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(o.default.VALUE)&&(t.value=e.value.toString(),a.push(t)))})),a},getBaseURLsFromElement:M,getRepresentationSortFunction:w,getLocation:function(e){if(e&&e.hasOwnProperty(r.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(o.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(o.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(o.default.SERVICE_DESCRIPTION)){var n=!0,i=!1,a=void 0;try{for(var s,l=e.ServiceDescription_asArray[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value,d=void 0,c=void 0,p=void 0,h=void 0;for(var f in u)u.hasOwnProperty(f)&&(f===o.default.ID?d=u[f]:f===o.default.SERVICE_DESCRIPTION_SCOPE?c=u[f].schemeIdUri:f===o.default.SERVICE_DESCRIPTION_LATENCY?p={target:u[f].target,max:u[f].max,min:u[f].min}:f===o.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(h={max:u[f].max,min:u[f].min}));c===r.default.SERVICE_DESCRIPTION_LL_SCHEME&&(p||h)&&t.push({id:d,schemeIdUri:c,latency:p,playbackRate:h})}}catch(e){i=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}}return t},getSupplementalPropperties:function(e){var t={};if(e&&e.hasOwnProperty(o.default.SUPPLEMENTAL_PROPERTY)){var n=!0,i=!1,a=void 0;try{for(var s,l=e.SupplementalProperty_asArray[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;u.hasOwnProperty(r.default.SCHEME_ID_URI)&&u.hasOwnProperty(o.default.VALUE)&&(t[u[r.default.SCHEME_ID_URI]]=u[o.default.VALUE])}}catch(e){i=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}}return t},setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.BASE64&&(i=e.BASE64))}},t=(0,y.default)(m).getInstance().getLogger(e),e}E.__dashjs_factory_name="DashManifestModel",n.default=m.default.getSingletonFactory(E),t.exports=n.default},{108:108,205:205,217:217,221:221,226:226,45:45,47:47,51:51,61:61,84:84,85:85,86:86,87:87,90:90,91:91,92:92,96:96}],66:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(76)),a=i(e(3)),s=i(e(75)),l=i(e(73)),u=i(e(72)),d=i(e(74)),c=i(e(69)),p=i(e(70));function h(e){e=e||{};var t,n=this.context,i=e.debug,r=void 0,h=void 0,f=void 0,g=void 0;return t={parse:function(e){var t=void 0,n=window.performance.now();if(!(t=f.xml_str2json(e)))throw new Error("parsing the manifest failed");var i=window.performance.now();g.run(t);var o=window.performance.now();return r.info("Parsing complete: ( xml2json: "+(i-n).toPrecision(3)+"ms, objectiron: "+(o-i).toPrecision(3)+"ms, total: "+((o-n)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return h},getIron:function(){return g}},r=i.getLogger(t),h=[new l.default,new u.default,new d.default,new s.default],f=new a.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!0,matchers:h}),g=(0,o.default)(n).create({adaptationset:new c.default,period:new p.default}),t}h.__dashjs_factory_name="DashParser",n.default=r.default.getClassFactory(h),t.exports=n.default},{3:3,47:47,69:69,70:70,72:72,73:73,74:74,75:75,76:76}],67:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){t&&i(e.prototype,t)}(o,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}n.default=r,t.exports=n.default},{}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,o=(r=e(67))&&r.__esModule?r:{default:r},a=(function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(s,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),s);function s(e,t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach((function(e){i._properties.push(new o.default(e))}))}n.default=a,t.exports=n.default},{67:67}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e){return e&&e.__esModule?e:{default:e}}var r=i(e(68)),o=i(e(61)),a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r.default),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=[o.default.PROFILES,o.default.WIDTH,o.default.HEIGHT,o.default.SAR,o.default.FRAMERATE,o.default.AUDIO_SAMPLING_RATE,o.default.MIME_TYPE,o.default.SEGMENT_PROFILES,o.default.CODECS,o.default.MAXIMUM_SAP_PERIOD,o.default.START_WITH_SAP,o.default.MAX_PLAYOUT_RATE,o.default.CODING_DEPENDENCY,o.default.SCAN_TYPE,o.default.FRAME_PACKING,o.default.AUDIO_CHANNEL_CONFIGURATION,o.default.CONTENT_PROTECTION,o.default.ESSENTIAL_PROPERTY,o.default.SUPPLEMENTAL_PROPERTY,o.default.INBAND_EVENT_STREAM];(function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}})(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,o.default.ADAPTATION_SET,e,[new r.default(o.default.REPRESENTATION,e,[new r.default(o.default.SUB_REPRESENTATION,e)])])}n.default=a,t.exports=n.default},{61:61,68:68}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e){return e&&e.__esModule?e:{default:e}}var r=i(e(68)),o=i(e(61)),a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r.default),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=[o.default.SEGMENT_BASE,o.default.SEGMENT_TEMPLATE,o.default.SEGMENT_LIST];(function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}})(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,o.default.PERIOD,e,[new r.default(o.default.ADAPTATION_SET,e,[new r.default(o.default.REPRESENTATION,e)])])}n.default=a,t.exports=n.default},{61:61,68:68}],71:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){t&&i(e.prototype,t)}(o,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),o);function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this._test=e,this._converter=t}n.default=r,t.exports=n.default},{}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(71))&&i.__esModule?i:{default:i},o=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r.default),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,(function(e){return o.test(e.value)}),(function(e){var t,n=o.exec(e),i=void 0;i=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&1e3*parseFloat(n[7])||0);return n[9]&&n[10]&&(t=60*parseInt(n[9],10)+parseInt(n[10],10),i+=("+"===n[8]?-1:1)*t*60*1e3),new Date(i)}))}n.default=a,t.exports=n.default},{71:71}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e){return e&&e.__esModule?e:{default:e}}var r=i(e(71)),o=i(e(108)),a=i(e(61)),s=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,r.default),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,(function(e){for(var t=[a.default.MIN_BUFFER_TIME,a.default.MEDIA_PRESENTATION_DURATION,a.default.MINIMUM_UPDATE_PERIOD,a.default.TIMESHIFT_BUFFER_DEPTH,a.default.MAX_SEGMENT_DURATION,a.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,a.default.START,o.default.START_TIME,a.default.DURATION],n=t.length,i=0;i<n;i++)if(e.nodeName===t[i])return s.test(e.value);return!1}),(function(e){var t=s.exec(e),n=31536e3*parseFloat(t[3]||0)+2592e3*parseFloat(t[5]||0)+86400*parseFloat(t[7]||0)+3600*parseFloat(t[9]||0)+60*parseFloat(t[11]||0)+parseFloat(t[13]||0);return void 0!==t[1]&&(n=-n),n}))}n.default=l,t.exports=n.default},{108:108,61:61,71:71}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(71))&&i.__esModule?i:{default:i},o=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r.default),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,(function(e){return o.test(e.value)}),(function(e){return parseFloat(e)}))}n.default=a,t.exports=n.default},{71:71}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=i(e(71)),a=i(e(61)),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o.default),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,(function(e,t){var n,i=(r(n={},a.default.MPD,[a.default.ID,a.default.PROFILES]),r(n,a.default.PERIOD,[a.default.ID]),r(n,a.default.BASE_URL,[a.default.SERVICE_LOCATION,a.default.BYTE_RANGE]),r(n,a.default.SEGMENT_BASE,[a.default.INDEX_RANGE]),r(n,a.default.INITIALIZATION,[a.default.RANGE]),r(n,a.default.REPRESENTATION_INDEX,[a.default.RANGE]),r(n,a.default.SEGMENT_LIST,[a.default.INDEX_RANGE]),r(n,a.default.BITSTREAM_SWITCHING,[a.default.RANGE]),r(n,a.default.SEGMENT_URL,[a.default.MEDIA_RANGE,a.default.INDEX_RANGE]),r(n,a.default.SEGMENT_TEMPLATE,[a.default.INDEX_RANGE,a.default.MEDIA,a.default.INDEX,a.default.INITIALIZATION_MINUS,a.default.BITSTREAM_SWITCHING_MINUS]),r(n,a.default.ASSET_IDENTIFIER,[a.default.VALUE,a.default.ID]),r(n,a.default.EVENT_STREAM,[a.default.VALUE]),r(n,a.default.ADAPTATION_SET,[a.default.PROFILES,a.default.MIME_TYPE,a.default.SEGMENT_PROFILES,a.default.CODECS,a.default.CONTENT_TYPE]),r(n,a.default.FRAME_PACKING,[a.default.VALUE,a.default.ID]),r(n,a.default.AUDIO_CHANNEL_CONFIGURATION,[a.default.VALUE,a.default.ID]),r(n,a.default.CONTENT_PROTECTION,[a.default.VALUE,a.default.ID]),r(n,a.default.ESSENTIAL_PROPERTY,[a.default.VALUE,a.default.ID]),r(n,a.default.SUPPLEMENTAL_PROPERTY,[a.default.VALUE,a.default.ID]),r(n,a.default.INBAND_EVENT_STREAM,[a.default.VALUE,a.default.ID]),r(n,a.default.ACCESSIBILITY,[a.default.VALUE,a.default.ID]),r(n,a.default.ROLE,[a.default.VALUE,a.default.ID]),r(n,a.default.RATING,[a.default.VALUE,a.default.ID]),r(n,a.default.VIEWPOINT,[a.default.VALUE,a.default.ID]),r(n,a.default.CONTENT_COMPONENT,[a.default.CONTENT_TYPE]),r(n,a.default.REPRESENTATION,[a.default.ID,a.default.DEPENDENCY_ID,a.default.MEDIA_STREAM_STRUCTURE_ID]),r(n,a.default.SUBSET,[a.default.ID]),r(n,a.default.METRICS,[a.default.METRICS_MINUS]),r(n,a.default.REPORTING,[a.default.VALUE,a.default.ID]),n);if(i.hasOwnProperty(t)){var o=i[t];return void 0!==o&&0<=o.indexOf(e.name)}return!1}),(function(e){return String(e)}))}n.default=s,t.exports=n.default},{61:61,71:71}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(e){function t(e,t,n){for(var i=0,r=e.length;i<r;++i){var o,a,s=e[i];t[s.name]&&(n[s.name]?s.merge&&(o=t[s.name],a=n[s.name],"object"==typeof o&&"object"==typeof a?function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(o,a):n[s.name]=o+a):n[s.name]=t[s.name])}}function n(e,i){for(var r=0,o=e.children.length;r<o;++r){var a=e.children[r],s=i[a.name+"_asArray"];if(s)for(var l=0,u=s.length;l<u;++l){var d=s[l];t(e.properties,i,d),n(a,d)}}}return{run:function(t){if(null===t||"object"!=typeof t)return t;if("period"in e)for(var i=e.period,r=t.Period_asArray,o=0,a=r.length;o<a;++o){var s=r[o];if(n(i,s),"adaptationset"in e){var l=s.AdaptationSet_asArray;if(l)for(var u=e.adaptationset,d=0,c=l.length;d<c;++d)n(u,l[d])}}return t}}}o.__dashjs_factory_name="ObjectIron";var a=r.default.getClassFactory(o);n.default=a,t.exports=n.default},{47:47}],77:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(108)),a=e(80);function s(e,t){var n=(e=e||{}).timelineConverter;function i(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function r(e,r){if(i(),!e)return null;var o,s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=s.SegmentURL_asArray.length,u=e&&!isNaN(e.startNumber)?e.startNumber:1,d=Math.max(u-1,0),c=e.startNumber,p=null;return r-d<l&&(o=s.SegmentURL_asArray[r-d],(p=(0,a.getIndexBasedSegment)(n,t,e,r))&&(p.replacementTime=(c+r-1)*e.segmentDuration,p.media=o.media?o.media:"",p.mediaRange=o.mediaRange,p.index=r,p.indexRange=o.indexRange)),e.availableSegmentsNumber=l,p}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){if(i(),!e)return null;var o=e.segmentDuration;if(isNaN(o))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return r(e,Math.floor(a/o))}}}s.__dashjs_factory_name="ListSegmentsGetter";var l=r.default.getClassFactory(s);n.default=l,t.exports=n.default},{108:108,47:47,80:80}],78:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){n&&i(e,n)}(o,0,[{key:"round10",value:function(e,t){return n="round",i=e,void 0!==(r=t)&&0!=+r?(r=+r,null===(i=+i)||isNaN(i)||"number"!=typeof r||r%1!=0?NaN:(i=i.toString().split("e"),+((i=(i=Math[n](+(i[0]+"e"+(i[1]?i[1]-r:-r)))).toString().split("e"))[0]+"e"+(i[1]?+i[1]+r:r)))):Math[n](i);var n,i,r}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=r,t.exports=n.default},{}],79:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(108));function a(e){var t=(e=e||{}).timelineConverter;function n(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function i(e,t){if(n(),!e)return null;var i=e.segments?e.segments.length:-1,r=void 0;if(t<i&&(r=e.segments[t])&&r.availabilityIdx===t)return r;for(var o=0;o<i;o++)if((r=e.segments[o])&&r.availabilityIdx===t)return r;return null}return{getSegmentByIndex:i,getSegmentByTime:function(e,t){return n(),i(e,function(e,t){if(!e)return-1;var n=e.segments,i=n?n.length:null,r=-1,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0;if(n&&0<i)for(u=0;u<i;u++)if((s=(a=n[u]).presentationStartTime)<=t+(o=(l=a.duration)/2)&&t-o<s+l){r=a.availabilityIdx;break}return r}(e,t))}}}a.__dashjs_factory_name="SegmentBaseGetter";var s=r.default.getClassFactory(a);n.default=s,t.exports=n.default},{108:108,47:47}],80:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},n.replaceTokenForTemplate=a,n.getIndexBasedSegment=function(e,t,n,i){var r,o,a=void 0;a=n.segmentDuration,isNaN(a)&&(a=n.adaptation.period.duration),r=parseFloat((n.adaptation.period.start+i*a).toFixed(5)),o=parseFloat((r+a).toFixed(5));var u=s(n,a,r,e.calcMediaTimeFromPresentationTime(r,n),e.calcAvailabilityStartTimeFromPresentationTime(r,n.adaptation.period.mpd,t),e,o,t,i);return l(e,n,u,t)?u:null},n.getTimeBasedSegment=function(e,t,n,i,r,o,u,d,c,p){var h,f,g=i/o,m=Math.min(r/o,n.adaptation.period.mpd.maxSegmentDuration),y=void 0;return f=(h=e.calcPresentationTimeFromMediaTime(g,n))+m,l(e,n,y=s(n,m,h,g,n.adaptation.period.mpd.manifest.loadedTime,e,f,t,c),t)?(y.replacementTime=p||i,u=a(u,"Number",y.replacementNumber),u=a(u,"Time",y.replacementTime),y.media=u,y.mediaRange=d,y):null};var i,r=(i=e(94))&&i.__esModule?i:{default:i};function o(e,t){for(;e.length<t;)e="0"+e;return e}function a(e,t,n){var i=void 0,r=void 0,a=void 0,s=void 0,l=void 0,u=void 0,d=t.length,c="%0".length;if(!e)return e;for(;;){if((i=e.indexOf("$"+t))<0)return e;if((r=e.indexOf("$",i+d))<0)return e;if(i<(a=e.indexOf("%0",i+d))&&a<r)switch(s=e.charAt(r-1),l=parseInt(e.substring(a+c,r-1),10),s){case"d":case"i":case"u":u=o(n.toString(),l);break;case"x":u=o(n.toString(16),l);break;case"X":u=o(n.toString(16),l).toUpperCase();break;case"o":u=o(n.toString(8),l);break;default:return e}else u=n;e=e.substring(0,i)+u+e.substring(r+1)}}function s(e,t,n,i,o,a,s,l,u){var d,c=new r.default;return c.representation=e,c.duration=t,c.presentationStartTime=n,c.mediaStartTime=i,c.availabilityStartTime=o,c.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(s,e.adaptation.period.mpd,l),c.wallStartTime=a.calcWallTimeForSegment(c,l),c.replacementNumber=(d=u,c.representation.startNumber+d),c.availabilityIdx=u,c}function l(e,t,n,i){var r=e.getPeriodEnd(t,i);if(e.calcPeriodRelativeTimeFromMpdRelativeTime(t,r)<=e.calcPeriodRelativeTimeFromMpdRelativeTime(t,n.presentationStartTime)){if(!i)return;if(t.segmentAvailabilityRange&&n.presentationStartTime>=t.segmentAvailabilityRange.end)return}return 1}},{94:94}],81:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(108)),a=e(80);function s(e,t){var n=(e=e||{}).timelineConverter;function i(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function r(e,r){if(i(),!e)return null;var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;r=Math.max(r,0);var s,l=(0,a.getIndexBasedSegment)(n,t,e,r);l&&(l.replacementTime=(r-1)*e.segmentDuration,s=o.media,s=(0,a.replaceTokenForTemplate)(s,"Number",l.replacementNumber),s=(0,a.replaceTokenForTemplate)(s,"Time",l.replacementTime),l.media=s);var u=e.segmentDuration,d=e.segmentAvailabilityRange;return isNaN(u)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((d.end-d.start)/u),l}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){if(i(),!e)return null;var o=e.segmentDuration;if(isNaN(o))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return r(e,Math.floor(a/o))}}}s.__dashjs_factory_name="TemplateSegmentsGetter";var l=r.default.getClassFactory(s);n.default=l,t.exports=n.default},{108:108,47:47,80:80}],82:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(46)),o=i(e(54)),a=i(e(47)),s=i(e(61)),l=i(e(65)),u=i(e(48));function d(){var e,t=this.context,n=(0,r.default)(t).getInstance(),i=(0,u.default)(t).getInstance(),a=void 0,d=void 0,c=void 0,p=void 0;function h(e){d=e}function f(e,t,n,i){return i?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-d)):t.availabilityStartTime}function g(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*d)/1e3}function m(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function y(e){c||void 0!==e.offset&&(h(e.offset/1e3),c=!0)}function v(){d=0,c=!1,p=NaN}function _(){n.off(o.default.TIME_SYNCHRONIZATION_COMPLETED,y,this),v()}return e={initialize:function(){v(),n.on(o.default.TIME_SYNCHRONIZATION_COMPLETED,y,this)},isTimeSyncCompleted:function(){return c},setTimeSyncCompleted:function(e){c=e},getClientTimeOffset:function(){return d},setClientTimeOffset:h,getExpectedLiveEdge:function(){return p},setExpectedLiveEdge:function(e){p=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return f.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return f.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:g,calcPresentationTimeFromMediaTime:m,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!c&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var o=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0);if(e.segmentInfoType===s.default.SEGMENT_TIMELINE&&i.get().streaming.calcSegmentAvailabilityRangeFromTimeline)return function(e){var t,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=a.getRepresentationFor(e.index,n),r=i.SegmentTemplate.SegmentTimeline,o=i.SegmentTemplate.timescale,s=r.S_asArray,l={start:0,end:0},u=0,d=void 0,c=void 0,p=void 0;for(l.start=m(s[0].t/o,e),p=0,t=s.length;p<t;p++)c=0,(d=s[p]).hasOwnProperty("r")&&(c=d.r),u+=d.d/o*(1+c);return l.end=l.start+u,l}(e);var l=g(new Date,n),u=n.start+n.duration;r.start=Math.max(l-n.mpd.timeShiftBufferDepth,n.start);var d=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<o?o-e.availabilityTimeOffset:o;return r.end=u<=l&&l-d<u?u:l-d,r},getPeriodEnd:function(e,t){var n=e.adaptation.period;if(!t)return n.start+n.duration;if(!c&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),r=g(new Date,n),o=n.start+n.duration,a=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<i?i-e.availabilityTimeOffset:i;return Math.min(r-a,o)},calcWallTimeForSegment:function(e,t){var n=void 0,i=void 0,r=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,i=e.presentationStartTime+n,r=new Date(e.availabilityStartTime.getTime()+1e3*i)),r},reset:_},a=(0,l.default)(t).getInstance(),_(),e}d.__dashjs_factory_name="TimelineConverter",n.default=a.default.getSingletonFactory(d),t.exports=n.default},{46:46,47:47,48:48,54:54,61:61,65:65}],83:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(108)),a=e(80);function s(e,t){var n=(e=e||{}).timelineConverter;function i(){if(!n||!n.hasOwnProperty("calcMediaTimeFromPresentationTime")||!n.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function r(e,i){for(var r,o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,a=o.SegmentTimeline,s=o.SegmentURL_asArray,l=0,u=0,d=-1,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=e.timescale,v=!1,_=(p=0,(r=a.S_asArray).length);p<_&&!v;p++){var b;f=0;for((c=r[p]).hasOwnProperty("r")&&(f=c.r),c.hasOwnProperty("t")&&(u=(l=c.t)/y),f<0&&((m=r[p+1])&&m.hasOwnProperty("t")?g=m.t/y:(b=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:n.calcSegmentAvailabilityRange(e,t).end,g=n.calcMediaTimeFromPresentationTime(b,e),e.segmentDuration=c.d/y),f=Math.ceil((g-u)/(c.d/y))-1),h=0;h<=f&&!v;h++)(v=i(l,u,o,s,c,y,++d,p))&&(e.segmentDuration=c.d/y,(h<f-1||p<_-1)&&d++),u=(l+=c.d)/y}e.availableSegmentsNumber=d}return{getSegmentByIndex:function(e,o,s){if(i(),!e)return null;var l=null,u=!1;return r(e,(function(i,r,o,d,c,p,h,f){if(u||s<0){var g=o.media,m=c.mediaRange;return d&&(g=d[f].media||"",m=d[f].mediaRange),l=(0,a.getTimeBasedSegment)(n,t,e,i,c.d,p,g,m,h,c.tManifest),!0}return r>=s-.5*c.d/p&&(u=!0),!1})),l},getSegmentByTime:function(e,o){if(i(),!e)return null;void 0===o&&(o=null);var s=null,l=n.calcMediaTimeFromPresentationTime(o,e);return r(e,(function(i,r,o,u,d,c,p,h){if(l<r+d.d/c){var f=o.media,g=d.mediaRange;return u&&(f=u[h].media||"",g=u[h].mediaRange),s=(0,a.getTimeBasedSegment)(n,t,e,i,d.d,c,f,g,p,d.tManifest),!0}return!1})),s}}}s.__dashjs_factory_name="TimelineSegmentsGetter";var l=r.default.getClassFactory(s);n.default=l,t.exports=n.default},{108:108,47:47,80:80}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null},t.exports=n.default},{}],85:[function(e,t,n){"use strict";function i(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=n||1,this.dvb_weight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}Object.defineProperty(n,"__esModule",{value:!0}),i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default},{}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=n.default},{}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},t.exports=n.default},{}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=n.default},{}],89:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){t&&i(e.prototype,t)}(o,[{key:"isMediaInfoEqual",value:function(e){if(!e)return!1;var t=this.id===e.id,n=this.viewpoint===e.viewpoint,i=this.lang===e.lang,r=this.roles.toString()===e.roles.toString(),o=this.accessibility.toString()===e.accessibility.toString(),a=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&n&&i&&r&&o&&a}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}n.default=r,t.exports=n.default},{}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=n.default},{}],91:[function(e,t,n){"use strict";function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null}Object.defineProperty(n,"__esModule",{value:!0}),i.DEFAULT_ID="defaultId",n.default=i,t.exports=n.default},{}],92:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,o=(r=e(61))&&r.__esModule?r:{default:r},a=(function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(s,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==o.default.BASE_URL&&this.segmentInfoType!==o.default.SEGMENT_BASE&&!this.indexRange}}]),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}n.default=a,t.exports=n.default},{61:61}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=n.default},{}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=n.default},{}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},t.exports=n.default},{}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],97:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(159)),a=i(e(229)),s=i(e(226)),l=i(e(47));function u(e){e=e||{};var t=this.context,n=e.eventBus,i=e.events,l=e.urlUtils,u=e.errors,d=void 0,c=void 0;return d={checkForExistence:function(e){function t(t){n.trigger(i.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})}var r;e?(r=new a.default(e.url),c.load({request:r,success:function(){t(!0)},error:function(){t(!1)}})):t(!1)},load:function(e){function t(t,r){n.trigger(i.LOADING_COMPLETED,{request:e,response:t||null,error:r||null,sender:d})}e?c.load({request:e,progress:function(t){n.trigger(i.LOADING_PROGRESS,{request:e,stream:t.stream}),t.data&&n.trigger(i.LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:d})},success:function(e){t(e)},error:function(e,n,i){t(void 0,new s.default(u.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,i,n))},abort:function(e){e&&n.trigger(i.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:d})}}):t(void 0,new s.default(u.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,u.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){c&&c.abort()},reset:function(){c&&(c.abort(),c=null)}},c=(0,o.default)(t).create({errHandler:e.errHandler,errors:u,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:l,constants:r.default,boxParser:e.boxParser,dashConstants:e.dashConstants}),d}u.__dashjs_factory_name="FragmentLoader",n.default=l.default.getClassFactory(u),t.exports=n.default},{108:108,159:159,226:226,229:229,47:47}],98:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(61)),a=i(e(124)),s=i(e(159)),l=i(e(221)),u=i(e(233)),d=i(e(226)),c=e(242),p=i(e(46)),h=i(e(54)),f=i(e(51)),g=i(e(47)),m=i(e(66));function y(e){e=e||{};var t=this.context,n=e.debug,i=(0,p.default)(t).getInstance(),g=(0,l.default)(t).getInstance(),y=void 0,v=void 0,_=void 0,b=void 0,E=void 0,T=e.mssHandler,C=e.errHandler;function S(e){i.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return y={load:function(e){var o=new u.default(e,c.HTTPRequest.MPD_TYPE);_.load({request:o,success:function(o,a,s){if(b){var l,u,c=void 0,p=void 0,y=void 0;if(s&&s!==e?(p=g.parseBaseUrl(s),c=s):(g.isRelative(e)&&(e=g.resolve(e,window.location.href)),p=g.parseBaseUrl(e)),null===E&&(u=null,E=-1<(l=o).indexOf("SmoothStreamingMedia")?(T&&(u=T.createMssParser(),T.registerEvents()),u):-1<l.indexOf("MPD")?(0,m.default)(t).create({debug:n}):u),null!==E){b.setMatchers(E.getMatchers()),b.setIron(E.getIron());try{y=E.parse(o)}catch(o){return void i.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}y?(y.url=c||e,y.originalUrl||(y.originalUrl=y.url),y.hasOwnProperty(r.default.LOCATION)&&(p=g.parseBaseUrl(y.Location_asArray[0]),v.debug("BaseURI set by Location to: "+p)),y.baseUri=p,y.loadedTime=new Date,b.resolveManifestOnLoad(y),i.trigger(h.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:o})):i.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}else i.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}},error:function(t,n,r){i.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(f.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,f.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(e+", ")+r)})}})},reset:function(){i.off(h.default.XLINK_READY,S,y),b&&(b.reset(),b=null),_&&(_.abort(),_=null),T&&T.reset()}},v=n.getLogger(y),i.on(h.default.XLINK_READY,S,y),_=(0,s.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:g,constants:r.default,dashConstants:o.default,errors:f.default}),b=(0,a.default)(t).create({errHandler:C,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),E=null,y}y.__dashjs_factory_name="ManifestLoader";var v=g.default.getClassFactory(y);n.default=v,t.exports=n.default},{108:108,124:124,159:159,221:221,226:226,233:233,242:242,46:46,47:47,51:51,54:54,61:61,66:66}],99:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(46)),o=i(e(54)),a=i(e(47)),s=i(e(45)),l=i(e(51)),u=i(e(61));function d(){var e,t=this.context,n=(0,r.default)(t).getInstance(),i=void 0,a=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0;function v(){a=NaN,c=!(p=!1),_()}function _(){null!==d&&(clearTimeout(d),d=null)}function b(e){_(),isNaN(e)&&!isNaN(a)&&(e=1e3*a),isNaN(e)||(i.debug("Refresh manifest in "+e+" milliseconds."),d=setTimeout(C,e))}function E(){p=!0;var e=f.getValue(),t=e.url,n=g.getLocation(e);n&&(t=n),h.load(t)}function T(e){var t,r;f.getValue()&&f.getValue().type===u.default.DYNAMIC&&e.type===u.default.STATIC?n.trigger(o.default.DYNAMIC_STREAM_COMPLETED):(f.setValue(e),r=((t=new Date).getTime()-e.loadedTime.getTime())/1e3,2147483647<1e3*(a=g.getManifestUpdatePeriod(e,r))&&(a=2147483.647),n.trigger(o.default.MANIFEST_UPDATED,{manifest:e}),i.info("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),c||b())}function C(){c||(p?b(y.get().streaming.manifestUpdateRetryInterval):E())}function S(e){e.error?e.error.code===l.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&m.error(e.error):T(e.manifest)}function w(){c=!1,b()}function A(){(c=!y.get().streaming.scheduleWhilePaused)&&_()}function k(){p=!1}return e={initialize:function(){v(),n.on(o.default.STREAMS_COMPOSED,k,this),n.on(o.default.PLAYBACK_STARTED,w,this),n.on(o.default.PLAYBACK_PAUSED,A,this),n.on(o.default.INTERNAL_MANIFEST_LOADED,S,this)},setManifest:function(e){T(e)},refreshManifest:E,setConfig:function(e){e&&(e.manifestModel&&(f=e.manifestModel),e.adapter&&(g=e.adapter),e.manifestLoader&&(h=e.manifestLoader),e.errHandler&&(m=e.errHandler),e.settings&&(y=e.settings))},reset:function(){n.off(o.default.PLAYBACK_STARTED,w,this),n.off(o.default.PLAYBACK_PAUSED,A,this),n.off(o.default.STREAMS_COMPOSED,k,this),n.off(o.default.INTERNAL_MANIFEST_LOADED,S,this),v()}},i=(0,s.default)(t).getInstance().getLogger(e),e}d.__dashjs_factory_name="ManifestUpdater",n.default=a.default.getClassFactory(d),t.exports=n.default},{45:45,46:46,47:47,51:51,54:54,61:61}],100:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(2)),o=i(e(108)),a=i(e(61)),s=i(e(109)),l=i(e(120)),u=i(e(122)),d=i(e(117)),c=i(e(118)),p=i(e(112)),h=i(e(98)),f=i(e(213)),g=i(e(208)),m=i(e(203)),y=i(e(218)),v=i(e(201)),_=i(e(154)),b=i(e(151)),E=i(e(152)),T=i(e(111)),C=i(e(158)),S=i(e(155)),w=i(e(149)),A=i(e(210)),k=i(e(45)),P=i(e(51)),I=i(e(46)),L=i(e(54)),M=i(e(101)),R=i(e(47)),D=i(e(48)),x=e(50),O=i(e(63)),N=i(e(56)),B=i(e(58)),U=i(e(82)),F=e(242),j=i(e(1)),q=i(e(9)),V=i(e(226)),H=e(219),W=i(e(99)),G=i(e(221)),z=i(e(207));function K(){var e,t="You must first call initialize() and set a source before calling this method",n="You must first call initialize() and set a valid source and view before calling this method",i="You must first call attachView() to set the video element before calling this method",K="You must first call attachSource() with a valid source before calling this method",Y="MediaPlayer not initialized!",Q=this.context,X=(0,I.default)(Q).getInstance(),$=(0,D.default)(Q).getInstance(),J=(0,k.default)(Q).getInstance({settings:$}),Z=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,oe=void 0,ae=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,pe=void 0,he=void 0,fe=void 0,ge=void 0,me=void 0,ye=void 0,ve=void 0,_e=void 0,be=void 0,Ee=void 0,Te=void 0,Ce=void 0,Se=void 0,we=void 0,Ae=void 0,ke=void 0,Pe=void 0,Ie=void 0;function Le(){return!!ee&&!!we.getElement()}function Me(){return(0,x.getVersionString)()}function Re(){if(!re)throw n;return Ee.isPaused()}function De(e){var t=Te.getCurrentDVRInfo();if(!t)return 0;var n=Ee.getLiveDelay(),i=t.range.start+e;return i>t.range.end-n&&(i=t.range.end-n),i}function xe(e){if(!re)throw n;var t,i=Ue().currentTime;return void 0!==e?i=_e.getTimeRelativeToStreamId(i,e):Ee.getIsDynamic()&&(i=null===(t=Te.getCurrentDVRInfo())?0:Oe()-(t.range.end-t.time)),i}function Oe(){if(!re)throw n;var e=Ue().duration;if(Ee.getIsDynamic()){var t,i=Te.getCurrentDVRInfo();if(!i)return 0;e=(t=i.range.end-i.range.start)<i.manifestInfo.DVRWindowSize?t:i.manifestInfo.DVRWindowSize}return e}function Ne(e){(0,H.checkParameterType)(e,"boolean"),oe=e}function Be(){ge.restoreDefaultUTCTimingSources()}function Ue(){if(!we.getElement())throw i;return we.getElement()}function Fe(e){if(!ne)throw Y;we.setElement(e),e&&(Ge(),function(){if(!ce){var e,t=dashjs.MetricsReporting;"function"==typeof t&&(e=t(Q).create(),ce=e.createMetricsReporting({debug:J,eventBus:X,mediaElement:Ue(),adapter:fe,dashMetrics:Te,events:L.default,constants:o.default,metricsConstants:s.default}))}}(),function(){if(!pe){var e=dashjs.MssHandler;"function"==typeof e&&(P.default.extend(e.errors),pe=e(Q).create({eventBus:X,mediaPlayerModel:ge,dashMetrics:Te,manifestModel:Ce,playbackController:Ee,streamController:_e,protectionController:de,baseURLController:ye,errHandler:me,events:L.default,constants:o.default,debug:J,initSegmentType:F.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:j.default,ISOBoxer:q.default,settings:$}))}}(),_e&&_e.switchToVideoElement()),re&&He(),Ye()}function je(e){if(!ie)throw t;var n=_e.getActiveStreamInfo();return ue.getTracksFor(e,n)}function qe(e){if(!ne)throw Y;"string"==typeof e&&ke.initialize(e),ee=e,(ie||re)&&He(),Le()&&Ye()}function Ve(){if(!ie)throw t;var e=_e.getActiveStreamInfo();return e?_e.getStreamById(e.id):null}function He(){ie=re=!1,fe.reset(),_e.reset(),be.reset(),Ee.reset(),ae.reset(),ue.reset(),Ae.reset(),de&&($.get().streaming.keepProtectionMediaKeys?de.stop():(de.reset(),de=null,Ge())),Se.reset()}function We(){return(0,h.default)(Q).create({debug:J,errHandler:me,dashMetrics:Te,mediaPlayerModel:ge,requestModifier:(0,y.default)(Q).getInstance(),mssHandler:pe,settings:$})}function Ge(){if(de)return de;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(Q).create();return L.default.extend(e.events),M.default.extend(e.events,{publicOnly:!0}),P.default.extend(e.errors),ve=ve||(0,g.default)(Q).getInstance(),de=t.createProtectionSystem({debug:J,errHandler:me,videoModel:we,capabilities:ve,eventBus:X,events:L.default,BASE64:j.default,constants:o.default})}function ze(){if(!ne)throw Y;if(he)return he;var e=dashjs.OfflineController;if("function"!=typeof e)return null;L.default.extend(e.events),M.default.extend(e.events,{publicOnly:!0}),P.default.extend(e.errors);var t=We(),n=(0,W.default)(Q).create();return n.setConfig({manifestModel:Ce,adapter:fe,manifestLoader:t,errHandler:me}),he=e(Q).create({debug:J,manifestUpdater:n,baseURLController:ye,manifestLoader:t,manifestModel:Ce,mediaPlayerModel:ge,abrController:ae,playbackController:Ee,adapter:fe,errHandler:me,dashMetrics:Te,timelineConverter:le,schemeLoaderFactory:se,eventBus:X,events:L.default,errors:P.default,constants:o.default,settings:$,dashConstants:a.default,urlUtils:(0,G.default)(Q).getInstance()})}function Ke(e){var t=Te.getCurrentDVRInfo();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function Ye(){var e;he&&he.resetRecords(),!ie&&ee&&(ie=!0,Z.info("Streaming Initialized"),e=We(),_e=_e||(0,u.default)(Q).getInstance(),ue.setConfig({domStorage:Pe}),_e.setConfig({capabilities:ve,manifestLoader:e,manifestModel:Ce,mediaPlayerModel:ge,protectionController:de,adapter:fe,dashMetrics:Te,errHandler:me,timelineConverter:le,videoModel:we,playbackController:Ee,abrController:ae,mediaController:ue,textController:Ae,settings:$,baseURLController:ye}),be.setConfig({settings:$,playbackController:Ee,streamController:_e,videoModel:we,timelineConverter:le,adapter:fe}),Ee.setConfig({streamController:_e,dashMetrics:Te,mediaPlayerModel:ge,adapter:fe,videoModel:we,timelineConverter:le,uriFragmentModel:ke,settings:$}),ae.setConfig({streamController:_e,domStorage:Pe,mediaPlayerModel:ge,dashMetrics:Te,adapter:fe,videoModel:we,settings:$}),ae.createAbrRulesCollection(),Ae.setConfig({errHandler:me,manifestModel:Ce,adapter:fe,mediaController:ue,streamController:_e,videoModel:we}),Se.setConfig({abrController:ae,dashMetrics:Te,playbackController:Ee}),_e.initialize(oe,te),be.initialize(),Se.initialize(),"string"==typeof ee?_e.load(ee):_e.loadWithManifest(ee)),!re&&Le()&&(re=!0,Z.info("Playback Initialized"))}return e={initialize:function(e,t,n){ve=ve||(0,g.default)(Q).getInstance(),me=(0,f.default)(Q).getInstance(),ve.supportsMediaSource()?ne||(ne=!0,le=(0,U.default)(Q).getInstance(),ae||(ae=(0,T.default)(Q).getInstance()).setConfig({settings:$}),se=se||(0,C.default)(Q).getInstance(),Ee=Ee||(0,l.default)(Q).getInstance(),ue=ue||(0,c.default)(Q).getInstance(),_e=_e||(0,u.default)(Q).getInstance(),be=be||(0,d.default)(Q).getInstance(),fe=(0,N.default)(Q).getInstance(),Ce=(0,b.default)(Q).getInstance(),Se=(0,w.default)(Q).getInstance(),Te=(0,B.default)(Q).getInstance({settings:$}),Ae=(0,v.default)(Q).getInstance(),Pe=(0,A.default)(Q).getInstance({settings:$}),fe.setConfig({constants:o.default,cea608parser:r.default,errHandler:me,BASE64:j.default}),(ye=ye||(0,p.default)(Q).create()).setConfig({adapter:fe}),(Ie=(0,O.default)(Q).getInstance({dashMetrics:Te,mediaPlayerModel:ge,errHandler:me,baseURLController:ye,events:L.default,eventBus:X,debug:J,boxParser:(0,z.default)(Q).getInstance(),requestModifier:(0,y.default)(Q).getInstance(),errors:P.default})).initialize(),Be(),Ne(void 0===n||n),ze(),e&&Fe(e),t&&qe(t),Z.info("[dash.js "+Me()+"] MediaPlayer has been initialized")):me.error(new V.default(P.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,P.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(ve=e.capabilities),e.streamController&&(_e=e.streamController),e.gapController&&(be=e.gapController),e.playbackController&&(Ee=e.playbackController),e.mediaPlayerModel&&(ge=e.mediaPlayerModel),e.abrController&&(ae=e.abrController),e.schemeLoaderFactory&&(se=e.schemeLoaderFactory),e.mediaController&&(ue=e.mediaController),e.settings&&($=e.settings))},on:function(e,t,n){X.on(e,t,n)},off:function(e,t,n){X.off(e,t,n)},extend:function(e,t,n){R.default.extend(e,t,n,Q)},attachView:Fe,attachSource:qe,isReady:Le,preload:function(){if(we.getElement()||ie)return!1;if(!ee)throw K;Ye()},play:function(){if(!re)throw n;(!oe||Re()&&re)&&Ee.play()},isPaused:Re,pause:function(){if(!re)throw n;Ee.pause()},isSeeking:function(){if(!re)throw n;return Ee.isSeeking()},isDynamic:function(){if(!re)throw n;return Ee.getIsDynamic()},seek:function(e){if(!re)throw n;if((0,H.checkParameterType)(e,"number"),isNaN(e))throw o.default.BAD_ARGUMENT_ERROR;var t=Ee.getIsDynamic()?De(e):e;Ee.seek(t)},setPlaybackRate:function(e){Ue().playbackRate=e},getPlaybackRate:function(){return Ue().playbackRate},setMute:function(e){(0,H.checkParameterType)(e,"boolean"),Ue().muted=e},isMuted:function(){return Ue().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw o.default.BAD_ARGUMENT_ERROR;Ue().volume=e},getVolume:function(){return Ue().volume},time:xe,duration:Oe,timeAsUTC:function(){if(!re)throw n;return xe()<0?NaN:Ke(xe())},durationAsUTC:function(){if(!re)throw n;return Ke(Oe())},getActiveStream:Ve,getDVRWindowSize:function(){var e=Te.getCurrentDVRInfo();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:De,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(i<10?"0"+i.toString():i.toString())},formatUTC:function(e,t,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],r=new Date(1e3*e),o=r.toLocaleDateString(t),a=r.toLocaleTimeString(t,{hour12:n});return i?a+" "+o:a},getVersion:Me,getDebug:function(){return J},getBufferLength:function(e){var t,n=[o.default.VIDEO,o.default.AUDIO,o.default.FRAGMENTED_TEXT];return e?-1===n.indexOf(e)?(Z.warn("getBufferLength requested for invalid type"),NaN):(t=Te.getCurrentBufferLevel(e))||NaN:(t=n.map((function(e){return 0<je(e).length?Te.getCurrentBufferLevel(e):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)})))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return we?we.getTTMLRenderingDiv():null},getVideoElement:Ue,getSource:function(){if(!ee)throw K;return ee},getCurrentLiveLatency:function(){if(!ne)throw Y;return re?Ee.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!ie)throw t;return ae.getTopBitrateInfoFor(e)},setAutoPlay:Ne,getAutoPlay:function(){return oe},getDashMetrics:function(){return Te},getQualityFor:function(e){if(!ie)throw t;if(e!==o.default.IMAGE)return ae.getQualityFor(e);var n=Ve();if(!n)return-1;var i=n.getThumbnailController();return i?i.getCurrentTrackIndex():-1},setQualityFor:function(e,n){if(!ie)throw t;if(e===o.default.IMAGE){var i=Ve();if(!i)return;var r=i.getThumbnailController();r&&r.setTrackByIndex(n)}ae.setPlaybackQuality(e,_e.getActiveStreamInfo(),n)},updatePortalSize:function(){ae.setElementSize(),ae.setWindowResizeEventCalled(!0)},setTextDefaultLanguage:function(e){Z.warn('setTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use setInitialMediaSettingsFor("fragmentedText", { lang: lang }) instead'),void 0===Ae&&(Ae=(0,v.default)(Q).getInstance()),Ae.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return Z.warn('getTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use getInitialMediaSettingsFor("fragmentedText").lang instead'),void 0===Ae&&(Ae=(0,v.default)(Q).getInstance()),Ae.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===Ae&&(Ae=(0,v.default)(Q).getInstance()),Ae.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===Ae&&(Ae=(0,v.default)(Q).getInstance()),Ae.getTextDefaultEnabled()},enableText:function(e){void 0===Ae&&(Ae=(0,v.default)(Q).getInstance()),Ae.enableText(e)},enableForcedTextStreaming:function(e){void 0===Ae&&(Ae=(0,v.default)(Q).getInstance()),Ae.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===Ae&&(Ae=(0,v.default)(Q).getInstance()),Ae.isTextEnabled()},setTextTrack:function(e){if(!re)throw n;void 0===Ae&&(Ae=(0,v.default)(Q).getInstance()),Ae.setTextTrack(e)},getBitrateInfoListFor:function(e){if(!ie)throw t;var n=Ve();return n?n.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!ie)throw t;return fe.getStreamsInfo(e)},getTracksFor:je,getTracksForTypeFromManifest:function(e,n,i){if(!ie)throw t;return(i=i||fe.getStreamsInfo(n,1)[0])?fe.getAllMediaInfoForType(i,e,n):[]},getCurrentTrackFor:function(e){if(!ie)throw t;var n=_e.getActiveStreamInfo();return ue.getCurrentTrackFor(e,n)},setInitialMediaSettingsFor:function(e,t){if(!ne)throw Y;ue.setInitialSettings(e,t),e===o.default.FRAGMENTED_TEXT&&Ae.setInitialSettings(t)},getInitialMediaSettingsFor:function(e){if(!ne)throw Y;return ue.getInitialSettings(e)},setCurrentTrack:function(e){if(!ie)throw t;ue.setTrack(e)},getTrackSwitchModeFor:function(e){if(!ne)throw Y;return ue.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!ne)throw Y;ue.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!ne)throw Y;ue.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!ne)throw Y;return ue.getSelectionModeForInitialTrack()},addABRCustomRule:function(e,t,n){ge.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){ge.removeABRCustomRule(e)},removeAllABRCustomRule:function(){ge.removeABRCustomRule()},getAverageThroughput:function(e){var t=ae.getThroughputHistory();return t?t.getAverageThroughput(e):0},retrieveManifest:function(e,t){var n=We(),i=this;X.on(L.default.INTERNAL_MANIFEST_LOADED,(function e(r){r.error?t(null,r.error):t(r.manifest),X.off(L.default.INTERNAL_MANIFEST_LOADED,e,i),n.reset()}),i),ke.initialize(e),n.load(e)},addUTCTimingSource:function(e,t){ge.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){ge.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){ge.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Be,setXHRWithCredentialsForType:function(e,t){ge.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return ge.getXHRWithCredentialsForType(e)},getProtectionController:Ge,attachProtectionController:function(e){de=e},setProtectionData:function(e){te=e,_e&&_e.setProtectionData(te)},displayCaptionsOnTop:function(e){var t=(0,m.default)(Q).getInstance();t.setConfig({videoModel:we}),t.initialize(),t.setDisplayCConTop(e)},attachTTMLRenderingDiv:function(e){if(!we.getElement())throw i;we.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return Ae&&(e=Ae.getCurrentTrackIdx()),e},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else{var n=Ee.getIsDynamic()?De(e):e,i=_e.getStreamForTime(n);if(null!==i){var r=i.getThumbnailController();if(r){var o=_e.getTimeRelativeToStreamId(n,i.getId());return r.provide(o,t)}t(null)}else t(null)}},getDashAdapter:function(){return fe},getOfflineController:ze,getSettings:function(){return $.get()},updateSettings:function(e){$.update(e)},resetSettings:function(){$.reset()},reset:function(){qe(null),Fe(null),te=null,de&&(de.reset(),de=null),ce&&(ce.reset(),ce=null),Ie.reset(),$.reset(),he&&(he.reset(),he=null)}},Z=J.getLogger(e),oe=!(ie=re=ne=!1),Ie=fe=te=he=de=null,L.default.extend(M.default),ge=(0,E.default)(Q).getInstance(),we=(0,S.default)(Q).getInstance(),ke=(0,_.default)(Q).getInstance(),e}K.__dashjs_factory_name="MediaPlayer";var Y=R.default.getClassFactory(K);Y.events=M.default,Y.errors=P.default,R.default.updateClassFactory(K.__dashjs_factory_name,Y),n.default=Y,t.exports=n.default},{1:1,101:101,108:108,109:109,111:111,112:112,117:117,118:118,120:120,122:122,149:149,151:151,152:152,154:154,155:155,158:158,2:2,201:201,203:203,207:207,208:208,210:210,213:213,218:218,219:219,221:221,226:226,242:242,45:45,46:46,47:47,48:48,50:50,51:51,54:54,56:56,58:58,61:61,63:63,82:82,9:9,98:98,99:99}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.GAP_CAUSED_SEEK_TO_PERIOD_END="gapCausedSeekToPeriodEnd"}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,((i=e(55))&&i.__esModule?i:{default:i}).default),r);n.default=o,t.exports=n.default},{55:55}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r,o,a=(i=e(100))&&i.__esModule?i:{default:i},s=(r="application/dash+xml",{create:l,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var i=(t=t||document).querySelectorAll(e),o=0;o<i.length;o++){var a=l(i[o],null);n.push(a)}var s=t.querySelectorAll('source[type="'+r+'"]');for(o=0;o<s.length;o++)a=l(function(e){for(var t=!0;t;){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0}}(s[o]),null),n.push(a);return n}});function l(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var i=void 0,s=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter((function(e){return e.type==r}))[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(i=(0,a.default)(n).create()).initialize(e,t.src,e.autoplay),(o=o||i.getDebug().getLogger()).debug("Converted "+s+" to dash.js player and added content: "+t.src),e._dashjs_player=i}var u=o=void 0;"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?s.createAll():u=window.setInterval((function(){window.dashjs&&(window.clearInterval(u),s.createAll())}),500):window.addEventListener("load",(function e(){window.removeEventListener("load",e),s.createAll()}))),n.default=s,t.exports=n.default},{100:100}],103:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(45)),o=i(e(47));function a(e){var t,n=this.context,i=void 0,o=void 0,a=[],s=e;function l(e,t){a=a.filter((function(n){return!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))}))}return t={getAllBufferRanges:function(){for(var e=[],t=0;t<a.length;t++){var n=a[t];0===e.length||n.start>e[e.length-1].end?e.push({start:n.start,end:n.end}):e[e.length-1].end=n.end}var i={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(i,"length",{get:function(){return e.length}}),i},append:function(e){o="InitializationSegment"!==e.segmentType?(a.push(e),a.sort((function(e,t){return e.start-t.start})),null):e,i.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),s&&s({chunk:e})},remove:l,abort:function(){},discharge:function(e,t){var n,i,r=(n=e,i=t,a.filter((function(e){return(isNaN(i)||e.start<i)&&(isNaN(n)||e.end>n)})));return o&&(r.push(o),o=null),l(e,t),r},reset:function(){a=[],s=o=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},i=(0,r.default)(n).getInstance().getLogger(t),t}a.__dashjs_factory_name="PreBufferSink";var s=o.default.getClassFactory(a);n.default=s,t.exports=n.default},{45:45,47:47}],104:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(45)),o=i(e(226)),a=i(e(46)),s=i(e(54)),l=i(e(47)),u=i(e(201)),d=i(e(51));function c(e,t,n,i){var l,c=this.context,p=(0,a.default)(c).getInstance(),h=void 0,f=void 0,g=void 0,m=void 0,y=[],v=[],_=n;function b(){try{return f.buffered}catch(e){return h.error("getAllBufferRanges exception: "+e.message),null}}function E(n){f&&k((function(){try{var i=e.duration,r=0;n&&!isNaN(n.start)&&!isNaN(n.duration)&&isFinite(n.duration)&&(i=n.start+n.duration),n&&!isNaN(n.start)&&(r=n.start),f.appendWindowStart=0,f.appendWindowEnd=i,f.appendWindowStart=r,h.debug("Updated append window for "+t.type+". Set start to "+f.appendWindowStart+" and end to "+f.appendWindowEnd)}catch(i){h.warn("Failed to set append window")}}))}function T(){var e=this,t=this;0<v.length&&function(){g=!0;var n=v[0];function i(){var e,i,o,a,l=b();e=t,o=l,a=n,(i=r)&&0<i.length&&i.length<o.length&&function(e,t){for(var n=0;n<e.length;n++){var i=Math.round(e.start(n)),r=Math.round(e.end(n));if(r===t.start||i===t.end||t.start>=i&&t.end<=r)return!0}return!1}(i,a)&&p.trigger(s.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:o.end(o.length-2),to:o.start(o.length-1),unintended:!0}),0<v.length?T.call(this):(g=!1,_&&_({chunk:n}))}v.splice(0,1);var r=[];try{0===n.bytes.length?i.call(e):(r=b(),f.appendBuffer?f.appendBuffer(n.bytes):f.append(n.bytes,n),k(i.bind(e)))}catch(i){h.fatal('SourceBuffer append failed "'+i+'"'),0<v.length?T():g=!1,_&&_({chunk:n,error:new o.default(i.code,i.message)})}}()}function C(){var e;0<y.length&&(e=y.shift(),f.updating?k(e):(e(),C()))}function S(){f.updating||C()}function w(){f.updating||C()}function A(){h.error("SourceBufferSink error",t.type)}function k(e){y.push(e),f.updating||C()}return l={getAllBufferRanges:b,getBuffer:function(){return f},append:function(e){e?(v.push(e),g||k(T.bind(this))):_({chunk:e,error:new o.default(d.default.APPEND_ERROR_CODE,d.default.APPEND_ERROR_MESSAGE)})},remove:function(t,n,i){var r=this;k((function(){try{0<=t&&t<n&&(i||"ended"!==e.readyState)&&f.remove(t,n),k((function(){p.trigger(s.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1})}))}catch(e){p.trigger(s.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1,error:new o.default(e.code,e.message)})}}))},abort:function(){try{("open"===e.readyState||f.setTextTrack&&"ended"===e.readyState)&&f.abort()}catch(e){h.error('SourceBuffer append abort failed: "'+e+'"')}v=[]},reset:function(t){if(f){if("function"==typeof f.removeEventListener&&(f.removeEventListener("updateend",w,!1),f.removeEventListener("error",A,!1),f.removeEventListener("abort",A,!1)),clearInterval(m),y=[],!t){try{f.getClassName&&"TextSourceBuffer"===f.getClassName()||(h.debug("Removing sourcebuffer from media source"),e.removeSourceBuffer(f))}catch(t){h.error("Failed to remove source buffer from media source.")}f=null}g=!1}v=[],_=null},updateTimestampOffset:function(e){f.timestampOffset===e||isNaN(e)||k((function(){e<0&&(e+=.001),f.timestampOffset=e}))},hasDiscontinuitiesAfter:function(e){try{var t=b();if(t&&1<t.length)for(var n=0,i=t.length;n<i;n++)if(0<n&&e<t.start(n)&&t.start(n)>t.end(n-1)+.1)return!0}catch(e){h.error("hasDiscontinuities exception: "+e.message)}return!1},waitForUpdateEnd:k,updateAppendWindow:E},function(){h=(0,r.default)(c).getInstance().getLogger(l),g=!1;var n=t.codec;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");if((f=i||e.addSourceBuffer(n)).changeType&&i&&(h.debug("Doing period transition with changeType"),f.changeType(n)),E(),"function"==typeof f.addEventListener)try{f.addEventListener("updateend",w,!1),f.addEventListener("error",A,!1),f.addEventListener("abort",A,!1)}catch(e){m=setInterval(S,50)}else m=setInterval(S,50)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;var o=(0,u.default)(c).getInstance();f=o.getTextSourceBuffer()}}(),l}c.__dashjs_factory_name="SourceBufferSink";var p=l.default.getClassFactory(c);n.default=p,t.exports=n.default},{201:201,226:226,45:45,46:46,47:47,51:51,54:54}],105:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(61)),a=i(e(106)),s=i(e(116)),l=i(e(204)),u=i(e(46)),d=i(e(54)),c=i(e(45)),p=i(e(51)),h=i(e(47)),f=i(e(226)),g=i(e(207)),m=i(e(221));function y(e){e=e||{};var t=this.context,n=(0,u.default)(t).getInstance(),i=(0,m.default)(t).getInstance(),h=e.manifestModel,y=e.mediaPlayerModel,v=e.manifestUpdater,_=e.adapter,b=e.capabilities,E=e.errHandler,T=e.timelineConverter,C=e.dashMetrics,S=e.abrController,w=e.playbackController,A=e.eventController,k=e.mediaController,P=e.textController,I=e.videoModel,L=e.settings,M=void 0,R=void 0,D=void 0,x=void 0,O=void 0,N=void 0,B=void 0,U=void 0,F=void 0,j=void 0,q=void 0,V=void 0,H=void 0,W=void 0,G=void 0,z=void 0,K=void 0,Y=void 0,Q=void 0,X=void 0,$=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function J(e){for(var t=x?x.length:0,i=0;i<t;i++)x[i].getFragmentModel().removeExecutedRequestsBeforeTime(ne()+te()),x[i].reset(!1,e);Ee(B=N=!(x=[])),n.off(d.default.CURRENT_TRACK_CHANGED,se,M)}function Z(){J(),D=null,F=U=O=!1,Q=K=q=!(j={})}function ee(){w&&w.pause(),H&&(H.reset(),H=null),Z(),n.off(d.default.DATA_UPDATE_COMPLETED,fe,M),n.off(d.default.BUFFERING_COMPLETED,he,M),n.off(d.default.INBAND_EVENTS,ge,M),V&&(n.off(d.default.KEY_ERROR,oe,M),n.off(d.default.SERVER_CERTIFICATE_UPDATED,oe,M),n.off(d.default.LICENSE_REQUEST_COMPLETE,oe,M),n.off(d.default.KEY_SYSTEM_SELECTED,oe,M),n.off(d.default.KEY_SESSION_CREATED,oe,M),n.off(d.default.KEY_STATUSES_CHANGED,oe,M)),Ee(!1)}function te(){return D?D.duration:NaN}function ne(){return D?D.start:NaN}function ie(){return D?D.id:null}function re(){if(!(I&&S&&S.hasOwnProperty("getBitrateList")&&_&&_.hasOwnProperty("getAllMediaInfoForType")&&_.hasOwnProperty("getEventsFor")))throw new Error(r.default.MISSING_CONFIG_ERROR)}function oe(e){e.error&&(E.error(e.error),R.fatal(e.error.message),ee())}function ae(e){var t,n=e?e.type:null,i=void 0;if(n===r.default.MUXED)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",R.fatal(i),void E.error(new f.default(p.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,i,h.getValue()));if(n===r.default.TEXT||n===r.default.FRAGMENTED_TEXT||n===r.default.EMBEDDED_TEXT||n===r.default.IMAGE)return 1;if(t=e.codec,R.debug(n+" codec: "+t),e.contentProtection&&!b.supportsEncryptedMedia())E.error(new f.default(p.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,p.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!b.supportsCodec(t))return i=n+"Codec ("+t+") is not supported.",void R.error(i);return 1}function se(e){var t,n,i,o;D&&e.newMediaInfo.streamInfo.id===D.id&&(t=e.newMediaInfo,n=h.getValue(),_.setCurrentMediaInfo(D.id,t.type,t),(i=me(t))&&(o=w.getTime(),R.info("Stream -  Process track changed at current time "+o),R.debug("Stream -  Update stream controller"),n.refreshManifestOnSwitchTrack?(R.debug("Stream -  Refreshing manifest for switch track"),X=e,v.refreshManifest()):(i.selectMediaInfo(t),t.type!==r.default.FRAGMENTED_TEXT?(S.updateTopQualityIndex(t),i.switchTrackAsked(),i.getFragmentModel().abortRequests()):(i.getScheduleController().setSeekTarget(o),i.setBufferingTime(o),i.resetIndexHandler()))))}function le(i,s){var u,c=_.getAllMediaInfoForType(D,i),p=null;if(c&&0!==c.length){i===r.default.VIDEO&&(U=!0),i===r.default.AUDIO&&(F=!0);for(var f=0,g=c.length;f<g;f++)if(p=c[f],i===r.default.EMBEDDED_TEXT)P.addEmbeddedTrack(p);else{if(!ae(p))continue;k.addTrack(p)}i!==r.default.EMBEDDED_TEXT&&0!==k.getTracksFor(i,D).length&&(i!==r.default.IMAGE?(k.checkInitialMediaSettingsForType(i,D),u=k.getCurrentTrackFor(i,D),n.trigger(d.default.STREAM_INITIALIZING,{streamInfo:D,mediaInfo:p}),function(n,i,o,s){var l=H.getModel(ie(),n?n.type:null),u=(0,a.default)(t).create({streamInfo:D,type:n?n.type:null,mimeType:n?n.mimeType:null,timelineConverter:T,adapter:_,manifestModel:h,mediaPlayerModel:y,fragmentModel:l,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,abrController:S,playbackController:w,mediaController:k,textController:P,errHandler:E,settings:L,boxParser:z});if(u.initialize(o,U),S.updateTopQualityIndex(n),x.push(u),!n||n.type!==r.default.TEXT&&n.type!==r.default.FRAGMENTED_TEXT)u.addMediaInfo(n,!0);else{for(var d=void 0,c=0;c<i.length;c++)i[c].index===n.index&&(d=c),u.addMediaInfo(i[c]);u.selectMediaInfo(i[d])}}(u,c,s)):W=(0,l.default)(t).create({streamInfo:D,adapter:_,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:Y,eventBus:n,events:d.default,dashConstants:o.default}))}else R.info("No "+i+" data.")}function ue(){var e;A&&(e=_.getEventsFor(D),A.addInlineEvents(e))}function de(e){var t=_.getAdaptationForType(D?D.index:null,e,D);t&&Array.isArray(t.Representation_asArray)&&(t.Representation_asArray=t.Representation_asArray.filter((function(e,n){if(0===n)return!0;var i=_.getCodec(t,n,!0);return!!b.supportsCodec(i)||(R.error("[Stream] codec not supported: "+i),!1)})))}function ce(){for(var e=x.length,t=j.audio||j.video?new f.default(p.default.DATA_UPDATE_FAILED_ERROR_CODE,p.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,i=0;i<e;i++)if(x[i].isUpdating()||q)return;if(B){if(V)for(i=0;i<e&&x[i];i++)x[i].getType()!==r.default.AUDIO&&x[i].getType()!==r.default.VIDEO&&x[i].getType()!==r.default.FRAGMENTED_TEXT||V.initializeForMedia(x[i].getMediaInfo());for(t?E.error(t):O||(O=!0,T.setTimeSyncCompleted(!0),n.trigger(d.default.STREAM_INITIALIZED,{streamInfo:D,liveStartTime:G?NaN:function(){if(!D.manifestInfo.isDynamic)return NaN;for(var e=0;e<x.length;e++)if(x[e].getType()===r.default.AUDIO||x[e].getType()===r.default.VIDEO)return x[e].getLiveStartTime();return NaN}()})),i=0;i<e&&x[i];i++)x[i].getScheduleController().start()}}function pe(e){for(var t={},n=0,i=x.length;n<i;n++){var r=x[n].createBuffer(e);r&&(t[x[n].getType()]=r.getBuffer())}return t}function he(e){if(e.streamId===D.id){var t=ye(),i=t.length;if(0!==i){for(var o=0;o<i;o++)if(!t[o].isBufferingCompleted()&&(t[o].getType()===r.default.AUDIO||t[o].getType()===r.default.VIDEO))return void R.warn("onBufferingCompleted - One streamProcessor has finished but",t[o].getType(),"one is not buffering completed");R.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),n.trigger(d.default.STREAM_BUFFERING_COMPLETED,{streamInfo:D})}else R.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function fe(e){D&&e.sender.getStreamId()===D.id&&(j[e.sender.getType()]=e.error,ce())}function ge(e){var t;D&&e.sender.getStreamInfo().id===D.id&&(t=e.events,A&&A.addInbandEvents(t))}function me(e){return e?ye().filter((function(t){return t.getType()===e.type}))[0]:null}function ye(){for(var e=[],t=void 0,n=void 0,i=0;i<x.length;i++)(t=(n=x[i]).getType())!==r.default.AUDIO&&t!==r.default.VIDEO&&t!==r.default.FRAGMENTED_TEXT&&t!==r.default.TEXT||e.push(n);return e}function ve(e,t,n){var i=arguments.length<=2||void 0===n?null:n;if(!e)return!1;var r=e.getStreamInfo(),o=i?i.getStreamInfo():D;if(!r||!o)return!1;var a=_.getAdaptationForType(r.index,t,r),s=_.getAdaptationForType(o.index,t,o);return a&&s?!(!_e(s)&&_e(a)):!a&&!s}function _e(e){return e&&(e.ContentProtection||e.Representation&&0<e.Representation.length&&e.Representation[0].ContentProtection)}function be(e,t,n){var i=arguments.length<=2||void 0===n?null:n;if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;var r=e.getStreamInfo(),o=i?i.getStreamInfo():D;if(!r||!o)return!1;var a=_.getAdaptationForType(r.index,t,r),s=_.getAdaptationForType(o.index,t,o);if(!a||!s)return!a&&!s;var l=a&&s&&a.mimeType===s.mimeType,u=s.Representation_asArray.map((function(e){return e.codecs})),d=a.Representation_asArray.map((function(e){return e.codecs})),c=d.some((function(e){return-1<u.indexOf(e)})),p=d.some((function(e){return u.some((function(t){return function(e,t){for(var n=e.split(".")[0],i=0===t.indexOf(n),r=void 0,o=0;o<$.length;o++)if($[o].codec===n){r=$[o];break}return r?i||r.compatibleCodecs.some((function(e){return 0===t.indexOf(e)})):i}(t,e)}))}));return c||p&&l}function Ee(e){G=e}return M={initialize:function(e,t){(D=e)&&H.setStreamId(e.id),(V=t)&&(n.on(d.default.KEY_ERROR,oe,M),n.on(d.default.SERVER_CERTIFICATE_UPDATED,oe,M),n.on(d.default.LICENSE_REQUEST_COMPLETE,oe,M),n.on(d.default.KEY_SYSTEM_SELECTED,oe,M),n.on(d.default.KEY_SESSION_CREATED,oe,M),n.on(d.default.KEY_STATUSES_CHANGED,oe,M)),n.trigger(d.default.STREAM_UPDATED,{streamInfo:D})},activate:function(e,t){if(N)return t;var i;return n.on(d.default.CURRENT_TRACK_CHANGED,se,M),i=G?(function(){var e;q=!0,re(),de(r.default.VIDEO),de(r.default.AUDIO),q=!(B=!0),0===x.length?(e="No streams to play.",E.error(new f.default(p.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,h.getValue())),R.debug(e)):ce()}(),t):function(e,t){re();var n=I.getElement();ue(),q=!0,de(r.default.VIDEO),de(r.default.AUDIO),(!n||n&&/^VIDEO$/i.test(n.nodeName))&&le(r.default.VIDEO,e),le(r.default.AUDIO,e),le(r.default.TEXT,e),le(r.default.FRAGMENTED_TEXT,e),le(r.default.EMBEDDED_TEXT,e),le(r.default.MUXED,e),le(r.default.IMAGE,e);var i,o=pe(t);return q=!(B=!0),0===x.length?(i="No streams to play.",E.error(new f.default(p.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i,h.getValue())),R.fatal(i)):ce(),o}(e,t),N=!0,i},deactivate:J,isActive:function(){return N},getDuration:te,getStartTime:ne,getId:ie,getStreamInfo:function(){return D},getHasAudioTrack:function(){return F},getHasVideoTrack:function(){return U},preload:function(e,t){if(!G){ue(),le(r.default.VIDEO,e),le(r.default.AUDIO,e),le(r.default.TEXT,e),le(r.default.FRAGMENTED_TEXT,e),le(r.default.EMBEDDED_TEXT,e),le(r.default.MUXED,e),le(r.default.IMAGE,e),pe(t),n.on(d.default.CURRENT_TRACK_CHANGED,se,M);for(var i=0;i<x.length&&x[i];i++)x[i].getScheduleController().start();Ee(!0)}},getThumbnailController:function(){return W},getBitrateListFor:function(e){if(re(),e===r.default.IMAGE)return W?W.getBitrateList():[];var t=function(e){for(var t=null,n=0;n<x.length;n++)if((t=x[n]).getType()===e)return t.getMediaInfo();return null}(e);return S.getBitrateList(t)},updateData:function(e){R.info("Manifest updated... updating data system wide."),q=!(N=!1),D=e,n.trigger(d.default.STREAM_UPDATED,{streamInfo:D}),A&&ue(),de(r.default.VIDEO),de(r.default.AUDIO);for(var t=0,i=x.length;t<i;t++){var o=x[t];o.updateStreamInfo(D);var a=_.getMediaInfoForType(D,o.getType());S.updateTopQualityIndex(a),o.addMediaInfo(a,!0)}if(X&&(a=X.newMediaInfo).type!==r.default.FRAGMENTED_TEXT){var s=me(X.oldMediaInfo);if(!s)return;s.switchTrackAsked(),X=void 0}q=!1,ce()},reset:ee,getProcessors:ye,setMediaSource:function(e){for(var t=0;t<x.length;)ae(x[t].getMediaInfo())?(x[t].setMediaSource(e),t++):(x[t].reset(),x.splice(t,1));var n;for(t=0;t<x.length;t++)x[t].dischargePreBuffer();0===x.length&&(n="No streams to play.",E.error(new f.default(p.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",h.getValue())),R.fatal(n))},isMediaCodecCompatible:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return be(e,r.default.VIDEO,t)&&be(e,r.default.AUDIO,t)},isProtectionCompatible:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return ve(e,r.default.VIDEO,t)&&ve(e,r.default.AUDIO,t)},getPreloaded:function(){return G},getPreloadingScheduled:function(){return K},setPreloadingScheduled:function(e){K=e},getIsEndedEventSignaled:function(){return Q},setIsEndedEventSignaled:function(e){Q=e}},Y=(0,c.default)(t).getInstance(),R=Y.getLogger(M),Z(),z=(0,g.default)(t).getInstance(),H=(0,s.default)(t).create({mediaPlayerModel:y,dashMetrics:C,errHandler:E,settings:L,boxParser:z,dashConstants:o.default,urlUtils:i}),n.on(d.default.BUFFERING_COMPLETED,he,M),n.on(d.default.DATA_UPDATE_COMPLETED,fe,M),n.on(d.default.INBAND_EVENTS,ge,M),M}y.__dashjs_factory_name="Stream",n.default=h.default.getClassFactory(y),t.exports=n.default},{106:106,108:108,116:116,204:204,207:207,221:221,226:226,45:45,46:46,47:47,51:51,54:54,61:61}],106:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(61)),a=i(e(109)),s=i(e(150)),l=i(e(114)),u=i(e(200)),d=i(e(121)),c=i(e(62)),p=i(e(216)),h=i(e(47)),f=e(219),g=i(e(46)),m=i(e(54)),y=i(e(57)),v=i(e(51)),_=i(e(226)),b=i(e(45)),E=i(e(218)),T=i(e(221)),C=i(e(207)),S=i(e(228)),w=e(244);function A(e){e=e||{};var t=this.context,n=(0,g.default)(t).getInstance(),i=e.streamInfo,h=e.type,A=e.errHandler,k=e.mimeType,P=e.timelineConverter,I=e.adapter,L=e.manifestModel,M=e.mediaPlayerModel,R=e.fragmentModel,D=e.abrController,x=e.playbackController,O=e.mediaController,N=e.textController,B=e.dashMetrics,U=e.settings,F=e.boxParser,j=void 0,q=void 0,V=void 0,H=void 0,W=void 0,G=void 0,z=void 0,K=void 0,Y=void 0,Q=void 0,X=void 0,$=void 0;function J(){W=[],H=null,X=0}function Z(e){e.sender.getType()===h&&e.sender.getStreamId()===i.id&&(e.error||z.setCurrentRepresentation(I.convertDataToRepresentationInfo(e.currentRepresentation)),e.error&&e.error.code!==v.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE||x.getStreamController().getActiveStreamInfo().id===i.id&&re())}function ee(e){var t;h===e.mediaType&&i.id===e.streamInfo.id&&(t=ae(e.newQuality),z.setCurrentRepresentation(t),B.pushPlayListTraceMetrics(new Date,w.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),B.createPlaylistTraceMetrics(t.id,1e3*x.getTime(),x.getPlaybackRate()))}function te(e){var t;e.streamId===i.id&&e.mediaType===h&&(B.addBufferLevel(h,new Date,1e3*e.bufferLevel),t=x.getStreamController().getActiveStreamInfo().id,L.getValue().doNotUpdateDVRWindowOnBufferUpdated||i.id!==t||re())}function ne(e){e.streamId===i.id&&e.mediaType===h&&(B.addBufferState(h,e.state,z.getBufferTarget()),e.state!==a.default.BUFFER_EMPTY||x.isSeeking()||B.pushPlayListTraceMetrics(new Date,w.PlayListTrace.REBUFFERING_REASON))}function ie(e){e.streamId===i.id&&e.mediaType===h&&(R.syncExecutedRequestsWithBufferedRange(G.getBuffer().getAllBufferRanges(),i.duration),e.from>x.getTime()&&(X=e.from,$=!0))}function re(){var e=i.manifestInfo,t=e.isDynamic,n=P.calcSegmentAvailabilityRange(K.getCurrentRepresentation(),t);B.addDVRInfo(h,x.getTime(),e,n)}function oe(){return G?G.getBuffer():null}function ae(e){var t=void 0!==e?((0,f.checkInteger)(e),K?K.getRepresentationForQuality(e):null):K?K.getCurrentRepresentation():null;return I.convertDataToRepresentationInfo(t)}function se(e){var t;e.sender&&e.mediaType===h&&e.streamId===i.id&&(I.getIsTextTrack(k)&&!N.isTextEnabled()||G&&e.representationId&&(G.appendInitSegment(e.representationId)||(t=Q?Q.getInitRequest(H,K.getCurrentRepresentation()):null,z.processInitRequest(t))))}function le(e){var t;e.sender&&e.mediaType===h&&e.streamId===i.id&&(t=void 0,G.getIsPruningInProgress()||(t=function(e,t){var n,i,o=ae(),a=!isNaN(e),s=x.getNormalizedTime(),l=a?e:X,u=!1,d=void 0;if(isNaN(l)||h===r.default.FRAGMENTED_TEXT&&!N.isTextEnabled())return null;if(G&&(n=G.getRangeAt(l),i=G.getRangeAt(s),null===n&&null===i||a||(!n||i&&i.start!=n.start&&i.end!=n.end)&&G.getBuffer().hasDiscontinuitiesAfter(s)&&h!==r.default.FRAGMENTED_TEXT&&(R.removeExecutedRequestsAfterTime(i.end),u=!0)),t)d=ce(o,l=t.startTime+t.duration/2,{timeThreshold:0,ignoreIsFinished:!0});else{var c=a||$||u;for(d=ce(o,c?l:void 0,{keepIdx:!c}),$=!1;d&&d.action!==S.default.ACTION_COMPLETE&&R.isFragmentLoaded(d);)d=ce(o)}return d}(e.seekTarget,e.replacement))&&(z.setSeekTarget(NaN),e.replacement||(isNaN(t.startTime+t.duration)||(X=t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+z.getTimeToLoadDelay(),z.setTimeToLoadDelay(0))),z.processMediaRequest(t))}function ue(e){var r,o,a,l,u,d,c,p=e.chunk;p.streamId===i.id&&p.mediaInfo.type==h&&(r=p.bytes,a=ae(o=p.quality),l=K&&a?K.getRepresentationForQuality(a.quality):null,u=I.getEventsFor(a.mediaInfo),d=I.getEventsFor(a,l),(u&&0<u.length||d&&0<d.length)&&(c=function(e,n,i,r){for(var o=Math.max(!n||isNaN(n.startTime)?0:n.startTime,0),a=[],s=[],l=i.concat(r),u=0,d=l.length;u<d;u++)a[l[u].schemeIdUri+"/"+l[u].value]=l[u];var c=(0,C.default)(t).getInstance().parse(e).getBoxes("emsg");for(u=0,d=c.length;u<d;u++){var p=I.getEvent(c[u],a,o);p&&s.push(p)}return s}(r,R.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,quality:o,index:p.index})[0],u,d),n.trigger(m.default.INBAND_EVENTS,{sender:j,events:c})))}function de(e){e.mediaType&&e.mediaType!==h||e.streamId!==i.id||(X=e.time,z.setSeekTarget(e.time))}function ce(e,t,n){var i,r=null;return Q&&(i=K&&e?K.getRepresentationForQuality(e.quality):null,r=void 0!==t&&void 0!==n?Q.getSegmentRequestForTime(H,i,t,n):Q.getNextSegmentRequest(H,i)),r}return j={initialize:function(a,s){Q=(0,y.default)(t).create({streamInfo:i,type:h,timelineConverter:P,dashMetrics:B,mediaPlayerModel:M,baseURLController:e.baseURLController,errHandler:A,settings:U,boxParser:F,events:m.default,eventBus:n,errors:v.default,debug:(0,b.default)(t).getInstance(),requestModifier:(0,E.default)(t).getInstance(),dashConstants:o.default,constants:r.default,urlUtils:(0,T.default)(t).getInstance()}),(V=i.manifestInfo.isDynamic)&&(Y=(0,p.default)(t).create({timelineConverter:P})),Q.initialize(V),D.registerStreamType(h,j),K=(0,c.default)(t).create({streamId:i.id,type:h,abrController:D,dashMetrics:B,playbackController:x,timelineConverter:P,dashConstants:o.default,events:m.default,eventBus:n,errors:v.default}),(G=function(e){return e?e===r.default.VIDEO||e===r.default.AUDIO?(0,l.default)(t).create({streamInfo:i,type:e,mediaPlayerModel:M,manifestModel:L,fragmentModel:R,errHandler:A,mediaController:O,representationController:K,adapter:I,textController:N,abrController:D,playbackController:x,settings:U}):(0,u.default)(t).create({streamInfo:i,type:e,mimeType:k,mediaPlayerModel:M,manifestModel:L,fragmentModel:R,errHandler:A,mediaController:O,representationController:K,adapter:I,textController:N,abrController:D,playbackController:x,settings:U}):(A.error(new _.default(v.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,v.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(h))&&G.initialize(a),(z=(0,d.default)(t).create({streamId:i.id,type:h,mimeType:k,adapter:I,dashMetrics:B,mediaPlayerModel:M,fragmentModel:R,abrController:D,playbackController:x,textController:N,mediaController:O,bufferController:G,settings:U})).initialize(s),X=0,$=!1},isUpdating:function(){return!!K&&K.isUpdating()},getType:function(){return h},getBufferController:function(){return G},getFragmentModel:function(){return R},getScheduleController:function(){return z},getRepresentationController:function(){return K},getRepresentationInfo:ae,getBufferLevel:function(){return G?G.getBufferLevel():0},isBufferingCompleted:function(){return!!G&&G.getIsBufferingCompleted()},createBuffer:function(e){return oe()||G?G.createBuffer(W,e):null},updateStreamInfo:function(e){i=e,U.get().streaming.useAppendWindow&&G.updateAppendWindow()},getStreamInfo:function(){return i},selectMediaInfo:function(e){e===H||e&&H&&e.type!==H.type||(H=e);var t,n,o,a,s,l=I.getRealAdaptation(i,H),u=I.getVoRepresentations(H);K&&(t=K.getData(),n=D.getTopQualityIndexFor(h,i.id),o=D.getMinAllowedIndexFor(h),s=void 0,s=(a=null)!==t&&t.id==l.id||h===r.default.FRAGMENTED_TEXT?D.getQualityFor(h):(a=D.getThroughputHistory().getAverageThroughput(h)||D.getInitialBitrateFor(h),D.getQualityForBitrate(H,a)),void 0!==o&&s<o&&(s=o),n<s&&(s=n),Q.setMimeType(H?H.mimeType:null),K.updateData(l,u,h,s))},addMediaInfo:function(e,t){-1===W.indexOf(e)&&W.push(e),t&&this.selectMediaInfo(e)},getLiveStartTime:function(){if(!V)return NaN;if(!Y)return NaN;var e=NaN,t=ae(),n=Y.getLiveEdge(t);if(isNaN(n))return NaN;var r=function(e,t){try{var n=null,r=x.getLiveDelay(),o=isNaN(i.manifestInfo.DVRWindowSize)?r:i.manifestInfo.DVRWindowSize,a=.1*o,s=void 0;if(!isFinite(o)||ce(t,e-o+a,{ignoreIsFinished:!0}))for(;!n&&r<=o;)(n=ce(t,s=e-r,{ignoreIsFinished:!0}))||(r+=1);return n&&x.setLiveDelay(r,!0),q.debug("live edge: "+e+", live delay: "+r+", live target: "+s),n}catch(e){return null}}(n,t);return r&&(e=!U.get().streaming.lowLatencyEnabled||r.duration<M.getLiveDelay()?r.startTime:r.startTime+r.duration-M.getLiveDelay()),e},switchTrackAsked:function(){z.switchTrackAsked()},getMediaInfoArr:function(){return W},getMediaInfo:function(){return H},getMediaSource:function(){return G.getMediaSource()},setMediaSource:function(e){G.setMediaSource(e,W)},dischargePreBuffer:function(){G.dischargePreBuffer()},getBuffer:oe,setBuffer:function(e){G.setBuffer(e)},setBufferingTime:function(e){X=e},resetIndexHandler:function(){Q&&Q.resetIndex()},getInitRequest:function(e){(0,f.checkInteger)(e);var t=K?K.getRepresentationForQuality(e):null;return Q?Q.getInitRequest(H,t):null},getFragmentRequest:ce,finalisePlayList:function(e,t){B.pushPlayListTraceMetrics(e,t)},reset:function(e,t){Q&&Q.reset(),G&&(G.reset(e,t),G=null),z&&(z.reset(),z=null),K&&(K.reset(),K=null),Y&&(Y.reset(),Y=null),D&&D.unRegisterStreamType(h),n.off(m.default.DATA_UPDATE_COMPLETED,Z,j),n.off(m.default.QUALITY_CHANGE_REQUESTED,ee,j),n.off(m.default.INIT_FRAGMENT_NEEDED,se,j),n.off(m.default.MEDIA_FRAGMENT_NEEDED,le,j),n.off(m.default.MEDIA_FRAGMENT_LOADED,ue,j),n.off(m.default.BUFFER_LEVEL_UPDATED,te,j),n.off(m.default.BUFFER_LEVEL_STATE_CHANGED,ne,j),n.off(m.default.BUFFER_CLEARED,ie,j),n.off(m.default.SEEK_TARGET,de,j),J(),i=h=null}},q=(0,b.default)(t).getInstance().getLogger(j),J(),n.on(m.default.DATA_UPDATE_COMPLETED,Z,j,g.default.EVENT_PRIORITY_HIGH),n.on(m.default.QUALITY_CHANGE_REQUESTED,ee,j),n.on(m.default.INIT_FRAGMENT_NEEDED,se,j),n.on(m.default.MEDIA_FRAGMENT_NEEDED,le,j),n.on(m.default.MEDIA_FRAGMENT_LOADED,ue,j),n.on(m.default.BUFFER_LEVEL_UPDATED,te,j),n.on(m.default.BUFFER_LEVEL_STATE_CHANGED,ne,j),n.on(m.default.BUFFER_CLEARED,ie,j),n.on(m.default.SEEK_TARGET,de,j),j}A.__dashjs_factory_name="StreamProcessor",n.default=h.default.getClassFactory(A),t.exports=n.default},{108:108,109:109,114:114,121:121,150:150,200:200,207:207,216:216,218:218,219:219,221:221,226:226,228:228,244:244,45:45,46:46,47:47,51:51,54:54,57:57,61:61,62:62}],107:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(226)),o=i(e(159)),a=e(242),s=i(e(233)),l=i(e(46)),u=i(e(54)),d=i(e(47)),c=i(e(51));function p(e){e=e||{};var t=this.context,n=(0,l.default)(t).getInstance(),i=(0,o.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings?e.settings.get().streaming.lowLatencyEnabled:null,errors:c.default});return{load:function(e,t,o){function l(i,a){t.resolved=!0,t.resolvedContent=i||null,n.trigger(u.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:o,error:i||a?null:new r.default(c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})}var d;"urn:mpeg:dash:resolve-to-zero:2013"===e?l(null,!0):(d=new s.default(e,a.HTTPRequest.XLINK_EXPANSION_TYPE),i.load({request:d,success:function(e){l(e)},error:function(){l(null)}}))},reset:function(){i&&(i.abort(),i=null)}}}p.__dashjs_factory_name="XlinkLoader",n.default=d.default.getClassFactory(p),t.exports=n.default},{159:159,226:226,233:233,242:242,46:46,47:47,51:51,54:54}],108:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var o=new(function(e,t,n){t&&i(e.prototype,t)}(r,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer"}}]),r);n.default=o,t.exports=n.default},{}],109:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var o=new(function(e,t,n){t&&i(e.prototype,t)}(r,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),r);n.default=o,t.exports=n.default},{}],110:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var o=new(function(e,t,n){t&&i(e.prototype,t)}(r,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),r);n.default=o,t.exports=n.default},{}],111:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(190)),o=i(e(108)),a=i(e(109)),s=i(e(225)),l=i(e(150)),u=i(e(46)),d=i(e(54)),c=i(e(47)),p=i(e(186)),h=i(e(187)),f=i(e(188)),g=i(e(185)),m=i(e(189)),y=i(e(45)),v=e(242),_=e(219);function b(){var e=this.context,t=(0,y.default)(e).getInstance(),n=(0,u.default)(e).getInstance(),i=void 0,c=void 0,b=void 0,E=void 0,T=void 0,C=void 0,S=void 0,w=void 0,A=void 0,k=void 0,P=void 0,I=void 0,L=void 0,M=void 0,R=void 0,D=void 0,x=void 0,O=void 0,N=void 0,B=void 0,U=void 0,F=void 0,j=void 0;function q(){(b=(0,r.default)(e).create({dashMetrics:F,mediaPlayerModel:R,settings:j})).initialize()}function V(){T={},C={},w={},S={},O={},U={},void 0===k&&(k=!1),B=N=x=void 0,clearTimeout(A),A=null}function H(e){e.mediaType===o.default.VIDEO&&(x=e.oldQuality,N.push(x,M.getPlaybackQuality()))}function W(e){e.metric!==a.default.HTTP_REQUEST||!e.value||e.value.type!==v.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==o.default.AUDIO&&e.mediaType!==o.default.VIDEO||B.push(e.mediaType,e.value,j.get().streaming.abr.useDeadTimeLatency),e.metric!==a.default.BUFFER_LEVEL||e.mediaType!==o.default.AUDIO&&e.mediaType!==o.default.VIDEO||function(e,t){var n=j.get().streaming.abr.ABRStrategy;if(n===o.default.ABR_STRATEGY_BOLA)return U[e]=!0;if(n===o.default.ABR_STRATEGY_THROUGHPUT)return U[e]=!1;var i=R.getStableBufferTime(),r=i,a=.5*i,s=U[e],l=(s?a:r)<t;(U[e]=l)!==s&&(l?c.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):c.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e.mediaType,.001*e.value.level)}function G(e,t){return T[t]=T[t]||{},T[t].hasOwnProperty(e)||(T[t][e]=0),function(e,t){if(t!==o.default.VIDEO||!j.get().streaming.abr.limitBitrateByPortal||!S[t])return e;k||te();var n=L.getAdaptationForType(0,t).Representation,i=e;if(0<P&&0<I){for(;0<i&&n[i]&&P<n[i].width&&P-n[i-1].width<n[i].width-P;)--i;for(;i<n.length-1&&n[i].width===n[i+1].width;)i+=1}return i}(function(e,t,n){var i=j.get().streaming.abr.maxRepresentationRatio[t];return isNaN(i)||1<=i||i<0?e:Math.min(e,Math.round(n*i))}(function(e,t){var n=e;if(!S[t])return n;var i=K(t);void 0!==i&&(n=Math.max(e,i));var r=z(t);return void 0!==r&&(n=Math.min(n,r)),n}(T[t][e],e),e,T[t][e]),e)}function z(e){var t,n=(t=e,j.get().streaming.abr.maxBitrate[t]);return-1<n?$(S[e].getMediaInfo(),n):void 0}function K(e){var t,n=(t=e,j.get().streaming.abr.minBitrate[t]);if(-1<n){var i=S[e].getMediaInfo(),r=J(i),o=$(i,n);return r[o]&&o<r.length-1&&r[o].bitrate<1e3*n&&o++,o}}function Y(e,t,n,i){var r=t.id,o=ee(e);(0,_.checkInteger)(n);var a=G(e,r);n!==o&&0<=n&&n<=a&&Q(e,o,n,a,i)}function Q(e,t,i,r,o){var a,s,l,u,p,h,f;e&&S[e]&&(s=(a=S[e].getStreamInfo())?a.id:null,j.get().debug.logLevel===y.default.LOG_LEVEL_DEBUG&&(l=F.getCurrentBufferLevel(e),c.info("["+e+"] switch from "+t+" to "+i+"/"+r+" (buffer: "+l+") "+(o?JSON.stringify(o):"."))),p=e,f=i,C[h=s]=C[h]||{},C[h][p]=f,n.trigger(d.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:a,oldQuality:t,newQuality:i,reason:o}),u=B.getAverageThroughput(e),isNaN(u)||D.setSavedBitrateSettings(e,u))}function X(e,t){w[e].state=t}function $(e,t,n){var i=e&&e.type?S[e.type].getRepresentationInfo():null;if(j.get().streaming.abr.useDeadTimeLatency&&n&&i&&i.fragmentDuration){n/=1e3;var r=i.fragmentDuration;if(r<n)return 0;t*=1-n/r}for(var o=J(e),a=o.length-1;0<=a;a--)if(1e3*t>=o[a].bitrate)return a;return 0}function J(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,i=e.type,r=void 0,o=0,a=n.length;o<a;o++)(r=new s.default).mediaType=i,r.qualityIndex=o,r.bitrate=n[o].bandwidth,r.width=n[o].width,r.height=n[o].height,r.scanType=n[o].scanType,t.push(r);return t}function Z(e){return U[e]}function ee(e){if(e&&S[e]){var t=S[e].getStreamInfo(),n=t?t.id:null;if(n)return C[n]=C[n]||{},C[n].hasOwnProperty(e)||(C[n][e]=0),C[n][e]}return 0}function te(){var e;M&&(e=j.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,P=M.getClientWidth()*e,I=M.getClientHeight()*e)}function ne(t){var n=t.request.mediaType;if(j.get().streaming.abr.autoSwitchBitrate[n]){var r=S[n];if(!r)return;var o,s=(0,p.default)(e).create({abrController:i,streamProcessor:r,currentRequest:t.request,useBufferOccupancyABR:Z(n)}),u=b.shouldAbandonFragment(s);u.quality>h.default.NO_CHANGE&&(o=r.getFragmentModel()).getRequests({state:l.default.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(o.abortRequests(),X(n,a.default.ABANDON_LOAD),O[n].reset(),O[n].push({oldValue:ee(n),newValue:u.quality,confidence:1,reason:u.reason}),Y(n,E.getActiveStreamInfo(),u.quality,u.reason),clearTimeout(A),A=setTimeout((function(){X(n,a.default.ALLOW_LOAD),A=null}),j.get().streaming.abandonLoadTimeout))}}return i={isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=ee(o.default.AUDIO),i=ee(o.default.VIDEO);return n===G(o.default.AUDIO,t)&&i===G(o.default.VIDEO,t)},updateTopQualityIndex:function(e){if(e){var t=e.type,n=e.streamInfo.id,i=e.representationCount-1;return r=t,a=i,T[o=n]=T[o]||{},T[o][r]=a,i}var r,o,a},getThroughputHistory:function(){return B},getBitrateList:J,getQualityForBitrate:$,getTopBitrateInfoFor:function(e){if(e&&S&&S[e]){var t=S[e].getStreamInfo();if(t&&t.id){var n=G(e,t.id),i=J(S[e].getMediaInfo());return i[n]?i[n]:null}}return null},getMaxAllowedIndexFor:z,getMinAllowedIndexFor:K,getInitialBitrateFor:function(e){if(function(){if(!D||!D.hasOwnProperty("getSavedBitrateSettings"))throw new Error(o.default.MISSING_CONFIG_ERROR)}(),e===o.default.TEXT||e===o.default.FRAGMENTED_TEXT)return NaN;var t,n=D.getSavedBitrateSettings(e),i=j.get().streaming.abr.initialBitrate[e],r=j.get().streaming.abr.initialRepresentationRatio[e];return-1===i&&(i=-1<r?(t=L.getAdaptationForType(0,e).Representation,Array.isArray(t)?t[Math.max(Math.round(t.length*r)-1,0)].bandwidth:0):isNaN(n)?e===o.default.VIDEO?1e3:100:n),i},getQualityFor:ee,getAbandonmentStateFor:function(e){return w[e]?w[e].state:null},setPlaybackQuality:Y,checkPlaybackQuality:function(t){var n,r,o,s,l,u,d,f,g,m;t&&S&&S[t]&&(r=(n=S[t].getStreamInfo())?n.id:null,o=ee(t),s=(0,p.default)(e).create({abrController:i,streamProcessor:S[t],currentValue:o,switchHistory:O[t],droppedFramesHistory:N,useBufferOccupancyABR:Z(t)}),!N||(l=M.getPlaybackQuality())&&N.push(x,l),j.get().streaming.abr.autoSwitchBitrate[t]&&(u=K(t),d=G(t,r),g=(f=b.getMaxQuality(s)).quality,void 0!==u&&(g>h.default.NO_CHANGE?g:o)<u&&(g=u),d<g&&(g=d),O[t].push({oldValue:o,newValue:g}),g>h.default.NO_CHANGE&&g!=o?(w[t].state===a.default.ALLOW_LOAD||o<g)&&Q(t,o,g,d,f.reason):j.get().debug.logLevel===y.default.LOG_LEVEL_DEBUG&&(m=F.getCurrentBufferLevel(t),c.debug("["+t+"] stay on "+o+"/"+d+" (buffer: "+m+")"))))},getTopQualityIndexFor:G,setElementSize:te,setWindowResizeEventCalled:function(e){k=e},createAbrRulesCollection:q,registerStreamType:function(t,i){O[t]=O[t]||(0,f.default)(e).create(),S[t]=i,w[t]=w[t]||{},w[t].state=a.default.ALLOW_LOAD,U[t]=!1,n.on(d.default.LOADING_PROGRESS,ne,this),t==o.default.VIDEO&&(n.on(d.default.QUALITY_CHANGE_RENDERED,H,this),N=N||(0,g.default)(e).create(),te()),n.on(d.default.METRIC_ADDED,W,this),n.on(d.default.PERIOD_SWITCH_COMPLETED,q,this),B=B||(0,m.default)(e).create({settings:j})},unRegisterStreamType:function(e){delete S[e]},setConfig:function(e){e&&(e.streamController&&(E=e.streamController),e.domStorage&&(D=e.domStorage),e.mediaPlayerModel&&(R=e.mediaPlayerModel),e.dashMetrics&&(F=e.dashMetrics),e.adapter&&(L=e.adapter),e.videoModel&&(M=e.videoModel),e.settings&&(j=e.settings))},reset:function(){V(),n.off(d.default.LOADING_PROGRESS,ne,this),n.off(d.default.QUALITY_CHANGE_RENDERED,H,this),n.off(d.default.METRIC_ADDED,W,this),n.off(d.default.PERIOD_SWITCH_COMPLETED,q,this),b&&b.reset()}},c=t.getLogger(i),V(),i}b.__dashjs_factory_name="AbrController";var E=c.default.getSingletonFactory(b);E.QUALITY_DEFAULT=0,c.default.updateSingletonFactory(b.__dashjs_factory_name,E),n.default=E,t.exports=n.default},{108:108,109:109,150:150,185:185,186:186,187:187,188:188,189:189,190:190,219:219,225:225,242:242,45:45,46:46,47:47,54:54}],112:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(148)),o=i(e(206)),a=i(e(221)),s=i(e(85)),l=i(e(47)),u=i(e(46)),d=i(e(54));function c(){var e,t=void 0,n=this.context,i=(0,u.default)(n).getInstance(),l=(0,a.default)(n).getInstance(),c=void 0,p=void 0;return e={reset:function(){c.reset(),p.reset()},initialize:function(e){var n;c.setConfig({adapter:t}),n=e,c.update(n),p.chooseSelector(t.getIsDVB(n))},resolve:function(e){var t=c.getForPath(e).reduce((function(e,t){var n=p.select(t);return n?(l.isRelative(n.url)?e.url=l.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new s.default}),new s.default);if(!l.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(c=e.baseURLTreeModel),e.baseURLSelector&&(p=e.baseURLSelector),e.adapter&&(t=e.adapter)}},c=(0,r.default)(n).create(),p=(0,o.default)(n).create(),i.on(d.default.SERVICE_LOCATION_BLACKLIST_CHANGED,(function(e){c.invalidateSelectedIndexes(e.entry)}),e),e}c.__dashjs_factory_name="BaseURLController",n.default=l.default.getClassFactory(c),t.exports=n.default},{148:148,206:206,221:221,46:46,47:47,54:54,85:85}],113:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(46));function a(e){e=e||{};var t=[],n=(0,o.default)(this.context).getInstance(),i=e.updateEventName,r=e.addBlacklistEventName;function a(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(i,{entry:e}))}function s(e){a(e.entry)}return function(){r&&n.on(r,s,this)}(),{add:a,contains:function(e){return!!(t.length&&e&&e.length)&&-1!==t.indexOf(e)},reset:function(){t=[]}}}a.__dashjs_factory_name="BlackListController",n.default=r.default.getClassFactory(a),t.exports=n.default},{46:46,47:47}],114:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(109)),a=i(e(150)),s=i(e(104)),l=i(e(103)),u=i(e(111)),d=i(e(118)),c=i(e(46)),p=i(e(54)),h=i(e(47)),f=i(e(45)),g=i(e(214)),m=i(e(226)),y=i(e(51)),v=e(242),_="BufferController";function b(e){e=e||{};var t=this.context,n=(0,c.default)(t).getInstance(),i=e.errHandler,h=e.fragmentModel,b=e.representationController,E=e.mediaController,T=e.adapter,C=e.textController,S=e.abrController,w=e.playbackController,A=e.streamInfo,k=e.type,P=e.settings,I=void 0,L=void 0,M=void 0,R=void 0,D=void 0,x=void 0,O=void 0,N=void 0,B=void 0,U=void 0,F=void 0,j=void 0,q=void 0,V=void 0,H=void 0,W=void 0,G=void 0,z=void 0,K=void 0,Y=void 0,Q=void 0,X=void 0;function $(e,n){if(!G||!e)return null;var r=e[0];if(O)try{U=n&&n[k]?(0,s.default)(t).create(O,r,ne.bind(this),n[k]):(0,s.default)(t).create(O,r,ne.bind(this),null),P.get().streaming.useAppendWindow&&U.updateAppendWindow(A),"function"==typeof U.getBuffer().initialize&&U.getBuffer().initialize(k,A,e,h)}catch(e){L.fatal("Caught error on create SourceBuffer: "+e),i.error(new m.default(y.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,y.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+k))}else U=(0,l.default)(t).create(ne.bind(this));return ve(this.getRepresentationInfo(M)),U}function J(e){e.chunk.streamId===A.id&&e.chunk.mediaInfo.type===k&&(L.info("Init fragment finished loading saving to",k+"'s init cache"),G.save(e.chunk),L.debug("Append Init fragment",k," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),ee(e.chunk))}function Z(e){var t,n=e.chunk;n.streamId===A.id&&n.mediaInfo.type===k&&(Q?(X=n,(t=U&&U.getAllBufferRanges())&&0<t.length&&.5<w.getTimeToStreamEnd()&&(L.debug("Clearing buffer because track changed - "+(t.end(t.length-1)+.5)),ge([{start:0,end:t.end(t.length-1)+.5,force:!0}]))):ee(n))}function ee(e){U.append(e),e.mediaInfo.type===r.default.VIDEO&&ke(p.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function te(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)L.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",w.getTime())}function ne(e){var t,n,i,o,a;if(e.error)return 22===e.error.code&&(W=!0,x=.8*we(),L.warn("Quota exceeded, Critical Buffer: "+x),0<x&&(t=Math.max(.2*x,1),n=x-t,i=Math.min(P.get().streaming.bufferTimeAtTopQuality,.9*n),o=Math.min(P.get().streaming.bufferTimeAtTopQualityLongForm,.9*n),a={streaming:{bufferToKeep:parseFloat(t.toFixed(5)),bufferTimeAtTopQuality:parseFloat(i.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(o.toFixed(5))}},P.update(a))),void(22!==e.error.code&&Ae()||(L.warn("Clearing playback buffer to overcome quota exceed situation"),ke(p.default.QUOTA_EXCEEDED,{criticalBufferLevel:x}),ge(fe())));W=!1,(q=e.chunk)&&!isNaN(q.index)&&(N=Math.max(q.index,N),ce());var s,l=U.getAllBufferRanges();q.segmentType===v.HTTPRequest.MEDIA_SEGMENT_TYPE?(te(l),ae(),function(){if((k===r.default.AUDIO||k===r.default.VIDEO)&&!isNaN(z)){var e=w.getTime(),t=ue(z,0);if(e!==z||!t){var n=b.getCurrentRepresentation().segmentDuration;(t=ue(z,n))&&(Math.abs(e-z)>n?z<=t.end&&(w.seek(Math.max(z,t.start),!1,!0),z=NaN):e<t.start&&(w.seek(t.start,!1,!0),z=NaN))}}}()):Q&&(s=w.getTime(),L.debug("AppendToBuffer seek target should be "+s),ke(p.default.SEEK_TARGET,{time:s,mediaType:k,streamId:A.id})),q&&ke(q.endFragment?p.default.BYTES_APPENDED_END_FRAGMENT:p.default.BYTES_APPENDED,{quality:q.quality,startTime:q.start,index:q.index,bufferedRanges:l,mediaType:k})}function ie(e){e.streamInfo.id===A.id&&e.mediaType===k&&M!==e.newQuality&&(ve(this.getRepresentationInfo(e.newQuality)),M=e.newQuality)}function re(e){z=e.seekTime,R&&(R=!(K=!0),B=Number.POSITIVE_INFINITY),k!==r.default.FRAGMENTED_TEXT?U.waitForUpdateEnd((function(){var e=function(){var e=[],t=U.getAllBufferRanges();if(!t||0===t.length)return e;var n,i,r,o,s=w.getTime(),l=t.end(t.length-1)+.5,u=h.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:s,threshold:.01})[0];return u?(n={start:0,end:u.startTime-.5},(i=h.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:u.startTime-u.duration/2,threshold:.01})[0])&&i.startTime!=u.startTime&&(n.end=i.startTime),n.start<n.end&&n.end>t.start(0)&&e.push(n),r={start:u.startTime+u.duration+.5,end:l},(o=h.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:u.startTime+u.duration+.5,threshold:.01})[0])&&o.startTime!==u.startTime&&(r.start=o.startTime+o.duration+.5),r.start<r.end&&r.start<l&&e.push(r)):(L.debug("getAllRangesWithSafetyFactor - No request found in current time position, removing full buffer 0 -",l),e.push({start:0,end:l})),e}();e&&0!==e.length||ae(),ge(e)})):ae()}function oe(){z=NaN}function ae(){(!Q||k===r.default.FRAGMENTED_TEXT&&C.isTextEnabled())&&de()}function se(){pe()}function le(){z=NaN,pe()}function ue(e,t){var n=U.getAllBufferRanges(),i=0,r=0,o=null,a=null,s=0,l=void 0,u=void 0,d=isNaN(t)?.15:t;if(null!=n){for(u=0,l=n.length;u<l;u++)if(i=n.start(u),r=n.end(u),null===o)s=Math.abs(i-e),(i<=e&&e<r||s<=d)&&(o=i,a=r);else{if(!((s=i-a)<=d))break;a=r}if(null!==o)return{start:o,end:a}}return null}function de(){var e,t;w&&(e=(isNaN(z)?w.getTime():z)||0,D=null===(t=ue(e,undefined))?0:t.end-e,ke(p.default.BUFFER_LEVEL_UPDATED,{bufferLevel:D}),pe())}function ce(){B-1<=N&&!R&&void 0===U.discharge&&(R=!0,L.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for "+k),ke(p.default.BUFFERING_COMPLETED))}function pe(){k!==r.default.AUDIO&&k!==r.default.VIDEO||(K&&!R&&0<D&&w&&w.getTimeToStreamEnd()-D<.5&&(R=!(K=!1),L.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED for type "+k),L.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED for type "+k),ke(p.default.BUFFERING_COMPLETED)),(!P.get().streaming.lowLatencyEnabled&&D<.5||0===D)&&!R?he(o.default.BUFFER_EMPTY):(R||D>=A.manifestInfo.minBufferTime)&&he(o.default.BUFFER_LOADED))}function he(e){j===e||e===o.default.BUFFER_EMPTY&&0===w.getTime()||k===r.default.FRAGMENTED_TEXT&&!C.isTextEnabled()||(j=e,ke(p.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),ke(e===o.default.BUFFER_LOADED?p.default.BUFFER_LOADED:p.default.BUFFER_EMPTY),L.debug(e===o.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function fe(){var e=[],t=U.getAllBufferRanges();if(!t||0===t.length)return e;var n=w.getTime(),i=Math.max(0,n-P.get().streaming.bufferToKeep),r=h.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(r)i=Math.min(r.startTime,i);else if(0===n&&w.getIsDynamic())return[];if(t.start(0)<=i){for(var o={start:0,end:i},s=0;s<t.length&&t.end(s)<=i;s++)o.end=t.end(s);o.start<o.end&&e.push(o)}return e}function ge(e){e&&U&&0!==e.length&&(Y.push.apply(Y,e),H||me())}function me(){if(0===Y.length||!U)return L.debug("Nothing to prune, halt pruning"),void(H=!(Y=[]));var e=U.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return L.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(H=!(Y=[]));var t=Y.shift();L.debug("Removing buffer from:",t.start,"to",t.end),H=!0,w.getTime()<t.end&&(R=!1,N=0),U.remove(t.start,t.end,t.force)}function ye(e){U===e.buffer&&(L.debug("onRemoved buffer from:",e.from,"to",e.to),te(U.getAllBufferRanges()),0===Y.length&&(H=!1),e.unintended&&(L.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),ke(p.default.SEEK_TARGET,{time:e.from,mediaType:k,streamId:A.id})),H?me():(Q?(Q=!1,X&&ee(X)):de(),ke(p.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Ae(),quotaExceeded:W})))}function ve(e){e&&void 0!==e.MSETimeOffset&&U&&U.updateTimestampOffset&&U.updateTimestampOffset(e.MSETimeOffset)}function _e(e){e.sender.getStreamId()===A.id&&e.sender.getType()===k&&(e.error||R||ve(e.currentRepresentation))}function be(e){e.request.mediaInfo.streamInfo.id===A.id&&e.request.mediaType===k&&(B=e.request.index,ce())}function Ee(e){var t;e.newMediaInfo.streamInfo.id!==A.id||e.newMediaInfo.type!==k||(t=U&&U.getAllBufferRanges())&&(L.info("Track change asked"),E.getSwitchMode(k)===d.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&0<t.length&&.5<w.getTimeToStreamEnd()&&(R=!1,B=Number.POSITIVE_INFINITY))}function Te(){++V*(P.get().streaming.wallclockTimeUpdateInterval/1e3)>=P.get().streaming.bufferPruningInterval&&(V=0,U&&k!==r.default.FRAGMENTED_TEXT&&(R||ge(fe())))}function Ce(){pe()}function Se(e,t){O=e,U&&t&&"function"==typeof U.discharge&&(F=U,$(t))}function we(){var e,t=U.getAllBufferRanges(),n=0,i=void 0;if(!t)return n;for(i=0,e=t.length;i<e;i++)n+=t.end(i)-t.start(i);return n}function Ae(){return we()<x}function ke(e,t){var i=t||{};i.sender=I,i.mediaType=k,i.streamId=A.id,n.trigger(e,i)}function Pe(e,t){x=Number.POSITIVE_INFINITY,j=void 0,M=u.default.QUALITY_DEFAULT,B=Number.POSITIVE_INFINITY,q=null,K=W=H=R=!1,V=D=N=0,Y=[],z=NaN,U&&(e||U.abort(),U.reset(t),U=null),Q=!1}return I={getBufferControllerType:function(){return _},getRepresentationInfo:function(e){return T.convertDataToRepresentationInfo(b.getRepresentationForQuality(e))},initialize:function(e){Se(e),M=S.getQualityFor(k),n.on(p.default.DATA_UPDATE_COMPLETED,_e,this),n.on(p.default.INIT_FRAGMENT_LOADED,J,this),n.on(p.default.MEDIA_FRAGMENT_LOADED,Z,this),n.on(p.default.QUALITY_CHANGE_REQUESTED,ie,this),n.on(p.default.STREAM_COMPLETED,be,this),n.on(p.default.PLAYBACK_PLAYING,le,this),n.on(p.default.PLAYBACK_PROGRESS,ae,this),n.on(p.default.PLAYBACK_TIME_UPDATED,ae,this),n.on(p.default.PLAYBACK_RATE_CHANGED,Ce,this),n.on(p.default.PLAYBACK_SEEKING,re,this),n.on(p.default.PLAYBACK_SEEKED,oe,this),n.on(p.default.PLAYBACK_STALLED,se,this),n.on(p.default.WALLCLOCK_TIME_UPDATED,Te,this),n.on(p.default.CURRENT_TRACK_CHANGED,Ee,this,c.default.EVENT_PRIORITY_HIGH),n.on(p.default.SOURCEBUFFER_REMOVE_COMPLETED,ye,this)},createBuffer:$,dischargePreBuffer:function(){if(U&&F&&"function"==typeof F.discharge){var e=F.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+k+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";L.debug(t)}else L.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var i=F.discharge(),r=null,o=0;o<i.length;o++){var a=i[o],s=G.extract(a.streamId,a.representationId);s&&(r!==s&&(U.append(s),r=s),U.append(a))}F.reset(),F=null}},getType:function(){return k},getBuffer:function(){return U},setBuffer:function(e){U=e},getBufferLevel:function(){return D},getRangeAt:ue,setMediaSource:Se,getMediaSource:function(){return O},appendInitSegment:function(e){var t=G.extract(A.id,e);return!!t&&(L.info("Append Init fragment",k," with representationId:",t.representationId," and quality:",t.quality,", data size:",t.bytes.byteLength),ee(t),!0)},replaceBuffer:function(){Q=!0},getIsBufferingCompleted:function(){return R},getIsPruningInProgress:function(){return H},reset:function(e,t){n.off(p.default.DATA_UPDATE_COMPLETED,_e,this),n.off(p.default.INIT_FRAGMENT_LOADED,J,this),n.off(p.default.MEDIA_FRAGMENT_LOADED,Z,this),n.off(p.default.QUALITY_CHANGE_REQUESTED,ie,this),n.off(p.default.STREAM_COMPLETED,be,this),n.off(p.default.PLAYBACK_PLAYING,le,this),n.off(p.default.PLAYBACK_PROGRESS,ae,this),n.off(p.default.PLAYBACK_TIME_UPDATED,ae,this),n.off(p.default.PLAYBACK_RATE_CHANGED,Ce,this),n.off(p.default.PLAYBACK_SEEKING,re,this),n.off(p.default.PLAYBACK_SEEKED,oe,this),n.off(p.default.PLAYBACK_STALLED,se,this),n.off(p.default.WALLCLOCK_TIME_UPDATED,Te,this),n.off(p.default.CURRENT_TRACK_CHANGED,Ee,this),n.off(p.default.SOURCEBUFFER_REMOVE_COMPLETED,ye,this),Pe(e,t)},updateAppendWindow:function(){U&&!R&&U.updateAppendWindow(A)}},L=(0,f.default)(t).getInstance().getLogger(I),G=(0,g.default)(t).getInstance(),Pe(),I}b.__dashjs_factory_name=_,n.default=h.default.getClassFactory(b),t.exports=n.default},{103:103,104:104,108:108,109:109,111:111,118:118,150:150,214:214,226:226,242:242,45:45,46:46,47:47,51:51,54:54}],115:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(45)),a=i(e(46)),s=i(e(54)),l=i(e(160));function u(){var e,t="urn:mpeg:dash:event:2012",n=this.context,i=(0,a.default)(n).getInstance(),r=void 0,u=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0;function v(){if(!f||!g)throw new Error("setConfig function has to be called previously")}function _(){y=!1,u={},d={},p=null,m=!(c={}),h=Date.now()/1e3}function b(){try{var e,t;m||(t=(e=g.getTime())-h,t=0<h?Math.max(0,t):0,E(d,t,e),E(u,t,e),function(){try{if(c)for(var e=g.getTime(),t=Object.keys(c),n=0;n<t.length;n++){var i=t[n],o=c[i];null!==o&&(o.duration+o.calculatedPresentationTime)/o.eventStream.timescale<e&&(r.debug("Remove Event "+i+" at time "+e),o=null,delete c[i])}}catch(e){}}(),h=e),m=!1}catch(e){m=!1}}function E(e,t,n){try{if(e)for(var i=Object.keys(e),o=0;o<i.length;o++){var a,s=i[o],l=e[s];void 0!==l&&((a=l.calculatedPresentationTime/l.eventStream.timescale)<=n&&n<=a+t?C(s,l,e):(function(e,t,n){try{return n<e-t}catch(e){return!1}}(n,t,a)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime/1e3>t}catch(e){return!1}}(l))&&(r.debug("Deleting event "+s+" as it is expired or invalid"),delete e[s]))}}catch(e){}}function T(e){try{var t=function(){var t=Object.keys(e),n=g.getTime();if(!t||0===t.length)return{v:void 0};var i=e[t[0]].eventStream&&e[t[0]].eventStream.period&&!isNaN(e[t[0]].eventStream.period.duration)?e[t[0]].eventStream.period.duration:NaN,r=e[t[0]].eventStream&&e[t[0]].eventStream.period&&!isNaN(e[t[0]].eventStream.period.start)?e[t[0]].eventStream.period.start:NaN;if(isNaN(i)||isNaN(r))return{v:void 0};t.forEach((function(t){var i=e[t],r=i.calculatedPresentationTime/i.eventStream.timescale;Math.abs(r-n)<300&&C(t,i,e)}))}();if("object"==typeof t)return t.v}catch(t){}}function C(e,o,a){try{var s=g.getTime();0<o.duration&&(c[e]=o),o.eventStream.schemeIdUri===t&&1==o.eventStream.value?0===o.duration&&0===o.presentationTimeDelta||(r.debug("Starting manifest refresh event "+e+" at "+s),function(){try{v(),f.refreshManifest()}catch(e){}}()):"urn:mpeg:dash:event:callback:2015"===o.eventStream.schemeIdUri&&1==o.eventStream.value?(r.debug("Starting callback event "+e+" at "+s),function(e){try{(0,l.default)(n).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}})}catch(e){throw e}}(o.messageData)):(r.debug("Starting event "+e+" at "+s),i.trigger(o.eventStream.schemeIdUri,{event:o})),delete a[e]}catch(e){}}return e={addInlineEvents:function(e){try{if(v(),e)for(var t=0;t<e.length;t++){var n=e[t];u[n.id]=n,r.debug("Add inline event with id "+n.id)}r.debug("Added "+e.length+" inline events")}catch(e){throw e}},addInbandEvents:function(e){try{v();for(var n=0;n<e.length;n++){var o=e[n];o.id in d?r.debug("Repeated event with id "+o.id):(o.eventStream.schemeIdUri===t&&void 0===d[o.id]&&function(e){try{var t,n,o;1==e.eventStream.value&&(t=e.eventStream.timescale||1,n=e.calculatedPresentationTime/t,void 0,o=4294967295==e.calculatedPresentationTime?NaN:(e.calculatedPresentationTime+e.duration)/t,r.info("Manifest validity changed: Valid until: "+n+"; remaining duration: "+o),i.trigger(s.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:n,newDuration:o,newManifestValidAfter:NaN}))}catch(e){}}(o),d[o.id]=o,r.debug("Add inband event with id "+o.id))}b()}catch(e){throw e}},start:function(){try{v(),r.debug("Start Event Controller"),y||isNaN(100)||(y=!0,p=setInterval(b,100))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(f=e.manifestUpdater),e.playbackController&&(g=e.playbackController)}catch(e){throw e}},reset:function(){(function(){try{null!==p&&y&&(clearInterval(p),p=null,y=!1,function(){try{T(d),T(u)}catch(e){}}())}catch(e){throw e}})(),_()}},r=(0,o.default)(n).getInstance().getLogger(e),_(),e}u.__dashjs_factory_name="EventController",n.default=r.default.getSingletonFactory(u),t.exports=n.default},{160:160,45:45,46:46,47:47,54:54}],116:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(227)),a=i(e(150)),s=i(e(97)),l=i(e(218)),u=i(e(46)),d=i(e(54)),c=i(e(51)),p=i(e(47)),h=i(e(45));function f(e){e=e||{};var t,n=this.context,i=(0,u.default)(n).getInstance(),p=e.errHandler,f=e.mediaPlayerModel,g=e.dashMetrics,m=(0,h.default)(n).getInstance(),y=void 0,v=void 0,_=void 0;function b(){for(var e in v)v[e].reset();v={}}function E(e){var t,n,a,s,l,u,c,p,h,f;e.sender&&(t=e.request,n=e.response,a=t.isInitializationRequest(),(s=t.mediaInfo.streamInfo)&&s.id!==_||(e.error&&(e.request.mediaType!==r.default.AUDIO&&e.request.mediaType!==r.default.VIDEO&&e.request.mediaType!==r.default.FRAGMENTED_TEXT||i.trigger(d.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),n&&s?(u=n,c=t,p=s.id,h=e.type!==d.default.FRAGMENT_LOADING_PROGRESS,(f=new o.default).streamId=p,f.mediaInfo=c.mediaInfo,f.segmentType=c.type,f.start=c.startTime,f.duration=c.duration,f.end=f.start+f.duration,f.bytes=u,f.index=c.index,f.quality=c.quality,f.representationId=c.representationId,f.endFragment=h,l=f,i.trigger(a?d.default.INIT_FRAGMENT_LOADED:d.default.MEDIA_FRAGMENT_LOADED,{chunk:l,request:t})):y.warn("No "+t.mediaType+" bytes to push or stream is inactive.")))}return t={getModel:function(t,r){var o=v[r];return o||(o=(0,a.default)(n).create({streamId:t,dashMetrics:g,fragmentLoader:(0,s.default)(n).create({dashMetrics:g,mediaPlayerModel:f,errHandler:p,requestModifier:(0,l.default)(n).getInstance(),settings:e.settings,boxParser:e.boxParser,eventBus:i,events:d.default,errors:c.default,dashConstants:e.dashConstants,urlUtils:e.urlUtils}),debug:m,eventBus:i,events:d.default}),v[r]=o),o},setStreamId:function(e){_=e},reset:function(){i.off(d.default.FRAGMENT_LOADING_COMPLETED,E,this),i.off(d.default.FRAGMENT_LOADING_PROGRESS,E,this),b()}},y=m.getLogger(t),b(),i.on(d.default.FRAGMENT_LOADING_COMPLETED,E,t),i.on(d.default.FRAGMENT_LOADING_PROGRESS,E,t),t}f.__dashjs_factory_name="FragmentController",n.default=p.default.getClassFactory(f),t.exports=n.default},{108:108,150:150,218:218,227:227,45:45,46:46,47:47,51:51,54:54,97:97}],117:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(45)),a=i(e(54)),s=i(e(46));function l(){var e,t=this.context,n=(0,s.default)(t).getInstance(),i=void 0,r=void 0,l=void 0,u=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0;function g(){f.debug("Stopping the gap controller"),u&&(clearInterval(u),u=null),function(){n.off(a.default.WALLCLOCK_TIME_UPDATED,v,this),n.off(a.default.BYTES_APPENDED_END_FRAGMENT,m,this)}(),u=null,d=NaN,l=0}function m(){u||function(){try{u||(f.debug("Starting the gap controller"),u=setInterval((function(){y()&&_(c.getTime())}),100))}catch(e){}}()}function y(){return r.get().streaming.jumpGaps&&0<p.getActiveStreamProcessors().length&&(!c.isSeeking()||p.hasStreamFinishedBuffering(p.getActiveStream()))&&!c.isPaused()&&!p.getIsStreamSwitchInProgress()&&!p.getHasMediaOrIntialisationError()}function v(){var e;y()&&10<=++l&&(e=c.getTime(),i===e?_(e,!0):(i=e,d=NaN),l=0)}function _(e,t){var i,o,s=!(arguments.length<=1||void 0===t)&&t,l=r.get().streaming.smallGapLimit,u=r.get().streaming.jumpLargeGaps,g=NaN,m=!1;(o=function(e){try{var t=h.getBufferRange();if(!t||t.length<=1&&0<e)return null;for(var n=null,i=0;!n&&i<t.length;){var r=0<i?t.end(i-1):0;e<t.start(i)&&r-e<.1&&(n=t.start(i)),i+=1}return n}catch(e){return null}}(e))&&0<o&&0<(i=o-e)&&(i<=l||u)&&(g=o);var y=c.getTimeToStreamEnd();isNaN(g)&&s&&isFinite(y)&&!isNaN(y)&&(y<l||p.hasStreamFinishedBuffering(p.getActiveStream()))&&(g=parseFloat(c.getStreamEndTime().toFixed(5)),m=!0),0<g&&d!==g&&(m?(f.warn("Jumping to end of stream because of gap from "+e+" to "+g+". Gap duration: "+(g-e)),n.trigger(a.default.GAP_CAUSED_SEEK_TO_PERIOD_END,{seekTime:g})):(f.warn("Jumping gap from "+e+" to "+g+". Gap duration: "+(g-e)),c.seek(g,!0,!0)),d=g)}return e={reset:g,setConfig:function(e){e&&(e.settings&&(r=e.settings),e.playbackController&&(c=e.playbackController),e.streamController&&(p=e.streamController),e.videoModel&&(h=e.videoModel),e.timelineConverter&&e.timelineConverter,e.adapter&&e.adapter)},initialize:function(){!function(){n.on(a.default.WALLCLOCK_TIME_UPDATED,v,this),n.on(a.default.BYTES_APPENDED_END_FRAGMENT,m,this)}()}},f=(0,o.default)(t).getInstance().getLogger(e),g(),e}l.__dashjs_factory_name="GapController",n.default=r.default.getSingletonFactory(l),t.exports=n.default},{45:45,46:46,47:47,54:54}],118:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(54)),a=i(e(46)),s=i(e(47)),l=i(e(45)),u="neverReplace",d="alwaysReplace",c="highestBitrate",p="widestRange",h=c;function f(){var e,t=this.context,n=(0,a.default)(t).getInstance(),i=void 0,s=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=[d,u],_=[c,p];function b(e,t){if(!e||!t)return[];var n=t.id;return s[n]&&s[n][e]?s[n][e].list:[]}function E(e,t){return!e||!t||t&&!s[t.id]?null:s[t.id][e].current}function T(e,t){if(e&&e.streamInfo){var i,a,l=e.type,u=e.streamInfo,d=u.id,c=E(l,u);if(s[d]&&s[d][l]&&!k(e,c)&&(s[d][l].current=e,!s[d][l].current||t&&l===r.default.FRAGMENTED_TEXT||n.trigger(o.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:c,newMediaInfo:e,switchMode:m[l]}),!t)){var p=(a={lang:(i=e).lang,viewpoint:i.viewpoint,roles:i.roles,accessibility:i.accessibility,audioChannelConfiguration:i.audioChannelConfiguration}).lang||a.viewpoint||a.role&&0<a.role.length||a.accessibility&&0<a.accessibility.length||a.audioChannelConfiguration&&0<a.audioChannelConfiguration.length?a:null;if(!p||!s[d][l].storeLastSettings)return;p.roles&&(p.role=p.roles[0],delete p.roles),p.accessibility&&(p.accessibility=p.accessibility[0]),p.audioChannelConfiguration&&(p.audioChannelConfiguration=p.audioChannelConfiguration[0]),y.setSavedMediaSettings(l,p)}}}function C(e,t){e&&t&&(f[e]=t)}function S(e){return e?f[e]:null}function w(){return g||h}function A(e){return e===r.default.AUDIO||e===r.default.VIDEO||e===r.default.TEXT||e===r.default.FRAGMENTED_TEXT||e===r.default.IMAGE}function k(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,i=e.viewpoint===t.viewpoint,r=e.lang===t.lang,o=e.roles.toString()===t.roles.toString(),a=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&i&&r&&o&&a&&s}function P(){s={},f={audio:null,video:null,fragmentedText:null},m={audio:d,video:u}}function I(e,t){var n=!e.lang||t.lang.match(e.lang),i=!e.viewpoint||e.viewpoint===t.viewpoint,r=!e.role||!!t.roles.filter((function(t){return t===e.role}))[0],o=!e.accessibility||!!t.accessibility.filter((function(t){return t===e.accessibility}))[0],a=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0];return n&&i&&r&&o&&a}function L(e,t){if(e===r.default.FRAGMENTED_TEXT)return t[0];function n(e){var t=0,n=[],i=void 0;return e.forEach((function(e){i=Math.max.apply(Math,e.bitrateList.map((function(e){return e.bandwidth}))),t<i?(t=i,n=[e]):i===t&&n.push(e)})),n}function o(e){var t=0,n=[],i=void 0;return e.forEach((function(e){i=e.representationCount,t<i?(t=i,n=[e]):i===t&&n.push(e)})),n}var a=w(),s=[];switch(a){case c:1<(s=n(t)).length&&(s=o(s));break;case p:1<(s=o(t)).length&&(s=n(t));break;default:i.warn("Track selection mode is not supported: "+a)}return s[0]}return e={checkInitialMediaSettingsForType:function(e,t){var n=S(e),i=b(e,t),r=[];n||C(e,n=y.getSavedMediaSettings(e)),i&&0!==i.length&&(n&&i.forEach((function(e){I(n,e)&&r.push(e)})),0===r.length?T(L(e,i),!0):1<r.length?T(L(e,r)):T(r[0]))},addTrack:function(e){if(e){var t=e.type;if(A(t)){var n=e.streamInfo.id;s[n]||(s[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var i=s[n][t].list,r=0,o=i.length;r<o;++r)if(k(i[r],e))return;i.push(e);var a=S(t);a&&I(a,e)&&!E(t,e.streamInfo)&&T(e)}}},getTracksFor:b,getCurrentTrackFor:E,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return s[n]&&s[n][t]&&k(s[n][t].current,e)},setTrack:T,setInitialSettings:C,getInitialSettings:S,setSwitchMode:function(e,t){-1!==v.indexOf(t)?m[e]=t:i.warn("Track switch mode is not supported: "+t)},getSwitchMode:function(e){return m[e]},setSelectionModeForInitialTrack:function(e){-1!==_.indexOf(e)?g=e:i.warn("Track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:w,isMultiTrackSupportedByType:A,isTracksEqual:k,matchSettings:I,saveTextSettingsDisabled:function(){y.setSavedMediaSettings(r.default.FRAGMENTED_TEXT,null)},setConfig:function(e){e&&e.domStorage&&(y=e.domStorage)},reset:P},i=(0,l.default)(t).getInstance().getLogger(e),P(),e}f.__dashjs_factory_name="MediaController";var g=s.default.getSingletonFactory(f);g.TRACK_SWITCH_MODE_NEVER_REPLACE=u,g.TRACK_SWITCH_MODE_ALWAYS_REPLACE=d,g.TRACK_SELECTION_MODE_HIGHEST_BITRATE=c,g.TRACK_SELECTION_MODE_WIDEST_RANGE=p,g.DEFAULT_INIT_TRACK_SELECTION_MODE=h,s.default.updateSingletonFactory(f.__dashjs_factory_name,g),n.default=g,t.exports=n.default},{108:108,45:45,46:46,47:47,54:54}],119:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(45));function a(){var e,t=void 0,n=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var n=e.sourceBuffers,i=0;i<n.length;i++){if(n[i].updating)return;if(0===n[i].buffered.length)return}t.info("call to mediaSource endOfStream"),e.endOfStream()}}},t=(0,o.default)(n).getInstance().getLogger(e),e}a.__dashjs_factory_name="MediaSourceController",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{45:45,47:47}],120:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(109)),a=i(e(46)),s=i(e(54)),l=i(e(47)),u=i(e(45));function d(){var e,t=this.context,n=(0,a.default)(t).getInstance(),i=void 0,l=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,E=void 0,T=void 0,C=void 0,S=void 0,w=void 0,A=void 0,k=void 0,P=void 0,I=void 0;function L(e){var t,r,o,a;f&&isNaN(g)||(t=g,isNaN(t)&&(_?(t=e.liveStartTime,(o=(r=d.getCurrentDVRInfo())?r.range:null)&&(a=W(v.start,!0),isNaN(a)||(i.info("Start time from URI parameters: "+a),t=Math.max(Math.min(t,a),o.start)))):(t=v.start,a=W(v.start,!1),!isNaN(a)&&a<t+v.duration&&(i.info("Start time from URI parameters: "+a),t=Math.max(t,a)))),isNaN(t)||t===p.getTime()||(n.trigger(s.default.PLAYBACK_SEEKING,{seekTime:t}),B(t,!1,!0)))}function M(){return parseFloat((R()-U()).toFixed(5))}function R(){return v.start+v.duration}function D(){v&&p&&p.getElement()?p.play():E=!0}function x(){return v&&p?p.isPaused():null}function O(){v&&p&&p.pause()}function N(){return v&&p?p.isSeeking():null}function B(e,t,r){v&&p&&e!==(isNaN(S)?p.getTime():S)&&(!0===r?(p.removeEventListener("seeking",ee),i.info("Requesting internal seek to time: "+e)):(S=e,n.trigger(s.default.PLAYBACK_SEEK_ASKED),i.info("Requesting seek to time: "+e)),p.setCurrentTime(e,t))}function U(){return v&&p?p.getTime():null}function F(){var e,t=U();return!_||isNaN(C)||(e=C/1e3)<t&&(t-=e),t}function j(){return v&&p?p.getPlaybackRate():null}function q(){return v&&p?p.getEnded():null}function V(){if(!_||isNaN(C))return NaN;var e=F();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*h.getClientTimeOffset();return Math.max(((t-C-1e3*e)/1e3).toFixed(3),0)}function H(){f=E=!1,C=y=0,S=g=NaN,p&&(n.off(s.default.STREAM_INITIALIZED,L,this),n.off(s.default.DATA_UPDATE_COMPLETED,Y,this),n.off(s.default.BUFFER_LEVEL_STATE_CHANGED,pe,this),n.off(s.default.LOADING_PROGRESS,ce,this),n.off(s.default.PLAYBACK_PROGRESS,ue,this),n.off(s.default.PLAYBACK_TIME_UPDATED,ue,this),n.off(s.default.PLAYBACK_ENDED,se,this),n.off(s.default.STREAM_INITIALIZING,fe,this),z(),p.removeEventListener("canplay",Q),p.removeEventListener("play",X),p.removeEventListener("waiting",$),p.removeEventListener("playing",J),p.removeEventListener("pause",Z),p.removeEventListener("error",le),p.removeEventListener("seeking",ee),p.removeEventListener("seeked",te),p.removeEventListener("timeupdate",ne),p.removeEventListener("progress",ie),p.removeEventListener("ratechange",re),p.removeEventListener("loadedmetadata",oe),p.removeEventListener("stalled",he),p.removeEventListener("ended",ae)),_=v=p=m=null}function W(e,t){var n=P.getURIFragmentData();return n&&n.t?(n.t=n.t.split(",")[0],t&&-1!==n.t.indexOf("posix:")?parseInt(n.t.substring(6)):e+parseInt(n.t)):NaN}function G(){null===m&&(m=setInterval((function(){n.trigger(s.default.WALLCLOCK_TIME_UPDATED,{isDynamic:_,time:new Date}),_&&x()&&function(){var e=Date.now();(!T||T+500<e)&&(T=e,ne())}()}),I.get().streaming.wallclockTimeUpdateInterval))}function z(){clearInterval(m),m=null}function K(){var e,t,n,r,o;!x()&&_&&0!==p.getReadyState()&&(n=e=F(),t=(o=(r=d.getCurrentDVRInfo())?r.range:null)?(i.debug("Checking DVR window for at "+n+" with DVR window range "+o.start+" - "+o.end),n>o.end?Math.max(o.end-y,o.start):0<n&&n+.25<o.start&&Math.abs(n-o.start)<31536e4?o.start:n):NaN,isNaN(t)||t===e||(i.debug("UpdateCurrentTime: Seek to actual time: "+t+" from currentTime: "+e),B(t)))}function Y(e){var t,n;e.error||null!==(n=(t=c.convertDataToRepresentationInfo(e.currentRepresentation))?t.mediaInfo.streamInfo:null)&&v.id===n.id&&(v=n,K())}function Q(){n.trigger(s.default.CAN_PLAY)}function X(){i.info("Native video element event: play"),K(),G(),n.trigger(s.default.PLAYBACK_STARTED,{startTime:U()})}function $(){i.info("Native video element event: waiting"),n.trigger(s.default.PLAYBACK_WAITING,{playingTime:U()})}function J(){i.info("Native video element event: playing"),n.trigger(s.default.PLAYBACK_PLAYING,{playingTime:U()})}function Z(){i.info("Native video element event: pause"),n.trigger(s.default.PLAYBACK_PAUSED,{ended:q()})}function ee(){var e=U();isNaN(S)||S===e||(e=S),S=NaN,i.info("Seeking to: "+e),G(),n.trigger(s.default.PLAYBACK_SEEKING,{seekTime:e})}function te(){i.info("Native video element event: seeked"),n.trigger(s.default.PLAYBACK_SEEKED),p.addEventListener("seeking",ee)}function ne(){v&&n.trigger(s.default.PLAYBACK_TIME_UPDATED,{timeToEnd:M(),time:U()})}function ie(){n.trigger(s.default.PLAYBACK_PROGRESS)}function re(){var e=j();i.info("Native video element event: ratechange: ",e),n.trigger(s.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function oe(){i.info("Native video element event: loadedmetadata"),n.trigger(s.default.PLAYBACK_METADATA_LOADED),G()}function ae(){i.info("Native video element event: ended"),O(),z(),n.trigger(s.default.PLAYBACK_ENDED,{isLast:l.getActiveStreamInfo().isLast})}function se(e){var t;m&&e.isLast&&(i.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),t=e.seekTime?e.seekTime:R(),p.setCurrentTime(t),O(),z())}function le(e){var t=e.target||e.srcElement;n.trigger(s.default.PLAYBACK_ERROR,{error:t.error})}function ue(){var e,t,n;_&&I.get().streaming.lowLatencyEnabled&&0<I.get().streaming.liveCatchUpPlaybackRate&&!x()&&!N()&&(e=V(),t=Math.abs(e-b.getLiveDelay()),n=b.getLiveCatchupLatencyThreshold(),(I.get().streaming.lowLatencyEnabled&&0<I.get().streaming.liveCatchUpPlaybackRate&&0<U()&&t>I.get().streaming.liveCatchUpMinDrift&&(isNaN(n)||e<=n)?function(){var e,t,n,r,o,a;p&&(e=I.get().streaming.liveCatchUpPlaybackRate,t=b.getLiveDelay(),r=5*(n=V()-t),o=1-e+2*e/(1+Math.pow(Math.E,-r)),A&&(a=function(){var e=null;return l.getActiveStreamProcessors().forEach((function(t){var n=t.getBufferLevel();e=null===e?n:Math.min(e,n)})),e}(),t/2<a?A=!1:0<n&&(o=1)),Math.abs(p.getPlaybackRate()-o)>k&&p.setPlaybackRate(o),0<I.get().streaming.liveCatchUpMaxDrift&&!w&&n>I.get().streaming.liveCatchUpMaxDrift?(i.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),w=!0,function(){var e=d.getCurrentDVRInfo();B((e?e.range:null).end-b.getLiveDelay(),!0,!1)}()):w=!1)}:de)())}function de(){p&&p.setPlaybackRate(1)}function ce(e){var t,n;!1!==e.stream||!I.get().streaming.lowLatencyEnabled||isNaN(e.request.duration)||(t=1.2*e.request.duration)>b.getLiveDelay()&&(i.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2)),n={streaming:{liveDelay:t}},I.update(n))}function pe(e){e.streamId===v.id&&(I.get().streaming.lowLatencyEnabled?e.state!==o.default.BUFFER_EMPTY||N()||A||(A=!0,de()):p.setStallState(e.mediaType,e.state===o.default.BUFFER_EMPTY))}function he(e){n.trigger(s.default.PLAYBACK_STALLED,{e:e})}function fe(e){!function(e,t){if(e&&e.manifestInfo&&e.manifestInfo.serviceDescriptions){for(var n=void 0,o=0;o<e.manifestInfo.serviceDescriptions.length;o++){var a=e.manifestInfo.serviceDescriptions[o];if(a.schemeIdUri===r.default.SERVICE_DESCRIPTION_LL_SCHEME){n=a;break}}n&&t&&t.supplementalProperties&&"true"===t.supplementalProperties[r.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(n.latency&&0<n.latency.target&&(i.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),I.update({streaming:{lowLatencyEnabled:!0,liveDelay:n.latency.target/1e3,liveCatchUpMinDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target)/1e3:void 0}})),n.playbackRate&&1<n.playbackRate.max&&(i.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),I.update({streaming:{lowLatencyEnabled:!0,liveCatchUpPlaybackRate:n.playbackRate.max-1}})))}}(e.streamInfo,e.mediaInfo)}return e={initialize:function(e,t,i){v=e,p.addEventListener("canplay",Q),p.addEventListener("play",X),p.addEventListener("waiting",$),p.addEventListener("playing",J),p.addEventListener("pause",Z),p.addEventListener("error",le),p.addEventListener("seeking",ee),p.addEventListener("seeked",te),p.addEventListener("timeupdate",ne),p.addEventListener("progress",ie),p.addEventListener("ratechange",re),p.addEventListener("loadedmetadata",oe),p.addEventListener("stalled",he),p.addEventListener("ended",ae),_=v.manifestInfo.isDynamic,f=!(A=w=!1)===t,g=i;var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=/safari/.test(r)&&!/chrome/.test(r);k=o?.25:.02,n.on(s.default.STREAM_INITIALIZED,L,this),n.on(s.default.DATA_UPDATE_COMPLETED,Y,this),n.on(s.default.LOADING_PROGRESS,ce,this),n.on(s.default.BUFFER_LEVEL_STATE_CHANGED,pe,this),n.on(s.default.PLAYBACK_PROGRESS,ue,this),n.on(s.default.PLAYBACK_TIME_UPDATED,ue,this),n.on(s.default.PLAYBACK_ENDED,se,this),n.on(s.default.STREAM_INITIALIZING,fe,this),E&&(E=!1,D())},setConfig:function(e){e&&(e.streamController&&(l=e.streamController),e.dashMetrics&&(d=e.dashMetrics),e.mediaPlayerModel&&(b=e.mediaPlayerModel),e.adapter&&(c=e.adapter),e.videoModel&&(p=e.videoModel),e.timelineConverter&&(h=e.timelineConverter),e.uriFragmentModel&&(P=e.uriFragmentModel),e.settings&&(I=e.settings))},getStartTimeFromUriParameters:W,getTimeToStreamEnd:M,getTime:U,getNormalizedTime:F,getPlaybackRate:j,getPlayedRanges:function(){return v&&p?p.getPlayedRanges():null},getEnded:q,getIsDynamic:function(){return _},getStreamController:function(){return l},computeAndSetLiveDelay:function(e,t,n){var i,r,o,a=!isNaN(e)&&isFinite(e)?e:NaN,s=c.getSuggestedPresentationDelay(),l=I.get().streaming.lowLatencyEnabled?0:b.getLiveDelay()?b.getLiveDelay():null===I.get().streaming.liveDelayFragmentCount||isNaN(I.get().streaming.liveDelayFragmentCount)||isNaN(a)?!0===I.get().streaming.useSuggestedPresentationDelay&&null!==s&&!isNaN(s)&&0<s?s:isNaN(a)?isNaN(n)?4*v.manifestInfo.minBufferTime:4*n:4*a:a*I.get().streaming.liveDelayFragmentCount;return null!==(r=c.getAvailabilityStartTime())&&(C=r),o=0<t?(i=Math.max(t-10,t/2),Math.min(l,i)):l,y=o},getLiveDelay:function(){return y},setLiveDelay:function(e){!(arguments.length<=1||void 0===arguments[1])&&arguments[1]&&e<y||(y=e)},getCurrentLiveLatency:V,play:D,isPaused:x,pause:O,isSeeking:N,getStreamEndTime:R,seek:B,reset:H},i=(0,u.default)(t).getInstance().getLogger(e),H(),e}d.__dashjs_factory_name="PlaybackController",n.default=l.default.getSingletonFactory(d),t.exports=n.default},{108:108,109:109,45:45,46:46,47:47,54:54}],121:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(109)),a=i(e(197)),s=i(e(150)),l=i(e(46)),u=i(e(54)),d=i(e(47)),c=i(e(45)),p=i(e(118));function h(e){e=e||{};var t=this.context,n=(0,l.default)(t).getInstance(),i=e.adapter,d=e.dashMetrics,h=e.mediaPlayerModel,f=e.fragmentModel,g=e.abrController,m=e.playbackController,y=e.textController,v=e.streamId,_=e.type,b=e.mimeType,E=e.mediaController,T=e.bufferController,C=e.settings,S=void 0,w=void 0,A=void 0,k=void 0,P=void 0,I=void 0,L=void 0,M=void 0,R=void 0,D=void 0,x=void 0,O=void 0,N=void 0,B=void 0,U=void 0,F=void 0,j=void 0,q=void 0,V=void 0;function H(){return!1===k}function W(){H()||A&&!T.getIsBufferingCompleted()&&(w.debug("Schedule Controller starts"),k=!1,d.createPlaylistTraceMetrics(A.id,1e3*m.getTime(),m.getPlaybackRate()),K(0))}function G(){k||(w.debug("Schedule Controller stops"),w.debug(_+" Schedule Controller stops"),k=!0,clearTimeout(L))}function z(){var e,t;k||P||m.isPaused()&&!C.get().streaming.scheduleWhilePaused||(_===r.default.FRAGMENTED_TEXT||_===r.default.TEXT)&&!y.isTextEnabled()||T.getIsBufferingCompleted()?G():(function(){var e,t=m.getTime(),n=1.5;isNaN(A.fragmentDuration)&&(n=(e=d.getCurrentSchedulingInfo(A.mediaInfo.type))?1.5*e.duration:1.5);var r,a,l,u,c,h=f.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,time:t+n,threshold:0})[0];h&&-1===B.indexOf(h)&&!i.getIsTextTrack(b)&&(r=C.get().streaming.fastSwitchEnabled,a=T.getBufferLevel(),l=g.getAbandonmentStateFor(_),u=!E.isCurrentTrack(h.mediaInfo)&&E.getSwitchMode(h.mediaInfo.type)===p.default.TRACK_SWITCH_MODE_NEVER_REPLACE,c=h.quality<A.quality,r&&(u||c)&&n<=a&&l!==o.default.ABANDON_LOAD?(Q(h),V=!0,w.debug("Reloading outdated fragment at index: ",h.index)):h.quality>A.quality&&!F&&de(m.getTime()+a))}(),e=0<B.length,F||isNaN(N)||U||e||function(e,t){O[t]=O[t]||{};var n=g.getTopQualityIndexFor(e,t);return O[t][e]!=n&&(w.info("Top quality "+e+" index has changed from "+O[t][e]+" to "+n),O[t][e]=n,1)}(_,v)||D.execute(_,A,R)?(Y(!0),!e&&q&&g.checkPlaybackQuality(_),q=A.quality===N&&!U||F?(t=B.shift())&&t.isInitializationRequest()?(n.trigger(u.default.INIT_FRAGMENT_NEEDED,{sender:S,streamId:v,mediaType:_,representationId:t.representationId}),!1):(n.trigger(u.default.MEDIA_FRAGMENT_NEEDED,{sender:S,streamId:v,mediaType:_,seekTarget:M,replacement:t}),!0):(U?(w.debug("Switch track for "+_+", representation id = "+A.id),(F=E.getSwitchMode(_)===p.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE)&&T.replaceBuffer&&T.replaceBuffer(),U=!1):w.debug("Quality has changed, get init request for representationid = "+A.id),n.trigger(u.default.INIT_FRAGMENT_NEEDED,{sender:S,streamId:v,mediaType:_,representationId:A.id}),N=A.quality,!1)):K(500))}function K(e){clearTimeout(L),L=setTimeout(z,e)}function Y(e){P!==e?P=e:w.debug("isFragmentProcessingInProgress is already equal to",e)}function Q(e){B.push(e)}function X(e){var t;m&&f&&(t=f.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,time:m.getTime(),threshold:0})[0])&&m.getTime()>=t.startTime&&((!x.mediaInfo||t.mediaInfo.type===x.mediaInfo.type&&t.mediaInfo.id!==x.mediaInfo.id)&&e&&n.trigger(u.default.TRACK_CHANGE_RENDERED,{mediaType:_,oldMediaInfo:x.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===x.quality&&t.adaptationIndex===x.adaptationIndex||!e||n.trigger(u.default.QUALITY_CHANGE_RENDERED,{mediaType:_,oldQuality:x.quality,newQuality:t.quality}),x={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}function $(e){e.request.mediaInfo.streamInfo.id===v&&e.request.mediaType===_&&(G(),Y(!1),w.info("Stream "+v+" is complete"))}function J(e){e.request.mediaInfo.streamInfo.id===v&&e.request.mediaType===_&&(w.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),i.getIsTextTrack(b)&&Y(!1),e.error&&e.request.serviceLocation&&!k&&(Q(e.request),Y(!1),K(0)),F&&(j=e.request))}function Z(){X(!0)}function ee(e){var t,n,i;e.streamId===v&&e.mediaType===_&&(F&&!isNaN(e.startTime)&&(F=!1,f.addExecutedRequest(j)),Y(!1),V&&!isNaN(e.startTime)?(t=m.getTime(),K((n=e.startTime+A.fragmentDuration)<=t+(i=1.5*A.fragmentDuration)?0:1e3*(n-(t+i))),V=!1):K(0))}function te(e){e.streamId===v&&e.mediaType===_&&(w.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),m.isSeeking()||U||(w.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Q(e.request)),Y(!1),K(0))}function ne(e){e.sender.getType()===_&&e.sender.getStreamId()}function ie(e){_===e.mediaType&&v===e.streamId&&G()}function re(e){e.streamId===v&&e.mediaType===_&&(F&&C.get().streaming.flushBufferAtTrackSwitch&&m.seek(m.getTime()+.001,!1,!0),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&W())}function oe(e){e.streamId===v&&e.mediaType===_&&(G(),Y(!1))}function ae(){f.abortRequests(),G()}function se(){!k&&C.get().streaming.scheduleWhilePaused||W()}function le(e){de(e.seekTime),ce(0),k&&W();var t=A.DVRWindow&&m?A.DVRWindow.end-m.getTime():NaN;d.updateManifestUpdateInfo({latency:t}),P?f.abortRequests():K(0)}function ue(e){d.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function de(e){M=e}function ce(e){I=e}function pe(){x={mediaInfo:void(I=0),quality:N=M=NaN,adaptationIndex:NaN},O={},B=[],V=F=U=!(k=!(P=!(q=!(j=null))))}return S={initialize:function(e){R=e,D=(0,a.default)(t).create({abrController:g,dashMetrics:d,mediaPlayerModel:h,textController:y,settings:C}),n.on(u.default.DATA_UPDATE_STARTED,ne,this),n.on(u.default.FRAGMENT_LOADING_COMPLETED,J,this),n.on(u.default.STREAM_COMPLETED,$,this),n.on(u.default.BUFFER_CLEARED,re,this),n.on(u.default.BYTES_APPENDED_END_FRAGMENT,ee,this),n.on(u.default.QUOTA_EXCEEDED,oe,this),n.on(u.default.PLAYBACK_SEEKING,le,this),n.on(u.default.PLAYBACK_STARTED,se,this),n.on(u.default.PLAYBACK_RATE_CHANGED,ue,this),n.on(u.default.PLAYBACK_TIME_UPDATED,Z,this),n.on(u.default.URL_RESOLUTION_FAILED,ae,this),n.on(u.default.FRAGMENT_LOADING_ABANDONED,te,this),n.on(u.default.BUFFERING_COMPLETED,ie,this)},getType:function(){return _},getStreamId:function(){return v},setCurrentRepresentation:function(e){A=e},setSeekTarget:de,setTimeToLoadDelay:ce,getTimeToLoadDelay:function(){return I},switchTrackAsked:function(){U=!0},isStarted:H,start:W,stop:G,reset:function(){n.off(u.default.DATA_UPDATE_STARTED,ne,this),n.off(u.default.FRAGMENT_LOADING_COMPLETED,J,this),n.off(u.default.STREAM_COMPLETED,$,this),n.off(u.default.BUFFER_CLEARED,re,this),n.off(u.default.BYTES_APPENDED_END_FRAGMENT,ee,this),n.off(u.default.QUOTA_EXCEEDED,oe,this),n.off(u.default.PLAYBACK_SEEKING,le,this),n.off(u.default.PLAYBACK_STARTED,se,this),n.off(u.default.PLAYBACK_RATE_CHANGED,ue,this),n.off(u.default.PLAYBACK_TIME_UPDATED,Z,this),n.off(u.default.URL_RESOLUTION_FAILED,ae,this),n.off(u.default.FRAGMENT_LOADING_ABANDONED,te,this),n.off(u.default.BUFFERING_COMPLETED,ie,this),G(),X(!1),pe()},getBufferTarget:function(){return D.getBufferTarget(_,A)},processInitRequest:function(e){e&&(Y(!0),f.executeRequest(e))},processMediaRequest:function(e){e?(w.debug("Next fragment request url is "+e.url),f.executeRequest(e)):(m.getIsDynamic()&&w.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling."),Y(!1),K(C.get().streaming.lowLatencyEnabled?100:500))}},w=(0,c.default)(t).getInstance().getLogger(S),pe(),S}h.__dashjs_factory_name="ScheduleController",n.default=d.default.getClassFactory(h),t.exports=n.default},{108:108,109:109,118:118,150:150,197:197,45:45,46:46,47:47,54:54}],122:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(109)),a=i(e(105)),s=i(e(99)),l=i(e(46)),u=i(e(54)),d=i(e(47)),c=e(244),p=i(e(45)),h=i(e(214)),f=i(e(221)),g=i(e(101)),m=i(e(123)),y=i(e(119)),v=i(e(226)),_=i(e(51)),b=i(e(115));function E(){var e,t=this.context,n=(0,l.default)(t).getInstance(),i=void 0,d=void 0,E=void 0,T=void 0,C=void 0,S=void 0,w=void 0,A=void 0,k=void 0,P=void 0,I=void 0,L=void 0,M=void 0,R=void 0,D=void 0,x=void 0,O=void 0,N=void 0,B=void 0,U=void 0,F=void 0,j=void 0,q=void 0,V=void 0,H=void 0,W=void 0,G=void 0,z=void 0,K=void 0,Y=void 0,Q=void 0,X=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0;function ie(){var e;!Ce()||(e=z.getPlaybackQuality())&&w.addDroppedFrames(e)}function re(e){var t=pe(e.seekTime);t===U&&ee&&0<ee.length&&ee.forEach((function(e){e.deactivate(!0)})),t&&t!==U?(we(c.PlayListTrace.END_OF_PERIOD_STOP_REASON),me(t,U,e.seekTime)):we(c.PlayListTrace.USER_REQUEST_STOP_REASON),Ae(c.PlayList.SEEK_START_REASON)}function oe(e){var t=ge();we(c.PlayListTrace.END_OF_PERIOD_STOP_REASON),me(t,U,e.seekTime),Ae(c.PlayList.SEEK_START_REASON)}function ae(){i.debug("[onPlaybackStarted]"),X?(X=!1,Ae(c.PlayList.INITIAL_PLAYOUT_START_REASON)):Q&&(Q=!1,Ae(c.PlayList.RESUME_FROM_PAUSE_START_REASON))}function se(e){i.debug("[onPlaybackPaused]"),e.ended||(Q=!0,we(c.PlayListTrace.USER_REQUEST_STOP_REASON))}function le(){$&&(clearInterval($),$=null)}function ue(e){try{if(!e)return!1;var t=e.getProcessors().filter((function(e){return e.getType()===r.default.AUDIO||e.getType()===r.default.VIDEO}));if(!t||0===t.length)return!1;var n=t.filter((function(e){return!e.isBufferingCompleted()}));return n&&0===n.length}catch(e){return!1}}function de(){var e=Pe().isLast;G&&e&&(i.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),A.signalEndOfStream(G))}function ce(e,t){try{return t.isProtectionCompatible(e,t)&&(te||t.isMediaCodecCompatible(e,t))&&!function(e){try{var t=e.getStreamInfo(),n=S.getAdaptationForType(t.index,r.default.FRAGMENTED_TEXT,t);return!!n&&(-1!==n.codecs.indexOf("stpp")||-1!==n.codecs.indexOf("wvtt"))}catch(e){return!1}}(e)}catch(e){return!1}}function pe(e){if(isNaN(e))return null;var t=0,n=null,i=B.length;0<i&&(t+=B[0].getStartTime());for(var r=0;r<i;r++)if(n=B[r],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function he(){return U?U.getProcessors():[]}function fe(e){var t;U.getIsEndedEventSignaled()||(U.setIsEndedEventSignaled(!0),(t=ge())?(i.debug("StreamController onEnded, found next stream with id "+t.getStreamInfo().id),me(t,U,NaN)):(i.debug("StreamController no next stream found"),U.setIsEndedEventSignaled(!1)),we(t?c.PlayListTrace.END_OF_PERIOD_STOP_REASON:c.PlayListTrace.END_OF_CONTENT_STOP_REASON)),e&&e.isLast&&le()}function ge(e){var t=arguments.length<=0||void 0===e?null:e,n=t||U||null;if(n){for(var i=n.getStreamInfo().start,r=n.getStreamInfo().duration,o=parseFloat((i+r).toFixed(5)),a=0,s=-1,l=NaN;a<B.length;){var u=B[a].getStreamInfo().start-o;0<=u&&(isNaN(l)||u<l)&&(l=u,s=a),a+=1}return 0<=s?B[s]:null}return null}function me(e,t,r){var o;V||!e||t===e&&e.isActive()||(V=!0,n.trigger(u.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),o=!1,t&&(o=ce(e,t),t.deactivate(o)),r=isNaN(r)?!o&&t?e.getStreamInfo().start:NaN:r,i.info("Switch to stream "+e.getId()+". Seektime is "+r+", current playback time is "+K.getTime()),i.info("Seamless period switch is set to "+o),U=e,ee=ee.filter((function(e){return e.getId()!==U.getId()})),K.initialize(Pe(),!!t,r),z.getElement()?ye(r,null===t,!1,o):ve(r,o))}function ye(e,t,r,o){var a=void 0;function s(){G&&"open"===G.readyState&&(i.debug("MediaSource is open!"),window.URL.revokeObjectURL(a),G.removeEventListener("sourceopen",s),G.removeEventListener("webkitsourceopen",s),_e(),t||n.trigger(u.default.SOURCE_INITIALIZED),r?U.setMediaSource(G):ve(e,o))}G?o?(ve(e,o),t||n.trigger(u.default.SOURCE_INITIALIZED)):(A.detachMediaSource(z),G.addEventListener("sourceopen",s,!1),G.addEventListener("webkitsourceopen",s,!1),a=A.attachMediaSource(G,z),i.debug("MediaSource attached to element.  Waiting on open...")):((G=A.createMediaSource()).addEventListener("sourceopen",s,!1),G.addEventListener("webkitsourceopen",s,!1),a=A.attachMediaSource(G,z),i.debug("MediaSource attached to element.  Waiting on open..."))}function ve(e,t){var i;!(Z=U.activate(G,t?Z:void 0))||0<(i=Object.keys(Z)).length&&Z[i[0]].changeType&&(te=!0),X||isNaN(e)||(e===K.getTime()?n.trigger(u.default.SEEK_TARGET,{time:e,streamId:U.getId()}):K.seek(e)),!q&&X||K.play(),V=!1,n.trigger(u.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Pe()})}function _e(e){var t,n=e||Pe().manifestInfo.duration;n&&!isNaN(n)&&(t=A.setDuration(G,n),i.debug("Duration successfully set to: "+t))}function be(){try{!function(){var e=S.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");w.updateManifestUpdateInfo({currentTime:K.getTime(),buffered:z.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:N.getClientTimeOffset()}),0<B.length&&(B=B.filter((function(t){var n=0<e.filter((function(e){return e.id===t.getId()})).length||t.getId()===U.getId();return n||i.debug("Removing stream "+t.getId()),n})));for(var o,s,l,c=0,p=e.length;c<p;c++){var h=e[c],f=function(e){for(var t=0,n=B.length;t<n;t++)if(B[t].getId()===e.id)return B[t];return null}(h);f?f.updateData(h):(f=(0,a.default)(t).create({manifestModel:C,mediaPlayerModel:Y,dashMetrics:w,manifestUpdater:E,adapter:S,timelineConverter:N,capabilities:d,errHandler:O,baseURLController:P,abrController:I,playbackController:K,eventController:M,mediaController:L,textController:R,videoModel:z,settings:ne}),B.push(f),f.initialize(h,F)),w.addManifestUpdateStreamInfo(h)}U||(S.getIsDynamic()&&B.length&&(o=e[0].manifestInfo,s=function(e,t){try{var n=NaN;return t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration)?t.maxFragmentDuration:(e&&1===e.length&&function(){var t=e[0],i=[r.default.VIDEO,r.default.AUDIO,r.default.FRAGMENTED_TEXT].reduce((function(e,n){var i=S.getMediaInfoForType(t,n);return i&&e.push(i),e}),[]).reduce((function(e,t){var n=S.getVoRepresentations(t);return n&&0<n.length&&n.forEach((function(t){t&&e.push(t)})),e}),[]).reduce((function(e,t){var n=S.convertDataToRepresentationInfo(t);return n&&n.fragmentDuration&&!isNaN(n.fragmentDuration)&&e.push(n.fragmentDuration),e}),[]);n=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i))}(),isFinite(n)?n:NaN)}catch(t){return NaN}}(e,o),K.computeAndSetLiveDelay(s,o.DVRWindowSize,o.minBufferTime)),l=null,!(l=pe(K.getStartTimeFromUriParameters(e[0].start,S.getIsDynamic())))&&S.getIsDynamic()&&B.length&&(i.debug("Dynamic stream: Trying to find the correct starting period"),l=function(){try{return pe(N.calcPresentationTimeFromWallTime(new Date,S.getRegularPeriods()[0])-K.getLiveDelay())}catch(e){return null}}()),me(null!==l?l:B[0],null,NaN),$=$||setInterval((function(){!V&&K.getTimeToStreamEnd()<=0&&n.trigger(u.default.PLAYBACK_ENDED,{isLast:Pe().isLast})}),200),J=J||setInterval((function(){!function(){if(U&&ue(U))for(var e=function(e){try{var t=e||U||null;if(t){var n=function(){var e=t.getStreamInfo().start;return{v:B.filter((function(t){return t.getStreamInfo().start>e}))}}();if("object"==typeof n)return n.v}}catch(e){return[]}}(U),t=0;t<e.length;)n();function n(){var n,o,a=e[t],s=0===t?U:e[t-1];!a.getPreloadingScheduled()&&ue(s)&&G&&(n=[r.default.VIDEO,r.default.AUDIO],o=!0,n.forEach((function(e){var t=S.getMediaInfoForType(a.getStreamInfo(),e);S.getVoRepresentations(t).forEach((function(e){var t=N.calcSegmentAvailabilityRange(e,!0);t.end<t.start&&(o=!1)}))})),o&&function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];G&&!e.getPreloaded()&&ce(e,t)&&(e.setPreloadingScheduled(!0),i.info("[onStreamCanLoadNext] Preloading next stream with id "+e.getId()),e.preload(G,Z),ee.push(e),e.getProcessors().forEach((function(t){t.setBufferingTime(e.getStartTime())})))}(a,s)),t+=1}}()}),500)),n.trigger(u.default.STREAMS_COMPOSED)}()}catch(e){O.error(new v.default(_.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",C.getValue())),W=!0,Re()}}function Ee(){var e=C.getValue();F&&(n.trigger(u.default.PROTECTION_CREATED,{controller:F,manifest:e}),F.setMediaElement(z.getElement()),j&&F.setProtectionData(j)),be()}function Te(e){e.error?(W=!0,Re()):function(){var t=e.manifest;S.updatePeriods(t);var n=S.getUTCTimingSources(),r=S.getIsDynamic()?n.concat(Y.getUTCTimingSources()):n,o=x.isHTTPS(e.manifest.url);r.forEach((function(e){e.value.replace(/.*?:\/\//g,"")===Y.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(o?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),o?"https://":"http://"),i.debug("Matching default timing source protocol to manifest protocol: ",e.value))})),P.initialize(t),k.setConfig({dashMetrics:w,baseURLController:P}),k.initialize(r,ne.get().streaming.useManifestDateHeaderTimeSource)}()}function Ce(){return!!U&&U.getHasVideoTrack()}function Se(){return!!U&&U.getHasAudioTrack()}function we(e,t){t=t||new Date,he().forEach((function(n){n.finalisePlayList(t,e)})),w.addPlayList()}function Ae(e){w.createPlaylistMetrics(1e3*K.getTime(),e)}function ke(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}H=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),i.fatal("Video Element Error: "+t),e.error&&i.fatal(e.error),O.error(new v.default(e.error.code,t)),Re()}}function Pe(){return U?U.getStreamInfo():null}function Ie(){if(!(T&&T.hasOwnProperty("load")&&N&&N.hasOwnProperty("initialize")&&N.hasOwnProperty("reset")&&N.hasOwnProperty("getClientTimeOffset")&&C&&O&&w&&K))throw new Error(r.default.MISSING_CONFIG_ERROR)}function Le(e){isNaN(e.newDuration)||_e(e.newDuration)}function Me(){J=$=U=F=null,q=!(Q=!(X=!(W=H=V=!(B=[])))),ee=[]}function Re(){Ie(),k.reset(),we(H||W?c.PlayListTrace.FAILURE_STOP_REASON:c.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=B?B.length:0;e<t;e++)B[e].reset(H);!function(){n.off(u.default.PLAYBACK_TIME_UPDATED,ie,this),n.off(u.default.PLAYBACK_SEEKING,re,this),n.off(u.default.GAP_CAUSED_SEEK_TO_PERIOD_END,oe,this),n.off(u.default.PLAYBACK_ERROR,ke,this),n.off(u.default.PLAYBACK_STARTED,ae,this),n.off(u.default.PLAYBACK_PAUSED,se,this),n.off(u.default.PLAYBACK_ENDED,fe,this),n.off(u.default.MANIFEST_UPDATED,Te,this),n.off(u.default.STREAM_BUFFERING_COMPLETED,de,this),n.off(u.default.MANIFEST_VALIDITY_CHANGED,Le,this),n.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,Ee,this),n.off(g.default.METRIC_ADDED,De,this)}(),P.reset(),E.reset(),M.reset(),w.clearAllCurrentMetrics(),C.setValue(null),T.reset(),N.reset(),D.reset(),G&&(A.detachMediaSource(z),G=null),z=null,F&&(F.setMediaElement(null),j=F=null,C.getValue()&&n.trigger(u.default.PROTECTION_DESTROYED,{data:C.getValue().url})),le(),clearInterval(J),J=null,n.trigger(u.default.STREAM_TEARDOWN_COMPLETE),Me()}function De(e){var t;e.metric===o.default.DVR_INFO&&(t=Se()?r.default.AUDIO:r.default.VIDEO,e.mediaType===t&&A.setSeekable(G,e.value.range.start,e.value.range.end))}return e={initialize:function(e,i){Ie(),q=e,j=i,N.initialize(),(E=(0,s.default)(t).create()).setConfig({manifestModel:C,adapter:S,manifestLoader:T,errHandler:O,settings:ne}),E.initialize(),(M=(0,b.default)(t).getInstance()).setConfig({manifestUpdater:E,playbackController:K}),M.start(),function(){n.on(u.default.PLAYBACK_TIME_UPDATED,ie,this),n.on(u.default.PLAYBACK_SEEKING,re,this),n.on(u.default.GAP_CAUSED_SEEK_TO_PERIOD_END,oe,this),n.on(u.default.PLAYBACK_ERROR,ke,this),n.on(u.default.PLAYBACK_STARTED,ae,this),n.on(u.default.PLAYBACK_PAUSED,se,this),n.on(u.default.PLAYBACK_ENDED,fe,this),n.on(u.default.MANIFEST_UPDATED,Te,this),n.on(u.default.STREAM_BUFFERING_COMPLETED,de,this),n.on(u.default.MANIFEST_VALIDITY_CHANGED,Le,this),n.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,Ee,this),n.on(g.default.METRIC_ADDED,De,this)}()},getActiveStreamInfo:Pe,hasVideoTrack:Ce,hasAudioTrack:Se,switchToVideoElement:function(e){U&&(K.initialize(Pe()),ye(e,!1,!0,!1))},getStreamById:function(e){return B.filter((function(t){return t.getId()===e}))[0]},getStreamForTime:pe,getTimeRelativeToStreamId:function(e,t){for(var n=null,i=0,r=0,o=null,a=0;a<B.length;a++){if(r=(n=B[a]).getStartTime(),o=n.getDuration(),Number.isFinite(r)&&(i=r),n.getId()===t)return e-i;Number.isFinite(o)&&(i+=o)}return null},load:function(e){Ie(),T.load(e)},loadWithManifest:function(e){!function(){if(!E||!E.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),E.setManifest(e)},getActiveStreamProcessors:he,setConfig:function(e){e&&(e.capabilities&&(d=e.capabilities),e.manifestLoader&&(T=e.manifestLoader),e.manifestModel&&(C=e.manifestModel),e.mediaPlayerModel&&(Y=e.mediaPlayerModel),e.protectionController&&(F=e.protectionController),e.adapter&&(S=e.adapter),e.dashMetrics&&(w=e.dashMetrics),e.errHandler&&(O=e.errHandler),e.timelineConverter&&(N=e.timelineConverter),e.videoModel&&(z=e.videoModel),e.playbackController&&(K=e.playbackController),e.abrController&&(I=e.abrController),e.mediaController&&(L=e.mediaController),e.textController&&(R=e.textController),e.settings&&(ne=e.settings),e.baseURLController&&(P=e.baseURLController))},setProtectionData:function(e){j=e},getIsStreamSwitchInProgress:function(){return V},getHasMediaOrIntialisationError:function(){return H||W},hasStreamFinishedBuffering:ue,getStreams:function(){return B},getActiveStream:function(){return U},reset:Re},i=(0,p.default)(t).getInstance().getLogger(e),k=(0,m.default)(t).getInstance(),A=(0,y.default)(t).getInstance(),D=(0,h.default)(t).getInstance(),x=(0,f.default)(t).getInstance(),Me(),e}E.__dashjs_factory_name="StreamController",n.default=d.default.getSingletonFactory(E),t.exports=n.default},{101:101,105:105,108:108,109:109,115:115,119:119,123:123,214:214,221:221,226:226,244:244,45:45,46:46,47:47,51:51,54:54,99:99}],123:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(226)),o=e(242),a=i(e(46)),s=i(e(54)),l=i(e(51)),u=i(e(47)),d=i(e(45)),c=i(e(221));function p(){var e,t=this.context,n=(0,a.default)(t).getInstance(),i=(0,c.default)(t).getInstance(),u=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0;function v(e){h=e}function _(e){p=e}function b(e){var t,n,i,r=Date.parse(e);return isNaN(r)&&(n=t=void 0,i=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),t=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&(parseInt(i[6],10)||0),i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]&&(n=60*parseInt(i[9],10)+parseInt(i[10],10),t+=("+"===i[8]?-1:1)*n*60*1e3),r=new Date(t).getTime()),r}function E(e){return Date.parse(e)}function T(e){return Date.parse(e)}function C(e,t,n){n()}function S(e,t,n){var i=b(e);isNaN(i)?n():t(i)}function w(e,t,n,r,a){var s,l,u,d=!1,c=new XMLHttpRequest,p=a?o.HTTPRequest.HEAD:o.HTTPRequest.GET,h=t.match(/\S+/g);t=h.shift(),s=function(){d||(d=!0,h.length?w(e,h.join(" "),n,r,a):r())},l=function(){var t=void 0,i=void 0;200===c.status&&(t=a?c.getResponseHeader("Date"):c.response,i=e(t),isNaN(i)||(n(i),d=!0))},!i.isRelative(t)||(u=y.resolve())&&(t=i.resolve(t,u.url)),c.open(p,t),c.timeout=5e3,c.onload=l,c.onloadend=s,c.send()}function A(e,t,n){w(T,e,t,n,!0)}function k(){var e=m.getLatestMPDRequestHeaderValueByID("Date"),t=null!==e?new Date(e).getTime():Number.NaN;isNaN(t)?P(!0):(_(t-(new Date).getTime()),P(!1,t/1e3,p))}function P(e,t,i){v(!1),n.trigger(s.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:i,error:e?new r.default(l.default.TIME_SYNC_FAILED_ERROR_CODE,l.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null})}return e={initialize:function(e,t){f=t,p=0,h=!1,g={"urn:mpeg:dash:utc:http-head:2014":A,"urn:mpeg:dash:utc:http-xsdate:2014":w.bind(null,b),"urn:mpeg:dash:utc:http-iso:2014":w.bind(null,E),"urn:mpeg:dash:utc:direct:2014":S,"urn:mpeg:dash:utc:http-head:2012":A,"urn:mpeg:dash:utc:http-xsdate:2012":w.bind(null,b),"urn:mpeg:dash:utc:http-iso:2012":w.bind(null,E),"urn:mpeg:dash:utc:direct:2012":S,"urn:mpeg:dash:utc:http-ntp:2014":C,"urn:mpeg:dash:utc:ntp:2014":C,"urn:mpeg:dash:utc:sntp:2014":C},h||function e(t,n){var i=n||0,r=t[i],o=function(e,t){var n=!e||!t;n&&f?k():P(n,e,t)};v(!0),r?g.hasOwnProperty(r.schemeIdUri)?g[r.schemeIdUri](r.value,(function(e){var t=(new Date).getTime(),n=e-t;_(n),u.info("Local time: "+new Date(t)),u.info("Server time: "+new Date(e)),u.info("Server Time - Local Time (ms): "+n),o(e,n)}),(function(){e(t,i+1)})):e(t,i+1):(_(0),o())}(e)},getOffsetToDeviceTimeMs:function(){return p},setConfig:function(e){e&&(e.dashMetrics&&(m=e.dashMetrics),e.baseURLController&&(y=e.baseURLController))},reset:function(){v(!1)}},u=(0,d.default)(t).getInstance().getLogger(e),e}p.__dashjs_factory_name="TimeSyncController";var h=u.default.getSingletonFactory(p);h.HTTP_TIMEOUT_MS=5e3,u.default.updateSingletonFactory(p.__dashjs_factory_name,h),n.default=h,t.exports=n.default},{221:221,226:226,242:242,45:45,46:46,47:47,51:51,54:54}],124:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(107)),o=i(e(46)),a=i(e(54)),s=i(e(47)),l=i(e(3)),u=i(e(221)),d=i(e(61)),c="onLoad";function p(e){e=e||{};var t=this.context,n=(0,o.default)(t).getInstance(),i=(0,u.default)(t).getInstance(),s=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0;function y(e,t,n){var r={},o=void 0,a=void 0;r.elements=e,r.type=t,r.resolveType=n,0===r.elements.length&&_(r);for(var s=0;s<r.elements.length;s++)o=r.elements[s],a=i.isHTTPURL(o.url)?o.url:o.originalContent.BaseURL+o.url,m.load(a,o,r)}function v(e){var t,n=void 0,i="",r=(n=e.element,e.resolveObject);n.resolvedContent&&((t=0)===n.resolvedContent.indexOf("<?xml")&&(t=n.resolvedContent.indexOf("?>")+2),i=n.resolvedContent.substr(0,t)+"<response>"+n.resolvedContent.substr(t)+"</response>",n.resolvedContent=g.xml_str2json(i)),function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0}(r)&&_(r)}function _(e){var t=[],i=void 0,r=void 0;if(function(e){var t=[],n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0;for(o=e.elements.length-1;0<=o;o--){if(i=(n=e.elements[o]).type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(a=0;a<n.resolvedContent[i].length;a++)r=n.resolvedContent[i][a],t.push(r)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[i].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[i].splice(n.index+s,0,t[s]);t=[]}0<e.elements.length&&h.run(f)}(e),"onActuate"===e.resolveType&&n.trigger(a.default.XLINK_READY,{manifest:f}),e.resolveType===c)switch(e.type){case d.default.PERIOD:for(i=0;i<f[d.default.PERIOD+"_asArray"].length;i++)(r=f[d.default.PERIOD+"_asArray"][i]).hasOwnProperty(d.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(b(r[d.default.ADAPTATION_SET+"_asArray"],r,d.default.ADAPTATION_SET,c))),r.hasOwnProperty(d.default.EVENT_STREAM+"_asArray")&&(t=t.concat(b(r[d.default.EVENT_STREAM+"_asArray"],r,d.default.EVENT_STREAM,c)));y(t,d.default.ADAPTATION_SET,c);break;case d.default.ADAPTATION_SET:n.trigger(a.default.XLINK_READY,{manifest:f})}}function b(e,t,n,i){var r=[],o=void 0,a=void 0,s=void 0;for(a=e.length-1;0<=a;a--)(o=e[a]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===o["xlink:href"]&&e.splice(a,1);for(a=0;a<e.length;a++)(o=e[a]).hasOwnProperty("xlink:href")&&o.hasOwnProperty("xlink:actuate")&&o["xlink:actuate"]===i&&(s={url:o["xlink:href"],parentElement:t,type:n,index:a,resolveType:i,originalContent:o,resolvedContent:null,resolved:!1},r.push(s));return r}return s={resolveManifestOnLoad:function(e){g=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:p}),y(b((f=e).Period_asArray,f,d.default.PERIOD,c),d.default.PERIOD,c)},setMatchers:function(e){e&&(p=e)},setIron:function(e){e&&(h=e)},reset:function(){n.off(a.default.XLINK_ELEMENT_LOADED,v,s),m&&(m.reset(),m=null)}},n.on(a.default.XLINK_ELEMENT_LOADED,v,s),m=(0,r.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),s}p.__dashjs_factory_name="XlinkController",n.default=s.default.getClassFactory(p),t.exports=n.default},{107:107,221:221,3:3,46:46,47:47,54:54,61:61}],125:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(139)),o=i(e(126)),a=i(e(127)),s=i(e(132)),l=i(e(137));function u(){var e=this.context;return{createMetricsReporting:function(t){return(0,r.default)(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}),(0,a.default)(e).create(t)},getReportingFactory:function(){return(0,l.default)(e).getInstance()},getMetricsHandlerFactory:function(){return(0,s.default)(e).getInstance()}}}u.__dashjs_factory_name="MetricsReporting";var d=dashjs.FactoryMaker.getClassFactory(u);d.events=o.default,dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name,d),n.default=d,t.exports=n.default},{126:126,127:127,132:132,137:137,139:139}],126:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,((i=e(55))&&i.__esModule?i:{default:i}).default),r);n.default=o,t.exports=n.default},{55:55}],127:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(128)),o=i(e(141)),a=i(e(126));function s(e){e=e||{};var t={},n=this.context,i=e.eventBus,s=e.events;function l(s){var l;s.error||(l=Object.keys(t),(0,o.default)(n).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(s.manifest).forEach((function(i){var o=JSON.stringify(i);if(t.hasOwnProperty(o))l.splice(o,1);else try{var a=(0,r.default)(n).create(e);a.initialize(i),t[o]=a}catch(i){}})),l.forEach((function(e){t[e].reset(),delete t[e]})),i.trigger(a.default.METRICS_INITIALISATION_COMPLETE))}function u(){Object.keys(t).forEach((function(e){t[e].reset()})),t={}}return i.on(s.MANIFEST_UPDATED,l),i.on(s.STREAM_TEARDOWN_COMPLETE,u),{reset:function(){i.off(s.MANIFEST_UPDATED,l),i.off(s.STREAM_TEARDOWN_COMPLETE,u)}}}s.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=n.default},{126:126,128:128,141:141}],128:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(130)),o=i(e(131)),a=i(e(129));function s(e){e=e||{};var t=void 0,n=void 0,i=void 0,s=this.context;function l(){t&&t.reset(),n&&n.reset(),i&&i.reset()}return{initialize:function(u){try{(i=(0,r.default)(s).create({mediaElement:e.mediaElement})).initialize(u.Range),(n=(0,o.default)(s).create({debug:e.debug,metricsConstants:e.metricsConstants})).initialize(u.Reporting,i),(t=(0,a.default)(s).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(u.metrics,n)}catch(u){throw l(),u}},reset:l}}s.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=n.default},{129:129,130:130,131:131}],129:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(132))&&i.__esModule?i:{default:i};function o(e){e=e||{};var t=[],n=void 0,i=this.context,o=e.eventBus,a=e.events,s=(0,r.default)(i).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function l(e){t.forEach((function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)}))}return n={initialize:function(e,i){e.split(",").forEach((function(e,n,r){var o,a;-1===e.indexOf("(")||-1!==e.indexOf(")")||(a=r[n+1])&&-1===a.indexOf("(")&&-1!==a.indexOf(")")&&(e+=","+a,delete r[n+1]),(o=s.create(e,i))&&t.push(o)})),o.on(a.METRIC_ADDED,l,n),o.on(a.METRIC_UPDATED,l,n)},reset:function(){o.off(a.METRIC_ADDED,l,n),o.off(a.METRIC_UPDATED,l,n),t.forEach((function(e){return e.reset()})),t=[]}}}o.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{132:132}],130:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(209))&&i.__esModule?i:{default:i};function o(e){e=e||{};var t,n=!1,i=this.context,o=void 0,a=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach((function(e){var t=e.starttime,n=t+e.duration;o.add(t,n)})),n=!!e[0]._useWallClockTime)},reset:function(){o.clear()},isEnabled:function(){var e,t=o.length;if(!t)return!0;e=n?(new Date).getTime()/1e3:a.currentTime;for(var i=0;i<t;i+=1){var r=o.start(i),s=o.end(i);if(r<=e&&e<s)return!0}return!1}},o=(0,r.default)(i).create(),t}o.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{209:209}],131:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(137))&&i.__esModule?i:{default:i};function o(e){var t=[],n=(0,r.default)(this.context).getInstance(e);return{initialize:function(e,i){e.some((function(e){var r=n.create(e,i);if(r)return t.push(r),!0}))},reset:function(){t.forEach((function(e){return e.reset()})),t=[]},report:function(e,n){t.forEach((function(t){return t.report(e,n)}))}}}o.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{137:137}],132:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(133)),o=i(e(134)),a=i(e(136)),s=i(e(135));function l(e){var t=void 0,n=(e=e||{}).debug?e.debug.getLogger(t):{},i=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,l=this.context,u={BufferLevel:r.default,DVBErrors:o.default,HttpList:a.default,PlayList:s.default,RepSwitchList:s.default,TcpList:s.default};return{create:function(t,r){var o,a=t.match(i);if(a){try{(o=u[a[1]](l).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(a[1],r,a[3],a[5])}catch(t){o=null,n.error("MetricsHandlerFactory: Could not create handler for type "+a[1]+" with args "+a[3]+", "+a[5]+" ("+t.message+")")}return o}},register:function(e,t){u[e]=t},unregister:function(e){delete u[e]}}}l.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(l),t.exports=n.default},{133:133,134:134,135:135,136:136}],133:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(140))&&i.__esModule?i:{default:i};function o(e){e=e||{};var t=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=this.context,l=(0,r.default)(s).getInstance(),u=[],d=e.metricsConstants;function c(){var e=function(){try{return Object.keys(u).map((function(e){return u[e]})).reduce((function(e,t){return e.level<t.level?e:t}))}catch(e){return}}();e&&a!==e.t&&(a=e.t,t.report(i,e))}return{initialize:function(e,r,a){r&&(n=l.validateN(a),t=r,i=l.reconstructFullMetricName(e,a),o=setInterval(c,n))},reset:function(){clearInterval(o),n=0,a=t=o=null},handleNewMetric:function(e,t,n){e===d.BUFFER_LEVEL&&(u[n]=t)}}}o.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{140:140}],134:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(126))&&i.__esModule?i:{default:i};n.default=dashjs.FactoryMaker.getClassFactory((function(e){var t=void 0,n=(e=e||{}).eventBus,i=e.metricsConstants;function o(){n.off(r.default.METRICS_INITIALISATION_COMPLETE,o,this),n.trigger(r.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,i){i&&(t=i,n.on(r.default.METRICS_INITIALISATION_COMPLETE,o,this))},reset:function(){t=null},handleNewMetric:function(e,n){e===i.DVB_ERRORS&&t&&t.report(e,n)}}})),t.exports=n.default},{126:126}],135:[function(e,t,n){"use strict";function i(){var e=void 0,t=void 0;return{initialize:function(n,i){e=n,t=i},reset:function(){t=null,e=void 0},handleNewMetric:function(n,i){n===e&&t&&t.report(e,i)}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{}],136:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(140))&&i.__esModule?i:{default:i};function o(e){e=e||{};var t=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=[],l=(0,r.default)(this.context).getInstance(),u=e.metricsConstants;function d(){s.length&&t&&t.report(o,s),s=[]}return{initialize:function(e,r,s,u){r&&(n=l.validateN(s),t=r,u&&u.length&&(i=u),o=l.reconstructFullMetricName(e,s,u),a=setInterval(d,n))},reset:function(){clearInterval(a),s=[],t=i=n=a=null},handleNewMetric:function(e,t){e===u.HTTP_REQUEST&&(i&&i!==t.type||s.push(t))}}}o.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{140:140}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(138))&&i.__esModule?i:{default:i};function o(e){e=e||{};var t={"urn:dvb:dash:reporting:2014":r.default},n=this.context,i=void 0,o=e.debug?e.debug.getLogger(i):{},a=e.metricsConstants;return{create:function(e,i){var r=void 0;try{(r=t[e.schemeIdUri](n).create({metricsConstants:a})).initialize(e,i)}catch(i){r=null,o.error("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+i.message+")")}return r},register:function(e,n){t[e]=n},unregister:function(e){delete t[e]}}}o.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{138:138}],138:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(142)),o=i(e(143));function a(e){e=e||{};var t,n=this.context,i=void 0,a=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=[],p=e.metricsConstants;function h(){l=s=!1,d=u=null}return t={report:function(e,t){Array.isArray(t)||(t=[t]),l&&d.isEnabled()&&t.forEach((function(t){var n=i.serialise(t);e!==p.DVB_ERRORS&&(n="metricname="+e+"&"+n),function(e,t,n){function i(){var e=c.indexOf(r);-1!==e&&(c.splice(e,1),200<=r.status&&r.status<300?t&&t():n&&n())}var r=new XMLHttpRequest;c.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(e){r.onerror()}}(n=u+"?"+n,null,(function(){l=!1}))}))},initialize:function(e,t){var n=void 0;if(d=t,!(u=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");s||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=a.random())&&(l=!0),s=!0)},reset:function(){h()}},i=(0,r.default)(n).getInstance(),a=(0,o.default)(n).getInstance(),h(),t}a.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{142:142,143:143}],139:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(144)),o=i(e(126));function a(e){var t=void 0,n=void 0,i=(e=e||{}).eventBus,a=e.dashMetrics,s=e.metricsConstants,l=e.events;function u(e){var t=new r.default;if(n){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),a.addDVBErrors(t)}}function d(e){e.error||(n=e.manifest)}function c(e){u({errorcode:r.default.BASE_URL_CHANGED,servicelocation:e.entry})}function p(){u({errorcode:r.default.BECAME_REPORTER})}function h(e){if(e.metric===s.HTTP_REQUEST)(0===(t=e.value).responsecode||400<=t.responsecode||t.responsecode<100||600<=t.responsecode)&&u({errorcode:t.responsecode||r.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation});var t}function f(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=r.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=r.default.CORRUPT_MEDIA_OTHER;break;default:return}u({errorcode:t})}function g(){i.on(l.MANIFEST_UPDATED,d,t),i.on(l.SERVICE_LOCATION_BLACKLIST_CHANGED,c,t),i.on(l.METRIC_ADDED,h,t),i.on(l.METRIC_UPDATED,h,t),i.on(l.PLAYBACK_ERROR,f,t),i.on(o.default.BECAME_REPORTING_PLAYER,p,t)}return t={initialise:g,reset:function(){i.off(l.MANIFEST_UPDATED,d,t),i.off(l.SERVICE_LOCATION_BLACKLIST_CHANGED,c,t),i.off(l.METRIC_ADDED,h,t),i.off(l.METRIC_UPDATED,h,t),i.off(l.PLAYBACK_ERROR,f,t),i.off(o.default.BECAME_REPORTING_PLAYER,p,t)}},g(),t}a.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default},{126:126,144:144}],140:[function(e,t,n){"use strict";function i(){return{reconstructFullMetricName:function(e,t,n){var i=e;return t&&(i+="("+t,n&&n.length&&(i+=","+n),i+=")"),i},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],141:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(145)),o=i(e(146)),a=i(e(147));function s(e){var t=(e=e||{}).adapter,n=e.constants;return{getMetrics:function(e){var i=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach((function(s){var l=new r.default,u=t.getIsDynamic(e);s.hasOwnProperty("metrics")&&(l.metrics=s.metrics,s.Range_asArray&&s.Range_asArray.forEach((function(i){var r,a,s,d,c,p=new o.default;p.starttime=(r=e,a=i,d=s=void 0,c=0,u?c=t.getAvailabilityStartTime(r)/1e3:(s=t.getRegularPeriods(r)).length&&(c=s[0].start),d=c,a&&a.hasOwnProperty(n.START_TIME)&&(d+=a.starttime),d),i.hasOwnProperty("duration")?p.duration=i.duration:p.duration=t.getDuration(e),p._useWallClockTime=u,l.Range.push(p)})),s.Reporting_asArray&&(s.Reporting_asArray.forEach((function(e){var t=new a.default;if(e.hasOwnProperty(n.SCHEME_ID_URI)){for(var i in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(i)&&(t[i]=e[i]);l.Reporting.push(t)}})),i.push(l)))})),i}}}s.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{145:145,146:146,147:147}],142:[function(e,t,n){"use strict";function i(){return{serialise:function e(t){var n=[],i=[],r=void 0,o=void 0;for(r in t)if(t.hasOwnProperty(r)&&0!==r.indexOf("_")){if(null==(o=t[r])&&(o=""),Array.isArray(o)){if(!o.length)continue;i=[],o.forEach((function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);i.push(n?t:e(t))})),o=i.map(encodeURIComponent).join(",")}else"string"==typeof o?o=encodeURIComponent(o):o instanceof Date?o=o.toISOString():"number"==typeof o&&(o=Math.round(o));n.push(r+"="+o)}return n.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],143:[function(e,t,n){"use strict";function i(){var e,t=window.crypto||window.msCrypto,n=Uint32Array,i=Math.pow(2,8*n.BYTES_PER_ELEMENT)-1,r=void 0,o=void 0;function a(){t&&(r=r||new n(10),t.getRandomValues(r),o=0)}return e={random:function(e,n){var s=void 0;return e=e||0,n=n||1,t?(o===r.length&&a(),s=r[o]/i,o+=1):s=Math.random(),s*(n-e)+e}},a(),e}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],144:[function(e,t,n){"use strict";function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}Object.defineProperty(n,"__esModule",{value:!0}),i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",n.default=i,t.exports=n.default},{}],145:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=n.default},{}],146:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=n.default},{}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],148:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.data={baseUrls:e||null,selectedIdx:t||NaN},this.children=[]}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(217)),a=i(e(47));function s(){var e,t=void 0,n=void 0,i=this.context,a=(0,o.default)(i).getInstance();function s(e,t,i){var o=n.getBaseURLsFromElement(i);e[t]?a.areEqual(o,e[t].data.baseUrls)||(e[t].data.baseUrls=o,e[t].data.selectedIdx=NaN):e[t]=new r(o)}function l(){t=new r}return e={reset:l,update:function(e){!function(e){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var i=n.getBaseURLsFromElement(e);a.areEqual(i,t.data.baseUrls)||(t.data.baseUrls=i,t.data.selectedIdx=NaN),e&&e.Period_asArray&&e.Period_asArray.forEach((function(e,i){s(t.children,i,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach((function(e,r){s(t.children[i].children,r,e),e.Representation_asArray&&e.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach((function(e,n){s(t.children[i].children[r].children,n,e)}))}))}))}(e)},getForPath:function(e){var n=t,i=[n.data];return e&&e.forEach((function(e){(n=n.children[e])&&i.push(n.data)})),i.filter((function(e){return e.baseUrls.length}))},invalidateSelectedIndexes:function(e){!function e(n,i){var r=i||t;n(r.data),r.children&&r.children.forEach((function(t){return e(n,t)}))}((function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=NaN)}))},setConfig:function(e){e.adapter&&(n=e.adapter)}},l(),e}s.__dashjs_factory_name="BaseURLTreeModel",n.default=a.default.getClassFactory(s),t.exports=n.default},{217:217,47:47}],149:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(46)),o=i(e(101)),a=i(e(47)),s=i(e(45)),l=i(e(48)),u=e(242),d=i(e(65)),c=i(e(49)),p="dash.js-v"+(0,e(50).getVersionString)();function h(){var e=void 0,t=void 0,n=void 0,i=void 0,a=void 0,h=void 0,f=this.context,g=(0,r.default)(f).getInstance(),m=(0,l.default)(f).getInstance();function y(){n={pr:1,nor:null,st:null,sf:null,sid:""+c.default.generateUuid(),bs:{audio:1,video:1},cid:null,did:p}}function v(){var e={v:1};return e.sid=m.get().streaming.cmcd.sid?m.get().streaming.cmcd.sid:n.sid,e.cid=m.get().streaming.cmcd.cid?m.get().streaming.cmcd.cid:n.cid,e.did=m.get().streaming.cmcd.did?m.get().streaming.cmcd.did:n.did,e.sid='"'+e.sid+'"',e.cid='"'+e.cid+'"',e.did='"'+e.did+'"',isNaN(n.pr)||1===n.pr||null===n.pr||(e.pr=n.pr),n.st&&(e.st=n.st),n.sf&&(e.sf=n.sf),e}function _(e){try{n.pr=e.playbackRate}catch(e){}}function b(t){try{var i=e.getIsDynamic(t.data)?"l":"v",r=t.protocol&&"MSS"===t.protocol?"s":"d";n.st=i,n.sf=r}catch(t){}}function E(e){try{if(e.state&&e.mediaType){var t=null;switch(e.state){case o.default.BUFFER_LOADED:t=null;break;case o.default.BUFFER_EMPTY:h.isSeeking()&&(t=2),t=4}n.bs[e.mediaType]=t}}catch(e){}}return t={getQueryParameter:function(e){try{return m.get().streaming.cmcd&&m.get().streaming.cmcd.enabled?{key:"Common-Media-Client-Data",value:function(e){try{var t=function(){if(!e)return{v:null};var t=Object.keys(e),n=t.length;return{v:t.reduce((function(t,i,r){return t+=i+"="+e[i],r<n-1&&(t+=","),t}),"")}}();if("object"==typeof t)return t.v}catch(t){return null}}(function(e){try{return e.type===u.HTTPRequest.MPD_TYPE?(function(e){try{n.cid=""+c.default.generateHashCode(e.url)}catch(e){}}(e),function(){var e=v();return e.ot="m",e}()):e.type===u.HTTPRequest.MEDIA_SEGMENT_TYPE?function(e){var t=v(),r=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(e),o=function(e){try{return isNaN(e.duration)?null:Math.round(1e3*e.duration)}catch(e){return null}}(e),s="video"===e.mediaType?"v":"audio"===e.mediaType?"a":"fragmentedText"===e.mediaType?"c":null,l=function(e){try{return Math.round(i.getThroughputHistory().getSafeAverageThroughput(e))}catch(e){return null}}(e.mediaType),u=function(e){try{var t=n.pr,i=a.getCurrentBufferLevel(e);return isNaN(t)||isNaN(i)?null:parseInt(i/t*1e3)}catch(e){return null}}(e.mediaType),d=function(e){try{var t=e.mediaType;return null!==n.bs[t]?n.bs[t]:a.getCurrentBufferLevel(t)<e.duration?3:null}catch(e){}}(e);return r&&(t.br=r),s&&(t.ot=s),isNaN(o)||(t.d=o),isNaN(l)||(t.mtp=l),isNaN(u)||(t.dl=u),isNaN(d)||null===d||(t.bs=d),t}(e):e.type===u.HTTPRequest.INIT_SEGMENT_TYPE?function(){var e=v();return e.ot="i",e}():null}catch(e){return null}}(e))}:null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(i=e.abrController),e.dashMetrics&&(a=e.dashMetrics),e.playbackController&&(h=e.playbackController))},reset:function(){g.off(o.default.PLAYBACK_RATE_CHANGED,_,this),g.off(o.default.MANIFEST_LOADED,b,this),g.off(o.default.BUFFER_LEVEL_STATE_CHANGED,E,t),y()},initialize:function(){g.on(o.default.PLAYBACK_RATE_CHANGED,_,t),g.on(o.default.MANIFEST_LOADED,b,t),g.on(o.default.BUFFER_LEVEL_STATE_CHANGED,E,t)}},(0,s.default)(f).getInstance().getLogger(t),e=(0,d.default)(f).getInstance(),y(),t}h.__dashjs_factory_name="CmcdModel",n.default=a.default.getSingletonFactory(h),t.exports=n.default},{101:101,242:242,45:45,46:46,47:47,48:48,49:49,50:50,65:65}],150:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(228)),a="loading",s="executed";function l(e){var t,n=(e=e||{}).eventBus,i=e.events,r=e.dashMetrics,l=e.fragmentLoader,u=e.debug,d=e.streamId,c=void 0,p=void 0,h=void 0;function f(e){var t;return!!e&&(t=!1,p.some((function(n){if(l=e,u=n,!isNaN(l.index)&&l.startTime===u.startTime&&l.adaptationIndex===u.adaptationIndex&&l.type===u.type||(a=e,s=n,isNaN(a.index)&&isNaN(s.index)&&a.quality===s.quality)||(r=n,(i=e).action===o.default.ACTION_COMPLETE&&i.action===r.action))return t=!0;var i,r,a,s,l,u})),t)}function g(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function m(e){p=p.filter((function(t){var n=g(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n}))}function y(e,t){t<=e+.5||(p=p.filter((function(n){var i=g(n);return isNaN(n.startTime)||n.startTime>=t-i||isNaN(n.duration)||n.startTime+n.duration<=e+i})))}function v(e,t){r.addSchedulingInfo(e,t),r.addRequestsQueue(e.mediaType,h,p)}function _(e){e.sender===l&&(h.splice(h.indexOf(e.request),1),e.response&&!e.error&&p.push(e.request),v(e.request,e.error?"failed":s),n.trigger(i.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function b(e){e.sender===l&&n.trigger(i.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function E(e){e.sender===l&&n.trigger(i.FRAGMENT_LOADING_ABANDONED,{streamId:d,request:e.request,mediaType:e.mediaType})}function T(){p=[],h=[]}return t={getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach((function(t){var i=function(e){var t=void 0;switch(e){case a:t=h;break;case s:t=p;break;default:t=[]}return t}(t);n=n.concat(function(e,t){return t.hasOwnProperty("time")?[function(e,t,n){for(var i=e.length-1;0<=i;i--){var r=e[i],o=r.startTime,a=o+r.duration;if(n=isNaN(n)?g(r):n,!isNaN(o)&&!isNaN(a)&&o<=t+n&&t-n<a||isNaN(o)&&isNaN(t))return r}return null}(e,t.time,t.threshold)]:e.filter((function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0}))}(i,e))})),n},isFragmentLoaded:f,isFragmentLoadedOrPending:function(e){var t=!1,n=0,i=void 0;if(!(t=f(e)))for(n=0;n<h.length;n++)i=h[n],e.url===i.url&&e.startTime===i.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:m,removeExecutedRequestsAfterTime:function(e){p=p.filter((function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e}))},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,i=0,r=e.length;i<r;i++)y(n,e.start(i)),n=e.end(i);0<t&&y(n,t)}else m()},abortRequests:function(){c.debug("abort requests"),l.abort(),h=[]},executeRequest:function(e){switch(e.action){case o.default.ACTION_COMPLETE:p.push(e),v(e,s),c.debug("STREAM_COMPLETED"),n.trigger(i.STREAM_COMPLETED,{request:e});break;case o.default.ACTION_DOWNLOAD:v(e,a),h.push(e),t=e,n.trigger(i.FRAGMENT_LOADING_STARTED,{streamId:d,request:t}),l.load(t);break;default:c.warn("Unknown request action.")}var t},reset:function(){n.off(i.LOADING_COMPLETED,_,this),n.off(i.LOADING_DATA_PROGRESS,b,this),n.off(i.LOADING_ABANDONED,E,this),l&&l.reset(),T()},addExecutedRequest:function(e){p.push(e)}},c=u.getLogger(t),T(),n.on(i.LOADING_COMPLETED,_,t),n.on(i.LOADING_DATA_PROGRESS,b,t),n.on(i.LOADING_ABANDONED,E,t),t}l.__dashjs_factory_name="FragmentModel";var u=r.default.getClassFactory(l);u.FRAGMENT_MODEL_LOADING=a,u.FRAGMENT_MODEL_EXECUTED=s,u.FRAGMENT_MODEL_CANCELED="canceled",u.FRAGMENT_MODEL_FAILED="failed",r.default.updateClassFactory(l.__dashjs_factory_name,u),n.default=u,t.exports=n.default},{228:228,47:47}],151:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(46)),o=i(e(54)),a=i(e(47));function s(){var e=this.context,t=(0,r.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(o.default.MANIFEST_LOADED,{data:e})}}}s.__dashjs_factory_name="ManifestModel",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{46:46,47:47,54:54}],152:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(96)),o=i(e(47)),a=i(e(108)),s=i(e(190)),l=i(e(48)),u=e(219);function d(){var e,t=void 0,n=void 0,i=void 0,o={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"},d=this.context,c=(0,l.default)(d).getInstance();function p(e){var t=void 0;for(t=0;t<i.length;t++)if(i[t].rulename===e)return t;return-1}function h(){return c.get().streaming.lowLatencyEnabled?c.get().streaming.liveDelay||3:c.get().streaming.liveDelay}function f(e,n){g(e,n);var i=new r.default;i.schemeIdUri=e,i.value=n,t.push(i)}function g(e,n){(0,u.checkParameterType)(e,"string"),(0,u.checkParameterType)(n,"string"),t.forEach((function(i,r){i.schemeIdUri===e&&i.value===n&&t.splice(r,1)}))}return e={getABRCustomRules:function(){return i},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==s.default.ABANDON_FRAGMENT_RULES&&e!==s.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw a.default.BAD_ARGUMENT_ERROR;var r=p(t);-1===r?i.push({type:e,rulename:t,rule:n}):(i[r].type=e,i[r].rule=n)},removeABRCustomRule:function(e){var t;e?-1!==(t=p(e))&&i.splice(t,1):i=[]},getStableBufferTime:function(){if(c.get().streaming.lowLatencyEnabled)return.6*h();var e=c.get().streaming.stableBufferTime;return-1<e?e:c.get().streaming.fastSwitchEnabled?20:12},getRetryAttemptsForType:function(e){var t=isNaN(c.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:c.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return c.get().streaming.lowLatencyEnabled?c.get().streaming.retryAttempts[e]*t:c.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(c.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:c.get().streaming.retryIntervals.lowLatencyReductionFactor;return c.get().streaming.lowLatencyEnabled?c.get().streaming.retryIntervals[e]/t:c.get().streaming.retryIntervals[e]},getLiveDelay:h,getLiveCatchupLatencyThreshold:function(){try{var e=c.get().streaming.liveCatchupLatencyThreshold,t=h();if(null!==e&&!isNaN(e))return Math.max(e,t);var n=c.get().streaming.liveCatchUpMinDrift,i=!isNaN(t)&&t?isNaN(n)?h():c.get().streaming.liveCatchUpMinDrift+h():NaN;return i&&!isNaN(i)?2*i:NaN}catch(e){return NaN}},addUTCTimingSource:f,removeUTCTimingSource:g,getUTCTimingSources:function(){return t},clearDefaultUTCTimingSources:function(){t=[]},restoreDefaultUTCTimingSources:function(){f(o.scheme,o.value)},setXHRWithCredentialsForType:function e(t,i){t?n[t]=!!i:Object.keys(n).forEach((function(t){e(t,i)}))},getXHRWithCredentialsForType:function(e){var t=n[e];return void 0===t?n.default:t},getDefaultUtcTimingSource:function(){return o},reset:function(){}},n={default:!(t=[])},i=[],e}d.__dashjs_factory_name="MediaPlayerModel",n.default=o.default.getSingletonFactory(d),t.exports=n.default},{108:108,190:190,219:219,47:47,48:48,96:96}],153:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(109)),a=i(e(232)),s=e(242),l=i(e(245)),u=i(e(238)),d=i(e(239)),c=i(e(240)),p=i(e(241)),h=e(243),f=i(e(247)),g=i(e(46)),m=i(e(246)),y=i(e(54)),v=i(e(47));function _(e){var t,n=(e=e||{}).settings,i=this.context,v=(0,g.default)(i).getInstance(),_=void 0;function b(){v.trigger(y.default.METRICS_CHANGED)}function E(e){v.trigger(y.default.METRIC_CHANGED,{mediaType:e}),b()}function T(e,t,n){v.trigger(y.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),E(e)}function C(e,t,n){v.trigger(y.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),E(e)}function S(e,t){var n=null;return e&&(_.hasOwnProperty(e)?n=_[e]:t||(n=new a.default,_[e]=n)),n}function w(e,t,i){var r=S(e);null!==r&&(r[t].push(i),r[t].length>n.get().streaming.metricsMaxListDepth&&r[t].shift())}function A(e,t,n){w(e,t,n),C(e,t,n)}return t={clearCurrentMetricsForType:function(e){delete _[e],E(e)},clearAllCurrentMetrics:function(){_={},b()},getMetricsFor:S,addHttpRequest:function e(t,n,i,r,a,l,u,d,c,p,h,f,g,m,y){var v=new s.HTTPRequest;l&&l!==r&&(e(t,null,i,r,a,null,null,d,c,null,null,null,g,null,null),v.actualurl=l),v.tcpid=n,v.type=i,v.url=r,v.range=d,v.trequest=c,v.tresponse=p,v.responsecode=f,v._tfinish=h,v._stream=t,v._mediaduration=g,v._quality=a,v._responseHeaders=m,v._serviceLocation=u,y?y.forEach((function(e){var t,n,i,r,o;t=v,n=e.s,i=e.d,r=e.b,(o=new s.HTTPRequestTrace).s=n,o.d=i,o.b=r,t.trace.push(o),t.interval||(t.interval=0),t.interval+=i})):(delete v.interval,delete v.trace),A(t,o.default.HTTP_REQUEST,v)},addRepresentationSwitch:function(e,t,n,i,r){var a=new l.default;a.t=t,a.mt=n,a.to=i,r?a.lto=r:delete a.lto,A(e,o.default.TRACK_SWITCH,a)},addBufferLevel:function(e,t,n){var i=new u.default;i.t=t,i.level=n,A(e,o.default.BUFFER_LEVEL,i)},addBufferState:function(e,t,n){var i=new d.default;i.target=n,i.state=t,A(e,o.default.BUFFER_STATE,i)},addDVRInfo:function(e,t,n,i){var r=new c.default;r.time=t,r.range=i,r.manifestInfo=n,A(e,o.default.DVR_INFO,r)},addDroppedFrames:function(e,t){var n=new p.default,i=S(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<i.length&&i[i.length-1]==n||A(e,o.default.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,i,r,a,s,l,u){var d=new f.default;d.mediaType=e,d.t=t,d.type=n,d.startTime=i,d.availabilityStartTime=r,d.duration=a,d.quality=s,d.range=l,d.state=u,A(e,o.default.SCHEDULING_INFO,d)},addRequestsQueue:function(e,t,n){var i=new m.default;i.loadingRequests=t,i.executedRequests=n,S(e).RequestsQueue=i,C(e,o.default.REQUESTS_QUEUE,i)},addManifestUpdate:function(e,t,n,i,a,s,l,u,d,c){var p=new h.ManifestUpdate;p.mediaType=e,p.type=t,p.requestTime=n,p.fetchTime=i,p.availabilityStartTime=a,p.presentationStartTime=s,p.clientTimeOffset=l,p.currentTime=u,p.buffered=d,p.latency=c,w(r.default.STREAM,o.default.MANIFEST_UPDATE,p),C(e,o.default.MANIFEST_UPDATE,p)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];T(e.mediaType,o.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,i,r){var a;e&&((a=new h.ManifestUpdateStreamInfo).id=t,a.index=n,a.start=i,a.duration=r,e.streamInfo.push(a),T(e.mediaType,o.default.MANIFEST_UPDATE_STREAM_INFO,e))},addManifestUpdateRepresentationInfo:function(e,t,n,i,r,a,s,l){var u;e&&e.representationInfo&&((u=new h.ManifestUpdateRepresentationInfo).id=t,u.index=n,u.streamIndex=i,u.mediaType=r,u.startNumber=s,u.fragmentInfoType=l,u.presentationTimeOffset=a,e.representationInfo.push(u),T(e.mediaType,o.default.MANIFEST_UPDATE_TRACK_INFO,e))},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,A(r.default.STREAM,o.default.PLAY_LIST,e)},addDVBErrors:function(e){A(r.default.STREAM,o.default.DVB_ERRORS,e)}},_={},t}_.__dashjs_factory_name="MetricsModel",n.default=v.default.getSingletonFactory(_),t.exports=n.default},{108:108,109:109,232:232,238:238,239:239,240:240,241:241,242:242,243:243,245:245,246:246,247:247,46:46,47:47,54:54}],154:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(237)),o=i(e(47));function a(){var e=void 0;return{initialize:function(t){if(e=new r.default,!t)return null;var n=t.indexOf("#");if(-1!==n)for(var i=t.substr(n+1).split("&"),o=0,a=i.length;o<a;++o){var s,l=i[o],u=l.indexOf("=");-1!==u&&(s=l.substring(0,u),e.hasOwnProperty(s)&&(e[s]=l.substr(u+1)))}},getURIFragmentData:function(){return e}}}a.__dashjs_factory_name="URIFragmentModel",n.default=o.default.getSingletonFactory(a),t.exports=n.default},{237:237,47:47}],155:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(46)),a=i(e(54)),s=i(e(45));function l(){var e,t=void 0,n=void 0,i=void 0,r=void 0,l=this.context,u=(0,o.default)(l).getInstance(),d=[];function c(){n&&(n.playbackRate=r||1,n.removeEventListener("canplay",c))}function p(e){n&&(n.readyState<=2&&0<e?n.addEventListener("canplay",c):n.playbackRate=e)}function h(){return 0<d.length}function f(){var e;n&&h()&&0===n.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),n.dispatchEvent(e))}function g(){return n?n.buffered:null}function m(e,t,i,r,o){if(n)for(var a=0;a<n.textTracks.length;a++)if(n.textTracks[a].kind===e&&(!t||n.textTracks[a].label==t)&&n.textTracks[a].language===i&&n.textTracks[a].isTTML===r&&n.textTracks[a].isEmbedded===o)return n.textTracks[a];return null}return e={initialize:function(){u.on(a.default.PLAYBACK_PLAYING,f,this)},setCurrentTime:function(e,t){if(n){if(n.currentTime==e)return;try{e=t?function(e){var t=g(),n=e,i=9999999999;if(t)for(var r=0;r<t.length;r++){var o=t.start(r),a=t.end(r),s=Math.abs(o-e),l=Math.abs(a-e);if(o<=e&&e<=a)return e;s<i&&(i=s,n=o),l<i&&(i=l,n=a)}return n}(e):e,n.currentTime=e}catch(t){0===n.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout((function(){n.currentTime=e}),400)}}},play:function(){var e;n&&(n.autoplay=!0,(e=n.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch((function(e){"NotAllowedError"===e.name&&u.trigger(a.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")")})))},isPaused:function(){return n?n.paused:null},pause:function(){n&&(n.pause(),n.autoplay=!1)},isStalled:h,isSeeking:function(){return n?n.seeking:null},getTime:function(){return n?n.currentTime:null},getPlaybackRate:function(){return n?n.playbackRate:null},setPlaybackRate:p,getPlayedRanges:function(){return n?n.played:null},getEnded:function(){return n?n.ended:null},setStallState:function(e,t){(t?function(e){var t=void 0;null===e||n.seeking||-1!==d.indexOf(e)||(d.push(e),n&&1===d.length&&((t=document.createEvent("Event")).initEvent("waiting",!0,!1),r=n.playbackRate,p(0),n.dispatchEvent(t)))}:function(e){var t=d.indexOf(e),i=void 0;null!==e&&(-1!==t&&d.splice(t,1),n&&!1===h()&&0===n.playbackRate&&(p(r||1),n.paused||((i=document.createEvent("Event")).initEvent("playing",!0,!1),n.dispatchEvent(i))))})(e)},getElement:function(){return n},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(n=e)&&(n.preload="auto")},setSource:function(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))},getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return i},setTTMLRenderingDiv:function(e){(i=e).style.position="absolute",i.style.display="flex",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top=0,i.style.left=0},getPlaybackQuality:function(){if(!n)return null;var e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t=null;return"getVideoPlaybackQuality"in n?t=n.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){n&&n.addEventListener(e,t)},removeEventListener:function(e,t){n&&n.removeEventListener(e,t)},getReadyState:function(){return n?n.readyState:NaN},getBufferRange:g,getClientWidth:function(){return n?n.clientWidth:NaN},getClientHeight:function(){return n?n.clientHeight:NaN},getTextTracks:function(){return n?n.textTracks:[]},getTextTrack:m,addTextTrack:function(e,t,i,r,o){if(!n)return null;var a=m(e,t,i,r,o);return a||((a=n.addTextTrack(e,t,i)).isEmbedded=o,a.isTTML=r),a},appendChild:function(e){n&&(n.appendChild(e),void 0!==e.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){n&&n.removeChild(e)},getVideoWidth:function(){return n?n.videoWidth:NaN},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var e=n.parentNode.host||n.parentNode;return e?n.getBoundingClientRect().top-e.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var e=n.parentNode.host||n.parentNode;return e?n.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},reset:function(){u.off(a.default.PLAYBACK_PLAYING,f,this)}},t=(0,s.default)(l).getInstance().getLogger(e),e}l.__dashjs_factory_name="VideoModel",n.default=r.default.getSingletonFactory(l),t.exports=n.default},{45:45,46:46,47:47,54:54}],156:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(e){var t=(e=e||{}).requestModifier,n=e.boxParser;function i(e,t){e.reader.read().then(t).catch((function(t){e.onerror&&200===e.response.status&&e.onerror(t)}))}function r(e,t){if(1<(e=e.filter((function(n){return n.bytes>t/4/e.length}))).length){var n=(i=0,r=(e[e.length-1].ts-e[0].ts)/e.length,e.forEach((function(t,n){var o,a=e[n+1];a&&(o=a.ts-t.ts,i+=o<r?o:0)})),{v:i});if("object"==typeof n)return n.v}var i,r;return null}return{load:function(e){var o=new Date,a=e.request,s=new Headers;a.range&&s.append("Range","bytes="+a.range),a.requestStartDate||(a.requestStartDate=o),t&&t.modifyRequestHeader({setRequestHeader:function(e,t){s.append(e,t)}});var l=void 0;"function"==typeof window.AbortController&&(l=new AbortController,(e.abortController=l).signal.onabort=e.onabort);var u={method:e.method,headers:s,credentials:e.withCredentials?"include":void 0,signal:l?l.signal:void 0};fetch(e.url,u).then((function(t){e.response||(e.response={}),e.response.status=t.status,e.response.statusText=t.statusText,e.response.responseURL=t.url,t.ok||e.onerror();var o="",a=!0,s=!1,l=void 0;try{for(var u,d=t.headers.keys()[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var c=u.value;o+=c+": "+t.headers.get(c)+"\r\n"}}catch(t){s=!0,l=t}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}if(e.response.responseHeaders=o,!t.body)return t.arrayBuffer().then((function(t){var n={loaded:(e.response.response=t).byteLength,total:t.byteLength,stream:!1};e.progress(n),e.onload(),e.onend()}));var p=parseInt(t.headers.get("Content-Length"),10),h=0,f=!1,g=new Uint8Array,m=0;e.reader=t.body.getReader();var y=[];i(e,(function t(o){var a,s,l,u=o.value;if(o.done)return g&&(e.progress({loaded:h,total:isNaN(p)?h:p,lengthComputable:!0,time:r(y,h),stream:!0}),e.response.response=g.buffer),e.onload(),void e.onend();u&&0<u.length&&(g=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(g,u),h+=u.length,y.push({ts:Date.now(),bytes:u.length}),(a=n.findLastTopIsoBoxCompleted(["moov","mdat"],g,m)).found?(s=a.lastCompletedOffset+a.size,l=void 0,g=s===g.length?(l=g,new Uint8Array):(l=new Uint8Array(g.subarray(0,s)),g.subarray(s)),e.progress({data:l.buffer,lengthComputable:!1,noTrace:!0}),m=0):(m=a.lastCompletedOffset,f||(e.progress({lengthComputable:!1,noTrace:!0}),f=!0))),i(e,t)}))})).catch((function(t){e.onerror&&e.onerror(t)}))},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:r}}o.__dashjs_factory_name="FetchLoader";var a=r.default.getClassFactory(o);n.default=a,t.exports=n.default},{47:47}],157:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(160)),a=i(e(156)),s=e(242),l=i(e(47)),u=i(e(226)),d=i(e(149)),c=i(e(49));function p(e){e=e||{};var t,n,i=this.context,l=e.errHandler,p=e.dashMetrics,h=e.mediaPlayerModel,f=e.requestModifier,g=e.boxParser,m=e.useFetch||!1,y=e.errors,v=void 0,_=void 0,b=void 0,E=void 0,T=void 0;function C(e,t){var n=e.request,r=[],d=!0,y=!0,S=new Date,w=S,A=0,k=void 0;if(!f||!p||!l)throw new Error("config object is not correct or missing");function P(e){y=!1,n.requestStartDate=S,n.requestEndDate=new Date,n.firstByteDate=n.firstByteDate||S,n.checkExistenceOnly||(p.addHttpRequest(n,k.response?k.response.responseURL:null,k.response?k.response.status:null,k.response&&k.response.getAllResponseHeaders?k.response.getAllResponseHeaders():k.response?k.response.responseHeaders:[],e?r:null),n.type===s.HTTPRequest.MPD_TYPE&&p.addManifestUpdate(n.type,n.requestStartDate,n.requestEndDate))}function I(){-1!==v.indexOf(k)&&(v.splice(v.indexOf(k),1),y&&(P(!1),0<t?function(){t--;var i={config:e};b.push(i),i.timeout=setTimeout((function(){-1!==b.indexOf(i)&&(b.splice(b.indexOf(i),1),C(e,t))}),h.getRetryIntervalsForType(n.type))}():(l.error(new u.default(E[n.type],n.url+" is not available",{request:n,response:k.response})),e.error&&e.error(n,"error",k.response.statusText),e.complete&&e.complete(n,k.response.statusText))))}var L,M=void 0,R=(M=m&&window.fetch&&"arraybuffer"===n.responseType&&n.type===s.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,a.default)(i).create({requestModifier:f,boxParser:g}):(0,o.default)(i).create({requestModifier:f}),f.modifyRequestURL(n.url)),D=function(e){try{var t=[],n=T.getQueryParameter(e);return n&&t.push(n),t}catch(e){return[]}}(n),x=(k={url:R=c.default.addAditionalQueryParameterToUrl(R,D),method:n.checkExistenceOnly?s.HTTPRequest.HEAD:s.HTTPRequest.GET,withCredentials:h.getXHRWithCredentialsForType(n.type),request:n,onload:function(){200<=k.response.status&&k.response.status<=299&&(P(!0),e.success&&e.success(k.response.response,k.response.statusText,k.response.responseURL),e.complete&&e.complete(n,k.response.statusText))},onend:I,onerror:I,progress:function(t){var i=new Date;d&&(d=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(n.firstByteDate=i)),t.lengthComputable&&(n.bytesLoaded=t.loaded,n.bytesTotal=t.total),t.noTrace||(r.push({s:w,d:t.time?t.time:i.getTime()-w.getTime(),b:[t.loaded?t.loaded-A:0]}),w=i,A=t.loaded),e.progress&&t&&e.progress(t)},onabort:function(){e.abort&&e.abort(n)},loader:M},(new Date).getTime());isNaN(n.delayLoadingTime)||x>=n.delayLoadingTime?(v.push(k),M.load(k)):(L={httpRequest:k},_.push(L),L.delayTimeout=setTimeout((function(){if(-1!==_.indexOf(L)){_.splice(_.indexOf(L),1);try{S=new Date,w=S,v.push(L.httpRequest),M.load(L.httpRequest)}catch(e){L.httpRequest.onerror()}}}),n.delayLoadingTime-x))}return t={load:function(e){e.request?C(e,h.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){b.forEach((function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)})),b=[],_.forEach((function(e){return clearTimeout(e.delayTimeout)})),_=[],v.forEach((function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e)})),v=[]}},v=[],_=[],b=[],T=(0,d.default)(i).getInstance(),r(n={},s.HTTPRequest.MPD_TYPE,y.DOWNLOAD_ERROR_ID_MANIFEST_CODE),r(n,s.HTTPRequest.XLINK_EXPANSION_TYPE,y.DOWNLOAD_ERROR_ID_XLINK_CODE),r(n,s.HTTPRequest.INIT_SEGMENT_TYPE,y.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),r(n,s.HTTPRequest.MEDIA_SEGMENT_TYPE,y.DOWNLOAD_ERROR_ID_CONTENT_CODE),r(n,s.HTTPRequest.INDEX_SEGMENT_TYPE,y.DOWNLOAD_ERROR_ID_CONTENT_CODE),r(n,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,y.DOWNLOAD_ERROR_ID_CONTENT_CODE),r(n,s.HTTPRequest.OTHER_TYPE,y.DOWNLOAD_ERROR_ID_CONTENT_CODE),E=n,t}p.__dashjs_factory_name="HTTPLoader";var h=l.default.getClassFactory(p);n.default=h,t.exports=n.default},{149:149,156:156,160:160,226:226,242:242,47:47,49:49}],158:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(157));function a(){var e=void 0;function t(){e={}}function n(){t()}return n(),{getLoader:function(t){for(var n in e)if(e.hasOwnProperty(n)&&t.startsWith(n))return e[n];return o.default},registerLoader:function(t,n){e[t]=n},unregisterLoader:function(t){e[t]&&delete e[t]},unregisterAllLoader:t,reset:n}}a.__dashjs_factory_name="SchemeLoaderFactory";var s=r.default.getSingletonFactory(a);n.default=s,t.exports=n.default},{157:157,47:47}],159:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(158));function a(e){e=e||{};var t=this.context,n=void 0,i=void 0;return n=(0,o.default)(t).getInstance(),{load:function(r){var o=n.getLoader(r&&r.request?r.request.url:null);(i=o(t).create({errHandler:e.errHandler,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.useFetch||null,dashMetrics:e.dashMetrics,boxParser:e.boxParser?e.boxParser:null,constants:e.constants?e.constants:null,dashConstants:e.dashConstants?e.dashConstants:null,urlUtils:e.urlUtils?e.urlUtils:null,errors:e.errors})).load(r)},abort:function(){i&&i.abort()}}}a.__dashjs_factory_name="URLLoader";var s=r.default.getClassFactory(a);n.default=s,t.exports=n.default},{158:158,47:47}],160:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(e){var t=(e=e||{}).requestModifier;return{load:function(e){var n=new Date,i=e.request,r=new XMLHttpRequest;r.open(e.method,e.url,!0),i.responseType&&(r.responseType=i.responseType),i.range&&r.setRequestHeader("Range","bytes="+i.range),i.requestStartDate||(i.requestStartDate=n),t&&(r=t.modifyRequestHeader(r)),r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.send(),e.response=r},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}o.__dashjs_factory_name="XHRLoader";var a=r.default.getClassFactory(o);n.default=a,t.exports=n.default},{47:47}],161:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){n&&i(e,n)}(o,0,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var i=e[n];"urn:mpeg:dash:mp4protection:2011"!==i.schemeIdUri.toLowerCase()||"cenc"!==i.value.toLowerCase()&&"cbcs"!==i.value.toLowerCase()||(t=i)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),i=n.getUint8(t);return t+=20,0<i&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var n=o.parsePSSHList(t);return e&&n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},i=0;;){var r,o,a=void 0,s=i;if(i>=t.buffer.byteLength)break;if(r=i+t.getUint32(i),i+=4,1886614376===t.getUint32(i))if(i+=4,0===(o=t.getUint8(i))||1===o){i++,i+=3,a="";var l=void 0,u=void 0;for(l=0;l<4;l++)a+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=4,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,a+="-",l=0;l<6;l++)a+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;i+=6,a=a.toLowerCase(),t.getUint32(i),i+=4,n[a]=t.buffer.slice(s,r),i=r}else i=r;else i=r}return n}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=r,t.exports=n.default},{}],162:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(164)),o=i(e(165)),a=i(e(163)),s=i(e(170)),l=i(e(172)),u=i(e(173)),d=i(e(171)),c=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],p=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function h(){var e=void 0,t=this.context;function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("function"==typeof e[i[Object.keys(i)[0]]])return i}return null}return e={createProtectionSystem:function(i){var a=null,s=(0,o.default)(t).getInstance();s.setConfig({debug:i.debug,BASE64:i.BASE64}),s.initialize();var h,f,g,m,y,v,_=(g=(f=(h=i).debug).getLogger(e),m=h.eventBus,y=h.errHandler,(v=h.videoModel?h.videoModel.getElement():null)&&void 0===v.onencrypted||v&&void 0===v.mediaKeys?n(v,p)?(g.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,u.default)(t).create({debug:f,eventBus:m,events:h.events,api:n(v,p)})):n(v,c)?(g.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,d.default)(t).create({debug:f,eventBus:m,errHandler:y,events:h.events,api:n(v,c)})):(g.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(g.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,l.default)(t).create({debug:f,eventBus:m,events:h.events})));return!a&&_&&(a=(0,r.default)(t).create({protectionModel:_,protectionKeyController:s,eventBus:i.eventBus,debug:i.debug,events:i.events,BASE64:i.BASE64,constants:i.constants}),i.capabilities.setEncryptedMediaSupported(!0)),a}}}h.__dashjs_factory_name="Protection";var f=dashjs.FactoryMaker.getClassFactory(h);f.events=a.default,f.errors=s.default,dashjs.FactoryMaker.updateClassFactory(h.__dashjs_factory_name,f),n.default=f,t.exports=n.default},{163:163,164:164,165:165,170:170,171:171,172:172,173:173}],163:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,((i=e(55))&&i.__esModule?i:{default:i}).default),r);n.default=o,t.exports=n.default},{55:55}],164:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(161)),o=i(e(183)),a=i(e(182)),s=i(e(170)),l=i(e(226));function u(e){var t,n=(e=e||{}).protectionKeyController,i=e.protectionModel,u=e.eventBus,d=e.events,c=e.debug,p=e.BASE64,h=e.constants,f=[],g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,E=void 0;function T(){if(!(u&&u.hasOwnProperty("on")&&n&&n.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function C(e,t){var o=r.default.getPSSHForKeySystem(E,e),a=A(E);if(o){for(var c=i.getAllInitData(),p=0;p<c.length;p++)if(n.initDataEquals(o,c[p]))return void g.warn("DRM: Ignoring initData because we have already seen it!");try{i.createKeySession(o,a,P(E),t)}catch(e){u.trigger(d.KEY_SESSION_CREATED,{data:null,error:new l.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e?i.createKeySession(e,a,P(E),t):u.trigger(d.KEY_SESSION_CREATED,{data:null,error:new l.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(E?E.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function S(e,t){T(),i.loadKeySession(e,t,P(E))}function w(e){T(),e?(i.setMediaElement(e),u.on(d.NEED_KEY,D,this)):null===e&&(i.setMediaElement(e),u.off(d.NEED_KEY,D,this))}function A(e){var t,n=null;return e&&(t=e.systemString,v&&(n=t in v?v[t]:null)),n}function k(e){var t=A(e),n=[],i=[],r=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:b,s=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:b,l=P(e),u=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",d=t&&t.persistentState?t.persistentState:"temporary"===l?"optional":"required";return y.forEach((function(e){e.type===h.AUDIO?n.push(new o.default(e.codec,r)):e.type===h.VIDEO&&i.push(new o.default(e.codec,s))})),new a.default(n,i,u,d,[l])}function P(e){var t=A(e);return t&&t.sessionType?t.sessionType:_}function I(e,t){var r=this,o=[];e=e.sort((function(t,n){return(v&&v[t.ks.systemString]&&0<=v[t.ks.systemString].priority?v[t.ks.systemString].priority:e.length)-(v&&v[n.ks.systemString]&&0<=v[n.ks.systemString].priority?v[n.ks.systemString].priority:e.length)}));var a,c=void 0;if(E)for(c=0;c<e.length&&(E!==e[c].ks||"break"!=(o.push({ks:e[c].ks,configs:[k(E)]}),u.on(d.KEY_SYSTEM_ACCESS_COMPLETE,(function i(o){var a,p;u.off(d.KEY_SYSTEM_ACCESS_COMPLETE,i,r),o.error?t||u.trigger(d.KEY_SYSTEM_SELECTED,{error:new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+o.error)}):(g.info("DRM: KeySystem Access Granted"),u.trigger(d.KEY_SYSTEM_SELECTED,{data:o.data}),a=A(E),n.isClearKey(E)&&a&&a.hasOwnProperty("clearkeys")&&(p={kids:Object.keys(a.clearkeys)},e[c].initData=(new TextEncoder).encode(JSON.stringify(p))),e[c].sessionId?S(e[c].sessionId,e[c].initData):e[c].initData&&C(e[c].initData,e[c].cdmData))}),r),i.requestKeySystemAccess(o),"break"));c++);else void 0===E?function(){E=null,m.push(e);for(var h=0;h<e.length;h++)o.push({ks:e[h].ks,configs:[k(e[h].ks)]});function f(e){u.off(d.KEY_SYSTEM_ACCESS_COMPLETE,f,r),e.error?(E=void 0,u.off(d.INTERNAL_KEY_SYSTEM_SELECTED,a,r),t||u.trigger(d.KEY_SYSTEM_SELECTED,{data:null,error:new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(y=e.data,g.info("DRM: KeySystem Access Granted ("+y.keySystem.systemString+")!  Selecting key system..."),i.selectKeySystem(y))}var y=void 0;a=function e(o){if(u.off(d.INTERNAL_KEY_SYSTEM_SELECTED,e,r),u.off(d.KEY_SYSTEM_ACCESS_COMPLETE,f,r),o.error)E=void 0,t||u.trigger(d.KEY_SYSTEM_SELECTED,{data:null,error:new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+o.error)});else{if(!i)return;E=i.getKeySystem(),u.trigger(d.KEY_SYSTEM_SELECTED,{data:y});var a=A(E);a&&a.serverCertificate&&0<a.serverCertificate.length&&i.setServerCertificate(p.decodeArray(a.serverCertificate).buffer);for(var h,g=0;g<m.length;g++)for(c=0;c<m[g].length;c++)if(E===m[g][c].ks){n.isClearKey(E)&&a&&a.hasOwnProperty("clearkeys")&&(h={kids:Object.keys(a.clearkeys)},m[g][c].initData=(new TextEncoder).encode(JSON.stringify(h))),m[g][c].sessionId?S(m[g][c].sessionId,m[g][c].initData):null!==m[g][c].initData&&C(m[g][c].initData,m[g][c].cdmData);break}}},u.on(d.INTERNAL_KEY_SYSTEM_SELECTED,a,r),u.on(d.KEY_SYSTEM_ACCESS_COMPLETE,f,r),i.requestKeySystemAccess(o)}():m.push(e)}function L(e,t){u.trigger(d.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function M(e){e.error?u.trigger(d.KEY_STATUSES_CHANGED,{data:null,error:e.error}):g.debug("DRM: key status = "+e.status)}function R(e){g.debug("DRM: onKeyMessage");var t=e.data;u.trigger(d.KEY_MESSAGE,{data:t});var o=t.messageType?t.messageType:"license-request",a=t.message,c=t.sessionToken,p=A(E),h=E?E.systemString:null,f=n.getLicenseServer(E,p,o),m={sessionToken:c,messageType:o};if(a&&0!==a.byteLength){if(!f)return g.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+c.getSessionID()),void L(m);if(n.isClearKey(E)){var v=n.processClearKeyLicenseRequest(E,p,a);if(v)return g.debug("DRM: ClearKey license request handled by application!"),L(m),void i.updateKeySession(c,v)}var _,b,T,C,S,w,k,P,I,M,R=null;p&&p.serverURL?"string"==typeof(_=p.serverURL)&&""!==_?R=_:"object"==typeof _&&_.hasOwnProperty(o)&&(R=_[o]):R=p&&p.laURL&&""!==p.laURL?p.laURL:n.isClearKey(E)?E.getLicenseServerUrlFromMediaInfo(y):(b=r.default.getPSSHData(c.initData),(R=E.getLicenseServerURLFromInitData(b))||e.data.laURL),(R=f.getServerURLFromMessage(R,a,o))?(C=!(T={}),S=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(C=!0),T[t]=e[t]},p&&S(p.httpRequestHeaders),S(E.getRequestHeadersFromMessage(a)),p&&"boolean"==typeof p.withCredentials&&(C=p.withCredentials),w=function(e,t,n,i){var r=e.response?f.getErrorResponse(e.response,n,i):"NONE";L(t,new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+r))},k=E.getLicenseRequestFromMessage(a),P=f.getHTTPMethod(o),I=f.getResponseType(h,o),M=p&&!isNaN(p.httpTimeout)?p.httpTimeout:8e3,function e(t,n,i,r,o,a,s,l,u,d,c){var p=new XMLHttpRequest;for(var h in p.open(i,t,!0),p.responseType=r,p.withCredentials=o,0<l&&(p.timeout=l),n)p.setRequestHeader(h,n[h]);var f=function(){s--,setTimeout((function(){e(t,n,i,r,o,a,s,l,u,d,c)}),1e3)};p.onload=function(){200===this.status||s<=0?u(this):(g.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+s),f())},p.ontimeout=p.onerror=function(){s<=0?c(this):(g.warn("License request network request failed . Retrying it... Pending retries: "+s),f())},p.onabort=function(){d(this)},p.send(a)}(R,T,P,I,C,k,3,M,(function(e){var t;i&&(200===e.status&&null!==(t=f.getLicenseMessage(e.response,h,o))?(L(m),i.updateKeySession(c,t)):w(e,m,h,o))}),(function(e){L(m,new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+h+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))}),(function(e){L(m,new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+h+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))}))):L(m,new l.default(s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else L(m,new l.default(s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function D(e,t){if(g.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===y.length&&(g.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))f.push(setTimeout((function(){D(e,t)}),500));else{var o=e.key.initData;if(ArrayBuffer.isView(o)&&(o=o.buffer),E){var a=r.default.getPSSHForKeySystem(E,o);if(a)for(var s=i.getAllInitData(),l=0;l<s.length;l++)if(n.initDataEquals(a,s[l]))return void g.warn("DRM: Ignoring initData because we have already seen it!")}g.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(o)));var u=n.getSupportedKeySystems(o,v);0!==u.length?I(u,!1):g.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else g.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");T(),u.on(d.INTERNAL_KEY_MESSAGE,R,this),u.on(d.INTERNAL_KEY_STATUS_CHANGED,M,this),y.push(e);var t=n.getSupportedKeySystemsFromContentProtection(e.contentProtection);t&&0<t.length&&I(t,!0)},createKeySession:C,loadKeySession:S,removeKeySession:function(e){T(),i.removeKeySession(e)},closeKeySession:function(e){T(),i.closeKeySession(e)},setServerCertificate:function(e){T(),i.setServerCertificate(e)},setMediaElement:w,setSessionType:function(e){_=e},setRobustnessLevel:function(e){b=e},setProtectionData:function(e){v=e,n.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return T(),n.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return n?n.getKeySystems():[]},setKeySystems:function(e){n&&n.setKeySystems(e)},stop:function(){i&&i.stop()},reset:function(){T(),u.off(d.INTERNAL_KEY_MESSAGE,R,this),u.off(d.INTERNAL_KEY_STATUS_CHANGED,M,this),w(null),E=void 0,i&&(i.reset(),i=null),f.forEach((function(e){return clearTimeout(e)})),f=[],y=[]}},g=c.getLogger(t),m=[],y=[],_="temporary",b="",t}u.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(u),t.exports=n.default},{161:161,170:170,182:182,183:183,226:226}],165:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(161)),o=i(e(166)),a=i(e(168)),s=i(e(169)),l=i(e(167)),u=i(e(175)),d=i(e(176)),c=i(e(177)),p=i(e(174)),h=i(e(110));function f(){var e=this.context,t=void 0,n=void 0,i=void 0,f=void 0,g=void 0,m=void 0,y=void 0;return t={initialize:function(){f=[];var t=void 0;t=(0,l.default)(e).getInstance({BASE64:g});f.push(t),t=(0,s.default)(e).getInstance({BASE64:g}),f.push(t),t=(0,o.default)(e).getInstance({BASE64:g}),f.push(t),m=t,t=(0,a.default)(e).getInstance({BASE64:g,debug:n}),f.push(t),y=t},setProtectionData:function(e){for(var t,n,i=0;i<f.length;i++){var r=f[i];r.hasOwnProperty("init")&&r.init((t=r.systemString,n=void 0,n=null,e&&(n=t in e?e[t]:null),n))}},isClearKey:function(e){return e===m||e===y},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),i=new Uint8Array(t),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0},getKeySystems:function(){return f},setKeySystems:function(e){f=e},getKeySystemBySystemString:function(e){for(var t=0;t<f.length;t++)if(f[t].systemString===e)return f[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,i=void 0,o=void 0,a=[];if(e){var s,l=r.default.findCencContentProtection(e);for(i=0;i<f.length;++i)for(n=f[i],o=0;o<e.length;++o)(t=e[o]).schemeIdUri.toLowerCase()===n.schemeIdURI&&(s=n.getInitData(t,l),a.push({ks:f[i],initData:s,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)}))}return a},getSupportedKeySystems:function(e,t){for(var n=[],i=r.default.parsePSSHList(e),o=void 0,a=void 0,s=void 0,l=0;l<f.length;++l)a=(o=f[l]).systemString,s=!t||a in t,o.uuid in i&&s&&n.push({ks:o,initData:i[o.uuid],cdmData:o.getCDMData(),sessionId:o.getSessionId()});return n},getLicenseServer:function(t,n,i){if("license-release"===i||"individualization-request"===i)return null;var r=null;return n&&n.hasOwnProperty("drmtoday")?r=(0,u.default)(e).getInstance({BASE64:g}):t.systemString===h.default.WIDEVINE_KEYSTEM_STRING?r=(0,c.default)(e).getInstance():t.systemString===h.default.PLAYREADY_KEYSTEM_STRING?r=(0,d.default)(e).getInstance():t.systemString===h.default.CLEARKEY_KEYSTEM_STRING&&(r=(0,p.default)(e).getInstance()),r},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return i.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,i=n.getLogger(t)),e.BASE64&&(g=e.BASE64))}}}f.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(f),t.exports=n.default},{110:110,161:161,166:166,167:167,168:168,169:169,174:174,175:175,176:176,177:177}],166:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(180)),o=i(e(178)),a=i(e(161)),s=i(e(110)),l="e2719d58-a985-b3c9-781a-b030af78d30e",u=s.default.CLEARKEY_KEYSTEM_STRING,d="urn:uuid:"+l;function c(e){var t=(e=e||{}).BASE64,n={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};return{uuid:l,schemeIdURI:d,systemString:u,getInitData:function(e,n){try{var i,r=a.default.parseInitDataFromContentProtection(e,t);return!r&&n&&(i={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""))).replace(/=/g,"")}catch(e){return null}}(n["cenc:default_KID"])]},r=(new TextEncoder).encode(JSON.stringify(i))),r}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e)))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getLicenseServerUrlFromMediaInfo:function(e){try{if(!e||0===e.length)return null;for(var t=0,i=null;t<e.length&&!i;){var r=e[t];if(r&&r.contentProtection&&0<r.contentProtection.length){var o=r.contentProtection.filter((function(e){return e.schemeIdUri&&e.schemeIdUri===d}));if(o&&0<o.length)for(var a=0;a<o.length&&!i;){for(var s=o[a],l=0;l<n.attributes.length&&!i;){for(var u=0,c=n.attributes[l];u<n.prefixes.length&&!i;){var p=n.prefixes[u];s[c]&&s[c].__prefix&&s[c].__prefix===p&&s[c].__text&&(i=s[c].__text),u+=1}l+=1}a+=1}}t+=1}return i}catch(e){return null}},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),a=[],s=0;s<i.kids.length;s++){var l=i.kids[s],u=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!u)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");a.push(new r.default(l,u))}n=new o.default(a)}return n}}}c.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(c),t.exports=n.default},{110:110,161:161,178:178,180:180}],167:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(161)),o=i(e(110)),a=o.default.PLAYREADY_KEYSTEM_STRING,s=void 0;function l(e){var t="utf-16",n=(e=e||{}).BASE64;function i(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:"9a04f079-9840-4286-ab92-e65be0885f95",schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:a,getInitData:function(e){var t,o,a,s=new Uint8Array([112,115,115,104,0,0,0,0]),l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=0,d=null,c=void 0,p=void 0;if(i(),!e)return null;if("pssh"in e)return r.default.parseInitDataFromContentProtection(e,n);if("pro"in e)d=n.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;d=n.decodeArray(e.prheader.__text)}return t=d.length,o=4+s.length+l.length+4+t,a=new ArrayBuffer(o),c=new Uint8Array(a),(p=new DataView(a)).setUint32(u,o),u+=4,c.set(s,u),u+=s.length,c.set(l,u),u+=l.length,p.setUint32(u,t),u+=4,c.set(d,u),u+=t,c.buffer},getRequestHeadersFromMessage:function(e){for(var n=void 0,i={},r=new DOMParser,o=new("utf-16"===t?Uint16Array:Uint8Array)(e),a=String.fromCharCode.apply(null,o),s=(n=r.parseFromString(a,"application/xml")).getElementsByTagName("name"),l=n.getElementsByTagName("value"),u=0;u<s.length;u++)i[s[u].childNodes[0].nodeValue]=l[u].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i.hasOwnProperty("Content-Type")||(i["Content-Type"]="text/xml; charset=utf-8"),i},getLicenseRequestFromMessage:function(e){var r=null,o=new DOMParser,a=new("utf-16"===t?Uint16Array:Uint8Array)(e);i();var s=String.fromCharCode.apply(null,a),l=o.parseFromString(s,"application/xml");if(!l.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var u=l.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return u&&(r=n.decode(u)),r},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),i=6,r=new DOMParser,o=0;o<n;o++){var a=t.getUint16(i,!0);i+=2;var s=t.getUint16(i,!0);if(i+=2,1===a){var l=e.slice(i,i+s),u=String.fromCharCode.apply(null,new Uint16Array(l)),d=r.parseFromString(u,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var c=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(c)return c}if(d.getElementsByTagName("LUI_URL")[0]){var p=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(p)return p}}else i+=s}return null},getCDMData:function(){var e=void 0,t=void 0,r=void 0,o=void 0;if(i(),s&&s.cdmData){for(e=[],o=0;o<s.cdmData.length;++o)e.push(s.cdmData.charCodeAt(o)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=n.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),r=[],o=0;o<t.length;++o)r.push(t.charCodeAt(o)),r.push(0);return new Uint8Array(r).buffer}return null},getSessionId:function(e){return s&&s.sessionId?s.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');t=e},init:function(e){e&&(s=e)}}}l.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(l),t.exports=n.default},{110:110,161:161}],168:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(180)),o=i(e(178)),a=i(e(161)),s=i(e(110)),l=s.default.CLEARKEY_KEYSTEM_STRING;function u(e){var t=void 0,n=e.BASE64,i=e.debug.getLogger(t);return{uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:l,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],l=0;l<a.kids.length;l++){var u=a.kids[l],d=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!d)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");s.push(new r.default(u,d))}n=new o.default(s),i.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}u.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default},{110:110,161:161,178:178,180:180}],169:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(161)),o=i(e(110)),a=o.default.WIDEVINE_KEYSTEM_STRING;function s(e){var t=null,n=(e=e||{}).BASE64;return{uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:a,init:function(e){e&&(t=e)},getInitData:function(e){return r.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}s.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{110:110,161:161}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,((i=e(52))&&i.__esModule?i:{default:i}).default),r);n.default=o,t.exports=n.default},{52:52}],171:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(165)),o=i(e(184)),a=i(e(226)),s=i(e(179)),l=i(e(182)),u=i(e(181)),d=i(e(170));function c(e){e=e||{};var t,n=this.context,i=e.eventBus,c=e.events,p=e.debug,h=e.api,f=e.errHandler,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,E=void 0,T=void 0;function C(){m&&A();for(var e=0;e<b.length;e++)S(b[e]);i.trigger(c.TEARDOWN_COMPLETE)}function S(e){try{m[h.cancelKeyRequest](y.systemString,e.sessionID)}catch(t){i.trigger(c.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionID+") "+t.message})}}function w(e,t){if(t&&e){for(var n=e.length,i=0;i<n;i++)if(e[i].sessionID==t)return e[i];return null}return null}function A(){m.removeEventListener(h.keyerror,T),m.removeEventListener(h.needkey,T),m.removeEventListener(h.keymessage,T),m.removeEventListener(h.keyadded,T)}return t={getAllInitData:function(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);for(t=0;t<b.length;t++)e.push(b[t].initData);return e},requestKeySystemAccess:function(e){for(var t=(t=m)||document.createElement("video"),n=!1,r=0;r<e.length;r++)for(var o=e[r].ks.systemString,a=e[r].configs,s=null,d=0;d<a.length;d++){var p=a[d].videoCapabilities;if(p&&0!==p.length){s=[];for(var h=0;h<p.length;h++)""!==t.canPlayType(p[h].contentType,o)&&s.push(p[h])}if(s&&(!s||0!==s.length)){n=!0;var f=new l.default(null,s),g=v.getKeySystemBySystemString(o);i.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:new u.default(g,f)});break}}n||i.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return y},selectKeySystem:function(e){y=e.keySystem,i.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(m!==e){if(m){A();for(var t=0;t<b.length;t++)S(b[t]);b=[]}(m=e)&&(m.addEventListener(h.keyerror,T),m.addEventListener(h.needkey,T),m.addEventListener(h.keymessage,T),m.addEventListener(h.keyadded,T),i.trigger(c.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!y)throw new Error("Can not create sessions until you have selected a key system");if(E||0===b.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return _.push(t),m[h.generateKeyRequest](y.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(v.isClearKey(y))for(var i=0;i<t.keyPairs.length;i++)m[h.addKey](y.systemString,t.keyPairs[i].key,t.keyPairs[i].keyID,n);else m[h.addKey](y.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:S,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:C,reset:C},g=p.getLogger(t),_=[],b=[],v=(y=m=null,r.default)(n).getInstance(),T={handleEvent:function(e){var t,n=null;switch(e.type){case h.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;i.trigger(c.NEED_KEY,{key:new o.default(r,"cenc")});break;case h.keyerror:if(n=(n=w(b,e.sessionId))||w(_,e.sessionId)){var l=d.default.MEDIA_KEYERR_CODE,u="";switch(e.errorCode.code){case 1:l=d.default.MEDIA_KEYERR_UNKNOWN_CODE,u+="MEDIA_KEYERR_UNKNOWN - "+d.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:l=d.default.MEDIA_KEYERR_CLIENT_CODE,u+="MEDIA_KEYERR_CLIENT - "+d.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:l=d.default.MEDIA_KEYERR_SERVICE_CODE,u+="MEDIA_KEYERR_SERVICE - "+d.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:l=d.default.MEDIA_KEYERR_OUTPUT_CODE,u+="MEDIA_KEYERR_OUTPUT - "+d.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:l=d.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,u+="MEDIA_KEYERR_HARDWARECHANGE - "+d.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:l=d.default.MEDIA_KEYERR_DOMAIN_CODE,u+="MEDIA_KEYERR_DOMAIN - "+d.default.MEDIA_KEYERR_DOMAIN_MESSAGE}u+="  System Code = "+e.systemCode,i.trigger(c.KEY_ERROR,{data:new a.default(l,u,n)})}else g.error("No session token found for key error");break;case h.keyadded:(n=(n=w(b,e.sessionId))||w(_,e.sessionId))?(g.debug("DRM: Key added."),i.trigger(c.KEY_ADDED,{data:n})):g.debug("No session token found for key added");break;case h.keymessage:(E=null!==e.sessionId&&void 0!==e.sessionId)?!(n=w(b,e.sessionId))&&0<_.length&&(n=_.shift(),b.push(n),n.sessionID=e.sessionId,i.trigger(c.KEY_SESSION_CREATED,{data:n})):0<_.length&&(n=_.shift(),b.push(n),0!==_.length&&f.error(new a.default(d.default.MEDIA_KEY_MESSAGE_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),n?(t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,n.keyMessage=t,i.trigger(c.INTERNAL_KEY_MESSAGE,{data:new s.default(n,t,e.defaultURL)})):g.warn("No session token found for key message")}}},t}c.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(c),t.exports=n.default},{165:165,170:170,179:179,181:181,182:182,184:184,226:226}],172:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(165)),o=i(e(184)),a=i(e(170)),s=i(e(226)),l=i(e(179)),u=i(e(181)),d=i(e(110));function c(e){e=e||{};var t,n=this.context,i=e.eventBus,c=e.events,p=e.debug,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0;function b(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function E(e){for(var t=0;t<y.length;t++)if(y[t]===e){y.splice(t,1);break}}function T(e){var t=void 0,n=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function C(e,t,n,r){var o={session:e,initData:t,sessionId:r,handleEvent:function(e){switch(e.type){case"keystatuseschange":i.trigger(c.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach((function(){var e=T(arguments);if("expired"===e.status)i.trigger(c.INTERNAL_KEY_STATUS_CHANGED,{error:new s.default(a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});else i.trigger(c.INTERNAL_KEY_STATUS_CHANGED,e)}));break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;i.trigger(c.INTERNAL_KEY_MESSAGE,{data:new l.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach((function(){"usable"===T(arguments).status&&(t=!0)})),t},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",o),e.addEventListener("message",o),e.closed.then((function(){E(o),h.debug("DRM: Session closed.  SessionID = "+o.getSessionID()),i.trigger(c.KEY_SESSION_CLOSED,{data:o.getSessionID()})})),y.push(o),o}return t={getAllInitData:function(){for(var e=[],t=0;t<y.length;t++)y[t].initData&&e.push(y[t].initData);return e},requestKeySystemAccess:function(e){!function e(t,n){void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?function(n){var r=t[n].ks,o=t[n].configs,a=r.systemString;a===d.default.PLAYREADY_KEYSTEM_STRING&&"required"===o[0].persistentState&&(a+=".recommendation"),navigator.requestMediaKeySystemAccess(a,o).then((function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new u.default(r,t);n.mksa=e,i.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:n})})).catch((function(r){++n<t.length?e(t,n):i.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+r.message})}))}(n):i.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"})}(e,0)},getKeySystem:function(){return f},selectKeySystem:function(e){e.mksa.createMediaKeys().then((function(t){f=e.keySystem,m=t,g?g.setMediaKeys(m).then((function(){i.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)})):i.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)})).catch((function(){i.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))},setMediaElement:function(e){g!==e&&(g&&(g.removeEventListener("encrypted",v),g.setMediaKeys&&g.setMediaKeys(null)),(g=e)&&(g.addEventListener("encrypted",v),g.setMediaKeys&&m&&g.setMediaKeys(m)))},setServerCertificate:function(e){if(!f||!m)throw new Error("Can not set server certificate until you have selected a key system");m.setServerCertificate(e).then((function(){h.info("DRM: License server certificate successfully updated."),i.trigger(c.SERVER_CERTIFICATE_UPDATED)})).catch((function(e){i.trigger(c.SERVER_CERTIFICATE_UPDATED,{error:new s.default(a.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,a.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})}))},createKeySession:function(e,t,n){if(!f||!m)throw new Error("Can not create sessions until you have selected a key system");var r=m.createSession(n),o=C(r,e,n),l=this.getKeySystem().systemString===d.default.CLEARKEY_KEYSTEM_STRING&&(e||t&&t.clearkeys)?"keyids":"cenc";r.generateRequest(l,e).then((function(){h.debug("DRM: Session created.  SessionID = "+o.getSessionID()),i.trigger(c.KEY_SESSION_CREATED,{data:o})})).catch((function(e){E(o),i.trigger(c.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})}))},updateKeySession:function(e,t){var n=e.session;_.isClearKey(f)&&(t=t.toJWK()),n.update(t).catch((function(t){i.trigger(c.KEY_ERROR,{data:new s.default(a.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})}))},loadKeySession:function(e,t,n){if(!f||!m)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<y.length;r++)if(e===y[r].sessionId)return void h.warn("DRM: Ignoring session ID because we have already seen it!");var o=m.createSession(n),l=C(o,t,n,e);o.load(e).then((function(t){t?(h.debug("DRM: Session loaded.  SessionID = "+l.getSessionID()),i.trigger(c.KEY_SESSION_CREATED,{data:l})):(E(l),i.trigger(c.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))})).catch((function(t){E(l),i.trigger(c.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})}))},removeKeySession:function(e){e.session.remove().then((function(){h.debug("DRM: Session removed.  SessionID = "+e.getSessionID()),i.trigger(c.KEY_SESSION_REMOVED,{data:e.getSessionID()})}),(function(t){i.trigger(c.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})}))},closeKeySession:function(e){b(e).catch((function(t){E(e),i.trigger(c.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})}))},stop:function(){for(var e=void 0,t=0;t<y.length;t++)(e=y[t]).getUsable()||b(e).catch((function(){E(e)}))},reset:function(){var e=y.length,t=void 0;0!==e?function(){for(var n=function(e){E(e),0===y.length&&(g?(g.removeEventListener("encrypted",v),g.setMediaKeys(null).then((function(){i.trigger(c.TEARDOWN_COMPLETE)}))):i.trigger(c.TEARDOWN_COMPLETE))},r=0;r<e;r++)!function(e){t.session.closed.then((function(){n(e)})),b(t).catch((function(){n(e)}))}(t=y[r])}():i.trigger(c.TEARDOWN_COMPLETE)}},h=p.getLogger(t),y=[],_=(m=g=f=null,r.default)(n).getInstance(),v={handleEvent:function(e){var t;"encrypted"===e.type&&(e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,i.trigger(c.NEED_KEY,{key:new o.default(t,e.initDataType)})))}},t}c.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(c),t.exports=n.default},{110:110,165:165,170:170,179:179,181:181,184:184,226:226}],173:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(165)),o=i(e(184)),a=i(e(226)),s=i(e(170)),l=i(e(179)),u=i(e(182)),d=i(e(181));function c(e){e=e||{};var t,n=this.context,i=e.eventBus,c=e.events,p=e.debug,h=e.api,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,E=void 0;function T(){try{for(var e=0;e<_.length;e++)C(_[e]);g&&g.removeEventListener(h.needkey,b),i.trigger(c.TEARDOWN_COMPLETE)}catch(e){i.trigger(c.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function C(e){var t=e.session;t.removeEventListener(h.error,e),t.removeEventListener(h.message,e),t.removeEventListener(h.ready,e),t.removeEventListener(h.close,e);for(var n=0;n<_.length;n++)if(_[n]===e){_.splice(n,1);break}t[h.release]()}function S(){function e(){g.removeEventListener("loadedmetadata",t),g[h.setMediaKeys](y),i.trigger(c.VIDEO_ELEMENT_SELECTED)}var t=null;1<=g.readyState?e():(t=e.bind(this),g.addEventListener("loadedmetadata",t))}return t={getAllInitData:function(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,o=e[n].configs,a=null,s=null,l=0;l<o.length;l++){var p=o[l].audioCapabilities,f=o[l].videoCapabilities;if(p&&0!==p.length){a=[];for(var g=0;g<p.length;g++)window[h.MediaKeys].isTypeSupported(r,p[g].contentType)&&a.push(p[g])}if(f&&0!==f.length){s=[];for(var m=0;m<f.length;m++)window[h.MediaKeys].isTypeSupported(r,f[m].contentType)&&s.push(f[m])}if(!(!a&&!s||a&&0===a.length||s&&0===s.length)){t=!0;var y=new u.default(a,s),v=E.getKeySystemBySystemString(r);i.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:new d.default(v,y)});break}}t||i.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return m},selectKeySystem:function(e){try{y=e.mediaKeys=new window[h.MediaKeys](e.keySystem.systemString),m=e.keySystem,v=e,g&&S(),i.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){i.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+m.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){g!==e&&(g&&g.removeEventListener(h.needkey,b),(g=e)&&(g.addEventListener(h.needkey,b),y&&S()))},createKeySession:function(e,t,n,r){if(!m||!y||!v)throw new Error("Can not create sessions until you have selected a key system");var o=null;if(v.ksConfiguration.videoCapabilities&&0<v.ksConfiguration.videoCapabilities.length&&(o=v.ksConfiguration.videoCapabilities[0]),null===o&&v.ksConfiguration.audioCapabilities&&0<v.ksConfiguration.audioCapabilities.length&&(o=v.ksConfiguration.audioCapabilities[0]),null===o)throw new Error("Can not create sessions for unknown content types.");var u=o.contentType,d=y.createSession(u,new Uint8Array(e),r?new Uint8Array(r):null),p={session:d,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case h.error:i.trigger(c.KEY_ERROR,{data:new a.default(s.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case h.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;i.trigger(c.INTERNAL_KEY_MESSAGE,{data:new l.default(this,t,e.destinationURL)});break;case h.ready:f.debug("DRM: Key added."),i.trigger(c.KEY_ADDED);break;case h.close:f.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),i.trigger(c.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}};d.addEventListener(h.error,p),d.addEventListener(h.message,p),d.addEventListener(h.ready,p),d.addEventListener(h.close,p),_.push(p),f.debug("DRM: Session created.  SessionID = "+p.getSessionID()),i.trigger(c.KEY_SESSION_CREATED,{data:p})},updateKeySession:function(e,t){var n=e.session;E.isClearKey(m)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:C,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:T,reset:T},f=p.getLogger(t),_=[],E=(v=y=m=g=null,r.default)(n).getInstance(),b={handleEvent:function(e){var t;e.type===h.needkey&&(e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,i.trigger(c.NEED_KEY,{key:new o.default(t,"cenc")})))}},t}c.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(c),t.exports=n.default},{165:165,170:170,179:179,181:181,182:182,184:184,226:226}],174:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(180)),o=i(e(178));function a(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var i=e.keys[n],a=i.kid.replace(/=/g,""),s=i.k.replace(/=/g,"");t.push(new r.default(a,s))}return new o.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}a.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default},{178:178,180:180}],175:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(110))&&i.__esModule?i:{default:i};function o(e){var t=(e=e||{}).BASE64,n={};return n[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,i){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[i].getLicenseMessage(e)},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}o.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{110:110}],176:[function(e,t,n){"use strict";function i(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(n){return function(n){if(window.DOMParser){var i=t(n),r=(new window.DOMParser).parseFromString(i,"text/xml"),o=r?r.getElementsByTagNameNS(e,"Envelope")[0]:null,a=o?o.getElementsByTagNameNS(e,"Body")[0]:null;if(a&&a.getElementsByTagNameNS(e,"Fault")[0])return null}return n}.call(this,n)},getErrorResponse:function(n){return function(n){var i="",r="",o="",a=-1,s=-1;if(window.DOMParser){var l=t(n),u=(new window.DOMParser).parseFromString(l,"text/xml"),d=u?u.getElementsByTagNameNS(e,"Envelope")[0]:null,c=d?d.getElementsByTagNameNS(e,"Body")[0]:null,p=c?c.getElementsByTagNameNS(e,"Fault")[0]:null,h=p?p.getElementsByTagName("detail")[0]:null,f=h?h.getElementsByTagName("Exception")[0]:null,g=null;if(null===p)return l;i=(g=p.getElementsByTagName("faultstring")[0].firstChild)?g.nodeValue:null,null!==f&&(r=(g=f.getElementsByTagName("StatusCode")[0])?g.firstChild.nodeValue:null,a=(o=(g=f.getElementsByTagName("Message")[0])?g.firstChild.nodeValue:null)?o.lastIndexOf("[")+1:-1,s=o?o.indexOf("]"):-1,o=o?o.substring(a,s):"")}var m="code: "+r+", name: "+i;return o&&(m+=", message: "+o),m}.call(this,n)}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],177:[function(e,t,n){"use strict";function i(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],178:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){t&&i(e.prototype,t)}(o,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var i={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(i)}this.type&&(n.type=this.type);var r=JSON.stringify(n),o=r.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;e<o;e++)s[e]=r.charCodeAt(e);return a}}]),o);function o(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}n.default=r,t.exports=n.default},{}],179:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=r||"license-request"},t.exports=n.default},{}],180:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n},t.exports=n.default},{}],181:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n},t.exports=n.default},{}],182:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=r,this.sessionTypes=o},t.exports=n.default},{}],183:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n},t.exports=n.default},{}],184:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n},t.exports=n.default},{}],185:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(){var e=[],t=0,n=0;return{push:function(i,r){var o=r&&r.droppedVideoFrames?r.droppedVideoFrames:0,a=r&&r.totalVideoFrames?r.totalVideoFrames:0,s=o-t;t=o;var l=a-n;n=a,isNaN(i)||(e[i]?(e[i].droppedVideoFrames+=s,e[i].totalVideoFrames+=l):e[i]={droppedVideoFrames:s,totalVideoFrames:l})},getFrameHistory:function(){return e},reset:function(i){e=[],t=i.droppedVideoFrames,n=i.totalVideoFrames}}}o.__dashjs_factory_name="DroppedFramesHistory";var a=r.default.getClassFactory(o);n.default=a,t.exports=n.default},{47:47}],186:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(e){var t=(e=e||{}).abrController,n=e.switchHistory,i=e.droppedFramesHistory,r=e.currentRequest,o=e.useBufferOccupancyABR,a=e.streamProcessor?e.streamProcessor.getScheduleController():null,s=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;function l(){return s?s.mediaInfo:null}return{getMediaType:function(){var e=l();return e?e.type:null},getMediaInfo:l,getDroppedFramesHistory:function(){return i},getCurrentRequest:function(){return r},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=l();return e?e.streamInfo:null},getScheduleController:function(){return a},getAbrController:function(){return t},getRepresentationInfo:function(){return s},useBufferOccupancyABR:function(){return o}}}o.__dashjs_factory_name="RulesContext",n.default=r.default.getClassFactory(o),t.exports=n.default},{47:47}],187:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i},o={DEFAULT:.5,STRONG:1,WEAK:0};function a(e,t,n){var i;return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:(i=n)!==o.DEFAULT&&i!==o.STRONG&&i!==o.WEAK?o.DEFAULT:i}}a.__dashjs_factory_name="SwitchRequest";var s=r.default.getClassFactory(a);s.NO_CHANGE=-1,s.PRIORITY=o,r.default.updateClassFactory(a.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{47:47}],188:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(187));function a(){var e=[],t=[];return{push:function(n){n.newValue===o.default.NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var i,r=n.newValue-n.oldValue,a=r<0?1:0,s=a?-r:0,l=a?0:1;e[n.oldValue].drops+=a,e[n.oldValue].dropSize+=s,e[n.oldValue].noDrops+=l,t.push({idx:n.oldValue,noDrop:l,drop:a,dropSize:s}),8<t.length&&(i=t.shift(),e[i.idx].drops-=i.drop,e[i.idx].dropSize-=i.dropSize,e[i.idx].noDrops-=i.noDrop)},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}a.__dashjs_factory_name="SwitchRequestHistory";var s=r.default.getClassFactory(a);n.default=s,t.exports=n.default},{187:187,47:47}],189:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(47));function a(e){var t=(e=e||{}).settings,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0;function l(e,t,n,i){var r=Math.pow(.5,n/i.fast);e.fastEstimate=(1-r)*t+r*e.fastEstimate;var o=Math.pow(.5,n/i.slow);e.slowEstimate=(1-o)*t+o*e.slowEstimate,e.totalWeight+=n}function u(e,l,u){return t.get().streaming.abr.movingAverageMethod!==r.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?s.throughputHalfLife:s.latencyHalfLife,i=e?o[t]:a[t];if(!i||i.totalWeight<=0)return NaN;var r=i.fastEstimate/(1-Math.pow(.5,i.totalWeight/n.fast)),l=i.slowEstimate/(1-Math.pow(.5,i.totalWeight/n.slow));return e?Math.min(r,l):Math.max(r,l)}(e,l):(p=function(e,t,r){var o=void 0,a=void 0;a=e?(o=n[t],r?3:4):(o=i[t],4);if(o){if(a>=o.length)a=o.length;else if(e)for(var s=1;s<a;++s){var l=o[o.length-s]/o[o.length-s-1];if((1.3<=l||l<=1/1.3)&&(a+=1)===o.length)break}}else a=0;return a}(d=e,c=l,u),h=(d?n:i)[c],0!==p&&h&&0!==h.length?(h=h.slice(-p)).reduce((function(e,t){return e+t}))/h.length:NaN);var d,c,p,h}function d(e,t){return u(!0,e,t)}function c(e){n[e]=n[e]||[],i[e]=i[e]||[],o[e]=o[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},a[e]=a[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function p(){n={},i={},o={},a={}}var h={push:function(e,u,d){if(u.trace&&u.trace.length){var p,h,f,g=u.tresponse.getTime()-u.trequest.getTime()||1,m=u._tfinish.getTime()-u.tresponse.getTime()||1,y=u.trace.reduce((function(e,t){return e+t.b[0]}),0),v=t.get().streaming.lowLatencyEnabled?u.trace.reduce((function(e,t){return e+t.d}),0):d?m:g+m,_=Math.round(8*y/v);if(c(e),f=m,(h=e)===r.default.VIDEO?f<t.get().streaming.cacheLoadThresholds[r.default.VIDEO]:h===r.default.AUDIO&&f<t.get().streaming.cacheLoadThresholds[r.default.AUDIO]){if(0<n[e].length&&!n[e].hasCachedEntries)return;n[e].hasCachedEntries=!0}else n[e]&&n[e].hasCachedEntries&&(delete n[p=e],delete i[p],delete o[p],delete a[p],c(p));n[e].push(_),20<n[e].length&&n[e].shift(),i[e].push(g),20<i[e].length&&i[e].shift(),l(o[e],_,.001*m,s.throughputHalfLife),l(a[e],g,1,s.latencyHalfLife)}},getAverageThroughput:d,getSafeAverageThroughput:function(e,n){var i=d(e,n);return isNaN(i)||(i*=t.get().streaming.abr.bandwidthSafetyFactor),i},getAverageLatency:function(e){return u(!1,e)},reset:p};return s={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},p(),h}a.__dashjs_factory_name="ThroughputHistory",n.default=o.default.getClassFactory(a),t.exports=n.default},{108:108,47:47}],190:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(196)),o=i(e(194)),a=i(e(191)),s=i(e(193)),l=i(e(195)),u=i(e(192)),d=i(e(47)),c=i(e(187)),p="qualitySwitchRules",h="abandonFragmentRules";function f(e){e=e||{};var t=this.context,n=e.mediaPlayerModel,i=e.dashMetrics,d=e.settings,f=void 0,g=void 0;function m(e){return e.filter((function(e){return e.quality>c.default.NO_CHANGE}))}function y(e){var n,i={},r=void 0,o=void 0,a=void 0,s=void 0;if(0!==e.length){for(i[c.default.PRIORITY.STRONG]=c.default.NO_CHANGE,i[c.default.PRIORITY.WEAK]=c.default.NO_CHANGE,i[c.default.PRIORITY.DEFAULT]=c.default.NO_CHANGE,r=0,n=e.length;r<n;r+=1)(o=e[r]).quality!==c.default.NO_CHANGE&&(i[o.priority]=i[o.priority]>c.default.NO_CHANGE?Math.min(i[o.priority],o.quality):o.quality);return i[c.default.PRIORITY.WEAK]!==c.default.NO_CHANGE&&(a=i[c.default.PRIORITY.WEAK]),i[c.default.PRIORITY.DEFAULT]!==c.default.NO_CHANGE&&(a=i[c.default.PRIORITY.DEFAULT]),i[c.default.PRIORITY.STRONG]!==c.default.NO_CHANGE&&(a=i[c.default.PRIORITY.STRONG]),a!==c.default.NO_CHANGE&&(s=a),(0,c.default)(t).create(s)}}return{initialize:function(){f=[],g=[],d.get().streaming.abr.useDefaultABRRules&&(f.push((0,u.default)(t).create({dashMetrics:i,mediaPlayerModel:n,settings:d})),f.push((0,r.default)(t).create({dashMetrics:i})),f.push((0,o.default)(t).create({dashMetrics:i})),f.push((0,l.default)(t).create()),f.push((0,s.default)(t).create()),g.push((0,a.default)(t).create({dashMetrics:i,mediaPlayerModel:n,settings:d}))),n.getABRCustomRules().forEach((function(e){e.type===p&&f.push(e.rule(t).create()),e.type===h&&g.push(e.rule(t).create())}))},reset:function(){[f,g].forEach((function(e){e&&e.length&&e.forEach((function(e){return e.reset&&e.reset()}))})),f=[],g=[]},getMaxQuality:function(e){return y(m(f.map((function(t){return t.getMaxIndex(e)}))))||(0,c.default)(t).create()},shouldAbandonFragment:function(e){return y(m(g.map((function(t){return t.shouldAbandon(e)}))))||(0,c.default)(t).create()}}}f.__dashjs_factory_name="ABRRulesCollection";var g=d.default.getClassFactory(f);g.QUALITY_SWITCH_RULES=p,g.ABANDON_FRAGMENT_RULES=h,d.default.updateSingletonFactory(f.__dashjs_factory_name,g),n.default=g,t.exports=n.default},{187:187,191:191,192:192,193:193,194:194,195:195,196:196,47:47}],191:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(187)),o=i(e(47)),a=i(e(45));function s(e){e=e||{};var t,n=this.context,i=e.mediaPlayerModel,o=e.dashMetrics,l=e.settings,u=void 0,d=void 0,c=void 0,p=void 0;function h(){d={},c={},p=[]}return t={shouldAbandon:function(e){var t=(0,r.default)(n).create(r.default.NO_CHANGE,{name:s.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var a,h,f,g,m=e.getMediaInfo(),y=e.getMediaType(),v=e.getCurrentRequest();if(!isNaN(v.index)){if(f=y,g=v.index,d[f]=d[f]||{},d[f][g]=d[f][g]||{},i.getStableBufferTime()<o.getCurrentBufferLevel(y))return t;var _=d[y][v.index];if(null===_||null===v.firstByteDate||c.hasOwnProperty(_.id))return t;if(void 0===_.firstByteTime&&(p[y]=[],_.firstByteTime=v.firstByteDate.getTime(),_.segmentDuration=v.duration,_.bytesTotal=v.bytesTotal,_.id=v.index),_.bytesLoaded=v.bytesLoaded,_.elapsedTime=(new Date).getTime()-_.firstByteTime,0<_.bytesLoaded&&0<_.elapsedTime&&(a=y,h=Math.round(8*_.bytesLoaded/_.elapsedTime),p[a]=p[a]||[],p[a].push(h)),5<=p[y].length&&500<_.elapsedTime&&_.bytesLoaded<_.bytesTotal){var b,E,T,C,S,w,A=p[y].reduce((function(e,t){return e+t}),0);if(_.measuredBandwidthInKbps=Math.round(A/p[y].length),_.estimatedTimeOfDownload=+(8*_.bytesTotal/_.measuredBandwidthInKbps/1e3).toFixed(2),_.estimatedTimeOfDownload<1.8*_.segmentDuration||0===e.getRepresentationInfo().quality)return t;c.hasOwnProperty(_.id)||(b=e.getAbrController(),E=_.bytesTotal-_.bytesLoaded,T=b.getBitrateList(m),C=b.getQualityForBitrate(m,_.measuredBandwidthInKbps*l.get().streaming.abr.bandwidthSafetyFactor),w=void 0!==(S=b.getMinAllowedIndexFor(y))?Math.max(S,C):C,_.bytesTotal*T[w].bitrate/T[b.getQualityFor(y)].bitrate<E&&(t.quality=w,t.reason.throughput=_.measuredBandwidthInKbps,t.reason.fragmentID=_.id,c[_.id]=_,u.debug("["+y+"] frag id",_.id," is asking to abandon and switch to quality to ",w," measured bandwidth was",_.measuredBandwidthInKbps),delete d[y][_.id]))}else _.bytesLoaded===_.bytesTotal&&delete d[y][_.id]}return t},reset:h},u=(0,a.default)(n).getInstance().getLogger(t),h(),t}s.__dashjs_factory_name="AbandonRequestsRule",n.default=o.default.getClassFactory(s),t.exports=n.default},{187:187,45:45,47:47}],192:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(109)),o=i(e(187)),a=i(e(47)),s=e(242),l=i(e(46)),u=i(e(54)),d=i(e(45));function c(e){e=e||{};var t=this.context,n=e.dashMetrics,i=e.mediaPlayerModel,a=(0,l.default)(t).getInstance(),c=void 0,p=void 0,h=void 0;function f(e,t,n){var i=n.reduce((function(e,t,i){return t>n[e]?i:e}),0);if(0===i)return null;var r=Math.max(e,10+2*t.length),o=(n[i]-1)/(r/10-1);return{gp:o,Vp:10/o}}function g(e){var t={},n=e.getMediaInfo().bitrateList.map((function(e){return e.bandwidth})),r=(r=n.map((function(e){return Math.log(e)}))).map((function(e){return e-r[0]+1})),o=i.getStableBufferTime(),a=f(o,n,r);return a?(t.state=1,t.bitrates=n,t.utilities=r,t.stableBufferTime=o,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,m(t)):t.state=0,t}function m(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function y(e,t){var r,o,a,s=i.getStableBufferTime();e.stableBufferTime!==s&&((r=f(s,e.bitrates,e.utilities)).Vp===e.Vp&&r.gp===e.gp||(a=(o=n.getCurrentBufferLevel(t))+e.placeholderBuffer,a-=10,a*=r.Vp/e.Vp,a+=10,e.stableBufferTime=s,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,a-o)))}function v(e,t){return e.Vp*(e.utilities[t]+e.gp)}function _(e,t){for(var n,i,r,o=e.bitrates[t],a=e.utilities[t],s=0,l=t-1;0<=l;--l)e.utilities[l]<e.utilities[t]&&(n=e.bitrates[l],i=e.utilities[l],r=e.Vp*(e.gp+(o*i-n*a)/(o-n)),s=Math.max(s,r));return s}function b(){for(var e in h)h.hasOwnProperty(e)&&2===h[e].state&&(h[e].placeholderBuffer=0)}function E(){for(var e in h){var t;!h.hasOwnProperty(e)||0!==(t=h[e]).state&&(t.state=1,m(t))}}function T(e){var t,n;e&&e.chunk&&e.chunk.mediaInfo&&(t=h[e.chunk.mediaInfo.type])&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,S(t,e.chunk.mediaInfo.type))}function C(e){var t;e&&e.metric===r.default.HTTP_REQUEST&&e.value&&e.value.type===s.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=h[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),S(t,e.mediaType))}function S(e,t){var i,r,o;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(i=n.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=v(e,e.lastQuality),o=Math.max(0,r-i),e.placeholderBuffer=Math.min(o,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function w(e){var t;!e||(t=h[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function A(e){var t,i,r,o;!e||(t=h[e.mediaType])&&0!==t.state&&(i=n.getCurrentBufferLevel(e.mediaType),void 0,r=0<t.abrQuality?_(t,t.abrQuality):10,o=Math.max(0,r-i),t.placeholderBuffer=Math.min(t.placeholderBuffer,o))}function k(){h={}}return c={getMaxIndex:function(e){var i=(0,o.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return i;var r=e.getMediaInfo(),a=e.getMediaType(),s=e.getScheduleController(),l=e.getStreamInfo(),u=e.getAbrController(),d=u.getThroughputHistory(),c=l?l.id:null,f=l&&l.manifestInfo&&l.manifestInfo.isDynamic,b=e.useBufferOccupancyABR();if(i.reason=i.reason||{},!b)return i;s.setTimeToLoadDelay(0);var E,T,C,S=(T=(E=e).getMediaType(),(C=h[T])?0!==C.state&&y(C,T):(C=g(E),h[T]=C),C);if(0===S.state)return i;var w,A,k,P,I=n.getCurrentBufferLevel(a),L=d.getAverageThroughput(a,f),M=d.getSafeAverageThroughput(a,f),R=d.getAverageLatency(a),D=void 0;if(i.reason.state=S.state,i.reason.throughput=L,i.reason.latency=R,isNaN(L))return i;switch(S.state){case 1:D=u.getQualityForBitrate(r,M,R),i.quality=D,i.reason.throughput=M,S.placeholderBuffer=Math.max(0,_(S,D)-I),S.lastQuality=D,!isNaN(S.lastSegmentDurationS)&&I>=S.lastSegmentDurationS&&(S.state=2);break;case 2:w=S,A=a,P=Date.now(),isNaN(w.lastSegmentFinishTimeMs)?isNaN(w.lastCallTimeMs)||(k=.001*(P-w.lastCallTimeMs),w.placeholderBuffer+=Math.max(0,k)):(k=.001*(P-w.lastSegmentFinishTimeMs),w.placeholderBuffer+=Math.max(0,k)),w.lastCallTimeMs=P,w.lastSegmentStart=NaN,w.lastSegmentRequestTimeMs=NaN,w.lastSegmentFinishTimeMs=NaN,y(w,A),D=function(e,t){for(var n=e.bitrates.length,i=NaN,r=NaN,o=0;o<n;++o){var a=(e.Vp*(e.utilities[o]+e.gp)-t)/e.bitrates[o];(isNaN(r)||r<=a)&&(r=a,i=o)}return i}(S,I+S.placeholderBuffer);var x=u.getQualityForBitrate(r,M,R);D>S.lastQuality&&x<D&&(D=Math.max(x,S.lastQuality));var O=Math.max(0,I+S.placeholderBuffer-v(S,D));O<=S.placeholderBuffer?(S.placeholderBuffer-=O,O=0):(O-=S.placeholderBuffer,S.placeholderBuffer=0,D<u.getTopQualityIndexFor(a,c)?s.setTimeToLoadDelay(1e3*O):O=0),i.quality=D,i.reason.throughput=L,i.reason.latency=R,i.reason.bufferLevel=I,i.reason.placeholderBuffer=S.placeholderBuffer,i.reason.delay=O,S.lastQuality=D;break;default:p.debug("BOLA ABR rule invoked in bad state."),i.quality=u.getQualityForBitrate(r,M,R),i.reason.state=S.state,i.reason.throughput=M,i.reason.latency=R,S.state=1,m(S)}return i},reset:function(){k(),a.off(u.default.BUFFER_EMPTY,b,c),a.off(u.default.PLAYBACK_SEEKING,E,c),a.off(u.default.MEDIA_FRAGMENT_LOADED,T,c),a.off(u.default.METRIC_ADDED,C,c),a.off(u.default.QUALITY_CHANGE_REQUESTED,w,c),a.off(u.default.FRAGMENT_LOADING_ABANDONED,A,c)}},p=(0,d.default)(t).getInstance().getLogger(c),k(),a.on(u.default.BUFFER_EMPTY,b,c),a.on(u.default.PLAYBACK_SEEKING,E,c),a.on(u.default.MEDIA_FRAGMENT_LOADED,T,c),a.on(u.default.METRIC_ADDED,C,c),a.on(u.default.QUALITY_CHANGE_REQUESTED,w,c),a.on(u.default.FRAGMENT_LOADING_ABANDONED,A,c),c}c.__dashjs_factory_name="BolaRule",n.default=a.default.getClassFactory(c),t.exports=n.default},{109:109,187:187,242:242,45:45,46:46,47:47,54:54}],193:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(187)),a=i(e(45));function s(){var e,t=this.context,n=void 0;return e={getMaxIndex:function(e){var i=(0,o.default)(t).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return i;var r=e.getDroppedFramesHistory();if(r){for(var a=r.getFrameHistory(),s=0,l=0,u=o.default.NO_CHANGE,d=1;d<a.length;d++)if(a[d]&&(s=a[d].droppedVideoFrames,375<(l=a[d].totalVideoFrames)&&.15<s/l)){u=d-1,n.debug("index: "+u+" Dropped Frames: "+s+" Total Frames: "+l);break}return(0,o.default)(t).create(u,{droppedFrames:s})}return i}},n=(0,a.default)(t).getInstance().getLogger(e),e}s.__dashjs_factory_name="DroppedFramesRule",n.default=r.default.getClassFactory(s),t.exports=n.default},{187:187,45:45,47:47}],194:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(46)),o=i(e(54)),a=i(e(47)),s=i(e(45)),l=i(e(187)),u=i(e(108)),d=i(e(109));function c(e){e=e||{};var t=this.context,n=(0,r.default)(t).getInstance(),i=e.dashMetrics,a=void 0,c=void 0,p=void 0;function h(){(p={})[u.default.VIDEO]={ignoreCount:2},p[u.default.AUDIO]={ignoreCount:2}}function f(){h()}function g(e){isNaN(e.startTime)||e.mediaType!==u.default.AUDIO&&e.mediaType!==u.default.VIDEO||0<p[e.mediaType].ignoreCount&&p[e.mediaType].ignoreCount--}return a={getMaxIndex:function(e){var n=(0,l.default)(t).create();if(!e||!e.hasOwnProperty("getMediaType"))return n;!function(){if(!i||!i.hasOwnProperty("getCurrentBufferLevel")||!i.hasOwnProperty("getCurrentBufferState"))throw new Error(u.default.MISSING_CONFIG_ERROR)}();var r,o,a,s,h,f,g,m=e.getMediaType(),y=i.getCurrentBufferState(m),v=e.getRepresentationInfo().fragmentDuration;return 0<p[m].ignoreCount||!v||(y&&y.state===d.default.BUFFER_EMPTY?(c.debug("["+m+"] Switch to index 0; buffer is empty."),n.quality=0,n.reason="InsufficientBufferRule: Buffer is empty"):(r=e.getMediaInfo(),a=(o=e.getAbrController()).getThroughputHistory(),s=i.getCurrentBufferLevel(m),h=a.getAverageThroughput(m),f=a.getAverageLatency(m),g=h*(s/v)*.5,n.quality=o.getQualityForBitrate(r,g,f),n.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering")),n},reset:function(){h(),n.off(o.default.PLAYBACK_SEEKING,f,a),n.off(o.default.BYTES_APPENDED_END_FRAGMENT,g,a)}},c=(0,s.default)(t).getInstance().getLogger(a),h(),n.on(o.default.PLAYBACK_SEEKING,f,a),n.on(o.default.BYTES_APPENDED_END_FRAGMENT,g,a),a}c.__dashjs_factory_name="InsufficientBufferRule",n.default=a.default.getClassFactory(c),t.exports=n.default},{108:108,109:109,187:187,45:45,46:46,47:47,54:54}],195:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(45)),a=i(e(187));function s(){var e,t=this.context,n=void 0;return e={getMaxIndex:function(e){for(var i=e?e.getSwitchHistory():null,r=i?i.getSwitchRequests():[],o=0,s=0,l=0,u=(0,a.default)(t).create(),d=0;d<r.length;d++)if(void 0!==r[d]&&(o+=r[d].drops,s+=r[d].noDrops,l+=r[d].dropSize,6<=o+s&&.075<o/s)){u.quality=0<d&&0<r[d].drops?d-1:d,u.reason={index:u.quality,drops:o,noDrops:s,dropSize:l},n.debug("Switch history rule index: "+u.quality+" samples: "+(o+s)+" drops: "+o);break}return u}},n=(0,o.default)(t).getInstance().getLogger(e),e}s.__dashjs_factory_name="SwitchHistoryRule",n.default=r.default.getClassFactory(s),t.exports=n.default},{187:187,45:45,47:47}],196:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(45)),a=i(e(187)),s=i(e(108)),l=i(e(109));function u(e){e=e||{};var t,n=this.context,i=e.dashMetrics,r=void 0;return t={getMaxIndex:function(e){var t=(0,a.default)(n).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return t;!function(){if(!i||!i.hasOwnProperty("getCurrentBufferState"))throw new Error(s.default.MISSING_CONFIG_ERROR)}();var o=e.getMediaInfo(),u=e.getMediaType(),d=i.getCurrentBufferState(u),c=e.getScheduleController(),p=e.getAbrController(),h=e.getStreamInfo(),f=h&&h.manifestInfo?h.manifestInfo.isDynamic:null,g=p.getThroughputHistory(),m=g.getSafeAverageThroughput(u,f),y=g.getAverageLatency(u),v=e.useBufferOccupancyABR();return isNaN(m)||!d||v||p.getAbandonmentStateFor(u)!==l.default.ABANDON_LOAD&&(d.state!==l.default.BUFFER_LOADED&&!f||(t.quality=p.getQualityForBitrate(o,m,y),c.setTimeToLoadDelay(0),r.debug("["+u+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(m),"kbps"),t.reason={throughput:m,latency:y})),t},reset:function(){}},r=(0,o.default)(n).getInstance().getLogger(t),t}u.__dashjs_factory_name="ThroughputRule",n.default=r.default.getClassFactory(u),t.exports=n.default},{108:108,109:109,187:187,45:45,47:47}],197:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(47)),a=i(e(109));function s(e){var t=(e=e||{}).dashMetrics,n=e.mediaPlayerModel,i=e.textController,o=e.abrController,s=e.settings;function l(e,l){var u,d,c=NaN;return e&&l?c=e===r.default.FRAGMENTED_TEXT?i.isTextEnabled()?isNaN(l.fragmentDuration)?(u=t.getCurrentSchedulingInfo(a.default.SCHEDULING_INFO))?u.duration:0:l.fragmentDuration:0:(d=l.mediaInfo.streamInfo,o.isPlayingAtTopQuality(d)?d.manifestInfo.duration>=s.get().streaming.longFormContentDurationThreshold?s.get().streaming.bufferTimeAtTopQualityLongForm:s.get().streaming.bufferTimeAtTopQuality:n.getStableBufferTime()):c}return{execute:function(e,n){return!e||!n||t.getCurrentBufferLevel(e)<l(e,n)},getBufferTarget:l}}s.__dashjs_factory_name="BufferLevelRule",n.default=o.default.getClassFactory(s),t.exports=n.default},{108:108,109:109,47:47}],198:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(){var e=0;function t(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function n(e,n){var i=e.videoHeight/15;return n?"font-size: "+i+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(n.foreground?t(n.foreground):"rgb(255, 255, 255)")+"; font-style: "+(n.italics?"italic":"normal")+"; text-decoration: "+(n.underline?"underline":"none")+"; white-space: pre; background-color: "+(n.background?t(n.background):"transparent")+";":"font-size: "+i+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(t,i,r,o){var a=null,s=!1,l=-1,u={start:i,end:r,spans:[]},d="style_cea608_white_black",c={},p={},h=[],f=void 0,g=void 0;for(f=0;f<15;++f){var m=o.rows[f],y="",v=null;if(!1===m.isEmpty()){var _=function(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}(m.chars);null===a&&(a={x:_,y1:f,y2:f+1,p:[]}),_!==l&&s&&(a.p.push(u),u={start:i,end:r,spans:[]},a.y2=f,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===c.hasOwnProperty(a.name)?(h.push(a),c[a.name]=a):c[a.name].p.contat(a.p),a={x:_,y1:f,y2:f+1,p:[]});for(var b=0;b<m.chars.length;++b){var E,T=m.chars[b],C=T.penState;null!==v&&C.equals(v)||(0<y.trim().length&&(u.spans.push({name:d,line:y,row:f}),y=""),E="style_cea608_"+C.foreground+"_"+C.background,C.underline&&(E+="_underline"),C.italics&&(E+="_italics"),p.hasOwnProperty(E)||(p[E]=JSON.parse(JSON.stringify(C))),v=C,d=E),y+=T.uchar}0<y.trim().length&&u.spans.push({name:d,line:y,row:f}),s=!0,l=_}else s=!1,l=-1,a&&(a.p.push(u),u={start:i,end:r,spans:[]},a.y2=f,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===c.hasOwnProperty(a.name)?(h.push(a),c[a.name]=a):c[a.name].p.contat(a.p),a=null)}a&&(a.p.push(u),a.y2=f+1,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===c.hasOwnProperty(a.name)?(h.push(a),c[a.name]=a):c[a.name].p.contat(a.p),a=null);var S,w=[];for(f=0;f<h.length;++f){var A=h[f],k="sub_cea608_"+e++,P=document.createElement("div");P.id=k;var I="left: "+3.125*(S=A).x+"%; top: "+6.66*S.y1+"%; width: "+(100-3.125*S.x)+"%; height: "+6.66*Math.max(S.y2-1-S.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";P.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+I;var L=document.createElement("div");L.className="paragraph bodyStyle",L.style.cssText=n(t);var M=document.createElement("div");M.className="cueUniWrapper",M.style.cssText="unicode-bidi: normal; direction: ltr;";for(var R=0;R<A.p.length;++R){var D=A.p[R],x=0;for(g=0;g<D.spans.length;++g){var O,N,B,U,F=D.spans[g];0<F.line.length&&(0!==g&&x!=F.row&&((O=document.createElement("br")).className="lineBreak",M.appendChild(O)),N=!1,x===F.row&&(N=!0),x=F.row,B=p[F.name],(U=document.createElement("span")).className="spanPadding "+F.name+" customSpanColor",U.style.cssText=n(t,B),0!==g&&N?g===D.spans.length-1?U.textContent=F.line.replace(/\s+$/g,""):U.textContent=F.line:1<D.spans.length&&g<D.spans.length-1&&F.row===D.spans[g+1].row?U.textContent=F.line.replace(/^\s+/g,""):U.textContent=F.line.trim(),M.appendChild(U))}}L.appendChild(M),P.appendChild(L);var j={bodyStyle:["%",90]};for(var q in p)p.hasOwnProperty(q)&&(j[q]=["%",90]);w.push({type:"html",start:i,end:r,cueHTMLElement:P,cueID:k,cellResolution:[32,15],isFromCEA608:!0,fontSize:j,lineHeight:{},linePadding:{}})}return w}}}o.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=r.default.getSingletonFactory(o),t.exports=n.default},{47:47}],199:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(46)),a=i(e(54)),s=i(e(47)),l=i(e(214)),u=i(e(104)),d=i(e(201)),c=i(e(226)),p=i(e(51)),h="NotFragmentedTextBufferController";function f(e){e=e||{};var t=this.context,n=(0,o.default)(t).getInstance(),i=(0,d.default)(t).getInstance(),s=e.errHandler,f=e.streamInfo,g=e.type,m=e.mimeType,y=e.fragmentModel,v=void 0,_=void 0,b=void 0,E=void 0,T=void 0,C=void 0;function S(e){E=e}function w(e){e.sender.getStreamId()!==f.id||e.sender.getType()!==g||e.error||null===C.extract(f.id,e.currentRepresentation.id)&&(_=!1,n.trigger(a.default.INIT_FRAGMENT_NEEDED,{sender:v,streamId:f.id,mediaType:g,representationId:e.currentRepresentation.id}))}function A(e){e.chunk.streamId===f.id&&e.chunk.mediaInfo.type===g&&e.chunk.bytes&&(C.save(e.chunk),T.append(e.chunk),_=!0,n.trigger(a.default.STREAM_COMPLETED,{request:e.request}))}return v={getBufferControllerType:function(){return h},initialize:function(e){S(e),C=(0,l.default)(t).getInstance()},createBuffer:function(e){var n,o=e[0];try{return T=(0,u.default)(t).create(E,o),b||((n=T.getBuffer()).hasOwnProperty(r.default.INITIALIZE)&&n.initialize(m,f,e,y),b=!0),T}catch(e){if(o&&(o.isText||-1!==o.codec.indexOf('codecs="stpp')||-1!==o.codec.indexOf('codecs="wvtt')))try{T=i.getTextSourceBuffer()}catch(e){s.error(new c.default(p.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,p.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+g+" : "+e.message))}else s.error(new c.default(p.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,p.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+g))}},getType:function(){return g},getBuffer:function(){return T},getBufferLevel:function(){return 0},setMediaSource:S,getMediaSource:function(){return E},getIsBufferingCompleted:function(){return _},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},appendInitSegment:function(e){return null!==C.extract(f.id,e)},getRangeAt:function(){return null},reset:function(e){n.off(a.default.DATA_UPDATE_COMPLETED,w,v),n.off(a.default.INIT_FRAGMENT_LOADED,A,v),!e&&T&&(T.abort(),T.reset(),T=null)},updateTimestampOffset:function(e){T.timestampOffset===e||isNaN(e)||(T.timestampOffset=e)}},E=null,_=b=!1,n.on(a.default.DATA_UPDATE_COMPLETED,w,v),n.on(a.default.INIT_FRAGMENT_LOADED,A,v),v}f.__dashjs_factory_name=h,n.default=s.default.getClassFactory(f),t.exports=n.default},{104:104,108:108,201:201,214:214,226:226,46:46,47:47,51:51,54:54}],200:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(47)),a=i(e(114)),s=i(e(199));function l(e){e=e||{};var t,n=this.context,i=void 0;function o(){return i.getBuffer()}return t={getBufferControllerType:function(){return i.getBufferControllerType()},initialize:function(e,t){return i.initialize(e,t)},createBuffer:function(e,t){return i.createBuffer(e,t)},getType:function(){return i.getType()},getBuffer:o,setBuffer:function(e){i.setBuffer(e)},getBufferLevel:function(){return i.getBufferLevel()},setMediaSource:function(e){i.setMediaSource(e)},getMediaSource:function(){return i.getMediaSource()},getIsBufferingCompleted:function(){return i.getIsBufferingCompleted()},getIsPruningInProgress:function(){return i.getIsPruningInProgress()},dischargePreBuffer:function(){return i.dischargePreBuffer()},appendInitSegment:function(e){i.appendInitSegment(e)},getRangeAt:function(e){return i.getRangeAt(e)},reset:function(e){i.reset(e)},updateTimestampOffset:function(e){var t=o();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e)},updateAppendWindow:function(){i.updateAppendWindow()}},i=e.type===r.default.FRAGMENTED_TEXT?(0,a.default)(n).create({streamInfo:e.streamInfo,type:e.type,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,fragmentModel:e.fragmentModel,errHandler:e.errHandler,mediaController:e.mediaController,representationController:e.representationController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,settings:e.settings}):(0,s.default)(n).create({streamInfo:e.streamInfo,type:e.type,mimeType:e.mimeType,fragmentModel:e.fragmentModel,errHandler:e.errHandler}),t}l.__dashjs_factory_name="TextBufferController",n.default=o.default.getClassFactory(l),t.exports=n.default},{108:108,114:114,199:199,47:47}],201:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(47)),a=i(e(202)),s=i(e(203)),l=i(e(222)),u=i(e(220)),d=i(e(46)),c=i(e(54)),p=e(219);function h(){var e,t=this.context,n=void 0,i=void 0,o=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,E=void 0,T=void 0,C=void 0,S=void 0,w=void 0,A=void 0,k=void 0,P=void 0,I=void 0;function L(){return!(w&&!A)}function M(){P=k=!(w=!0)}return e={setConfig:function(e){e&&(e.errHandler&&(i=e.errHandler),e.adapter&&(o=e.adapter),e.manifestModel&&(h=e.manifestModel),e.mediaController&&(f=e.mediaController),e.videoModel&&(g=e.videoModel),e.streamController&&(m=e.streamController),e.textTracks&&(y=e.textTracks),e.vttParser&&(v=e.vttParser),e.ttmlParser&&(_=e.ttmlParser),n.setConfig({errHandler:i,adapter:o,manifestModel:h,mediaController:f,videoModel:g,streamController:m,textTracks:y,vttParser:v,ttmlParser:_}))},getTextSourceBuffer:function(){return n},getAllTracksAreDisabled:function(){return w},addEmbeddedTrack:function(e){n.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return E&&E.lang||""},setTextDefaultLanguage:function(e){(0,p.checkParameterType)(e,"string"),(E=E||{}).lang=e,T=!0},setTextDefaultEnabled:function(e){(0,p.checkParameterType)(e,"boolean"),(S=e)?w=!1:this.setTextTrack(-1)},getTextDefaultEnabled:function(){return void 0!==S&&S},setInitialSettings:function(e){E=e,T=!0},enableText:function(e){(0,p.checkParameterType)(e,"boolean"),!S&&e&&(S=!0),L()!==e&&(e&&this.setTextTrack(C),e||(C=this.getCurrentTrackIdx(),k?this.setTextTrack(-1):P=!0))},isTextEnabled:L,setTextTrack:function(e){var t=n.getConfig(),i=t.fragmentModel,o=t.fragmentedTracks,a=t.videoModel,s=void 0,l=void 0;w=-1===e;var u=y.getCurrentTrackIdx();if(u!==e){w&&f&&f.saveTextSettingsDisabled(),y.setModeForTrackIdx(u,r.default.TEXT_HIDDEN),y.setCurrentTrackIdx(e),y.setModeForTrackIdx(e,r.default.TEXT_SHOWING);var d=y.getCurrentTrackInfo();if(d&&d.isFragmented&&!d.isEmbedded)for(var c=0;c<o.length;c++){var p=o[c];if(d.lang===p.lang&&d.index===p.index&&(p.id?d.id===p.id:d.id===p.index))if(p!==f.getCurrentTrackFor(r.default.FRAGMENTED_TEXT,m.getActiveStreamInfo()))i.abortRequests(),i.removeExecutedRequestsBeforeTime(),n.remove(),y.deleteCuesFromTrackIdx(u),f.setTrack(p),n.setCurrentFragmentedTrackIdx(c);else if(-1===u){for(var h=m.getActiveStreamProcessors(),g=0;g<h.length;g++)if(h[g].getType()===r.default.FRAGMENTED_TEXT){l=h[g];break}l.setBufferingTime(a.getTime()),l.getScheduleController().start()}}else if(d&&!d.isFragmented){for(h=m.getActiveStreamProcessors(),c=0;c<h.length;c++)if(h[c].getType()===r.default.TEXT){s=(l=h[c]).getMediaInfoArr();break}if(l&&s)for(c=0;c<s.length;c++)if(s[c].index===d.index&&s[c].lang===d.lang){l.selectMediaInfo(s[c]);break}}}},getCurrentTrackIdx:function(){return y.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0,p.checkParameterType)(e,"boolean"),A=e},reset:function(){M(),n.resetEmbedded(),n.reset()}},E=null,y=(P=T=k=A=!(C=-1),s.default)(t).getInstance(),v=(0,l.default)(t).getInstance(),_=(0,u.default)(t).getInstance(),n=(0,a.default)(t).getInstance(),b=(0,d.default)(t).getInstance(),y.initialize(),b.on(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,(function(e){var t=this,n=e.tracks,i=e.index;E&&n.some((function(e,n){if(f.matchSettings(E,e))return t.setTextTrack(n),i=n,!0})),(!1===S||void 0===S&&!E||P)&&this.setTextTrack(-1),C=i,b.trigger(c.default.TEXT_TRACKS_ADDED,{enabled:L(),index:i,tracks:n}),k=!0}),e),b.on(c.default.CURRENT_TRACK_CHANGED,(function(e){var t;T||!e||!e.newMediaInfo||(t=e.newMediaInfo).type===r.default.FRAGMENTED_TEXT&&(E={lang:t.lang,role:t.roles[0],accessibility:t.accessibility[0]})}),e),b.on(c.default.PERIOD_SWITCH_STARTED,(function(e){void 0===I&&null!==e.fromStreamInfo&&(I=this.getCurrentTrackIdx())}),e),b.on(c.default.STREAM_COMPLETED,(function(){void 0===I&&(I=this.getCurrentTrackIdx())}),e),b.on(c.default.PERIOD_SWITCH_COMPLETED,(function(){void 0!==I&&(this.setTextTrack(I),I=void 0)}),e),M(),e}h.__dashjs_factory_name="TextController",n.default=o.default.getSingletonFactory(h),t.exports=n.default},{108:108,202:202,203:203,219:219,220:220,222:222,46:46,47:47,54:54}],202:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=e(242),a=i(e(234)),s=i(e(207)),l=i(e(209)),u=i(e(47)),d=i(e(45)),c=i(e(203)),p=i(e(198)),h=i(e(9)),f=i(e(2)),g=i(e(46)),m=i(e(54)),y=i(e(226)),v=i(e(51));function _(){var e=this.context,t=(0,g.default)(e).getInstance(),n=!1,i=void 0,u=void 0,_=void 0,b=void 0,E=void 0,T=void 0,C=void 0,S=void 0,w=void 0,A=void 0,k=void 0,P=void 0,I=void 0,L=void 0,M=void 0,R=void 0,D=void 0,x=void 0,O=void 0,N=void 0,B=void 0,U=void 0,F=void 0,j=void 0,q=void 0,V=void 0;function H(){M=NaN,O=I=null,L=!(R=[])}function W(){H(),k=[],S=null}function G(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&Q(t.bytes,t)}function z(){B=[],(P=(0,c.default)(e).getInstance()).setConfig({videoModel:D}),P.initialize(),_=(0,s.default)(e).getInstance(),j=[],n=!(F=N=null),q=(U=0,p.default)(e).getInstance();var i=x.getActiveStreamProcessors();for(var r in i)if("video"===i[r].getType()){V=i[r].getRepresentationInfo().MSETimeOffset;break}t.on(m.default.VIDEO_CHUNK_RECEIVED,G,this),t.on(m.default.BUFFER_CLEARED,$,this)}function K(e){N=e}function Y(e,t){var n,i,o=new a.default,s={subtitle:"subtitles",caption:"captions"};o.captionData=e,o.lang=t.lang,o.labels=t.labels,o.id=t.id?t.id:t.index,o.index=t.index,o.isTTML=(n=!1,t.codec&&0<=t.codec.search(r.default.STPP)&&(n=!0),t.mimeType&&0<=t.mimeType.search(r.default.TTML)&&(n=!0),n),o.defaultTrack=function(e){var t=!1;return 1<B.length&&e.isEmbedded?t=e.id&&e.id===r.default.CC1:1===B.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===B.length&&(t=e.index===k[0].index),t}(t),o.isFragmented=!E.getIsTextTrack(t.mimeType),o.isEmbedded=!!t.isEmbedded,o.kind=i=(i=0<t.roles.length?s[t.roles[0]]:s.caption)===s.caption||i===s.subtitle?i:s.caption,o.roles=t.roles,o.accessibility=t.accessibility;var l=(k?k.length:0)+B.length;P.addTextTrack(o,l)}function Q(e,t){var n=void 0,i=void 0,a=void 0,s=void 0,l=void 0,d=void 0,c=void 0,p=t.mediaInfo,g=p.type,m=p.mimeType,E=p.codec||m;if(E){if(g===r.default.FRAGMENTED_TEXT)if(L||"InitializationSegment"!==t.segmentType){if(!L)return;if(i=(d=_.getSamplesInfo(e)).sampleList,null===O&&0<i.length&&(O=i[0].cts-t.start*M),0<=E.search(r.default.STPP))for(S=null!==S?S:X(E),a=0;a<i.length;a++){var C=(G=i[a]).cts,w=C-O;this.buffered.add(w/M,(w+G.duration)/M);var A=new DataView(e,G.offset,G.subSizes[0]),k=(c=h.default.Utils.dataViewToString(A,r.default.UTF8),[]),R=G.offset+G.subSizes[0];for(s=1;s<G.subSizes.length;s++){var x=new Uint8Array(e,R,G.subSizes[s]),H=String.fromCharCode.apply(null,x);k.push(H),R+=G.subSizes[s]}try{var W=T.getValue().ttmlTimeIsRelative?C/M:0;n=S.parse(c,W,C/M,(C+G.duration)/M,k);P.addCaptions(N,O/M,n)}catch(e){I.removeExecutedRequestsBeforeTime(),this.remove(),u.error("TTML parser error: "+e.message)}}else{var G,z=[];for(a=0;a<i.length;a++){(G=i[a]).cts-=O,this.buffered.add(G.cts/M,(G.cts+G.duration)/M);var K=e.slice(G.offset,G.offset+G.size),Q=h.default.parseBuffer(K);for(s=0;s<Q.boxes.length;s++){var $=Q.boxes[s];if(u.debug("VTT box1: "+$.type),"vtte"!==$.type&&"vttc"===$.type)for(u.debug("VTT vttc boxes.length = "+$.boxes.length),l=0;l<$.boxes.length;l++){var J,Z,ee,te=$.boxes[l];u.debug("VTT box2: "+te.type),"payl"===te.type&&(J=te.cue_text,u.debug("VTT cue_text = "+J),Z=G.cts/M,ee=(G.cts+G.duration)/M,z.push({start:Z,end:ee,data:J,styles:{}}),u.debug("VTT "+Z+"-"+ee+" : "+J))}}}0<z.length&&P.addCaptions(N,0,z)}}else L=!0,M=_.getMediaTimescaleFromMoov(e);else if(g===r.default.TEXT){A=new DataView(e,0,e.byteLength),c=h.default.Utils.dataViewToString(A,r.default.UTF8);try{n=X(E).parse(c,0),P.addCaptions(P.getCurrentTrackIdx(),0,n)}catch(e){b.error(new y.default(v.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,v.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,c))}}else if(g===r.default.VIDEO)if(t.segmentType===o.HTTPRequest.INIT_SEGMENT_TYPE){if(0===U)for(U=_.getMediaTimescaleFromMoov(e),a=0;a<B.length;a++)Y(null,B[a])}else{if(0===U)return void u.warn("CEA-608: No timescale for embeddedTextTrack yet");var ne=(d=_.getSamplesInfo(e)).lastSequenceNumber;if(!j[0]&&!j[1]){var ie=void 0,re=void 0;for(a=0;a<B.length;a++){if(B[a].id===r.default.CC1?re=P.getTrackIdxForId(r.default.CC1):B[a].id===r.default.CC3&&(re=P.getTrackIdxForId(r.default.CC3)),-1===re)return void u.warn("CEA-608: data before track is ready.");ie=function(e){return function(t,n,i){var r;(r=D.getTTMLRenderingDiv()?q.createHTMLCaptionsFromScreen(D.getElement(),t,n,i):[{start:t,end:n,data:i.getDisplayText(),styles:{}}])&&P.addCaptions(e,0,r)}}(re),j[a]=new f.default.Cea608Parser(a+1,{newCue:ie},null)}}if(U){if(null!==F&&ne!==F+d.numSequences)for(a=0;a<j.length;a++)j[a]&&j[a].reset();for(var oe=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},i=new DataView(e),r=0;r<t.length;r++)for(var o=t[r],a=f.default.findCea608Nalus(i,o.offset,o.size),s=null,l=0,u=0;u<a.length;u++)for(var d=f.default.extractCea608DataFromRange(i,a[u]),c=0;c<2;c++)0<d[c].length&&(o.cts!==s?l=0:l+=1,n.fields[c].push([o.cts+V*U,d[c],l]),s=o.cts);return n.fields.forEach((function(e){e.sort((function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]}))})),n}(e,d.sampleList),ae=0;ae<j.length;ae++){var se=oe.fields[ae],le=j[ae];if(le)for(a=0;a<se.length;a++)le.addData(se[a][0]/U,se[a][1])}F=ne}}}else u.error("No text type defined")}function X(e){var t=void 0;return 0<=e.search(r.default.VTT)?t=w:(0<=e.search(r.default.TTML)||0<=e.search(r.default.STPP))&&(t=A),t}function $(e){B.forEach((function(t){var n=P.getTrackIdxForId(t.id);0<=n&&P.deleteCuesFromTrackIdx(n,e.from,e.to)}))}return i={initialize:function(t,o,a,u){n||z(),P.setConfig({videoModel:D}),P.initialize(),_=_||(0,s.default)(e).getInstance(),function(t,n,o,a){var s=!E.getIsTextTrack(t);if(k=k.concat(o),s){I=a,i.buffered=(0,l.default)(e).create(),R=C.getTracksFor(r.default.FRAGMENTED_TEXT,n);for(var u=C.getCurrentTrackFor(r.default.FRAGMENTED_TEXT,n),d=0;d<R.length;d++)if(R[d]===u){K(d);break}}for(d=0;d<k.length;d++)Y(null,k[d])}(t,o,a,u)},append:Q,abort:function(){P.deleteAllTextTracks(),H(),_=null,k=[]},addEmbeddedTrack:function(e){if(n||z(),e)if(e.id===r.default.CC1||e.id===r.default.CC3){for(var t=0;t<B.length;t++)if(B[t].id===e.id)return;B.push(e)}else u.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){t.off(m.default.VIDEO_CHUNK_RECEIVED,G,this),t.off(m.default.BUFFER_CLEARED,$,this),P&&P.deleteAllTextTracks(),n=!1,B=[],j=[null,null],F=null},setConfig:function(e){e&&(e.errHandler&&(b=e.errHandler),e.adapter&&(E=e.adapter),e.manifestModel&&(T=e.manifestModel),e.mediaController&&(C=e.mediaController),e.videoModel&&(D=e.videoModel),e.streamController&&(x=e.streamController),e.textTracks&&(P=e.textTracks),e.vttParser&&(w=e.vttParser),e.ttmlParser&&(A=e.ttmlParser))},getConfig:function(){return{fragmentModel:I,fragmentedTracks:R,videoModel:D}},setCurrentFragmentedTrackIdx:K,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){W(),P=D=x=null}},u=(0,d.default)(e).getInstance().getLogger(i),W(),i}_.__dashjs_factory_name="TextSourceBuffer",n.default=u.default.getSingletonFactory(_),t.exports=n.default},{108:108,198:198,2:2,203:203,207:207,209:209,226:226,234:234,242:242,45:45,46:46,47:47,51:51,54:54,9:9}],203:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(46)),a=i(e(54)),s=i(e(47)),l=i(e(45)),u=e(17),d=e(219);function c(){var e,t=this.context,n=(0,o.default)(t).getInstance(),i=void 0,s=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,E=void 0,T=void 0,C=void 0,S=void 0;function w(e){var t=p[e].kind,n=void 0!==p[e].id?p[e].id:p[e].lang,i=p[e].lang,r=p[e].isTTML,o=p[e].isEmbedded;return c.addTextTrack(t,n,i,r,o)}function A(e,t){var i=c.getClientWidth(),r=c.getClientHeight(),o=c.getVideoWidth(),s=c.getVideoHeight(),l=c.getVideoRelativeOffsetTop(),u=c.getVideoRelativeOffsetLeft();if(0!==o&&0!==s){var d=o/s,p=!1;e.isFromCEA608&&(d=3.5/3,p=!0);var h,f=function(e,t,n,i,r,o){var a=0,s=0;n/i<e/t?a=(s=t)/i*n:s=(a=e)/n*i;var l,u,d=0,c=0;return r<a/s?d=(c=s)*r:c=(d=a)/r,l=(e-d)/2,u=(t-c)/2,o?{x:l+.1*d,y:u+.1*c,w:.8*d,h:.8*c}:{x:l,y:u,w:d,h:c}}.call(this,i,r,o,s,d,p),b=f.w,C=f.h,w=f.x,A=f.y;if(b!=y||C!=v||w!=g||A!=m||t){g=w+u,m=A+l,y=b,v=C,!_||(h=_.style)&&(h.left=g+"px",h.top=m+"px",h.width=y+"px",h.height=v+"px",h.zIndex=E&&document[E]||T?S:null,n.trigger(a.default.CAPTION_CONTAINER_RESIZE,{}));var k=e.activeCues;if(k)for(var P=k.length,I=0;I<P;++I){var L=k[I];L.scaleCue(L)}}}}function k(e){var t,n=void 0,i=void 0,r=void 0,o=void 0,a=void 0;if(e.cellResolution){var s=[y/e.cellResolution[0],v/e.cellResolution[1]];if(e.linePadding)for(n in e.linePadding)if(e.linePadding.hasOwnProperty(n)){i=(e.linePadding[n]*s[0]).toString();for(var l=document.getElementsByClassName("spanPadding"),u=0;u<l.length;u++)l[u].style.cssText=l[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),l[u].style.cssText=l[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.fontSize){for(n in e.fontSize)if(e.fontSize.hasOwnProperty(n)){"%"===e.fontSize[n][0]?r=e.fontSize[n][1]/100:"c"===e.fontSize[n][0]&&(r=e.fontSize[n][1]),i=(r*s[1]).toString(),a="defaultFontSize"!==n?document.getElementsByClassName(n):document.getElementsByClassName("paragraph");for(var d=0;d<a.length;d++)a[d].style.cssText=a[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.lineHeight)for(n in e.lineHeight)if(e.lineHeight.hasOwnProperty(n)){"%"===e.lineHeight[n][0]?o=e.lineHeight[n][1]/100:"c"===e.fontSize[n][0]&&(o=e.lineHeight[n][1]),i=(o*s[1]).toString(),a=document.getElementsByClassName(n);for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}e.isd&&((t=document.getElementById(e.cueID))&&_.removeChild(t),P(e))}function P(e){var t;_&&(t=document.createElement("div"),_.appendChild(t),C=(0,u.renderHTML)(e.isd,t,(function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,i=/^#(.*)$/;if(n.test(t)){var r=n.exec(t),o=parseInt(r[4],10)-1;return"data:image/png;base64,"+btoa(e.images[o])}return i.test(t)?(o=(r=i.exec(t))[1],"data:image/png;base64,"+e.embeddedImages[o]):null}),_.clientHeight,_.clientWidth,!1,(function(e){i.info("renderCaption :",e)}),C,!0),t.id=e.cueID,n.trigger(a.default.CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:f}))}function I(e){return 0<=e&&p[e]?c.getTextTrack(p[e].kind,p[e].id,p[e].lang,p[e].isTTML,p[e].isEmbedded):null}function L(e){var t;e!==f&&(t=I(f=e),function(e){D.call(this),e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=c.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){i.info(""+e.message)}}}.call(this):R.call(this)}.call(this,t),b&&(clearInterval(b),b=null),t&&"html"===t.renderingType&&(A.call(this,t,!0),b=setInterval(A.bind(this,t),500)))}function M(e,t,n){if(e.cues)for(var i=e.cues,r=i.length-1;0<=r;r--)o=i[r],a=t,s=n,(isNaN(a)||o.startTime>=a)&&(isNaN(s)||o.endTime<=s)&&e.removeCue(i[r]);var o,a,s}function R(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function D(){if(_)for(;_.firstChild;)_.removeChild(_.firstChild)}return e={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(s=window.VTTCue||window.TextTrackCue,p=[],h=[],T=!(f=-1),S=2147483647,C=b=_=null,void(v=y=m=g=0)!==document.fullscreenElement?E="fullscreenElement":void 0!==document.webkitIsFullScreen?E="webkitIsFullScreen":document.msFullscreenElement?E="msFullscreenElement":document.mozFullScreen&&(E="mozFullScreen"))},setDisplayCConTop:function(e){(0,d.checkParameterType)(e,"boolean"),T=e,_&&!document[E]&&(_.style.zIndex=e?S:null)},addTextTrack:function(e,t){var o=this;p.length!==t?(p.push(e),p.length===t&&function(){p.sort((function(e,t){return e.index-t.index})),_=c.getTTMLRenderingDiv();for(var e=-1,t=0;t<p.length;t++){var i=w.call(o,t);h.push(i),p[t].defaultTrack&&(i.default=!0,e=t);var s=I(t);s&&(s.mode=r.default.TEXT_SHOWING,_&&(p[t].isTTML||p[t].isEmbedded)?s.renderingType="html":s.renderingType="default"),o.addCaptions(t,0,p[t].captionData),n.trigger(a.default.TEXT_TRACK_ADDED)}L.call(o,e),0<=e&&function(){n.on(a.default.PLAYBACK_METADATA_LOADED,(function t(){var i=I(e);i&&A.call(this,i,!0),n.off(a.default.PLAYBACK_METADATA_LOADED,t,this)}),o);for(var t=0;t<p.length;t++){var i=I(t);i&&(i.mode=t===e?r.default.TEXT_SHOWING:r.default.TEXT_HIDDEN)}}(),n.trigger(a.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:f,tracks:p})}()):i.error("Trying to add too many tracks.")},addCaptions:function(e,t,o){var l=I(e),u=this;if(l&&Array.isArray(o)&&0!==o.length)for(var d=0;d<o.length;d++){var c=void 0,p=o[d];l.cellResolution=p.cellResolution,l.isFromCEA608=p.isFromCEA608,"html"===p.type&&_?((c=new s(p.start-t,p.end-t,"")).cueHTMLElement=p.cueHTMLElement,c.isd=p.isd,c.images=p.images,c.embeddedImages=p.embeddedImages,c.cueID=p.cueID,c.scaleCue=k.bind(u),c.cellResolution=p.cellResolution,c.lineHeight=p.lineHeight,c.linePadding=p.linePadding,c.fontSize=p.fontSize,_.style.left=g+"px",_.style.top=m+"px",_.style.width=y+"px",_.style.height=v+"px",c.onenter=function(){l.mode===r.default.TEXT_SHOWING&&(this.isd?(P(this),i.debug("Cue enter id:"+this.cueID)):(_.appendChild(this.cueHTMLElement),k.call(u,this),n.trigger(a.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:f})))},c.onexit=function(){if(_)for(var e=_.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(i.debug("Cue exit id:"+e[t].id),_.removeChild(e[t]),--t)}):p.data&&(c=new s(p.start-t,p.end-t,p.data),p.styles&&(void 0!==p.styles.align&&"align"in c&&(c.align=p.styles.align),void 0!==p.styles.line&&"line"in c&&(c.line=p.styles.line),void 0!==p.styles.position&&"position"in c&&(c.position=p.styles.position),void 0!==p.styles.size&&"size"in c&&(c.size=p.styles.size)),c.onenter=function(){l.mode===r.default.TEXT_SHOWING&&n.trigger(a.default.CAPTION_RENDERED,{currentTrackIdx:f})});try{c?l.addCue(c):i.error("impossible to display subtitles.")}catch(e){throw M(l),l.addCue(c),e}}},getCurrentTrackIdx:function(){return f},setCurrentTrackIdx:L,getTrackIdxForId:function(e){for(var t=-1,n=0;n<p.length;n++)if(p[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return p[f]},setModeForTrackIdx:function(e,t){var n=I(e);n&&n.mode!==t&&(n.mode=t)},deleteCuesFromTrackIdx:function(e,t,n){var i=I(e);i&&M(i,t,n)},deleteAllTextTracks:function(){for(var e=h?h.length:0,t=0;t<e;t++){var n=I(t);n&&(M.call(this,n),n.mode="disabled")}h=[],p=[],b&&(clearInterval(b),b=null),f=-1,D.call(this)},deleteTextTrack:function(e){c.removeChild(h[e]),h.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(c=e.videoModel)}},i=(0,l.default)(t).getInstance().getLogger(e),e}c.__dashjs_factory_name="TextTracks",n.default=s.default.getSingletonFactory(c),t.exports=n.default},{108:108,17:17,219:219,45:45,46:46,47:47,54:54}],204:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(108)),a=i(e(235)),s=i(e(205)),l=i(e(225)),u=e(80);function d(e){var t,n=this.context,i=void 0;function r(){i&&i.reset()}return t={provide:function(e,t){if("function"==typeof t){var n,r=i.getCurrentTrack(),o=void 0;if(!r||r.segmentDuration<=0||null==e)t(null);else{isNaN(r.segmentDuration)&&(o=i.getThumbnailRequestForTime(e))&&(r.segmentDuration=o.duration),n=e%r.segmentDuration;var s,l,d,c,p=Math.floor(n*r.tilesHor*r.tilesVert/r.segmentDuration),h=new a.default;if(h.width=Math.floor(r.widthPerTile),h.height=Math.floor(r.heightPerTile),h.x=Math.floor(p%r.tilesHor)*r.widthPerTile,h.y=Math.floor(p/r.tilesHor)*r.heightPerTile,"readThumbnail"in r)return r.readThumbnail(e,(function(e){h.url=e,t(h)}));o?(h.url=o.url,r.segmentDuration=NaN):(s=Math.floor(e/r.segmentDuration),h.url=(d=s+(l=r).startNumber,c=(0,u.replaceTokenForTemplate)(l.templateUrl,"Number",d),c=(0,u.replaceTokenForTemplate)(c,"Time",(d-1)*l.segmentDuration),c=(0,u.replaceTokenForTemplate)(c,"Bandwidth",l.bandwidth),(0,u.unescapeDollarsInTemplate)(c))),t(h)}}},setTrackByIndex:function(e){i.setTrackByIndex(e)},getCurrentTrackIndex:function(){return i.getCurrentTrackIndex()},getBitrateList:function(){var e=i.getTracks(),t=0;return e.map((function(e){var n=new l.default;return n.mediaType=o.default.IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n}))},reset:r},r(),i=(0,s.default)(n).create({streamInfo:e.streamInfo,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants}),t}d.__dashjs_factory_name="ThumbnailController",n.default=r.default.getClassFactory(d),t.exports=n.default},{108:108,205:205,225:225,235:235,47:47,80:80}],205:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(108)),o=i(e(61)),a=i(e(47)),s=i(e(236)),l=i(e(221)),u=e(80),d=i(e(54)),c=i(e(207)),p=i(e(160)),h=i(e(57)),f=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function g(e){var t,n=this.context,i=e.adapter,a=e.baseURLController,g=e.streamInfo,m=e.timelineConverter,y=e.debug,v=e.eventBus,_=e.events,b=e.dashConstants,E=(0,l.default)(n).getInstance(),T=void 0,C=void 0,S=void 0,w=void 0,A=void 0,k=void 0;function P(){L(),A=(0,p.default)(n).create({}),k=(0,c.default)(n).getInstance(),(C=(0,h.default)(n).create({timelineConverter:m,baseURLController:a,debug:y,eventBus:v,events:_,dashConstants:b,urlUtils:E})).initialize(!!i&&i.getIsDynamic()),function(){if(g&&i&&(w=i.getMediaInfoForType(g,r.default.IMAGE))){var e=i.getVoRepresentations(w);e&&0<e.length&&e.forEach((function(e){(e.segmentInfoType===o.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===o.default.SEGMENT_TIMELINE)&&I(e),e.segmentInfoType===o.default.SEGMENT_BASE&&I(e,!0)})),0<T.length&&(T.sort((function(e,t){return e.bitrate-t.bitrate})),S=T.length-1)}}()}function I(e,t){var n,o,l=new s.default;l.id=e.id,l.bitrate=e.bandwidth,l.width=e.width,l.height=e.height,l.tilesHor=1,l.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach((function(e){var t;0<=f.indexOf(e.schemeIdUri)&&e.value&&(2!==(t=e.value.split("x")).length||isNaN(t[0])||isNaN(t[1])||(l.tilesHor=parseInt(t[0],10),l.tilesVert=parseInt(t[1],10)))})),t?v.trigger(d.default.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{mimeType:w.mimeType,mediaType:r.default.IMAGE,representation:e,callback:function(e,t){var n=[];e=function(e,t){for(var n=[],r=0,o=void 0,a=void 0,s=void 0,l=(o=0,e.length);o<l;o++)a=e[o],(s=(0,u.getTimeBasedSegment)(m,i.getIsDynamic(),t,a.startTime,a.duration,a.timescale,a.media,a.mediaRange,r))&&(n.push(s),s=null,r++);return n}(e,t),l.segmentDuration=e[0].duration,l.readThumbnail=function(i,r){var o=null;n.some((function(e){if(e.start<=i&&e.end>i)return o=e.url,!0})),o?r(o):e.some((function(e){if(e.mediaStartTime<=i&&e.mediaStartTime+e.duration>i){var o=a.resolve(t.path);return A.load({method:"get",url:o.url,request:{range:e.mediaRange,responseType:"arraybuffer"},onload:function(t){var i=k.getSamplesInfo(t.target.response),o=new Blob([t.target.response.slice(i.sampleList[0].offset,i.sampleList[0].offset+i.sampleList[0].size)],{type:"image/jpeg"}),a=window.URL.createObjectURL(o);n.push({start:e.mediaStartTime,end:e.mediaStartTime+e.duration,url:a}),r&&r(a)}}),!0}}))}}}):(l.startNumber=e.startNumber,l.segmentDuration=e.segmentDuration,l.timescale=e.timescale,l.templateUrl=(n=e,(o=E.isRelative(n.media)?E.resolve(n.media,a.resolve(n.path).url):n.media)?(0,u.replaceIDForTemplate)(o,n.id):"")),0<l.tilesHor&&0<l.tilesVert&&(l.widthPerTile=l.width/l.tilesHor,l.heightPerTile=l.height/l.tilesVert,T.push(l))}function L(){T=[],S=-1,w=null}return t={initialize:P,getTracks:function(){return T},reset:L,setTrackByIndex:function(e){T&&0!==T.length&&(e>=T.length&&(e=T.length-1),S=e)},getCurrentTrack:function(){return S<0?null:T[S]},getCurrentTrackIndex:function(){return S},getThumbnailRequestForTime:function(e){for(var t=void 0,n=i.getVoRepresentations(w),r=0;r<n.length;r++)if(T[S].id===n[r].id){t=n[r];break}return C.getSegmentRequestForTime(w,t,e)}},P(),t}n.THUMBNAILS_SCHEME_ID_URIS=f,g.__dashjs_factory_name="ThumbnailTracks",n.default=a.default.getClassFactory(g)},{108:108,160:160,207:207,221:221,236:236,47:47,54:54,57:57,61:61,80:80}],206:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(51)),o=i(e(46)),a=i(e(54)),s=i(e(113)),l=i(e(224)),u=i(e(223)),d=i(e(47)),c=i(e(226)),p=e(219);function h(){var e,t=this.context,n=(0,o.default)(t).getInstance(),i=void 0,d=void 0,h=void 0,f=void 0;function g(){i.reset()}return e={chooseSelector:function(e){(0,p.checkParameterType)(e,"boolean"),f=e?h:d},select:function(e){if(e){var t=e.baseUrls,i=e.selectedIdx;if(!isNaN(i))return t[i];var o=f.select(t);return o?(e.selectedIdx=t.indexOf(o),o):(n.trigger(a.default.URL_RESOLUTION_FAILED,{error:new c.default(r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(f===d&&g()))}},reset:g,setConfig:function(e){e.selector&&(f=e.selector)}},i=(0,s.default)(t).create({updateEventName:a.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:a.default.SERVICE_LOCATION_BLACKLIST_ADD}),d=(0,u.default)(t).create({blacklistController:i}),h=(0,l.default)(t).create({blacklistController:i}),f=d,e}h.__dashjs_factory_name="BaseURLSelector",n.default=d.default.getClassFactory(h),t.exports=n.default},{113:113,219:219,223:223,224:224,226:226,46:46,47:47,51:51,54:54}],207:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(45)),o=i(e(215)),a=i(e(47)),s=i(e(9)),l=i(e(231));function u(){var e,t=void 0,n=this.context;function i(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=s.default.parseBuffer(e),i=(0,o.default)(n).create();return i.setData(t),i}return e={parse:i,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new l.default(0,!1);for(var i,r,o,a,s=t instanceof ArrayBuffer?new Uint8Array(t):t,u=void 0,d=0;n<s.byteLength;){var c=(o=s)[(a=n)+3]>>>0|o[a+2]<<8>>>0|o[a+1]<<16>>>0|o[a]<<24>>>0,p=(i=s,r=n+4,String.fromCharCode(i[r++])+String.fromCharCode(i[r++])+String.fromCharCode(i[r++])+String.fromCharCode(i[r]));if(0==c)break;n+c<=s.byteLength&&(0<=e.indexOf(p)?u=new l.default(n,!0,c):d=n+c),n+=c}return u||new l.default(d,!1)},getMediaTimescaleFromMoov:function(e){var t=i(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t=i(e),n=t.getBoxes("moof"),r=t.getBoxes("mfhd"),o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=t.getBoxes("moof").length,b=r[r.length-1].sequence_number,E=(u=[],-1),T=-1;for(f=a=0;f<n.length;f++){var C=n[f],S=C.getChildBoxes("traf");for(p=0;p<S.length;p++){var w=S[p],A=w.getChildBox("tfhd"),k=w.getChildBox("tfdt"),P=(l=k.baseMediaDecodeTime,w.getChildBoxes("trun")),I=w.getChildBoxes("subs");for(h=0;h<P.length;h++){var L=P[h];for(a=L.sample_count,y=(A.base_data_offset||0)+(L.data_offset||0),c=0;c<a;c++){o=void 0!==(d=L.samples[c]).sample_duration?d.sample_duration:A.default_sample_duration,s=void 0!==d.sample_size?d.sample_size:A.default_sample_size;var M={dts:l,cts:l+(void 0!==d.sample_composition_time_offset?d.sample_composition_time_offset:0),duration:o,offset:C.offset+y,size:s,subSizes:[s]};if(I)for(g=0;g<I.length;g++){var R=I[g];if(E<R.entry_count-1&&T<c&&(E++,T+=R.entries[E].sample_delta),c==T){M.subSizes=[];var D=R.entries[E];for(m=0;m<D.subsample_count;m++)M.subSizes.push(D.subsamples[m].subsample_size)}}u.push(M),y+=s,l+=o}}v=l-k.baseMediaDecodeTime}}return{sampleList:u,lastSequenceNumber:b,totalDuration:v,numSequences:_}},findInitRange:function(e){var n=null,r=i(e);if(!r)return n;var o=r.getBox("ftyp"),a=r.getBox("moov");return t.debug("Searching for initialization."),a&&a.isComplete&&(n=(o?o.offset:a.offset)+"-"+(a.offset+a.size-1),t.debug("Found the initialization.  Range: "+n)),n}},t=(0,r.default)(n).getInstance().getLogger(e),e}u.__dashjs_factory_name="BoxParser",n.default=a.default.getSingletonFactory(u),t.exports=n.default},{215:215,231:231,45:45,47:47,9:9}],208:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(){var e,t=void 0;return t=!(e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!(!("MediaSource"in window)||!MediaSource.isTypeSupported(e))||!(!("WebKitMediaSource"in window)||!WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}}),e}o.__dashjs_factory_name="Capabilities",n.default=r.default.getSingletonFactory(o),t.exports=n.default},{47:47}],209:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i},o=e(219);function a(){return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],i=this.customTimeRangeArray[t];return n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(n.end=i.end,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(n.start=i.start,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}a.__dashjs_factory_name="CustomTimeRanges",n.default=r.default.getClassFactory(a),t.exports=n.default},{219:219,47:47}],210:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(45)),a=i(e(108)),s=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],l="dashjs_?_bitrate",u="dashjs_?_settings",d="localStorage",c="lastBitrate",p="lastMediaSettings";function h(e){e=e||{};var t,n=this.context,i=e.settings,r=void 0,h=void 0;function f(e){if(void 0!==h)return h;h=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return r.warn("DOMStorage access denied: "+e.message),h}if(!t||e!==d&&"sessionStorage"!==e)return h;try{t.setItem("1","1"),t.removeItem("1"),h=!0}catch(e){r.warn("DOMStorage is supported, but cannot be used: "+e.message)}return h}function g(){return 6e5*Math.round((new Date).getTime()/6e5)}function m(e,t){return f(e)&&i.get().streaming[t+"CachingInfo"].enabled}function y(){if(!i)throw new Error(a.default.MISSING_CONFIG_ERROR)}return t={getSavedBitrateSettings:function(e){var t=NaN;if(y(),m(d,c)){var n=l.replace(/\?/,e);try{var o=JSON.parse(localStorage.getItem(n))||{},a=(new Date).getTime()-parseInt(o.timestamp,10)>=i.get().streaming.lastBitrateCachingInfo.ttl||!1,s=parseFloat(o.bitrate);isNaN(s)||a?a&&localStorage.removeItem(n):(t=s,r.debug("Last saved bitrate for "+e+" was "+s))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(m(d,c)&&t){var n=l.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:g()}))}catch(e){r.error(e.message)}}},getSavedMediaSettings:function(e){var t=null;if(y(),m(d,p)){var n=u.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},o=(new Date).getTime()-parseInt(r.timestamp,10)>=i.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=r.settings;o&&(localStorage.removeItem(n),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(m(d,p)){var n=u.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:g()}))}catch(e){r.error(e.message)}}}},r=(0,o.default)(n).getInstance().getLogger(t),f(d)&&s.forEach((function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){r.error(e.message)}}})),t}h.__dashjs_factory_name="DOMStorage";var f=r.default.getSingletonFactory(h);n.default=f,t.exports=n.default},{108:108,45:45,47:47}],211:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(){function e(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}}function t(e,t){var n=s;if(!t)return e;if(!d(e))return e;c(e)&&(n=l),p(e)&&(n=u);var i=n(t),r="/"!==i.charAt(i.length-1)&&"/"!==e.charAt(0)?"/":"";return[i,e].join(r)}var n=void 0,i=/^[a-z][a-z0-9+\-_.]*:/i,r=/^https?:\/\//i,o=/^https:\/\//i,a=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function l(e){var t=e.match(a);return t?t[1]:""}function u(e){var t=e.match(i);return t?t[0]:""}function d(e){return!i.test(e)}function c(e){return d(e)&&"/"===e.charAt(0)}function p(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),n=e}catch(e){}finally{n=n||t}}(),{parseBaseUrl:s,parseOrigin:l,parseScheme:u,isRelative:d,isPathAbsolute:c,isSchemeRelative:p,isHTTPURL:function(e){return r.test(e)},isHTTPS:function(e){return o.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(e,t){return n(e,t)}}}o.__dashjs_factory_name="DefaultURLUtils",n.default=r.default.getSingletonFactory(o),t.exports=n.default},{47:47}],212:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(e){e=e||{};var t=void 0,n=new DataView(e.data),i=0;function r(e,t){var r,o=!0;if(void 0===t&&(t=!1),r=16777215<e.tag?(n.getUint32(i)!==e.tag&&(o=!1),4):65535<e.tag?(256*n.getUint16(i)+n.getUint8(i+2)!==e.tag&&(o=!1),3):255<e.tag?(n.getUint16(i)!==e.tag&&(o=!1),2):(n.getUint8(i)!==e.tag&&(o=!1),1),!o&&e.required&&!t)throw new Error("required tag not found");return o&&(i+=r),o}function o(e){var t=1,r=128,o=-1,a=0,s=n.getUint8(i),l=0;for(l=0;l<8;l+=1){if((s&r)===r){a=void 0===e?s&~r:s,o=l;break}r>>=1}for(l=0;l<o;l+=1,t+=1)a=a<<8|255&n.getUint8(i+t);return i+=t,a}return t={getPos:function(){return i},setPos:function(e){i=e},consumeTag:r,consumeTagAndSize:function(e,t){var n=r(e,t);return n&&o(),n},parseTag:function(e){var n;return r(e),n=o(),t[e.parse](n)},skipOverElement:function(e,t){var n=r(e,t),a=void 0;return n&&(a=o(),i+=a),n},getMatroskaCodedNum:o,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=n.getFloat32(i),i+=4;break;case 8:t=n.getFloat64(i),i+=8}return t},getMatroskaUint:function(e){for(var t=0,r=0;r<e;r+=1)t<<=8,t|=255&n.getUint8(i+r);return i+=e,t},moreData:function(){return i<n.byteLength}}}o.__dashjs_factory_name="EBMLParser",n.default=r.default.getClassFactory(o),t.exports=n.default},{47:47}],213:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(46)),o=i(e(54)),a=i(e(47));function s(){var e=this.context,t=(0,r.default)(e).getInstance();return{error:function(e){t.trigger(o.default.ERROR,{error:e})}}}s.__dashjs_factory_name="ErrorHandler",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{46:46,47:47,54:54}],214:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(){var e={};return{save:function(t){var n=t.streamId,i=t.representationId;e[n]=e[n]||{},e[n][i]=t},extract:function(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null},reset:function(){e={}}}}o.__dashjs_factory_name="InitCache",n.default=r.default.getSingletonFactory(o),t.exports=n.default},{47:47}],215:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(230)),o=i(e(47));function a(){var e=void 0;function t(t){var i=[];if(!t||!e||"function"!=typeof e.fetchAll)return i;for(var r=e.fetchAll(t),o=void 0,a=0,s=r.length;a<s;a++)(o=n(r[a]))&&i.push(o);return i}function n(e){if(!e)return null;var t=new r.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?n(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var n=t(e.boxes[e.boxes.length-1].type);return 0<n.length?n[n.length-1]:null}}}a.__dashjs_factory_name="IsoFile",n.default=o.default.getClassFactory(a),t.exports=n.default},{230:230,47:47}],216:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(108));function a(e){var t=(e=e||{}).timelineConverter;return{getLiveEdge:function(e){return function(){if(!t||!t.hasOwnProperty("getExpectedLiveEdge"))throw new Error(o.default.MISSING_CONFIG_ERROR)}(),e.DVRWindow?e.DVRWindow.end:0},reset:function(){t=null}}}a.__dashjs_factory_name="LiveEdgeFinder",n.default=r.default.getClassFactory(a),t.exports=n.default},{108:108,47:47}],217:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(12));function a(){return{areEqual:function(e,t){return(0,o.default)(e,t)}}}a.__dashjs_factory_name="ObjectUtils",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{12:12,47:47}],218:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}o.__dashjs_factory_name="RequestModifier",n.default=r.default.getSingletonFactory(o),t.exports=n.default},{47:47}],219:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkParameterType=function(e,t){if(typeof e!==t)throw r.default.BAD_ARGUMENT_ERROR},n.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},n.checkRange=function(e,t,n){if(e<t||n<e)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"},n.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==r.default.AUDIO&&e!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR};var i,r=(i=e(108))&&i.__esModule?i:{default:i}},{108:108}],220:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(45)),a=i(e(46)),s=i(e(54)),l=e(17);function u(){var e,t=this.context,n=(0,a.default)(t).getInstance(),i=void 0,r=0;return e={parse:function(e,t,o,a,u){var d="",c=[],p=void 0,h=void 0,f=void 0,g={},m={},y="",v="",_={onOpenTag:function(e,t,n){if("image"===t&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===e)){if(!n[" imageType"]||"PNG"!==n[" imageType"].value)return void i.warn("smpte-tt imageType != PNG. Discarded");y=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){y&&(m[y]=v.trim()),y=v=""},onText:function(e){y&&(v+=e)}};if(!e)throw d="no ttml data to parse",new Error(d);g.data=e,n.trigger(s.default.TTML_TO_PARSE,g);var b=(0,l.fromXML)(g.data,(function(e){d=e}),_);n.trigger(s.default.TTML_PARSED,{ttmlString:g.data,ttmlDoc:b});var E,T=b.getMediaTimeEvents();for(f=0;f<T.length;f++){var C=(0,l.generateISD)(b,T[f],(function(e){d=e}));C.contents.some((function(e){return e.contents.length}))&&(p=T[f]+t<o?o:T[f]+t)<(h=T[f+1]+t>a?a:T[f+1]+t)&&c.push({start:p,end:h,type:"html",cueID:(E="cue_TTML_"+r,r++,E),isd:C,images:u,embeddedImages:m})}if(""!==d)throw i.error(d),new Error(d);return c}},i=(0,o.default)(t).getInstance().getLogger(e),e}u.__dashjs_factory_name="TTMLParser",n.default=r.default.getSingletonFactory(u),t.exports=n.default},{17:17,45:45,46:46,47:47,54:54}],221:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(211));function a(){var e=void 0,t=[],n=this.context;function i(n,i,r){var o=function(n){var i=void 0;for(i=0;i<t.length;i++)if(t[i].regex.test(n))return t[i].utils;return e}(r||i);return o&&"function"==typeof o[n]?o[n](i,r):e[n](i,r)}return e=(0,o.default)(n).getInstance(),{registerUrlRegex:function(e,n){t.push({regex:e,utils:n})},parseBaseUrl:function(e){return i("parseBaseUrl",e)},parseOrigin:function(e){return i("parseOrigin",e)},parseScheme:function(e){return i("parseScheme",e)},isRelative:function(e){return i("isRelative",e)},isPathAbsolute:function(e){return i("isPathAbsolute",e)},isSchemeRelative:function(e){return i("isSchemeRelative",e)},isHTTPURL:function(e){return i("isHTTPURL",e)},isHTTPS:function(e){return i("isHTTPS",e)},removeHostname:function(e){return i("removeHostname",e)},resolve:function(e,t){return i("resolve",e,t)}}}a.__dashjs_factory_name="URLUtils";var s=r.default.getSingletonFactory(a);n.default=s,t.exports=n.default},{211:211,47:47}],222:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(47)),o=i(e(45));function a(){var e,t=this.context,n=void 0,i=void 0,r=void 0,a=void 0,s=void 0;function l(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}return e={parse:function(e){var t,o=[],u=void 0;if(!e)return o;t=(e=e.split(i)).length,u=-1;for(var d,c,p=0;p<t;p++){var h,f,g,m,y,v,_=e[p];0<_.length&&"WEBVTT"!==_&&_.match(r)&&(c=d=void 0,(c=(d=_.split(r))[1].split(s)).shift(),d[1]=c[0],c.shift(),f=(h={cuePoints:d,styles:function(e){var t={};return e.forEach((function(e){var n;1<e.split(/:/).length&&((n=e.split(/:/)[1])&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n))})),t}(c)}).cuePoints,g=h.styles,m=function(e,t){for(var n,i=t,o="",a="";""!==e[i]&&i<e.length;)i++;if(1<(n=i-t))for(var s=0;s<n;s++){if((a=e[t+s]).match(r)){o="";break}o+=a,s!==n-1&&(o+="\n")}else(a=e[t]).match(r)||(o=a);return o}(e,p+1),y=l(f[0].replace(a,"")),v=l(f[1].replace(a,"")),!isNaN(y)&&!isNaN(v)&&u<=y&&y<v?""!==m?(u=y,o.push({start:y,end:v,data:m,styles:g})):n.error("Skipping cue due to empty/malformed cue text"):n.error("Skipping cue due to incorrect cue timing"))}return o}},n=(0,o.default)(t).getInstance().getLogger(e),i=/(?:\r\n|\r|\n)/gm,r=/-->/,a=/(^[\s]+|[\s]+$)/g,s=/\s\b/g,e}a.__dashjs_factory_name="VTTParser",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{45:45,47:47}],223:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(e){var t=(e=e||{}).blacklistController;return{select:function(e){var n=0,i=void 0;return e&&e.some((function(e,i){return n=i,!t.contains(e.serviceLocation)}))&&(i=e[n]),i}}}o.__dashjs_factory_name="BasicSelector",n.default=r.default.getClassFactory(o),t.exports=n.default},{47:47}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(47))&&i.__esModule?i:{default:i};function o(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t=0,n=[],i=0,r=void 0,o=void 0;if((o=e.sort((function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n})).filter((function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority}))).length)return 1<o.length&&(o.forEach((function(e){t+=e.dvb_weight,n.push(t)})),r=Math.floor(Math.random()*(t-1)),n.every((function(e,t){return i=t,!(r<e)}))),o[i]}((n=[],e.filter((function(e){return!t.contains(e.serviceLocation)||(e.dvb_priority&&n.push(e.dvb_priority),!1)})).filter((function(e){return!n.length||!e.dvb_priority||-1===n.indexOf(e.dvb_priority)}))));var n}}}o.__dashjs_factory_name="DVBSelector",n.default=r.default.getClassFactory(o),t.exports=n.default},{47:47}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},t.exports=n.default},{}],226:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=i||null},t.exports=n.default},{}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},t.exports=n.default},{}],228:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=e(242),o=(function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(a,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===r.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?r.HTTPRequest.INIT_SEGMENT_TYPE:r.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.action=a.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}o.ACTION_DOWNLOAD="download",o.ACTION_COMPLETE="complete",n.default=o,t.exports=n.default},{242:242}],229:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=e(228))&&i.__esModule?i:{default:i}).default),o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e),this.checkForExistenceOnly=!0}n.default=r,t.exports=n.default},{228:228}],230:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){t&&i(e.prototype,t)}(o,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),o);function o(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new o(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references)for(this.references=[],t=0;t<e.references.length;t++){var n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n)}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];t=0;for(var i=e.samples.length;t<i;t++){var r={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(r)}}}}n.default=r,t.exports=n.default},{}],231:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=n,this.size=i},t.exports=n.default},{}],232:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},t.exports=n.default},{}],233:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e){return e&&e.__esModule?e:{default:e}}var r=i(e(108)),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i(e(228)).default),a);function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=a,i=!0,s=u=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=r.default.STREAM,this.responseType=""}n.default=o,t.exports=n.default},{108:108,228:228}],234:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=n.default},{}],235:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},t.exports=n.default},{}],236:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},t.exports=n.default},{}],237:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},t.exports=n.default},{}],238:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null},t.exports=n.default},{}],239:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e(109))&&i.__esModule?i:{default:i};n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=r.default.BUFFER_EMPTY},t.exports=n.default},{109:109}],240:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null},t.exports=n.default},{}],241:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null},t.exports=n.default},{}],242:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){i(this,r),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null}Object.defineProperty(n,"__esModule",{value:!0}),r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.OTHER_TYPE="other",n.HTTPRequest=r,n.HTTPRequestTrace=function e(){i(this,e),this.s=null,this.d=null,this.b=[]}},{}],243:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ManifestUpdate=function e(){i(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},n.ManifestUpdateStreamInfo=function e(){i(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},n.ManifestUpdateRepresentationInfo=function e(){i(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},{}],244:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){i(this,r),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}function o(){i(this,o),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}Object.defineProperty(n,"__esModule",{value:!0}),r.INITIAL_PLAYOUT_START_REASON="initial_playout",r.SEEK_START_REASON="seek",r.RESUME_FROM_PAUSE_START_REASON="resume",r.METRICS_COLLECTION_START_REASON="metrics_collection_start",o.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",o.REBUFFERING_REASON="rebuffering",o.USER_REQUEST_STOP_REASON="user_request",o.END_OF_PERIOD_STOP_REASON="end_of_period",o.END_OF_CONTENT_STOP_REASON="end_of_content",o.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",o.FAILURE_STOP_REASON="failure",n.PlayList=r,n.PlayListTrace=o},{}],245:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=n.default},{}],246:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]},t.exports=n.default},{}],247:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=n.default},{}]},{},[4]),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsHlsQualitySelector=t(e.videojs)}(this,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=(function(){function e(e){this.value=e}function t(t){var n,i;function r(n,i){try{var a=t[n](i),s=a.value;s instanceof e?Promise.resolve(s.value).then((function(e){r("next",e)}),(function(e){r("throw",e)})):o(a.done?"return":"normal",a.value)}catch(n){o("throw",n)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?r(n.key,n.arg):i=null}this._invoke=function(e,t){return new Promise((function(o,a){var s={key:e,arg:t,resolve:o,reject:a,next:null};i?i=i.next=s:(n=i=s,r(e,t))}))},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},o=e.getComponent("MenuButton"),a=e.getComponent("Menu"),s=e.getComponent("Component"),l=e.dom,u=function(e){function t(i){return n(this,t),r(this,e.call(this,i,{title:i.localize("Quality")}))}return i(t,e),t.prototype.createItems=function(){return[]},t.prototype.createMenu=function(){var e,t=new a(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var n=l.createEl("li",{className:"vjs-menu-title",innerHTML:(e=this.options_.title,"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)),tabIndex:-1}),i=new s(this.player_,{el:n});this.hideThreshold_+=1,t.addItem(i)}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)t.addItem(this.items[r]);return t},t}(o),d=function(e){function t(i,o,a,s){n(this,t);var l=r(this,e.call(this,i,{label:o.label,selectable:!0,selected:o.selected||!1}));return l.item=o,l.qualityButton=a,l.plugin=s,l}return i(t,e),t.prototype.handleClick=function(){for(var e=0;e<this.qualityButton.items.length;++e)this.qualityButton.items[e].selected(!1);this.plugin.setQuality(this.item.value),this.selected(!0)},t}(e.getComponent("MenuItem")),c={},p=e.registerPlugin||e.plugin,h=function(){function e(t,i){n(this,e),this.player=t,this.player.qualityLevels&&this.getHls()&&(this.createQualityButton(),this.bindPlayerEvents())}return e.prototype.getHls=function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).hls},e.prototype.bindPlayerEvents=function(){this.player.qualityLevels().on("addqualitylevel",this.onAddQualityLevel.bind(this))},e.prototype.createQualityButton=function(){var e=this.player;this._qualityButton=new u(e);var t=e.controlBar.children().length-2,n=e.controlBar.addChild(this._qualityButton,{componentClass:"qualitySelector"},t);n.addClass("vjs-quality-selector"),n.menuButton_.$(".vjs-icon-placeholder").className+=" vjs-icon-hd",n.removeClass("vjs-hidden")},e.prototype.getQualityMenuItem=function(e){var t=this.player;return new d(t,e,this._qualityButton,this)},e.prototype.onAddQualityLevel=function(){for(var e=this,n=this.player,i=n.qualityLevels().levels_||[],r=[],o=function(t){if(!r.filter((function(e){return e.item&&e.item.value===i[t].height})).length){var n=e.getQualityMenuItem.call(e,{label:i[t].height+"p",value:i[t].height});r.push(n)}},a=0;a<i.length;++a)o(a);r.sort((function(e,n){return"object"!==(void 0===e?"undefined":t(e))||"object"!==(void 0===n?"undefined":t(n))||e.item.value<n.item.value?-1:e.item.value>n.item.value?1:0})),r.push(this.getQualityMenuItem.call(this,{label:n.localize("Auto"),value:"auto",selected:!0})),this._qualityButton&&(this._qualityButton.createItems=function(){return r},this._qualityButton.update())},e.prototype.setQuality=function(e){for(var t=this.player.qualityLevels(),n=0;n<t.length;++n){var i=t[n];i.enabled=i.height===e||"auto"===e}this._qualityButton.unpressButton()},e}(),f=function(t){var n=this;this.ready((function(){var i,r;i=n,r=e.mergeOptions(c,t),i.addClass("vjs-hls-quality-selector"),i.hlsQualitySelector=new h(i,r)}))};return p("hlsQualitySelector",f),f.VERSION="1.0.5",f})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/document")):"function"==typeof define&&define.amd?define(["video.js","global/document"],t):e.videojsContribQualityLevels=t(e.videojs,e.document)}(this,(function(e,t){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var i=function(i){var r,o;function a(){var r,o=n(n(r=i.call(this)||this));if(e.browser.IS_IE8)for(var s in o=t.createElement("custom"),a.prototype)"constructor"!==s&&(o[s]=a.prototype[s]);return o.levels_=[],o.selectedIndex_=-1,Object.defineProperty(o,"selectedIndex",{get:function(){return o.selectedIndex_}}),Object.defineProperty(o,"length",{get:function(){return o.levels_.length}}),o||n(r)}o=i,(r=a).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o;var s=a.prototype;return s.addQualityLevel=function(n){var i=this.getQualityLevelById(n.id);if(i)return i;var r=this.levels_.length;return i=new function n(i){var r=this;if(e.browser.IS_IE8)for(var o in r=t.createElement("custom"),n.prototype)"constructor"!==o&&(r[o]=n.prototype[o]);return r.id=i.id,r.label=r.id,r.width=i.width,r.height=i.height,r.bitrate=i.bandwidth,r.enabled_=i.enabled,Object.defineProperty(r,"enabled",{get:function(){return r.enabled_()},set:function(e){r.enabled_(e)}}),r}(n),""+r in this||Object.defineProperty(this,r,{get:function(){return this.levels_[r]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i},s.removeQualityLevel=function(e){for(var t=null,n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},s.getQualityLevelById=function(e){for(var t=0,n=this.length;t<n;t++){var i=this[t];if(i.id===e)return i}return null},s.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},a}(e.EventTarget);for(var r in i.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},i.prototype.allowedEvents_)i.prototype["on"+r]=null;var o=function(t){return n=this,e.mergeOptions({},t),r=n.qualityLevels,o=new i,n.on("dispose",(function e(){o.dispose(),n.qualityLevels=r,n.off("dispose",e)})),n.qualityLevels=function(){return o},n.qualityLevels.VERSION="2.0.9",o;var n,r,o};return(e.registerPlugin||e.plugin)("qualityLevels",o),o.VERSION="2.0.9",o})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("video.js"),require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["exports","video.js","global/window","global/document"],t):t(e.videojsContribEme={},e.videojs,e.window,e.document)}(this,(function(e,t,n,i){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var r=function(e,i,r){var o=function(e){var t=(new n.DOMParser).parseFromString(String.fromCharCode.apply(null,new Uint16Array(e)),"application/xml"),i=t.getElementsByTagName("HttpHeaders")[0],r={};if(i)for(var o=i.getElementsByTagName("name"),a=i.getElementsByTagName("value"),s=0;s<o.length;s++)r[o[s].childNodes[0].nodeValue]=a[s].childNodes[0].nodeValue;var l,u=t.getElementsByTagName("Challenge")[0];return u&&(l=n.atob(u.childNodes[0].nodeValue)),{headers:r,message:l}}(i),a=o.headers,s=o.message;t.xhr({uri:e,method:"post",headers:a,body:s,responseType:"arraybuffer"},r)},o=function(e){var t;return Object.keys(e).forEach((function(i){var r={},o=e[i].audioContentType,a=e[i].videoContentType;o&&(r.audioCapabilities=[{contentType:o}]),a&&(r.videoCapabilities=[{contentType:a}]),t=t?t.catch((function(e){return n.navigator.requestMediaKeySystemAccess(i,[r])})):n.navigator.requestMediaKeySystemAccess(i,[r])})),t},a=function(e){var n=e.mediaKeys,i=e.initDataType,r=e.initData,o=e.options,a=e.getLicense,s=e.removeSession,l=e.eventBus,u=n.createSession();u.addEventListener("message",(function(e){a(o,e.message).then((function(e){return u.update(e)})).catch(t.log.error.bind(t.log.error,"failed to get and set license"))}),!1),u.addEventListener("keystatuseschange",(function(e){var n=!1;u.keyStatuses.forEach((function(i,r){switch(l.trigger({keyId:r,status:i,target:u,type:"keystatuschange"}),i){case"expired":n=!0;break;case"internal-error":t.log.warn('Key status reported as "internal-error." Leaving the session open since we don\'t have enough details to know if this error is fatal.',e)}})),n&&u.close().then((function(){s(r)}))}),!1),u.generateRequest(i,r).catch(t.log.error.bind(t.log.error,"Unable to create or initialize key session"))},s=function(e,t){return function(n,i){return new Promise((function(r,o){e(n,i,(function(e,n){t&&t.trigger("licenserequestattempted"),e&&o(e),r(n)}))}))}},l=function(e,n){if("string"==typeof n&&(n={url:n}),!n.url&&!n.getLicense)throw new Error("Neither URL nor getLicense function provided to get license");var i;return n.url&&!n.getLicense&&(n.getLicense="com.microsoft.playready"===e?(i=n.url,function(e,t,n){r(i,t,(function(e,t,i){e?n(e):n(null,i)}))}):function(e){return function(n,i,r){t.xhr({uri:e,method:"POST",responseType:"arraybuffer",body:i,headers:{"Content-type":"application/octet-stream"}},(function(e,t,n){e?r(e):r(null,n)}))}}(n.url)),n},u=function(e){var n=e.video,i=e.initDataType,r=e.initData,u=e.options,d=e.removeSession,c=e.eventBus,p=Promise.resolve();if(void 0===n.mediaKeysObject){var h,f;if(n.mediaKeysObject=null,n.pendingSessionData=[],!(p=o(u.keySystems)))return t.log.error("No supported key system found"),Promise.resolve();p=p.then((function(e){return new Promise((function(t,i){n.keySystem=e.keySystem,(f=l(e.keySystem,u.keySystems[e.keySystem])).getCertificate?f.getCertificate(u,(function(n,r){n?i(n):(h=r,t(e))})):t(e)}))})).then((function(e){return e.createMediaKeys()})).then((function(e){return function(e){var t=e.video,n=e.certificate,i=e.createdMediaKeys,r=e.options,o=e.getLicense,s=e.removeSession,l=e.eventBus;t.mediaKeysObject=i,n&&i.setServerCertificate(n);for(var u=0;u<t.pendingSessionData.length;u++){var d=t.pendingSessionData[u];a({mediaKeys:t.mediaKeysObject,initDataType:d.initDataType,initData:d.initData,options:r,getLicense:o,removeSession:s,eventBus:l})}return t.pendingSessionData=[],t.setMediaKeys(i)}({video:n,certificate:h,createdMediaKeys:e,options:u,getLicense:s(f.getLicense,c),removeSession:d,eventBus:c})})).catch(t.log.error.bind(t.log.error,"Failed to create and initialize a MediaKeys object"))}return p.then((function(){!function(e){var t=e.video,n=e.initDataType,i=e.initData,r=e.options,o=e.getLicense,s=e.removeSession,l=e.eventBus;t.mediaKeysObject?a({mediaKeys:t.mediaKeysObject,initDataType:n,initData:i,options:r,getLicense:o,removeSession:s,eventBus:l}):t.pendingSessionData.push({initDataType:n,initData:i})}({video:n,initDataType:i,initData:r,options:u,getLicense:n.keySystem?s(l(n.keySystem,u.keySystems[n.keySystem]).getLicense,c):null,removeSession:d,eventBus:c})}))},d=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),i=new DataView(t),r=0;r<n.byteLength;r++)if(n.getUint8(r)!==i.getUint8(r))return!1;return!0},c=function(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e},p=function(e,t){return o=t,n=String.fromCharCode.apply(null,new Uint16Array(o.buffer)),(r=i.createElement("a")).href=n,r.hostname;var n,r,o},h=function(e){var i,r,o=e.video,a=e.initData,s=e.options,l=e.eventBus,u=s.keySystems["com.apple.fps.1_0"],d=u.getCertificate||(i=u.certificateUri,function(e,n){t.xhr({uri:i,responseType:"arraybuffer"},(function(e,t,i){e?n(e):n(null,new Uint8Array(i))}))}),c=u.getContentId||p,h=u.getLicense||(r=u.licenseUri,function(e,n,i,o){t.xhr({uri:r,method:"POST",responseType:"arraybuffer",body:i,headers:{"Content-type":"application/octet-stream"}},(function(e,t,n){e?o(e):o(null,n)}))});return new Promise((function(e,t){d(s,(function(n,i){n?t(n):e(i)}))})).then((function(e){return function(e){var t=e.video,i=e.contentId,r=e.initData,o=e.cert,a=e.options,s=e.getLicense,l=e.eventBus;return new Promise((function(e,u){if(t.webkitKeys||t.webkitSetMediaKeys(new n.WebKitMediaKeys("com.apple.fps.1_0")),t.webkitKeys){var d=t.webkitKeys.createSession("video/mp4",function(e){var t=e.initData,n=e.id,i=e.cert;"string"==typeof n&&(n=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(n));var r=0,o=new ArrayBuffer(t.byteLength+4+n.byteLength+4+i.byteLength),a=new DataView(o);new Uint8Array(o,r,t.byteLength).set(t),r+=t.byteLength,a.setUint32(r,n.byteLength,!0),r+=4;var s=new Uint16Array(o,r,n.length);return s.set(n),r+=s.byteLength,a.setUint32(r,i.byteLength,!0),r+=4,new Uint8Array(o,r,i.byteLength).set(i),new Uint8Array(o,0,o.byteLength)}({id:i,initData:r,cert:o}));d?(d.contentId=i,d.addEventListener("webkitkeymessage",(function(e){s(a,i,e.message,(function(e,t){l&&l.trigger("licenserequestattempted"),e?u(e):d.update(new Uint8Array(t))}))})),d.addEventListener("webkitkeyadded",(function(t){e(t)})),d.addEventListener("webkitkeyerror",(function(e){u(e)}))):u("Could not create key session")}else u("Could not create MediaKeys")}))}({video:o,cert:e,initData:a,getLicense:h,options:s,contentId:c(s,a),eventBus:l})})).catch(t.log.error.bind(t.log.error))},f=function(e,n,i,o){var a=e.msKeys.createSession("video/mp4",n);a?(a.addEventListener("mskeymessage",(function(e){!function(e,n,i,o){var a=e.keySystems["com.microsoft.playready"];if("function"!=typeof a.getKey){"string"==typeof a&&(a={url:a});var s=a.url||i.destinationURL;r(s,i.message.buffer,(function(e,i){o&&o.trigger("licenserequestattempted"),e?t.log.error("Unable to request key from url: "+s):n.update(new Uint8Array(i.body))}))}else a.getKey(e,i.destinationURL,i.message.buffer,(function(e,i){e?t.log.error("Unable to get key: "+e):n.update(i)}))}(i,a,e,o)})),a.addEventListener("mskeyerror",(function(e){t.log.error("Unexpected key error from key session with code: "+a.error.code+" and systemCode: "+a.error.systemCode)}))):t.log.error("Could not create key session.")},g=function(e,t){for(var n=0;n<e.length;n++)if(e[n].initData){var i=c(e[n].initData),r=c(t);if(d(i,r))return!0}return!1},m=function(e,t){for(var n=0;n<e.length;n++)if(e[n].initData===t)return void e.splice(n,1)},y=function(e,t,n,i){if(!t||!t.keySystems)return Promise.resolve();var r=e.initData;return o(t.keySystems).then((function(o){var a=o.keySystem;if(t.keySystems[a]&&t.keySystems[a].pssh&&(r=t.keySystems[a].pssh),!g(n,r)&&r)return n.push({initData:r}),u({video:e.target,initDataType:e.initDataType,initData:r,options:t,removeSession:m.bind(null,n),eventBus:i})}))},v=function(e,t,n){if(t.keySystems&&t.keySystems["com.apple.fps.1_0"]&&e.initData)return h({video:e.target,initData:e.initData,options:t,eventBus:n})},_=function(e,i,r,o){if(i.keySystems&&i.keySystems["com.microsoft.playready"]&&!r.reduce((function(e,t){return e||t.playready}),!1)){var a=e.initData;i.keySystems["com.microsoft.playready"]&&i.keySystems["com.microsoft.playready"].pssh&&(a=i.keySystems["com.microsoft.playready"].pssh),a&&(r.push({playready:!0,initData:a}),function(e){var i=e.video,r=e.initData,o=e.options,a=e.eventBus;i.msKeys&&delete i.msKeys;try{i.msSetMediaKeys(new n.MSMediaKeys("com.microsoft.playready"))}catch(e){return void t.log.error("Unable to create media keys for PlayReady key system. Error: "+e.message)}f(i,r,o,a)}({video:e.target,initData:a,options:i,eventBus:o}))}},b=function(e){return t.mergeOptions(e.currentSource(),e.eme.options)},E=function(e){var t=e.src();t!==e.eme.activeSrc&&(e.eme.activeSrc=t,e.eme.sessions=[])},T=function(e){void 0===e&&(e={});var n=this;n.ready((function(){return function(e){"video"===e.$(".vjs-tech").tagName.toLowerCase()&&(E(e),e.tech_.el_.addEventListener("encrypted",(function(t){E(e),y(t,b(e),e.eme.sessions,e.tech_)})),e.tech_.el_.addEventListener("webkitneedkey",(function(t){E(e),v(t,b(e),e.tech_)})),t.browser.IS_EDGE||e.tech_.el_.addEventListener("msneedkey",(function(t){E(e),_(t,b(e),e.eme.sessions,e.tech_)})))}(n)})),n.eme={initializeMediaKeys:function(i,r){void 0===i&&(i={}),void 0===r&&(r=function(){});var o=t.mergeOptions(n.currentSource(),e,i),a={initDataType:"cenc",initData:null,target:n.tech_.el_};E(n),n.tech_.el_.setMediaKeys?y(a,o,n.eme.sessions,n.tech_).then((function(){return r()})).catch((function(e){return r(e)})):n.tech_.el_.msSetMediaKeys&&(_(a,o,n.eme.sessions,n.tech_),r())},options:e}};(t.registerPlugin||t.plugin)("eme",T),e.hasSession=g,e.removeSession=m,e.handleEncryptedEvent=y,e.handleWebKitNeedKeyEvent=v,e.handleMsNeedKeyEvent=_,e.getOptions=b,e.setupSessions=E,e.default=T,Object.defineProperty(e,"__esModule",{value:!0})})),
/**
 * videojs-language-switch
 * @version 1.2.0
 * @copyright 2018 Adam Oliver <mail@adamoliver.net>
 * @license MIT
 */
function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojsLanguageSwitch=e()}}((function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,(function(e){var n=t[a][1][e];return r(n||e)}),d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){(function(t){"use strict";n.__esModule=!0;var i=o("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),r=o(e("./menuItem.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a=i.default.getComponent("MenuButton"),s=void 0,l=void 0,u=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=i.languages,l=i.defaultLanguage;var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return r.addClass("vjs-language-switch"),r.controlText(n.localize("Switch language")),r.options=i,r.addCustomIconClass(i),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addCustomIconClass=function(e){var t=this.el_.childNodes[0].children[0],n=e.buttonClass||"icon-globe";t.className+=" "+n},t.prototype.createItems=function(){var e=this.player_;return s.map((function(t){return new r.default(e,{sources:t.sources,label:t.name,defaultSelection:l===t.name})}))},t}(a);n.default=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./menuItem.js":2}],2:[function(e,t,n){(function(e){"use strict";n.__esModule=!0;var t,i="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null;var r=((t=i)&&t.__esModule?t:{default:t}).default.getComponent("MenuItem"),o=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return r.addClass("vjs-language-switch__item"),r.selectable=!0,r.options=i,r.selected(i.defaultSelection),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(e){this.player_.trigger("changedlanguage",this.options),this.selected(this.player_.activeLanguage===this.options.label)},t}(r);r.registerComponent("LanguageMenuItem",o),n.default=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){(function(t){"use strict";n.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=a("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),o=a(e("./menuButton.js"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){var r=e.currentTime();e.activeLanguage=t.label,function(e){var t=e.el().getElementsByClassName("vjs-language-switch__item");Array.from(t).forEach((function(e){e.classList.remove("vjs-selected")}))}(e);var o,a,s,l=e.currentSources().filter((function(e){if(e.selected)return!0===e.selected}));l.length&&(o=l[0].type,a=l[0].label,s=t.sources,t.sources.map((function(e,t){if(e.label===a&&e.type===o){var n=s.splice(t,1);s.unshift(n[0])}}))),e.src(t.sources.map((function(e,t){var n={src:e.src,type:e.type,res:e.res,label:e.label};return l.length||0!==t?n:i(n,{selected:!0})}))),e.on("loadedmetadata",(function(){e.currentTime(r),e.play()}))},l=function(e){var t=this;this.ready((function(){!function(e,t){e.on("changedlanguage",(function(t,n){s(e,n)})),e.getChild("controlBar").addChild("LanguageMenuButton",t,t.positionIndex)}(t,e)}))};r.default.registerComponent("LanguageMenuButton",o.default),r.default.registerPlugin("languageSwitch",l),l.VERSION="1.2.0",n.default=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./menuButton.js":1}]},{},[3])(3)})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("dashjs"),require("video.js"),require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["dashjs","video.js","global/window","global/document"],t):e.videojsDash=t(e.dashjs,e.videojs,e.window,e.document)}(this,(function(e,t,n,i){"use strict";function r(n,i){n.dash.mediaPlayer.on(e.MediaPlayer.events.PLAYBACK_METADATA_LOADED,function(n,i){var r=n.dash.mediaPlayer,o=r.getTracksFor("audio"),a=n.audioTracks();function s(e){return"dash-audio-"+e}function l(e,t){return e.find((function(e){return s(e.index)===t.id}))}a.length&&i.clearTracks(["audio"]);var u=r.getCurrentTrackFor("audio");o.forEach((function(e){var i,r;if(Array.isArray(e.labels))for(var o=0;o<e.labels.length;o++)if(e.labels[o].lang&&-1!==n.language().indexOf(e.labels[o].lang.toLowerCase())){i=e.labels[o];break}i?r=i.text:Array.isArray(e.labels)&&1===e.labels.length?r=e.labels[0].text:(r=e.lang,e.roles&&e.roles.length&&(r+=" ("+e.roles.join(", ")+")")),a.addTrack(new t.AudioTrack({enabled:e===u,id:s(e.index),kind:e.kind||"main",label:r,language:e.lang}))}));var d=function(){for(var e=0;e<a.length;e++){var t=a[e];if(t.enabled){var n=l(o,t);r.setCurrentTrack(n)}}};a.addEventListener("change",d),n.dash.mediaPlayer.on(e.MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,(function(){a.removeEventListener("change",d)}))}.bind(null,n,i))}function o(i,r,o){n.VTTCue&&!/\[native code\]/.test(n.VTTCue.toString())&&(n.VTTCue=!1);var a=[];if(r.featuresNativeTextTracks)t.log.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash");else{var s=i.dash.mediaPlayer;s.on(e.MediaPlayer.events.TEXT_TRACKS_ADDED,l),s.on(e.MediaPlayer.events.CAN_PLAY,(function(){s.off(e.MediaPlayer.events.TEXT_TRACKS_ADDED,l)}))}function l(t){t.index;var n=t.tracks;s.off(e.MediaPlayer.events.TEXT_TRACKS_ADDED,l),a.forEach(i.removeRemoteTextTrack.bind(i)),a=[],n.length&&(a=function(t,n,i){var r=[],o=i.map((function(e){var n;if(Array.isArray(e.labels))for(var i=0;i<e.labels.length;i++)if(e.labels[i].lang&&-1!==t.language().indexOf(e.labels[i].lang.toLowerCase())){n=e.labels[i];break}return{dashTrack:e,trackConfig:{label:n?n.text:Array.isArray(e.labels)&&1===e.labels.length?e.labels[0].text:e.lang||e.label,language:e.lang,srclang:e.lang,kind:e.kind}}})).map((function(e){var n=e.trackConfig,i=e.dashTrack,o=t.addRemoteTextTrack(n,!1);return r.push({textTrack:o.track,dashTrack:i}),o}));function a(){for(var e=t.dash.mediaPlayer,n=t.textTracks(),o=-1,a=function(e){var t=n[e];if("showing"===t.mode){var a=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}(r,(function(e){return e.textTrack===t})),s=a?a.dashTrack:null;s&&(o=i.indexOf(s))}},s=0;s<n.length;s+=1)a(s);o!==e.getCurrentTextTrackIndex()&&e.setTextTrack(o)}return t.textTracks().on("change",a),t.dash.mediaPlayer.on(e.MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,(function(){t.textTracks().off("change",a)})),a(),o}(i,0,n))}}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var a=function(){function n(i,a,s){var l=this;if(s=s||a.options_,this.player=t(s.playerId),this.player.dash=this.player.dash||{},this.tech_=a,this.el_=a.el(),this.elParent_=this.el_.parentNode,this.hasFiniteDuration_=!1,i.src){a.isReady_=!1,n.updateSourceData&&(t.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),i=n.updateSourceData(i)),n.hooks("updatesource").forEach((function(e){i=e(i)}));var u=i.src;this.keySystemOptions_=n.buildDashJSProtData(i.keySystemOptions),this.player.dash.mediaPlayer=e.MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,this.mediaPlayer_.setTextDefaultEnabled(!1),n.useVideoJSDebug&&(t.log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),n.useVideoJSDebug(this.mediaPlayer_)),n.beforeInitialize&&(t.log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),n.beforeInitialize(this.player,this.mediaPlayer_)),n.hooks("beforeinitialize").forEach((function(e){e(l.player,l.mediaPlayer_)})),this.mediaPlayer_.initialize(),this.retriggerError_=function(e){if("capability"===e.error&&"mediasource"===e.event)l.player.error({code:4,message:"The media cannot be played because it requires a feature that your browser does not support."});else if("manifestError"!==e.error||"createParser"!==e.event.id&&"codec"!==e.event.id&&"nostreams"!==e.event.id&&"nostreamscomposed"!==e.event.id&&"parse"!==e.event.id&&"multiplexedrep"!==e.event.id)if("mediasource"===e.error)e.event.match("MEDIA_ERR_ABORTED")?l.player.error({code:1,message:e.event}):e.event.match("MEDIA_ERR_NETWORK")?l.player.error({code:2,message:e.event}):e.event.match("MEDIA_ERR_DECODE")?l.player.error({code:3,message:e.event}):e.event.match("MEDIA_ERR_SRC_NOT_SUPPORTED")?l.player.error({code:4,message:e.event}):e.event.match("MEDIA_ERR_ENCRYPTED")?l.player.error({code:5,message:e.event}):(e.event.match("UNKNOWN"),l.player.error({code:4,message:e.event}));else if("capability"===e.error&&"encryptedmedia"===e.event)l.player.error({code:5,message:"The media cannot be played because it requires encryption features that your browser does not support."});else if("key_session"===e.error)l.player.error({code:5,message:e.event});else if("download"===e.error)l.player.error({code:2,message:"The media playback was aborted because too many consecutive download errors occurred."});else{if("mssError"!==e.error)return;l.player.error({code:3,message:e.event})}else l.player.error({code:4,message:e.event.message});setTimeout((function(){l.mediaPlayer_.reset()}),10)},this.mediaPlayer_.on(e.MediaPlayer.events.ERROR,this.retriggerError_),this.getDuration_=function(e){var t=e.data.Period_asArray,n=l.hasFiniteDuration_;e.data.mediaPresentationDuration||t[t.length-1].duration?l.hasFiniteDuration_=!0:l.hasFiniteDuration_=!1,l.hasFiniteDuration_!==n&&l.player.trigger("durationchange")},this.mediaPlayer_.on(e.MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),s.dash&&Object.keys(s.dash).forEach((function(e){var n,i="set"+e.charAt(0).toUpperCase()+e.slice(1),r=s.dash[e];l.mediaPlayer_.hasOwnProperty(i)&&(t.log.warn("Using dash options in videojs-contrib-dash without the set prefix has been deprecated. Change '"+e+"' to '"+i+"'"),e=i),l.mediaPlayer_.hasOwnProperty(e)?(Array.isArray(r)||(r=[r]),(n=l.mediaPlayer_)[e].apply(n,r)):t.log.warn("Warning: dash configuration option unrecognized: "+e)})),this.mediaPlayer_.attachView(this.el_),this.mediaPlayer_.setAutoPlay(!1),r.call(null,this.player,a),o.call(null,this.player,a,s),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(u),this.tech_.triggerReady()}}n.buildDashJSProtData=function(e){var n={};if(!e||!Array.isArray(e))return null;for(var i=0;i<e.length;i++){var r=e[i],o=t.mergeOptions({},r.options);o.licenseUrl&&(o.serverURL=o.licenseUrl,delete o.licenseUrl),n[r.name]=o}return n};var i=n.prototype;return i.dispose=function(){this.mediaPlayer_&&(this.mediaPlayer_.off(e.MediaPlayer.events.ERROR,this.retriggerError_),this.mediaPlayer_.off(e.MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),this.mediaPlayer_.reset()),this.player.dash&&delete this.player.dash},i.duration=function(){return this.mediaPlayer_.isDynamic()&&!this.hasFiniteDuration_?1/0:this.mediaPlayer_.duration()},n.hooks=function(e,t){return n.hooks_[e]=n.hooks_[e]||[],t&&(n.hooks_[e]=n.hooks_[e].concat(t)),n.hooks_[e]},n.hook=function(e,t){n.hooks(e,t)},n.removeHook=function(e,t){var i=n.hooks(e).indexOf(t);return-1!==i&&(n.hooks_[e]=n.hooks_[e].slice(),n.hooks_[e].splice(i,1),!0)},n}();return a.hooks_={},t.DashSourceHandler=function(){return{canHandleSource:function(e){return function(e){e=JSON.parse(JSON.stringify(e)),a.updateSourceData&&(t.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),e=a.updateSourceData(e)),a.hooks("updatesource").forEach((function(t){e=t(e)}));var r=i.createElement("video");return!(e.keySystemOptions&&!n.navigator.requestMediaKeySystemAccess&&!r.msSetMediaKeys)}(e)?t.DashSourceHandler.canPlayType(e.type)?"probably":/\.mpd/i.test(e.src)?"maybe":"":""},handleSource:function(e,t,n){return new a(e,t,n)},canPlayType:function(e){return t.DashSourceHandler.canPlayType(e)}}},t.DashSourceHandler.canPlayType=function(e){return/^application\/dash\+xml/i.test(e)?"probably":""},n.MediaSource&&t.getTech("Html5").registerSourceHandler(t.DashSourceHandler(),0),t.Html5DashJS=a,a})),
/*
 * videojs-contrib-ads
 * @version 6.3.0
 * @copyright 2018 Brightcove, Inc.
 * @license Apache-2.0
 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsContribAds=t(e.videojs)}(this,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},n=function(e,n,i){t(0,i),e.trigger({type:n+i.type,originalEvent:i})};function i(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&n(e,"content",t):n(e,"ad",t))}(this,e):"ended"===e.type?function(e,i){e.ads.isInAdMode()?e.ads.isContentResuming()?(t(0,i),e.trigger("resumeended")):n(e,"ad",i):e.ads._contentHasEnded||(n(e,"content",i),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())n(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;n(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?n(e,"ad",t):e.ads.isContentResuming()&&n(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?n(this,"content",e):n(this,"ad",e))}var r,o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a="undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:{},s={},l=(Object.freeze||Object)({default:s}),u=l&&s||l,d=void 0!==o?o:"undefined"!=typeof window?window:{};"undefined"!=typeof document?r=document:(r=d["__GLOBAL_DOCUMENT_CACHE@4"])||(r=d["__GLOBAL_DOCUMENT_CACHE@4"]=u);var c=r,p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=(function(){function e(e){this.value=e}function t(t){var n,i;function r(n,i){try{var a=t[n](i),s=a.value;s instanceof e?Promise.resolve(s.value).then((function(e){r("next",e)}),(function(e){r("throw",e)})):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?r(n.key,n.arg):i=null}this._invoke=function(e,t){return new Promise((function(o,a){var s={key:e,arg:t,resolve:o,reject:a,next:null};i?i=i.next=s:(n=i=s,r(e,t))}))},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),f=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},m=function(e,t){return t?encodeURIComponent(e):e},y=function(e,t,n){if(e&&e[n])for(var i=e[n],r=Object.keys(i),o=0;o<r.length;o++){t["{mediainfo."+n+"."+r[o]+"}"]=i[r[o]]}};function v(t,n,i){void 0===n&&(n=!1);var r={};for(var o in void 0!==i&&(r=i),r["{player.id}"]=this.options_["data-player"],r["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",r["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",r["{mediainfo.description}"]=this.mediainfo?this.mediainfo.description:"",r["{mediainfo.tags}"]=this.mediainfo?this.mediainfo.tags:"",r["{mediainfo.reference_id}"]=this.mediainfo?this.mediainfo.reference_id:"",r["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",r["{mediainfo.ad_keys}"]=this.mediainfo?this.mediainfo.ad_keys:"",r["{player.duration}"]=this.duration(),r["{timestamp}"]=(new Date).getTime(),r["{document.referrer}"]=c.referrer,r["{window.location.href}"]=a.location.href,r["{random}"]=Math.floor(1e12*Math.random()),y(this.mediainfo,r,"custom_fields"),y(this.mediainfo,r,"customFields"),r)t=t.split(o).join(m(r[o],n));return t=t.replace(/{pageVariable\.([^}]+)}/g,(function(t,i){for(var r=void 0,o=a,s=i.split("."),l=0;l<s.length;l++)l===s.length-1?r=o[s[l]]:o=o[s[l]];var u=void 0===r?"undefined":p(r);return null===r?"null":void 0===r?(e.log.warn('Page variable "'+i+'" not found'),""):"string"!==u&&"number"!==u&&"boolean"!==u?(e.log.warn('Page variable "'+i+'" is not a supported type'),""):m(String(r),n)}))}var _={processMetadataTracks:function(e,t){for(var n=e.textTracks(),i=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},r=0;r<n.length;r++)i(n[r]);n.addEventListener("addtrack",(function(e){i(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},b=function(e,t){return void 0!==t&&e.ads.includedCues[t]},E=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function T(){var e=this;!1!==e.ads._shouldBlockPlay&&(e.paused()||(e.ads.debug("Playback was canceled by cancelContentPlay"),e.pause()),e.ads._cancelledPlay=!0)}_.processAdTrack=function(t,n,i,r){t.ads.includedCues={};for(var o=0;o<n.length;o++){var a=n[o],s=this.getSupportedAdCue(t,a);if(!this.isSupportedAdCue(t,a))return void e.log.warn("Skipping as this is not a supported ad cue.",a);var l=this.getCueId(t,a),u=a.startTime;if(b(t,l))return void e.log("Skipping ad already seen with ID "+l);r&&r(t,s,l,u),i(t,s,l,u),E(t,l)}};var C={},S=e;C.isMiddlewareMediatorSupported=function(){return!S.browser.IS_IOS&&!S.browser.IS_ANDROID&&!!(S.use&&S.middleware&&S.middleware.TERMINATOR)},C.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,S.middleware.TERMINATOR},play:function(t,n){e.ads&&e.ads._playBlocked&&t&&(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1)}}},C.testHook=function(e){S=e};var w=function(){function t(e){h(this,t),this.player=e}return t._getName=function(){return"Anonymous State"},t.prototype.transitionTo=function(e){var t=this.player,n=this;n.cleanup(t);var i=new e(t);t.ads._state=i,t.ads.debug(n.constructor._getName()+" -> "+i.constructor._getName());for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];i.init.apply(i,[t].concat(o))},t.prototype.init=function(){},t.prototype.cleanup=function(){},t.prototype.onPlay=function(){},t.prototype.onPlaying=function(){},t.prototype.onEnded=function(){},t.prototype.onAdsReady=function(){e.log.warn("Unexpected adsready event")},t.prototype.onAdsError=function(){},t.prototype.onAdsCanceled=function(){},t.prototype.onAdTimeout=function(){},t.prototype.onAdStarted=function(){},t.prototype.onContentChanged=function(){},t.prototype.onContentResumed=function(){},t.prototype.onReadyForPostroll=function(){e.log.warn("Unexpected readyforpostroll event")},t.prototype.onNoPreroll=function(){},t.prototype.onNoPostroll=function(){},t.prototype.startLinearAdMode=function(){e.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.prototype.endLinearAdMode=function(){e.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.prototype.skipLinearAdMode=function(){e.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.prototype.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.prototype.isWaitingForAdBreak=function(){return!1},t.prototype.isContentResuming=function(){return!1},t.prototype.inAdBreak=function(){return!1},t.prototype.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e&&this.onNoPostroll(t)},t}(),A=function(e){function t(n){h(this,t);var i=g(this,e.call(this,n));return i.contentResuming=!1,i.waitingForAdBreak=!1,i}return f(t,e),t.prototype.isAdState=function(){return!0},t.prototype.onPlaying=function(){this.contentResuming&&this.transitionTo(D)},t.prototype.onContentResumed=function(){this.contentResuming&&this.transitionTo(D)},t.prototype.isWaitingForAdBreak=function(){return this.waitingForAdBreak},t.prototype.isContentResuming=function(){return this.contentResuming},t.prototype.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(w),k=function(e){function t(){return h(this,t),g(this,e.apply(this,arguments))}return f(t,e),t.prototype.isAdState=function(){return!1},t.prototype.onContentChanged=function(e){e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(R):(this.transitionTo(I,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(w);var P={start:function(t){t.ads.debug("Starting ad break"),t.ads._inLinearAdMode=!0,t.trigger("adstart"),t.ads.shouldPlayContentBehindAd(t)||(t.ads.snapshot=function(t){var n=void 0;n=e.browser.IS_IOS&&t.ads.isLive(t)&&t.seekable().length>0?t.currentTime()-t.seekable().end(0):t.currentTime();var i=t.$(".vjs-tech"),r=t.textTracks?t.textTracks():[],o=[],a={ended:t.ended(),currentSrc:t.currentSrc(),src:t.tech_.src(),currentTime:n,type:t.currentType()};i&&(a.nativePoster=i.poster,a.style=i.getAttribute("style"));for(var s=0;s<r.length;s++){var l=r[s];o.push({track:l,mode:l.mode}),l.mode="disabled"}return a.suppressedTracks=o,a}(t)),t.ads.shouldPlayContentBehindAd(t)&&(t.ads.preAdVolume_=t.volume(),t.volume(0)),t.addClass("vjs-ad-playing"),t.hasClass("vjs-live")&&t.removeClass("vjs-live"),t.ads.removeNativePoster()},end:function(t,n){t.ads.debug("Ending ad break"),void 0===n&&(n=function(){}),t.ads.adType=null,t.ads._inLinearAdMode=!1,t.trigger("adend"),t.removeClass("vjs-ad-playing"),t.ads.isLive(t)&&t.addClass("vjs-live"),t.ads.shouldPlayContentBehindAd(t)?(t.volume(t.ads.preAdVolume_),n()):function(t,n,i){if(void 0===i&&(i=function(){}),!0===t.ads.disableNextSnapshotRestore)return t.ads.disableNextSnapshotRestore=!1,void i();var r=t.$(".vjs-tech"),o=20,a=n.suppressedTracks,s=void 0,l=function(){for(var e=0;e<a.length;e++)(s=a[e]).track.mode=s.mode},u=function(){var i=void 0;e.browser.IS_IOS&&t.ads.isLive(t)?n.currentTime<0&&(i=t.seekable().length>0?t.seekable().end(0)+n.currentTime:t.currentTime(),t.currentTime(i)):n.ended?t.currentTime(t.duration()):(t.currentTime(n.currentTime),t.play()),t.ads.shouldRemoveAutoplay_&&(t.autoplay(!1),t.ads.shouldRemoveAutoplay_=!1)},d=function n(){if(t.off("contentcanplay",n),t.ads.tryToResumeTimeout_&&(t.clearTimeout(t.ads.tryToResumeTimeout_),t.ads.tryToResumeTimeout_=null),(r=t.el().querySelector(".vjs-tech")).readyState>1)return u();if(void 0===r.seekable)return u();if(r.seekable.length>0)return u();if(o--)t.setTimeout(n,50);else try{u()}catch(t){e.log.warn("Failed to resume the content after an advertisement",t)}};n.nativePoster&&(r.poster=n.nativePoster),"style"in n&&r.setAttribute("style",n.style||""),t.ads.videoElementRecycled()?(t.one("resumeended",i),t.one("contentloadedmetadata",l),e.browser.IS_IOS&&!t.autoplay()&&(t.autoplay(!0),t.ads.shouldRemoveAutoplay_=!0),t.src({src:n.currentSrc,type:n.type}),t.one("contentcanplay",d),t.ads.tryToResumeTimeout_=t.setTimeout(d,2e3)):(l(),t.ended()||t.play(),i())}(t,t.ads.snapshot,n)}},I=function(t){function n(){return h(this,n),g(this,t.apply(this,arguments))}return f(n,t),n._getName=function(){return"Preroll"},n.prototype.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var i=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(i=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),i),t?this.handleAdsReady():this.adsReady=!1},n.prototype.onAdsReady=function(t){t.ads.inAdBreak()?e.log.warn("Unexpected adsready event (Preroll)"):(t.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.prototype.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.prototype.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},n.prototype.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},n.prototype.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},n.prototype.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.prototype.onAdsError=function(t){var n=this;e.log("adserror (Preroll)"),this.inAdBreak()?t.ads.endLinearAdMode():this.afterLoadStart((function(){n.resumeAfterNoPreroll(t)}))},n.prototype.startLinearAdMode=function(){var t=this.player;!this.adsReady||t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(t.clearTimeout(this._timeout),t.ads.adType="preroll",this.waitingForAdBreak=!1,P.start(t),t.ads._shouldBlockPlay=!1)},n.prototype.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.prototype.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),P.end(e),this.contentResuming=!0)},n.prototype.skipLinearAdMode=function(){var t=this,n=this.player;n.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){n.trigger("adskip"),n.ads.debug("skipLinearAdMode (Preroll)"),t.resumeAfterNoPreroll(n)}))},n.prototype.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},n.prototype.onNoPreroll=function(t){t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.prototype.resumeAfterNoPreroll=function(e){this.contentResuming=!0,e.ads._shouldBlockPlay=!1,e.paused()&&(e.ads._playRequested||e.ads._pausedOnContentupdate)&&e.play()},n.prototype.cleanup=function(t){t.ads._hasThereBeenALoadStartDuringPlayerLife||e.log.warn("Leaving Preroll state before loadstart event can cause issues."),t.removeClass("vjs-ad-loading"),t.removeClass("vjs-ad-content-resuming"),t.clearTimeout(this._timeout)},n}(A),L=function(e){function t(){return h(this,t),g(this,e.apply(this,arguments))}return f(t,e),t._getName=function(){return"Midroll"},t.prototype.init=function(e){e.ads.adType="midroll",P.start(e),e.addClass("vjs-ad-loading")},t.prototype.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},t.prototype.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),P.end(e))},t.prototype.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},t.prototype.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(A),M=function(t){function n(){return h(this,n),g(this,t.apply(this,arguments))}return f(n,t),n._getName=function(){return"Postroll"},n.prototype.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_)this.resumeContent(e),this.transitionTo(x);else{e.addClass("vjs-ad-loading");var t=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(t=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),t)}},n.prototype.startLinearAdMode=function(){var t=this.player;t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(t.ads.adType="postroll",t.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,P.start(t))},n.prototype.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.prototype.endLinearAdMode=function(){var e=this,t=this.player;this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),P.end(t,(function(){e.transitionTo(x)})))},n.prototype.skipLinearAdMode=function(){var t=this.player;t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected skipLinearAdMode invocation"):(t.ads.debug("Postroll abort (skipLinearAdMode)"),t.trigger("adskip"),this.abort(t))},n.prototype.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.prototype.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.prototype.onContentChanged=function(e){this.isContentResuming()?this.transitionTo(R):this.inAdBreak()||this.transitionTo(I)},n.prototype.onNoPostroll=function(t){this.isContentResuming()||this.inAdBreak()?e.log.warn("Unexpected nopostroll event (Postroll)"):this.transitionTo(x)},n.prototype.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.prototype.abort=function(e){this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(x)},n.prototype.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},n}(A),R=function(e){function t(){return h(this,t),g(this,e.apply(this,arguments))}return f(t,e),t._getName=function(){return"BeforePreroll"},t.prototype.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!0},t.prototype.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},t.prototype.onPlay=function(e){e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(I,this.adsReady,this.shouldResumeToContent)},t.prototype.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},t.prototype.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},t.prototype.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},t.prototype.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},t.prototype.onContentChanged=function(){},t}(k),D=function(e){function t(){return h(this,t),g(this,e.apply(this,arguments))}return f(t,e),t._getName=function(){return"ContentPlayback"},t.prototype.init=function(e){e.ads._shouldBlockPlay=!1},t.prototype.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},t.prototype.onReadyForPostroll=function(e){e.ads.debug("Received readyforpostroll event"),this.transitionTo(M)},t.prototype.startLinearAdMode=function(){this.transitionTo(L)},t}(k),x=function(t){function n(){return h(this,n),g(this,t.apply(this,arguments))}return f(n,t),n._getName=function(){return"AdsDone"},n.prototype.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.prototype.startLinearAdMode=function(){e.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},n}(k),O=C.playMiddleware,N=C.isMiddlewareMediatorSupported,B=e.getTech("Html5").Events,U={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0},F=function(t){var n=this,r=e.mergeOptions(U,t),o=B.concat(["firstplay","loadedalldata","playing"]);n.on(o,i),N()&&r.debug?e.log("ADS:","Play middleware has been registered with videojs"):function(t,n){n&&e.log("ADS:","Using cancelContentPlay to block content playback"),t.on("play",T)}(n,r.debug),n.setTimeout((function(){n.ads._hasThereBeenALoadStartDuringPlayerLife||""===n.src()||e.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),n.on("ended",(function(){n.hasClass("vjs-has-started")||n.addClass("vjs-has-started")})),n.on("contenttimeupdate",(function(){n.removeClass("vjs-waiting")})),n.on(["addurationchange","adcanplay"],(function(){n.ads.snapshot&&n.currentSrc()===n.ads.snapshot.currentSrc||n.ads.inAdBreak()&&n.play()})),n.on("nopreroll",(function(){n.ads.debug("Received nopreroll event"),n.ads.nopreroll_=!0})),n.on("nopostroll",(function(){n.ads.debug("Received nopostroll event"),n.ads.nopostroll_=!0})),n.on("playing",(function(){n.ads._cancelledPlay=!1,n.ads._pausedOnContentupdate=!1})),n.on("play",(function(){n.ads._playRequested=!0})),n.one("loadstart",(function(){n.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),n.on("loadeddata",(function(){n.ads._hasThereBeenALoadedData=!0})),n.on("loadedmetadata",(function(){n.ads._hasThereBeenALoadedMetaData=!0})),n.ads=function(t){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:"6.3.0",reset:function(){t.ads.disableNextSnapshotRestore=!1,t.ads._contentEnding=!1,t.ads._contentHasEnded=!1,t.ads.snapshot=null,t.ads.adType=null,t.ads._hasThereBeenALoadedData=!1,t.ads._hasThereBeenALoadedMetaData=!1,t.ads._cancelledPlay=!1,t.ads._shouldBlockPlay=!1,t.ads._playBlocked=!1,t.ads.nopreroll_=!1,t.ads.nopostroll_=!1,t.ads._playRequested=!1},startLinearAdMode:function(){t.ads._state.startLinearAdMode()},endLinearAdMode:function(){t.ads._state.endLinearAdMode()},skipLinearAdMode:function(){t.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(this._stitchedAds=!!e),this._stitchedAds},videoElementRecycled:function(){if(t.ads.shouldPlayContentBehindAd(t))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var e=t.tech_.src()!==this.snapshot.src,n=t.currentSrc()!==this.snapshot.currentSrc;return e||n},isLive:function(t){return"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===e.browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){return!e.browser.IS_IOS&&!e.browser.IS_ANDROID&&t.duration()===1/0},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var e=t.$(".vjs-tech");e&&e.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];1===n.length&&"string"==typeof n[0]?e.log("ADS: "+n[0]):e.log.apply(e,["ADS:"].concat(n))}}}}(n),n.ads.settings=r,n.ads._state=new R(n),n.ads._state.init(n),n.ads.stitchedAds(r.stitchedAds),n.ads.cueTextTracks=_,n.ads.adMacroReplacement=v.bind(n),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(n),n.on("contentchanged",n.ads.reset);var a=function(){var t=n.textTracks();if(!n.ads.shouldPlayContentBehindAd(n)&&n.ads.inAdBreak()&&n.tech_.featuresNativeTextTracks&&e.browser.IS_IOS&&!Array.isArray(n.textTracks()))for(var i=0;i<t.length;i++){var r=t[i];"showing"===r.mode&&(r.mode="disabled")}};n.ready((function(){n.textTracks().addEventListener("change",a)})),n.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","ads-ad-started","contentchanged","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){n.ads._state.handleEvent(e.type)})),n.on("dispose",(function(){n.textTracks().removeEventListener("change",a)}))};return(e.registerPlugin||e.plugin)("ads",F),N()&&e.use("*",O),F})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsIma=t(e.videojs)}(this,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads(t)};t.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},t.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},t.prototype.checkForSeeking=function(){var e=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(e)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},t.prototype.checkForResize=function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();e==this.vjsPlayerDimensions.width&&t==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=e,this.vjsPlayerDimensions.height=t,this.controller.onPlayerResize(e,t))},t.prototype.localContentEndedListener=function(){for(var e in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[e]&&this.contentEndedListeners[e]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},t.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},t.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clearInterval(e[t])},t.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},t.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},t.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},t.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},t.prototype.onVolumeChange=function(){var e=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(e)},t.prototype.injectAdContainerDiv=function(e){this.vjsControls.el().parentNode.appendChild(e)},t.prototype.getContentPlayer=function(){return this.h5Player},t.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},t.prototype.setVolume=function(e){this.vjsPlayer.volume(e),0==e?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},t.prototype.unmute=function(){this.vjsPlayer.muted(!1)},t.prototype.mute=function(){this.vjsPlayer.muted(!0)},t.prototype.play=function(){this.vjsPlayer.play()},t.prototype.getPlayerWidth=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).width;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(e)||this.vjsPlayer.width()},t.prototype.getPlayerHeight=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).height;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(e)||this.vjsPlayer.height()},t.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},t.prototype.getPlayerId=function(){return this.vjsPlayer.id()},t.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},t.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},t.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},t.prototype.onAdLog=function(e){var t=e.getAdData(),n=void 0!==t.adError?t.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:n,AdEvent:e}})},t.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},t.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},t.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},t.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},t.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},t.prototype.changeSource=function(e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},t.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},t.prototype.triggerPlayerEvent=function(e,t){this.vjsPlayer.trigger(e,t)},t.prototype.addContentEndedListener=function(e){this.contentEndedListeners.push(e)},t.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};var n=function(e){this.controller=e,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.createAdContainer()};n.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},n.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},n.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},n.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},n.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},n.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},n.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},n.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},n.prototype.updateAdUi=function(e,t,n,i,r){var o=Math.floor(t/60),a=Math.floor(t%60);a.toString().length<2&&(a="0"+a);var s=": ";r>1&&(s=" ("+i+" "+this.controller.getSettings().adLabelNofN+" "+r+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+s+o+":"+a;var l=100*(e/n);this.progressDiv.style.width=l+"%"},n.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},n.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},n.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},n.prototype.onMouseMove=function(e){this.changeVolume(e)},n.prototype.onMouseUp=function(e){this.changeVolume(e),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},n.prototype.changeVolume=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(t/100)},n.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},n.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},n.prototype.reset=function(){this.hideAdContainer()},n.prototype.onAdError=function(){this.hideAdContainer()},n.prototype.onAdBreakStart=function(e){this.showAdContainer(),"application/javascript"!==e.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},n.prototype.onAdBreakEnd=function(){var e=this.controller.getCurrentAd();(null==e||e.isLinear())&&this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},n.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},n.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container")},n.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container")},n.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},n.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},n.prototype.onPlayerVolumeChanged=function(e){0==e?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")},n.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},n.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},n.prototype.assignControlAttributes=function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t},n.prototype.getClassRegexp=function(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},n.prototype.elementHasClass=function(e,t){return this.getClassRegexp(t).test(e.className)},n.prototype.addClass=function(e,t){e.className=e.className.trim()+" "+t},n.prototype.removeClass=function(e,t){var n=this.getClassRegexp(t);e.className=e.className.trim().replace(n,"")},n.prototype.getAdContainerDiv=function(){return this.adContainerDiv},n.prototype.setShowCountdown=function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var i="1.8.0",r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid)};o.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion(i),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},o.prototype.requestAds=function(){var e=new google.ima.AdsRequest;this.controller.getSettings().adTagUrl?e.adTagUrl=this.controller.getSettings().adTagUrl:e.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(e.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),e.linearAdSlotWidth=this.controller.getPlayerWidth(),e.linearAdSlotHeight=this.controller.getPlayerHeight(),e.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),e.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),e.setAdWillAutoPlay(this.controller.adsWillAutoplay()),e.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var t=this.controller.getSettings().adsRequest;t&&"object"===(void 0===t?"undefined":r(t))&&Object.keys(t).forEach((function(n){e[n]=t[n]})),this.adsLoader.requestAds(e),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:e})},o.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.controller.getIsMobile()&&(this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this))),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},o.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},o.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},o.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},o.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},o.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},o.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},o.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},o.prototype.onAllAdsCompleted=function(e){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},o.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},o.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},o.prototype.onAdPaused=function(){this.controller.onAdsPaused()},o.prototype.onAdResumed=function(e){this.controller.onAdsResumed()},o.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},o.prototype.onAdLog=function(e){this.controller.onAdLog(e)},o.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var i=0,r=void 0;this.currentAd.getAdPodInfo()&&(r=this.currentAd.getAdPodInfo().getAdPosition(),i=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,r,i)}},o.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},o.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},o.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},o.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},o.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},o.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},o.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},o.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},o.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},o.prototype.getCurrentAd=function(){return this.currentAd},o.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},o.prototype.isAdPlaying=function(){return this.adPlaying},o.prototype.isAdMuted=function(){return this.adMuted},o.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},o.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},o.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},o.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},o.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},o.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},o.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},o.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},o.prototype.getAdsManager=function(){return this.adsManager},o.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var a=function(e,i){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(i);var r={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},a=this.extend({},r,i.contribAdsSettings||{});this.playerWrapper=new t(e,a,this),this.adUi=new n(this),this.sdkImpl=new o(this)};a.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},a.prototype.initWithSettings=function(e){this.settings=this.extend({},a.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},a.prototype.warnAboutDeprecatedSettings=function(){var e=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.ima setting "+t+" is deprecated")}))},a.prototype.getSettings=function(){return this.settings},a.prototype.getIsMobile=function(){return this.isMobile},a.prototype.getIsIos=function(){return this.isIos},a.prototype.injectAdContainerDiv=function(e){this.playerWrapper.injectAdContainerDiv(e)},a.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},a.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},a.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},a.prototype.requestAds=function(){this.sdkImpl.requestAds()},a.prototype.setSetting=function(e,t){this.settings[e]=t},a.prototype.onErrorLoadingAds=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},a.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},a.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},a.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},a.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},a.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},a.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},a.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)},a.prototype.showAdContainer=function(){this.adUi.showAdContainer()},a.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},a.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},a.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},a.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},a.prototype.onAdPlayheadUpdated=function(e,t,n,i,r){this.adUi.updateAdUi(e,t,n,i,r)},a.prototype.onAdLog=function(e){this.playerWrapper.onAdLog(e)},a.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},a.prototype.playContent=function(){this.playerWrapper.play()},a.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},a.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},a.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},a.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},a.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},a.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},a.prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},a.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},a.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},a.prototype.onContentAndAdsCompleted=function(){for(var e in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[e]&&this.contentAndAdsEndedListeners[e]()},a.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},a.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},a.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},a.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},a.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},a.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},a.prototype.onPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},a.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagUrl=t||this.settings.adTagUrl,this.playerWrapper.changeSource(e)},a.prototype.setContentWithAdsResponse=function(e,t){this.reset(),this.settings.adsResponse=t||this.settings.adsResponse,this.playerWrapper.changeSource(e)},a.prototype.setContentWithAdsRequest=function(e,t){this.reset(),this.settings.adsRequest=t||this.settings.adsRequest,this.playerWrapper.changeSource(e)},a.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},a.prototype.addContentEndedListener=function(e){this.playerWrapper.addContentEndedListener(e)},a.prototype.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)},a.prototype.setAdBreakReadyListener=function(e){this.sdkImpl.setAdBreakReadyListener(e)},a.prototype.setShowCountdown=function(e){this.adUi.setShowCountdown(e),this.showCountdown=e,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},a.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},a.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},a.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},a.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},a.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},a.prototype.changeAdTag=function(e){this.reset(),this.settings.adTagUrl=e},a.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},a.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},a.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},a.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},a.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)},a.prototype.extend=function(e){for(var t=void 0,n=void 0,i=void 0,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];for(n=0;n<o.length;n++)for(i in t=o[n])t.hasOwnProperty(i)&&(e[i]=t[i]);return e};var s=function(e,t){this.controller=new a(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)};return(e.registerPlugin||e.plugin)("ima",(function(e){this.ima=new s(this,e)})),s})),
/*! @name videojs-sprite-thumbnails @version 0.5.2 @license MIT */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e=e||self).videojsSpriteThumbnails=t(e.videojs)}(this,(function(e){"use strict";function t(t,n){var i,r,o=n.url,a=n.height,s=n.width,l=n.responsive,u=e.dom||e,d=n.ele,c=n.ele,p=c,h=n.customScale,f=p.mouseTimeDisplay,g=n.customScaleW,m=n.customScaleH,y=n.additionalMargin||0,v=n.supportedOrientation||null,_=n.thumbnailDisplayTimeout||5e3,b=null,E=!1;if(o&&a&&s&&f){var T=u.createEl("img",{src:o}),C=function(e){Object.keys(e).forEach((function(t){var n=e[t],i=f.timeTooltip.el_.style;""!==n?i.setProperty(t,n):i.removeProperty(t)}))};r=" -webkit- -moz- -o- -ms- ".split(" "),E=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||(i=["(",r.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(i).matches);var S=function(e){return 1==e.toString().length?"0"+e:e},w=function(e){if(E){o=t.duration()*(e.touches[0].clientX-p.el_.offsetLeft)/p.el_.offsetWidth;p.el_.children[2].style.width=o+"%";const a=document.querySelector(".vjs-time-tooltip");if(a){var n=o*t.duration()/100;a.innerHTML=(r=n,Math.floor(r/3600)+":"+S(Math.floor(r%3600/60))+":"+S(Math.floor(r%60)));var i=(e.touches[0].clientX-p.el_.offsetLeft)/p.el_.offsetWidth*100;a.parentElement.style.left=i+"%"}return o}var r,o=parseFloat(e.clientX);return o=t.duration()*(o/p.el_.clientWidth)},A=function(e){if(!v||window.matchMedia("(orientation: "+v+")").matches){f.el().style.display="block";var i,r,c,_,b,E=T.naturalWidth,S=T.naturalHeight;if(E&&S){var A,k=p.el_;try{A=w(e)}catch(e){A=parseFloat(f.el_.style.left),A=t.duration()*(A/p.el_.clientWidth)}if(!isNaN(A)){A/=n.interval;var P=t.el_.clientWidth,I=l&&P<l?P/l:1;h&&h>0&&(I=h);var L=E/s;m&&g?(i=s*g,r=a*m,c=Math.floor(A%L)*-i,_=Math.floor(A/L)*-r,b=E*g+"px "+S*m+"px"):(i=s*I,r=a*I,c=Math.floor(A%L)*-i,_=Math.floor(A/L)*-r,b=E*I+"px "+S*I+"px");var M=u.getBoundingClientRect(d.el_).top,R=u.getBoundingClientRect(k).top,D=-r-Math.max(0,R-M)-y;C({width:i+"px",height:r+"px","background-image":"linear-gradient(transparent 80%,black) , url("+o+")","background-repeat":"no-repeat","background-position":c+"px "+_+"px","background-size":b,top:D+"px",color:"#fff","text-shadow":"1px 1px #000",border:"1px solid black","border-bottom":"26px solid","border-image":"linear-gradient(180deg, rgba(255, 255, 255, 0.0)60%, rgba(16, 16, 16, 0.95))40%",margin:"0 1px","line-height":2*r-40+"px",visibility:"visible",left:e.clientX-250+"px"})}}}else f&&(f.el().style.display="none")};C({width:"",height:"","background-image":"","background-repeat":"","background-position":"","background-size":"",top:"",color:"","text-shadow":"",border:"",margin:"",visibility:""});c.on("mousemove",A),c.on("mouseout",(function(e){C({width:"",height:"","background-image":"","background-repeat":"","background-position":"","background-size":"",top:"",color:"","text-shadow":"",border:"",margin:"",visibility:"hidden"})})),c.on("touchmove",A),c.on("touchstart",A),c.on("touchend",(function(){clearTimeout(b),b=setTimeout((function(){f&&(f.el().style.display="none"),console.log("thumbnail removed")}),_)})),t.addClass("vjs-sprite-thumbnails")}}var n=(e=e&&e.hasOwnProperty("default")?e.default:e).getPlugin("plugin"),i={url:"",width:0,height:0,interval:1,responsive:600},r=function(n){var r,o;function a(r,o){var a;return(a=n.call(this,r)||this).options=e.mergeOptions(i,o),a.player.ready((function(){t(a.player,a.options)})),a}return o=n,(r=a).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o,a}(n);return r.defaultState={},r.VERSION="0.5.2",e.registerPlugin("spriteThumbnails",r),r})),
/**
 * videojs-vtt-thumbnails
 * @version 0.0.13
 * @copyright 2019 Chris Boustead <chris@forgemotion.com>
 * @license MIT
 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsVttThumbnails=t(e.videojs)}(this,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;!function(){function e(e){this.value=e}function t(t){var n,i;function r(n,i){try{var a=t[n](i),s=a.value;s instanceof e?Promise.resolve(s.value).then((function(e){r("next",e)}),(function(e){r("throw",e)})):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?r(n.key,n.arg):i=null}this._invoke=function(e,t){return new Promise((function(o,a){var s={key:e,arg:t,resolve:o,reject:a,next:null};i?i=i.next=s:(n=i=s,r(e,t))}))},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var t={},n=e.registerPlugin||e.plugin,i=function(n){var i=this;this.ready((function(){!function(e,t){e.addClass("vjs-vtt-thumbnails"),e.vttThumbnails=new r(e,t)}(i,e.mergeOptions(t,n))}))},r=function(){function e(t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.options=n,this.listenForDurationChange(),this.initializeThumbnails(),this.registeredEvents={},this}e.prototype.src=function(e){this.resetPlugin(),this.options.src=e,this.initializeThumbnails()},e.prototype.detach=function(){this.resetPlugin()},e.prototype.resetPlugin=function(){this.thumbnailHolder&&this.thumbnailHolder.parentNode&&this.thumbnailHolder&&this.thumbnailHolder.parentNode.removeChild(this.thumbnailHolder),this.progressBar&&(this.progressBar&&this.progressBar.removeEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar&&this.progressBar.removeEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave),this.progressBar&&this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.progressBar&&this.progressBar.removeEventListener("touchstart",this.registeredEvents.progressBarTouchStart),this.progressBar&&this.progressBar.removeEventListener("touchmove",this.registeredEvents.progressBarTouchMove),this.progressBar&&this.progressBar.removeEventListener("touchleave",this.registeredEvents.progressBarTouchLeave),this.progressBar&&this.progressBar.removeEventListener("touchcancel",this.registeredEvents.progressBarTouchCancel),this.progressBar&&this.progressBar.removeEventListener("touchend",this.registeredEvents.progressBarTouchEnd)),delete this.registeredEvents.progressBarMouseEnter,delete this.registeredEvents.progressBarMouseLeave,delete this.registeredEvents.progressBarMouseMove,delete this.registeredEvents.progressBarTouchStart,delete this.registeredEvents.progressBarTouchMove,delete this.registeredEvents.progressBarTouchLeave,delete this.registeredEvents.progressBarTouchCancel,delete this.registeredEvents.progressBarTouchEnd,delete this.progressBar,delete this.vttData,delete this.thumbnailHolder,delete this.lastStyle},e.prototype.listenForDurationChange=function(){this.player.on("durationchange",(function(){}))},e.prototype.initializeThumbnails=function(){var e=this;if(this.options.src){var t=this.getBaseUrl(),n=this.getFullyQualifiedUrl(this.options.src,t);this.getVttFile(n).then((function(t){e.vttData=e.processVtt(t),e.setupThumbnailElement()}))}},e.prototype.getBaseUrl=function(){return[window.location.protocol,"//",window.location.hostname,window.location.port?":"+window.location.port:"",window.location.pathname].join("").split(/([^\/]*)$/gi).shift()},e.prototype.getVttFile=function(e){var t=this;return new Promise((function(n,i){var r=new XMLHttpRequest;r.data={resolve:n},r.addEventListener("load",t.vttFileLoaded),r.open("GET",e),r.send()}))},e.prototype.vttFileLoaded=function(){this.data.resolve(this.responseText)},e.prototype.setupThumbnailElement=function(i){var o=this;this.progressBar=this.player.$(".logituit_seekbar"),this.playerElement=document.getElementById(this.player.id()),this.playBall=document.getElementsByClassName("vjs-play-progress")[1];var a=document.createElement("div"),s=document.createElement("div");this.isSeeking=!1,s.setAttribute("class","vjs-vtt-thumbnail-image");var l=document.createElement("div");l.setAttribute("class","vjs-timeDisplay"),this.time=l,this.progressmarker=document.createElement("div"),this.progressmarker.setAttribute("class","progress-marker"),a.setAttribute("class","vjs-vtt-thumbnail-display"),t()&&r()?(a.appendChild(s),a.appendChild(l)):t()||(a.appendChild(s),a.appendChild(l)),this.progressBar&&(this.progressBar.appendChild(a),t()||n()||this.progressBar.appendChild(this.progressmarker)),this.thumbnailHolder=a,this.thumbnailImage=s,this.resetFunc=e.prototype.resetPlugin,this.initializeThumbnailsFunc=e.prototype.initializeThumbnails,this.registeredEvents.progressBarMouseEnter=function(){return o.onBarMouseenter()},this.registeredEvents.progressBarMouseLeave=function(){return o.onBarMouseleave()},this.registeredEvents.onBodyMouseMove=function(e){return o.onBodyMouseMove(e)},this.registeredEvents.progressBarTouchStart=function(){return o.onBarTouchStart()},this.registeredEvents.progressBarTouchEnd=function(){return o.onBarTouchEnd()},this.registeredEvents.onBarMouseDown=function(e){return o.onBarMouseDown(e)},this.registeredEvents.onBarMouseUp=function(e){return o.onBarMouseUp(e)},this.progressBar&&(this.progressBar.addEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.addEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave),this.progressBar.addEventListener("mousedown",this.registeredEvents.onBarMouseDown),document.body.addEventListener("mouseup",this.registeredEvents.onBarMouseUp),document.body.addEventListener("mousemove",this.registeredEvents.onBodyMouseMove),this.progressBar.addEventListener("touchend",this.registeredEvents.progressBarTouchEnd),this.progressBar.addEventListener("touchstart",this.registeredEvents.progressBarTouchStart),this.progressBar.addEventListener("touchend",this.registeredEvents.progressBarTouchEnd))},e.prototype.onBarMouseenter=function(){var e=this;this.mouseMoveCallback=function(t){e.onBarMousemove(t)},this.registeredEvents.progressBarMouseMove=this.mouseMoveCallback,this.progressBar&&this.progressBar.addEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.showThumbnailHolder(),(t()||n()||i())&&setTimeout((()=>{this.hideThumbnailHolder()}),1e3)},e.prototype.onBarMouseleave=function(){this.registeredEvents.progressBarMouseMove&&this.progressBar&&this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.hideThumbnailHolder()},e.prototype.onBarMouseDown=function(e){this.isSeeking=!0},e.prototype.onBarMouseUp=function(e){this.isSeeking=!1},e.prototype.onBarTouchStart=function(){var e=this;!0,this.isSeeking=!0,this.touchMoveCallback=function(t){e.onTouchmove(t),e.showThumbnailHolder()},this.registeredEvents.progressBarTouchMove=this.touchMoveCallback,this.progressBar&&this.progressBar.addEventListener("touchmove",this.registeredEvents.progressBarTouchMove),this.showThumbnailHolder()},e.prototype.onBarTouchEnd=function(){this.isSeeking=!1,this.registeredEvents.progressBarTouchMove&&this.progressBar&&this.progressBar.removeEventListener("touchmove",this.registeredEvents.progressBarTouchMove),this.showThumbnailHolder(),setTimeout((()=>{this.hideThumbnailHolder()}),1e3)},e.prototype.getXCoord=function(e,t){var n=e.getBoundingClientRect(),i=document.documentElement;return t-(n.left+(window.pageXOffset||i.scrollLeft||0))},e.prototype.onBarMousemove=function(e){this.progressmarker.style.left="calc("+e.clientX+"px - 3.4% - 10px)",this.updateThumbnailStyle(this.getXCoord(this.progressBar,e.clientX),this.progressBar.offsetWidth);try{if(1==this.isSeeking){let n=this.playerElement.querySelector(".logituit_seekbar");var t=document.getElementsByClassName("vjs-vtt-thumbnail-display")[0];let i=this.playerElement.querySelectorAll(".vjs-play-progress")[1];const r=(e.clientX-n.offsetLeft)/n.offsetWidth*100;i.style.width=r+"%"}else if(!this.isSeeking){let n=this.playerElement.querySelector(".logituit_seekbar");t=document.getElementsByClassName("vjs-vtt-thumbnail-display")[0];(e.clientX-n.offsetLeft)/n.offsetWidth*100>100?(t.style.display="none",this.progressmarker.style.display="none"):(t.style.display="block",this.progressmarker.style.display="block")}}catch(e){console.error(e)}},e.prototype.onBodyMouseMove=function(e){try{if(this.isSeeking){let t=this.playerElement.querySelector(".logituit_seekbar"),n=this.playerElement.querySelectorAll(".vjs-play-progress")[1];const i=(e.clientX-t.offsetLeft)/t.offsetWidth*100;n.style.width=i+"%",i>100?(this.isSeeking=!1,n.style.width="100%"):this.isSeeking=!0}}catch(e){console.error(e)}},e.prototype.onTouchmove=function(e){var t=e.touches[0],n=t.pageX;t.pageY;try{this.isSeeking;{let e=this.playerElement.querySelector(".logituit_seekbar");var i=document.getElementsByClassName("vjs-vtt-thumbnail-display")[0];let t=this.playerElement.querySelectorAll(".vjs-play-progress")[1];const r=(n-e.offsetLeft)/e.offsetWidth*100;t.style.width=r+"%",r<=100?i.style.display="block":(t.style.width="100%",i.style.display="none")}}catch(e){console.error(e)}try{if(this.isSeeking){let e=this.playerElement.querySelector(".logituit_seekbar");i=document.getElementsByClassName("vjs-vtt-thumbnail-display")[0];let t=this.playerElement.querySelectorAll(".vjs-play-progress")[1];const r=(n-e.offsetLeft)/e.offsetWidth*100;t.style.width=r,r<=100?(this.isSeeking=!0,i.style.display="block"):(this.isSeeking=!1,i.style.display="none")}}catch(e){console.error(e)}this.progressBar&&(this.progressBar.addEventListener("touchstart",(function(e){this.isSeeking=!0,n=t.clientX,t.clientY}),!1),this.progressBar.addEventListener("touchend",(function(e){this.isSeeking=!1,e.changedTouches[0].clientX,e.changedTouches[0].clientY}),!1),this.progressBar.addEventListener("touchstart",this.registeredEvents.progressBarTouchStart),this.progressBar.removeEventListener("touchleave",this.registeredEvents.progressBarTouchLeave),this.updateThumbnailStyle(this.getXCoord(this.progressBar,t.clientX),this.progressBar.offsetWidth))},e.prototype.getStyleForTime=function(e){for(var t=0;t<this.vttData.length;++t){var n=this.vttData[t];if(e>=n.start&&e<n.end)return n.css}},e.prototype.showThumbnailHolder=function(){this.thumbnailHolder.style.opacity="1",this.time.style.opacity="1",this.progressmarker.style.opacity="1"},e.prototype.hideThumbnailHolder=function(){this.thumbnailHolder.style.opacity="0",this.time.style.opacity="0",this.progressmarker.style.opacity="0"};var t=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},n=function(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)},i=function(){const e=navigator.userAgent.toLowerCase(),t=/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e);return Logger.debug(t),t},r=function(){var e=!1;try{var i;window.orientation||window.screen.orientation;if(t()){if(n()&&n().length>0)switch(window.orientation){case 0:case 180:i="portrait";break;case-90:case 90:i="landscape"}else i=(window.screen.orientation||{}).type||window.screen.mozOrientation||window.screen.msOrientation;e="portrait"!=i&&"portrait-primary"!=i&&"portrait-secondary"!=i&&0!=i&&-180!=i}}catch(e){Logger.error("this.isLandscape : Error ",e)}return e};return e.prototype.updateThumbnailStyle=function(e,n){var i,r=this.player.duration();this.player.currentTime();i=(1-(n-e)/n)*r;var o=Math.floor(i/60),a=Math.floor(i-60*o);o=o<10?"0"+o:o,a=a<10?"0"+a:a;var s=this.getStyleForTime(i);if(this.time.innerHTML=o+":"+a,!s)return this.hideThumbnailHolder();var l=(1-(n-e)/n)*n-Number.parseInt(s.width)/2;if(t()&&(l<40?l=40:l>n-170&&(l=n-170)),l<24&&(l=24),this.thumbnailHolder.style.transform="translateX("+l+"px)",!this.lastStyle||this.lastStyle!==s)for(var u in this.lastStyle=s,s)s.hasOwnProperty(u)&&("width"==u&&(this.thumbnailImage.style[u]="16.6%"),"height"==u&&(this.thumbnailImage.style[u]="16.6%"),this.thumbnailImage.style[u]=s[u])},e.prototype.processVtt=function(e){var t=this,n=[];return e.split(/\n\s*\n/).forEach((function(e){if(e.match(/([0-9]{1,2}:)?([0-9]{1,2}:)?[0-9]{1,2}(.[0-9]{3})?( ?--> ?)([0-9]{1,2}:)?([0-9]{1,2}:)?[0-9]{1,2}(.[0-9]{3})?[\r\n]?.*/gi)){var i=e.split(/[\r\n]/i),r=[];i.forEach((e=>{""!=e&&r.push(e)}));var o=r[0].split(/ ?--> ?/i),a=o[0],s=o[1],l=r[1],u=t.getVttCss(l);n.push({start:t.getSecondsFromTimestamp(a),end:t.getSecondsFromTimestamp(s),css:u})}})),n},e.prototype.getFullyQualifiedUrl=function(e,t){return e.indexOf("//")>=0?e:0===t.indexOf("//")?[t.replace(/\/$/gi,""),this.trim(e,"/")].join("/"):t.indexOf("//")>0?[this.trim(t,"/"),this.trim(e,"/")].join("/"):e},e.prototype.getPropsFromDef=function(e){var t=e.split(/#xywh=/i),n=t[0],i=t[1].match(/[0-9]+/gi);return{x:i[0],y:i[1],w:i[2],h:i[3],image:n}},e.prototype.getVttCss=function(e){var t={},n=void 0;if(n=this.options.src.indexOf("//")>=0?this.options.src.split(/([^\/]*)$/gi).shift():this.getBaseUrl()+this.options.src.split(/([^\/]*)$/gi).shift(),!(e=this.getFullyQualifiedUrl(e,n)).match(/#xywh=/i))return t.background='url("'+e+'")',t.width="128px",t.height="78px",t;var i=this.getPropsFromDef(e);return t.background='url("'+i.image+'") no-repeat -'+i.x+"px -"+i.y+"px",t.width=i.w+"px",t.height=i.h+"px",t},e.prototype.doconstructTimestamp=function(e){var t=e.split("."),n=t[0].split(":");return{milliseconds:parseInt(t[1])||0,seconds:parseInt(n.pop())||0,minutes:parseInt(n.pop())||0,hours:parseInt(n.pop())||0}},e.prototype.getSecondsFromTimestamp=function(e){var t=this.doconstructTimestamp(e);return parseInt(3600*t.hours+60*t.minutes+t.seconds+t.milliseconds/1e3)},e.prototype.trim=function(e,t){var n=[" ","\n","\r","\t","\f","\v"," "," "," "," "," "," "," "," "," "," "," "," ","​","\u2028","\u2029","　"].join(""),i=0,r=0;for(e+="",t&&(n=(t+"").replace(/([[\]().?/*{}+$^:])/g,"$1")),i=e.length,r=0;r<i;r++)if(-1===n.indexOf(e.charAt(r))){e=e.substring(r);break}for(r=(i=e.length)-1;r>=0;r--)if(-1===n.indexOf(e.charAt(r))){e=e.substring(0,r+1);break}return-1===n.indexOf(e.charAt(0))?e:""},e}();return n("vttThumbnails",i),i.VERSION="0.0.13",i})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/document")):"function"==typeof define&&define.amd?define(["video.js","global/document"],t):e.videojsContribQualityLevels=t(e.videojs,e.document)}(this,(function(e,t){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var i=function(i){var r,o;function a(){var r,o=n(n(r=i.call(this)||this));if(e.browser.IS_IE8)for(var s in o=t.createElement("custom"),a.prototype)"constructor"!==s&&(o[s]=a.prototype[s]);return o.levels_=[],o.selectedIndex_=-1,Object.defineProperty(o,"selectedIndex",{get:function(){return o.selectedIndex_}}),Object.defineProperty(o,"length",{get:function(){return o.levels_.length}}),o||n(r)}o=i,(r=a).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o;var s=a.prototype;return s.addQualityLevel=function(n){var i=this.getQualityLevelById(n.id);if(i)return i;var r=this.levels_.length;return i=new function n(i){var r=this;if(e.browser.IS_IE8)for(var o in r=t.createElement("custom"),n.prototype)"constructor"!==o&&(r[o]=n.prototype[o]);return r.id=i.id,r.label=r.id,r.width=i.width,r.height=i.height,r.bitrate=i.bandwidth,r.enabled_=i.enabled,Object.defineProperty(r,"enabled",{get:function(){return r.enabled_()},set:function(e){r.enabled_(e)}}),r}(n),""+r in this||Object.defineProperty(this,r,{get:function(){return this.levels_[r]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i},s.removeQualityLevel=function(e){for(var t=null,n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},s.getQualityLevelById=function(e){for(var t=0,n=this.length;t<n;t++){var i=this[t];if(i.id===e)return i}return null},s.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},a}(e.EventTarget);for(var r in i.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},i.prototype.allowedEvents_)i.prototype["on"+r]=null;var o=function(t){return n=this,e.mergeOptions({},t),r=n.qualityLevels,o=new i,n.on("dispose",(function e(){o.dispose(),n.qualityLevels=r,n.off("dispose",e)})),n.qualityLevels=function(){return o},n.qualityLevels.VERSION="2.0.9",o;var n,r,o};return(e.registerPlugin||e.plugin)("qualityLevels",o),o.VERSION="2.0.9",o})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e=e||self)["videojs-http-source-selector"]=t(e.videojs)}(this,(function(e){"use strict";function t(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=(e=e&&e.hasOwnProperty("default")?e.default:e).getComponent("MenuItem"),r=e.getComponent("Component"),o=function(e){function n(t,n){return n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}t(n,e);var i=n.prototype;return i.handleClick=function(){var t=this.options_;console.log("Changing quality to:",t.label),e.prototype.handleClick.call(this);for(var n=this.player().qualityLevels(),i=0;i<n.length;i++)t.index==n.length||t.index==i?n[i].enabled=!0:n[i].enabled=!1},i.update=function(){var e=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index==e)},n}(i);r.registerComponent("SourceMenuItem",o);var a=e.getComponent("MenuButton"),s=function(i){function r(t,r){var o;o=i.call(this,t,r)||this,a.apply(n(o),arguments);var s=o.player().qualityLevels();if(r&&r.default)if("low"==r.default)for(var l=0;l<s.length;l++)s[l].enabled=0==l;else if(r.default="high")for(l=0;l<s.length;l++)s[l].enabled=l==s.length-1;return o.player().qualityLevels().on(["change","addqualitylevel"],e.bind(n(o),o.update)),o}t(r,i);var s=r.prototype;return s.createEl=function(){return e.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},s.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},s.update=function(){return a.prototype.update.call(this)},s.createItems=function(){for(var e=[],t=this.player().qualityLevels(),n=[],i=0;i<t.length;i++){var r=t.length-(i+1),a=r===t.selectedIndex,s=""+r,l=r;t[r].height?(s=t[r].height+"p",l=parseInt(t[r].height,10)):t[r].bitrate&&(s=Math.floor(t[r].bitrate/1e3)+" kbps",l=parseInt(t[r].bitrate,10)),0<=n.indexOf(s)||(n.push(s),e.push(new o(this.player_,{label:s,index:r,selected:a,sortVal:l})))}return 1<t.length&&e.push(new o(this.player_,{label:"Auto",index:t.length,selected:!1,sortVal:99999})),e.sort((function(e,t){return e.options_.sortVal<t.options_.sortVal?1:e.options_.sortVal>t.options_.sortVal?-1:0})),e},r}(a),l={},u=function(t){var n=this;this.ready((function(){!function(t,n){t.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+t.techName_),"Html5"==t.techName_&&t.on(["loadedmetadata"],(function(n){if(t.qualityLevels(),e.log("loadmetadata event"),"undefined"==t.videojs_http_source_selector_initialized||1==t.videojs_http_source_selector_initialized)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),t.videojs_http_source_selector_initialized=!0;var i=t.controlBar,r=i.getChild("fullscreenToggle").el();i.el().insertBefore(i.addChild("SourceMenuButton").el(),r)}}))}(n,e.mergeOptions(l,t))})),e.registerComponent("SourceMenuButton",s),e.registerComponent("SourceMenuItem",o)};return(e.registerPlugin||e.plugin)("httpSourceSelector",u),u.VERSION="1.1.6",u}));var Dolby=Dolby||{};function ParserEngine(){this.m3u8plugin;var e=this;this.InitializePlugin=function(t,n,i,r){return new Promise((function(t,i){e.m3u8plugin=new M3u8Parser,e.m3u8plugin.initializePlugin(n).then((function(e){t(e)}),(function(e){i(e)}))}))},this.ConfigurePlugin=function(){},this.destroyPlugin=function(){},this.releaseResouces=function(){e.m3u8plugin=null,(new M3u8Parser).releaseResource()},this.getSkdUrl=function(t){let n=e.m3u8plugin.getSkdUrl(t);return console.log("in parser engine: ",n),n}}function M3u8Parser(){this.player_helper;var e=this;this.options,e.player_helper=new PlayerHelper,this.initializePlugin=function(t){return e.options=t,new Promise((function(n,i){try{e.player_helper.getVideoData(t).then((function(i){Logger.debug("Actual Array",i);var r=i.split("EXT-X-STREAM-INF"),o=[],a={},s=[i,"#EXT-X-ENDLIST"].join("\n");Logger.debug("array****s",r);var l=new m3u8Parser.Parser;l.push(s),l.end();var u=l.manifest;Logger.debug("parse result",u);for(var d=0;d<=u.playlists.length-1;d++){Logger.debug("array/*/*/*/",u.playlists[d]);var c=u.playlists[d].uri,p=t.src.split(".m3u8");p=p[0].split("/");for(var h="",f=0;f<p.length-1;f++)h=h+p[f]+"/";Logger.debug("base_URL",h),a={src:c,type:"application/x-mpegURL",res:c},o.push(a),Logger.debug("actual_src",o)}console.log("complete array",o),e.player_helper.getVideoData(o[0].res).then((function(e){n(e)}))}),(e=>{console.error(e)}))}catch(e){i(e)}}))},this.getSkdUrl=function(e){var t,n=e.split("#EXT-X-KEY");t=[e,"#EXT-X-ENDLIST"].join("\n"),console.log("array****s",n);var i=new m3u8Parser.Parser;i.push(t),i.end();var r=i.manifest;console.log("parse result",r);var o,a=r.segments[0].key.uri;(a=o=(o=a.replace("skd://","https://")).substring(0,o.length)).split("&")[0].split("=")[1];return console.log(a),a},this.releaseResource=function(){e.player_helper=null}}function PlayerHelper(){this.getVideoData=function(e){try{var t=e.src?e.src:e;return console.log("server url",t),new Promise((function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&e(this.responseText)},i.open("GET",t,!0),i.send()}))}catch(e){console.log("caught an error trying to create and add src to player:",e)}},this.getDataFromCertificate=function(e){try{var t="https://x-drm.uplynk.com/fairplay/public_key/30c99d5c0fb743218071b427384f4647.cer";return console.log("server url",t),new Promise((function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){console.log("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&e(this.responseText)},i.open("GET",t,!0),i.send()}))}catch(e){console.log("caught an error trying to create and add src to player:",e)}}}
/*! @name videojs-contrib-eme @version 3.8.0 @license Apache-2.0 */
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */
function loguituitVideoPlayPauseButtonComponent(){var e;this.videoPlayPauseButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.uiEngine=r,this.player=t,this.options=i,e=this,setTimeout((()=>{this.elementRef&&this.elementRef.addEventListener("dblclick",this.doubleClick)}),1e3)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_videoplaypause"}),this.elementRef},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent(eventName,{detail:t});this.uiEngine.reportEventToUiEngine(n)},doubleClick:function(){e.uiEngine.getMiniplayerState()||(e.player.isFullscreen()?(e.player.exitFullscreen(),e.uiEngine.showFullScreenIcon()):(e.player.requestFullscreen(),e.uiEngine.showExitScreenIcon()))},handleClick:function(){if(e.uiEngine.isIPad()||e.uiEngine.isTablet()){if(e.uiEngine.isVideoEnded()&&e.player.paused()){let t=e.player.src();e.player.reset(),e.player.currentTime(e.player.duration()),e.uiEngine.setVideoEnded(!1),e.player.src(t),e.player.load(),e.player.play()}}else{if(e.uiEngine.isVideoEnded()&&e.player.paused()){let t=e.player.src();e.player.reset(),e.player.currentTime(e.player.duration()),e.uiEngine.setVideoEnded(!1),e.player.src(t),e.player.load(),e.player.play()}e.uiEngine.getMiniplayerState()||e.uiEngine.removeSettingPopup(),this.player_.paused()?(e.options.isLive&&(e.player.liveTracker.seekToLiveEdge(),e.uiEngine.setLiveFlag(!0)),e.uiEngine.getMiniplayerState()||(e.uiEngine.showPauseIcon(),this.player_.play(),setTimeout((function(){e.player.play()}),300))):(e.options.isLive&&(e.player.liveTracker.seekToLiveEdge(),e.uiEngine.setLiveFlag(!1)),e.uiEngine.getMiniplayerState()||(e.uiEngine.showPlayIcon(),this.player_.pause()))}},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(this.elementRef.removeEventListener("dblclick",this.doubleClick),delete this.elementRef,this.elementRef=null,delete this.videoPlayPauseButton,this.videoPlayPauseButton=null)}}),videojs.registerComponent("videoPlayPause",this.videoPlayPauseButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitEpisodeTitleBarComponent(){this.episodetitleBar=videojs.extend(videojs.getComponent("Component"),{constructor:function(e,t){videojs.getComponent("Component").apply(this,arguments),this.applyStyles(t.styleCSS),this.updateTextContent(t.text),this.elementRef},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},createEl:function(e){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_vjs-episode-title-bar"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}this.isTablet()&&(t.style.top="calc(8.0% + 15px)")},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.episodetitleBar,this.episodetitleBar=null)}}),videojs.registerComponent("episodeTitleBar",this.episodetitleBar)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitSeekBarComponent(){var e;videojs.getComponent("SeekBar");this.seekBar=videojs.extend(videojs.getComponent("SeekBar"),{constructor:function(t,n,i){videojs.getComponent("SeekBar").apply(this,arguments),this.applyStyles(n.styleCSS),this.applyClass(n.className),this.player=t,this.uiEngine=i,e=this,this.seekbarTouchEvent()},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},seekbarTouchEvent:function(){e.el().addEventListener("touchstart",(function(t){e.uiEngine.logituitMobileSettingsPopup?e.uiEngine.removeMobileSettingsPopup():e.uiEngine.logituitMobileAudioQualityPopup?e.uiEngine.removeMobileAudioQualityPopup():e.uiEngine.logituitMobileVideoQualityPopup?e.uiEngine.removeMobileVideoQualityPopup():e.uiEngine.logituitMobileSubtitlePopup?e.uiEngine.removeMobileSubtitlePopup():e.uiEngine.logituitMobileAudioPopup?e.uiEngine.removeMobileAudioPopup():e.uiEngine.logituitMobileReportIssuePopup&&e.uiEngine.removeMobileReportPopup()}))},applyClass:function(e){this.el().classList.add("logituit_seekbar")},sendEvent:function(){var t={afterSeek:e.player.currentTime()},n=new CustomEvent("onSeekBarClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){this.sendEvent(),e.player.paused()||(e.player.pause(),e.player.play())},spriteThumbnail:function(e){var t,n,i=-1,r=0,o="";spriteImageUrlData={},this.isMobile()||(o="");let a=160,s=90;try{if(null!=o&&""!=o&&o.length>0){let e=o.split("_");var l=e[e.length-1].split(".");null!=l&&l.length>0&&e.length>3&&(a=e[e.length-3],s=e[e.length-2]),o&&o.length>0&&(this.isMobile()?(i=.5,t=200/a,n=113/s,r=42):(i=.5,t=350/a,n=197/s,r=30)),spriteImageUrlData={spriteUrl:o,width:a,height:s,framesData:l[0],customScale:i,customScaleW:t,customScaleH:n,additionalMargin:r}}}catch(e){Logger.error("Exception caught during extracting sprite properties",e)}if(e&&spriteImageUrlData&&spriteImageUrlData.spriteUrl){let t=1;t=653.791667/spriteImageUrlData.framesData,t>0&&e.spriteThumbnails({url:spriteImageUrlData.spriteUrl,control:this.el(),ele:this,width:spriteImageUrlData.width,height:spriteImageUrlData.height,customScale:spriteImageUrlData.customScale,customScaleW:spriteImageUrlData.customScaleW,customScaleH:spriteImageUrlData.customScaleH,additionalMargin:spriteImageUrlData.additionalMargin,interval:t})}},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.seekBar&&(delete this.seekBar,this.seekBar=null)}}),videojs.registerComponent("Seek",this.seekBar)}function loguituitupnextTvComponent(){var e;this.upnextButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(e,t,n){videojs.getComponent("Button").apply(this,arguments),this.opt=t,this.applyStyles(t.styleCSS),this.updateTextContent(t.text),this.elementRef,this.uiEngine=n,this.player=e,this.seekbartv()},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"UpnextTv"}),this.elementRef},seekbartv:function(){var e=document.createElement("div");e.setAttribute("class","seekbarLive");var t=document.createElement("div");t.setAttribute("class","upnextimage"),t.innerHTML='<img class="logix-skipIntro-icon" src="player/assets/player_assets/ic-backbuttontv/flesh.jpg">';var n=document.createElement("div");n.setAttribute("class","upnexttext"),n.innerHTML="UP NEXT";var i=document.createElement("div");i.setAttribute("class","flipttext"),i.innerHTML=playbackData.nextContent[0].asset_title;var r=document.createElement("div");r.setAttribute("class","seasontext"),r.innerHTML=playbackData.nextContent[0].content_title;var o=document.createElement("div");o.setAttribute("class","playlogo"),o.innerHTML='<img class="logix-skipIntro-icon" src="player/assets/player_assets/ic-backbuttontv/cta_play.png">';var a=document.createElement("div");a.setAttribute("class","playinginText");var s=document.createElement("div");s.setAttribute("class","hidebutton"),s.innerHTML="Hide",e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.appendChild(o),e.appendChild(a),e.appendChild(s),(navigator.userAgent.indexOf("Tizen")>-1||navigator.userAgent.indexOf("web0S")>-1)&&this.el().appendChild(e)},sendEvent:function(t){var n={currentTime:e.player.currentTime(),seekTime:e.player.currentTime()-t},i=new CustomEvent("onRewindButtonClick",{detail:n});this.uiEngine.reportEventToUiEngine(i)},handleClick:function(){let t=10;this.opt.rewindTime&&(t=this.opt.rewindTime),e.player.currentTime(e.player.currentTime()-10),this.sendEvent(t)},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.upnextButton,this.upnextButton=null)}}),videojs.registerComponent("upnextButton",this.upnextButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitPlayPauseComponent(){var e;this.playPause=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r,o){videojs.getComponent("Button").apply(this,arguments),this.updateTextContent(n.text),this.elementRef,this.uiEngine=o,this.options=r,this.player=t,this.backgroundImgUrl,e=this,this.applyStyles(n.styleCSS),this.playpauseFun(n.styleCSS)},playpauseFun:function(t){let n=document.createElement("div");n.setAttribute("class","logituit_playpause_animation"),e.player.el().appendChild(n);let i=document.createElement("img");for(key in i.setAttribute("class","play_img"),t){let n=t[key];Object.keys(n).forEach((function(t){"background-image"==t&&(e.backgroundImgUrl=n[t],i.setAttribute("style",t+":"+n[t]))}))}e.player_.el().appendChild(i)},tooltipDataFun:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_playTooltip"),t.innerHTML="Play",e.el().appendChild(t)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_play"}),this.elementRef},sendEvent:function(t){var n={currentTime:e.player.currentTime()},i=new CustomEvent(t,{detail:n});this.uiEngine.reportEventToUiEngine(i)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},handleClick:function(){if(e.options.isLive&&(e.player.liveTracker.seekToLiveEdge(),e.uiEngine.setLiveFlag(!0)),e.uiEngine.isVideoEnded()&&e.player.paused()){let t=e.player.src();e.player.reset(),e.player.currentTime(e.player.duration()),e.uiEngine.setVideoEnded(!1),e.player.src(t),e.player.load(),e.player.play()}else this.player_.play(),this.sendEvent("onPlayClick"),e.uiEngine.showPauseIcon(),setTimeout((function(){e.player.play()}),300)},showOrHideControlsByClass:function(e,t){var n=document.getElementsByClassName(e);n&&n[0]&&(n[0].style.display=t)},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.playPause,this.playPause=null)},showPauseAnimation:function(){var e=document.getElementsByClassName("logituit_playpause_animation")[0];e.classList.add("visible");var t=document.getElementsByClassName("pause_img")[0];t.classList.add("visible"),setTimeout((function(){e.classList.remove("visible"),t.classList.remove("visible")}),1e3)},showPlayAnimation:function(){var e=document.getElementsByClassName("logituit_playpause_animation")[0];e.classList.add("visible"),e.classList.add("animationRipple");var t=document.getElementsByClassName("play_img")[0];t.classList.add("visible"),setTimeout((function(){e.classList.remove("visible"),t.classList.remove("visible"),e.classList.remove("animationRipple")}),1e3)},showPlayIcon:function(){this.el().style.backgroundImage=e.backgroundImgUrl}}),videojs.registerComponent("LogituitPlay",this.playPause)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */!function(){"use strict";Dolby.supportDDPlus=!1,""!=(new Audio).canPlayType('audio/mp4;codecs="ec-3"')&&(-1==navigator.userAgent.indexOf("CPU iPhone OS 10_0")&&-1==navigator.userAgent.indexOf("CPU OS 10_0")||-1==navigator.userAgent.indexOf("Safari")||-1==navigator.userAgent.indexOf("Version/10")||(Dolby.supportDDPlus=!0),-1!=navigator.userAgent.indexOf("Mac OS X 10_12")&&-1!=navigator.userAgent.indexOf("Safari")&&-1!=navigator.userAgent.indexOf("Version/10")&&(Dolby.supportDDPlus=!0),-1!=navigator.userAgent.indexOf("Edge")&&(Dolby.supportDDPlus=!0),-1!=navigator.userAgent.indexOf("Windows Phone 10")&&(Dolby.supportDDPlus=!1)),Dolby.checkDDPlus=function(){return Dolby.supportDDPlus}}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsIma=t(e.videojs)}(this,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads(t)};t.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},t.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},t.prototype.checkForSeeking=function(){var e=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(e)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},t.prototype.checkForResize=function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();e==this.vjsPlayerDimensions.width&&t==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=e,this.vjsPlayerDimensions.height=t,this.controller.onPlayerResize(e,t))},t.prototype.localContentEndedListener=function(){for(var e in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[e]&&this.contentEndedListeners[e]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},t.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},t.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clearInterval(e[t])},t.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},t.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},t.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},t.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},t.prototype.onVolumeChange=function(){var e=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(e)},t.prototype.injectAdContainerDiv=function(e){this.vjsControls.el().parentNode.appendChild(e)},t.prototype.getContentPlayer=function(){return this.h5Player},t.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},t.prototype.setVolume=function(e){this.vjsPlayer.volume(e),0==e?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},t.prototype.unmute=function(){this.vjsPlayer.muted(!1)},t.prototype.mute=function(){this.vjsPlayer.muted(!0)},t.prototype.play=function(){this.vjsPlayer.play()},t.prototype.getPlayerWidth=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).width;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(e)||this.vjsPlayer.width()},t.prototype.getPlayerHeight=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).height;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(e)||this.vjsPlayer.height()},t.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},t.prototype.getPlayerId=function(){return this.vjsPlayer.id()},t.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},t.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},t.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},t.prototype.onAdLog=function(e){var t=e.getAdData(),n=void 0!==t.adError?t.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:n,AdEvent:e}})},t.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},t.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},t.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},t.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},t.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},t.prototype.changeSource=function(e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},t.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},t.prototype.triggerPlayerEvent=function(e,t){this.vjsPlayer.trigger(e,t)},t.prototype.addContentEndedListener=function(e){this.contentEndedListeners.push(e)},t.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};var n=function(e){this.controller=e,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.createAdContainer()};n.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},n.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},n.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},n.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},n.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},n.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},n.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},n.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},n.prototype.updateAdUi=function(e,t,n,i,r){var o=Math.floor(t/60),a=Math.floor(t%60);a.toString().length<2&&(a="0"+a);var s=": ";r>1&&(s=" ("+i+" "+this.controller.getSettings().adLabelNofN+" "+r+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+s+o+":"+a;var l=100*(e/n);this.progressDiv.style.width=l+"%"},n.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},n.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},n.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},n.prototype.onMouseMove=function(e){this.changeVolume(e)},n.prototype.onMouseUp=function(e){this.changeVolume(e),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},n.prototype.changeVolume=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(t/100)},n.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},n.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},n.prototype.reset=function(){this.hideAdContainer()},n.prototype.onAdError=function(){this.hideAdContainer()},n.prototype.onAdBreakStart=function(e){this.showAdContainer(),"application/javascript"!==e.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},n.prototype.onAdBreakEnd=function(){var e=this.controller.getCurrentAd();(null==e||e.isLinear())&&this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},n.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},n.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container")},n.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container")},n.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},n.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},n.prototype.onPlayerVolumeChanged=function(e){0==e?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")},n.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},n.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},n.prototype.assignControlAttributes=function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t},n.prototype.getClassRegexp=function(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},n.prototype.elementHasClass=function(e,t){return this.getClassRegexp(t).test(e.className)},n.prototype.addClass=function(e,t){e.className=e.className.trim()+" "+t},n.prototype.removeClass=function(e,t){var n=this.getClassRegexp(t);e.className=e.className.trim().replace(n,"")},n.prototype.getAdContainerDiv=function(){return this.adContainerDiv},n.prototype.setShowCountdown=function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var i="1.8.0",r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid)};o.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion(i),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},o.prototype.requestAds=function(){var e=new google.ima.AdsRequest;this.controller.getSettings().adTagUrl?e.adTagUrl=this.controller.getSettings().adTagUrl:e.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(e.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),e.linearAdSlotWidth=this.controller.getPlayerWidth(),e.linearAdSlotHeight=this.controller.getPlayerHeight(),e.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),e.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),e.setAdWillAutoPlay(this.controller.adsWillAutoplay()),e.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var t=this.controller.getSettings().adsRequest;t&&"object"===(void 0===t?"undefined":r(t))&&Object.keys(t).forEach((function(n){e[n]=t[n]})),this.adsLoader.requestAds(e),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:e})},o.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.controller.getIsMobile()&&(this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this))),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},o.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},o.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},o.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},o.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},o.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},o.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},o.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},o.prototype.onAllAdsCompleted=function(e){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},o.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},o.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},o.prototype.onAdPaused=function(){this.controller.onAdsPaused()},o.prototype.onAdResumed=function(e){this.controller.onAdsResumed()},o.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},o.prototype.onAdLog=function(e){this.controller.onAdLog(e)},o.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var i=0,r=void 0;this.currentAd.getAdPodInfo()&&(r=this.currentAd.getAdPodInfo().getAdPosition(),i=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,r,i)}},o.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},o.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},o.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},o.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},o.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},o.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},o.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},o.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},o.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},o.prototype.getCurrentAd=function(){return this.currentAd},o.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},o.prototype.isAdPlaying=function(){return this.adPlaying},o.prototype.isAdMuted=function(){return this.adMuted},o.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},o.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},o.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},o.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},o.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},o.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},o.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},o.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},o.prototype.getAdsManager=function(){return this.adsManager},o.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var a=function(e,i){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(i);var r={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},a=this.extend({},r,i.contribAdsSettings||{});this.playerWrapper=new t(e,a,this),this.adUi=new n(this),this.sdkImpl=new o(this)};a.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},a.prototype.initWithSettings=function(e){this.settings=this.extend({},a.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},a.prototype.warnAboutDeprecatedSettings=function(){var e=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.ima setting "+t+" is deprecated")}))},a.prototype.getSettings=function(){return this.settings},a.prototype.getIsMobile=function(){return this.isMobile},a.prototype.getIsIos=function(){return this.isIos},a.prototype.injectAdContainerDiv=function(e){this.playerWrapper.injectAdContainerDiv(e)},a.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},a.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},a.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},a.prototype.requestAds=function(){this.sdkImpl.requestAds()},a.prototype.setSetting=function(e,t){this.settings[e]=t},a.prototype.onErrorLoadingAds=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},a.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},a.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},a.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},a.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},a.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},a.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},a.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)},a.prototype.showAdContainer=function(){this.adUi.showAdContainer()},a.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},a.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},a.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},a.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},a.prototype.onAdPlayheadUpdated=function(e,t,n,i,r){this.adUi.updateAdUi(e,t,n,i,r)},a.prototype.onAdLog=function(e){this.playerWrapper.onAdLog(e)},a.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},a.prototype.playContent=function(){this.playerWrapper.play()},a.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},a.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},a.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},a.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},a.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},a.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},a.prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},a.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},a.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},a.prototype.onContentAndAdsCompleted=function(){for(var e in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[e]&&this.contentAndAdsEndedListeners[e]()},a.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},a.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},a.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},a.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},a.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},a.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},a.prototype.onPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},a.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagUrl=t||this.settings.adTagUrl,this.playerWrapper.changeSource(e)},a.prototype.setContentWithAdsResponse=function(e,t){this.reset(),this.settings.adsResponse=t||this.settings.adsResponse,this.playerWrapper.changeSource(e)},a.prototype.setContentWithAdsRequest=function(e,t){this.reset(),this.settings.adsRequest=t||this.settings.adsRequest,this.playerWrapper.changeSource(e)},a.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},a.prototype.addContentEndedListener=function(e){this.playerWrapper.addContentEndedListener(e)},a.prototype.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)},a.prototype.setAdBreakReadyListener=function(e){this.sdkImpl.setAdBreakReadyListener(e)},a.prototype.setShowCountdown=function(e){this.adUi.setShowCountdown(e),this.showCountdown=e,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},a.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},a.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},a.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},a.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},a.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},a.prototype.changeAdTag=function(e){this.reset(),this.settings.adTagUrl=e},a.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},a.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},a.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},a.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},a.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)},a.prototype.extend=function(e){for(var t=void 0,n=void 0,i=void 0,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];for(n=0;n<o.length;n++)for(i in t=o[n])t.hasOwnProperty(i)&&(e[i]=t[i]);return e};var s=function(e,t){this.controller=new a(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)};return(e.registerPlugin||e.plugin)("ima",(function(e){this.ima=new s(this,e)})),s})),
/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("global/window")):"function"==typeof define&&define.amd?define(["exports","global/window"],t):t((e=e||self).m3u8Parser={},e.window)}(this,(function(e,t){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n.apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t=t&&t.hasOwnProperty("default")?t.default:t;var r=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t,n,i,r=this.listeners[e];if(r)if(2===arguments.length)for(n=r.length,t=0;t<n;++t)r[t].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),n=r.length,t=0;t<n;++t)r[t].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),o=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return i(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(r),a=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i},s=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}i(t,e);var n=t.prototype;return n.push=function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var i=n(e);return i===e?t:t.concat([i])}),[e]).forEach((function(e){for(var r=0;r<i.customParsers.length;r++)if(i.customParsers[r].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var o=a(t[1]);if(o.URI&&(n.uri=o.URI),o.BYTERANGE){var s=o.BYTERANGE.split("@"),l=s[0],u=s[1];n.byterange={},l&&(n.byterange.length=parseInt(l,10)),u&&(n.byterange.offset=parseInt(u,10))}}i.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=a(t[1]),n.attributes.RESOLUTION){var d=n.attributes.RESOLUTION.split("x"),c={};d[0]&&(c.width=parseInt(d[0],10)),d[1]&&(c.height=parseInt(d[1],10)),n.attributes.RESOLUTION=c}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}i.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=a(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=a(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=a(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);i.trigger("data",{type:"tag",data:e.slice(4)})}}}else i.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,o=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:o}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(r);function l(e){for(var n=t.atob(e||""),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var u=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new o,t.parseStream=new s,t.lineStream.pipe(t.parseStream);var i,r,a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),u=[],d={},c=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",(function(e){var t,o;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(d.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(d.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(d.duration=e.duration),0===e.duration&&(d.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=u},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:l(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(r.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,h=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=u,this.manifest.mediaGroups=this.manifest.mediaGroups||p,e.attributes?(d.attributes||(d.attributes={}),n(d.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(o={default:/yes/i.test(e.attributes.DEFAULT)}).default?o.autoselect=!0:o.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(o.language=e.attributes.LANGUAGE),e.attributes.URI&&(o.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(o.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(o.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(o.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=o}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){h+=1,d.discontinuity=!0,this.manifest.discontinuityStarts.push(u.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),d.dateTimeString=e.dateTimeString,d.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){d.cueOut=e.data},"cue-out-cont":function(){d.cueOutCont=e.data},"cue-in":function(){d.cueIn=e.data}}[e.tagType]||c).call(a)},uri:function(){d.uri=e.uri,u.push(d),this.manifest.targetDuration&&!("duration"in d)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),d.duration=this.manifest.targetDuration),r&&(d.key=r),d.timeline=h,i&&(d.map=i),d={}},comment:function(){},custom:function(){e.segment?(d.custom=d.custom||{},d.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(a)})),t}i(t,e);var r=t.prototype;return r.push=function(e){this.lineStream.push(e)},r.end=function(){this.lineStream.push("\n")},r.addParser=function(e){this.parseStream.addParser(e)},r.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(r);e.LineStream=o,e.ParseStream=s,e.Parser=u,Object.defineProperty(e,"__esModule",{value:!0})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("global/document"),require("video.js"),require("global/window")):"function"==typeof define&&define.amd?define(["exports","global/document","video.js","global/window"],t):t(e.videojsContribEme={},e.document,e.videojs,e.window)}(this,(function(e,t,n,i){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var o=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),i=new DataView(t),r=0;r<n.byteLength;r++)if(n.getUint8(r)!==i.getUint8(r))return!1;return!0},a=function(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e},s=function(){var e=n.mergeOptions.apply(n,arguments);return Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]})),e},l=function(e,t,r,o){var a=function(e){var t=(new i.DOMParser).parseFromString(String.fromCharCode.apply(null,new Uint16Array(e)),"application/xml"),n=t.getElementsByTagName("HttpHeaders")[0],r={};if(n)for(var o=n.getElementsByTagName("name"),a=n.getElementsByTagName("value"),s=0;s<o.length;s++)r[o[s].childNodes[0].nodeValue]=a[s].childNodes[0].nodeValue;var l,u=t.getElementsByTagName("Challenge")[0];return u&&(l=i.atob(u.childNodes[0].nodeValue)),{headers:r,message:l}}(t),l=a.message,u=s(a.headers,r.emeHeaders,e.licenseHeaders);n.xhr({uri:e.url,method:"post",headers:u,body:l,responseType:"arraybuffer"},(function(e,t,n){e?o(e):t.statusCode>=400&&t.statusCode<=599?o({}):o(null,n)}))},u=function(e){var t;return Object.keys(e).forEach((function(n){var o=function(e){if(e.supportedConfigurations)return e.supportedConfigurations;var t={},n=e.audioContentType,i=e.audioRobustness,o=e.videoContentType,a=e.videoRobustness,s=e.persistentState;return(n||i)&&(t.audioCapabilities=[r({},n?{contentType:n}:{},i?{robustness:i}:{})]),(o||a)&&(t.videoCapabilities=[r({},o?{contentType:o}:{},a?{robustness:a}:{})]),s&&(t.persistentState=s),[t]}(e[n]);t=t?t.catch((function(e){return i.navigator.requestMediaKeySystemAccess(n,o)})):i.navigator.requestMediaKeySystemAccess(n,o)})),t},d=function e(t){var i=t.mediaKeys,r=t.initDataType,o=t.initData,a=t.options,s=t.getLicense,l=t.removeSession,u=t.eventBus,d=i.createSession();return u.trigger("keysessioncreated"),new Promise((function(i,c){d.addEventListener("message",(function(e){"license-request"!==e.messageType&&"license-renewal"!==e.messageType||s(a,e.message).then((function(e){i(d.update(e))})).catch((function(e){c(e)}))}),!1),d.addEventListener("keystatuseschange",(function(i){var r=!1;d.keyStatuses.forEach((function(e,t){switch(u.trigger({keyId:t,status:e,target:d,type:"keystatuschange"}),e){case"expired":r=!0;break;case"internal-error":n.log.warn('Key status reported as "internal-error." Leaving the session open since we don\'t have enough details to know if this error is fatal.',i)}})),r&&d.close().then((function(){l(o),e(t)}))}),!1),d.generateRequest(r,o).catch((function(){c("Unable to create or initialize key session")}))}))},c=function(e,t){return function(n,i){return new Promise((function(r,o){e(n,i,(function(e,n){t&&t.trigger("licenserequestattempted"),e?o(e):r(n)}))}))}},p=function(e,t){if("string"==typeof t&&(t={url:t}),!t.url&&!t.getLicense)throw new Error("Neither URL nor getLicense function provided to get license");return t.url&&!t.getLicense&&(t.getLicense="com.microsoft.playready"===e?function(e){return function(t,n,i){l(e,n,t,i)}}(t):function(e){return function(t,i,r){var o=s({"Content-type":"application/octet-stream"},t.emeHeaders,e.licenseHeaders);n.xhr({uri:e.url,method:"POST",responseType:"arraybuffer",body:i,headers:o},(function(e,t,n){e?r(e):t.statusCode>=400&&t.statusCode<=599?r({}):r(null,n)}))}}(t)),t},h=function(e){var t,n,i=e.video,r=e.initDataType,o=e.initData,a=e.keySystemAccess,s=e.options,l=e.removeSession,u=e.eventBus,h=Promise.resolve();void 0===i.mediaKeysObject&&(i.mediaKeysObject=null,i.pendingSessionData=[],h=new Promise((function(e,r){i.keySystem=a.keySystem,(n=p(a.keySystem,s.keySystems[a.keySystem])).getCertificate?n.getCertificate(s,(function(n,i){n?r(n):(t=i,e())})):e(a)})).then((function(){return a.createMediaKeys()})).then((function(e){return function(e){var t=e.video,n=e.certificate,i=e.createdMediaKeys;t.mediaKeysObject=i;var r=[];n&&r.push(i.setServerCertificate(n));for(var o=0;o<t.pendingSessionData.length;o++){var a=t.pendingSessionData[o];r.push(d({mediaKeys:t.mediaKeysObject,initDataType:a.initDataType,initData:a.initData,options:a.options,getLicense:a.getLicense,removeSession:a.removeSession,eventBus:a.eventBus}))}return t.pendingSessionData=[],r.push(t.setMediaKeys(i)),Promise.all(r)}({video:i,certificate:t,createdMediaKeys:e})})).catch((function(e){return e?Promise.reject(e):Promise.reject("Failed to create and initialize a MediaKeys object")})));return h.then((function(){return function(e){var t=e.video,n=e.initDataType,i=e.initData,r=e.options,o=e.getLicense,a=e.removeSession,s=e.eventBus;return t.mediaKeysObject?d({mediaKeys:t.mediaKeysObject,initDataType:n,initData:i,options:r,getLicense:o,removeSession:a,eventBus:s}):(t.pendingSessionData.push({initDataType:n,initData:i,options:r,getLicense:o,removeSession:a,eventBus:s}),Promise.resolve())}({video:i,initDataType:r,initData:o,options:s,getLicense:i.keySystem?c(p(i.keySystem,s.keySystems[i.keySystem]).getLicense,u):null,removeSession:l,eventBus:u})}))},f="com.apple.fps.1_0",g=function(e){var t=e.initData,n=e.id,i=e.cert;"string"==typeof n&&(n=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(n));var r=0,o=new ArrayBuffer(t.byteLength+4+n.byteLength+4+i.byteLength),a=new DataView(o);new Uint8Array(o,r,t.byteLength).set(t),r+=t.byteLength,a.setUint32(r,n.byteLength,!0),r+=4;var s=new Uint16Array(o,r,n.length);return s.set(n),r+=s.byteLength,a.setUint32(r,i.byteLength,!0),r+=4,new Uint8Array(o,r,i.byteLength).set(i),new Uint8Array(o,0,o.byteLength)},m=function(e,n){return o=n,i=String.fromCharCode.apply(null,new Uint16Array(o.buffer)),(r=t.createElement("a")).href=i,r.hostname;var i,r,o},y=function(e){var t=e.video,r=e.initData,o=e.options,a=e.eventBus,l=o.keySystems[f],u=l.getCertificate||function(e){return function(t,i){var r=s(t.emeHeaders,e.certificateHeaders);n.xhr({uri:e.certificateUri,responseType:"arraybuffer",headers:r},(function(e,t,n){e?i(e):i(null,new Uint8Array(n))}))}}(l),d=l.getContentId||m,c=l.getLicense||function(e){return function(t,i,r,o){var a=s({"Content-type":"application/octet-stream"},t.emeHeaders,e.licenseHeaders);n.xhr({uri:e.licenseUri,method:"POST",responseType:"arraybuffer",body:r,headers:a},(function(e,t,n){e?o(e):t.statusCode>=400&&t.statusCode<=599?o({}):o(null,n)}))}}(l);return new Promise((function(e,t){u(o,(function(n,i){n?t(n):e(i)}))})).then((function(e){return function(e){var t=e.video,n=e.contentId,r=e.initData,o=e.cert,a=e.options,s=e.getLicense,l=e.eventBus;return new Promise((function(e,u){if(!t.webkitKeys)try{t.webkitSetMediaKeys(new i.WebKitMediaKeys(f))}catch(e){return void u("Could not create MediaKeys")}var d;try{d=t.webkitKeys.createSession("video/mp4",g({id:n,initData:r,cert:o}))}catch(e){return void u("Could not create key session")}l.trigger("keysessioncreated"),d.contentId=n,d.addEventListener("webkitkeymessage",(function(e){s(a,n,e.message,(function(e,t){l&&l.trigger("licenserequestattempted"),e?u(e):d.update(new Uint8Array(t))}))})),d.addEventListener("webkitkeyadded",(function(){e()})),d.addEventListener("webkitkeyerror",(function(){var e=d.error;u("KeySession error: code "+e.code+", systemCode "+e.systemCode)}))}))}({video:t,cert:e,initData:r,getLicense:c,options:o,contentId:d(o,r),eventBus:a})}))},v="com.microsoft.playready",_=function(e,t,n,i){var r=e.msKeys.createSession("video/mp4",t);if(!r)throw new Error("Could not create key session.");i.trigger("keysessioncreated"),r.addEventListener("mskeymessage",(function(e){!function(e,t,n,i){var r=e.keySystems[v];if("function"!=typeof r.getKey){"string"==typeof r?r={url:r}:"boolean"==typeof r&&(r={}),r.url||(r.url=n.destinationURL);var o=function(e,n){i&&i.trigger("licenserequestattempted"),e?i.trigger({message:"Unable to request key from url: "+r.url,target:t,type:"mskeyerror"}):t.update(new Uint8Array(n))};r.getLicense?r.getLicense(e,n.message.buffer,o):l(r,n.message.buffer,e,o)}else r.getKey(e,n.destinationURL,n.message.buffer,(function(e,n){e?i.trigger({message:"Unable to get key: "+e,target:t,type:"mskeyerror"}):t.update(n)}))}(n,r,e,i)})),r.addEventListener("mskeyerror",(function(e){i.trigger({message:"Unexpected key error from key session with code: "+r.error.code+" and systemCode: "+r.error.systemCode,target:r,type:"mskeyerror"})})),r.addEventListener("mskeyadded",(function(){i.trigger({target:r,type:"mskeyadded"})}))},b=function(e,t){for(var n=0;n<e.length;n++)if(e[n].initData){var i=a(e[n].initData),r=a(t);if(o(i,r))return!0}return!1},E=function(e,t){for(var n=0;n<e.length;n++)if(e[n].initData===t)return void e.splice(n,1)},T=function(e,t,n,i){if(!t||!t.keySystems)return Promise.resolve();var r=e.initData;return u(t.keySystems).then((function(o){var a=o.keySystem;return t.keySystems[a]&&t.keySystems[a].pssh&&(r=t.keySystems[a].pssh),b(n,r)||!r?Promise.resolve():(n.push({initData:r}),h({video:e.target,initDataType:e.initDataType,initData:r,keySystemAccess:o,options:t,removeSession:E.bind(null,n),eventBus:i}))}))},C=function(e,t,n){return t.keySystems&&t.keySystems[f]&&e.initData?y({video:e.target,initData:e.initData,options:t,eventBus:n}):Promise.resolve()},S=function(e,t,n,r){if(t.keySystems&&t.keySystems[v]&&!n.reduce((function(e,t){return e||t.playready}),!1)){var o=e.initData;t.keySystems[v]&&t.keySystems[v].pssh&&(o=t.keySystems[v].pssh),o&&(n.push({playready:!0,initData:o}),function(e){var t=e.video,n=e.initData,r=e.options,o=e.eventBus;t.msKeys&&delete t.msKeys;try{t.msSetMediaKeys(new i.MSMediaKeys(v))}catch(e){throw new Error("Unable to create media keys for PlayReady key system. Error: "+e.message)}_(t,n,r,o)}({video:e.target,initData:o,options:t,eventBus:r}))}},w=function(e){return n.mergeOptions(e.currentSource(),e.eme.options)},A=function(e){var t=e.src();t!==e.eme.activeSrc&&(e.eme.activeSrc=t,e.eme.sessions=[])},k=function(e){return function(t){var n="string"==typeof t?t:t&&t.message||null;e.error({code:5,message:n})}},P=function(e){void 0===e&&(e={});var t=this,r=k(t);t.ready((function(){return function(e,t){"video"===e.$(".vjs-tech").tagName.toLowerCase()&&(A(e),i.WebKitMediaKeys?e.tech_.el_.addEventListener("webkitneedkey",(function(n){A(e),C(n,w(e),e.tech_).catch(t)})):i.MediaKeys?e.tech_.el_.addEventListener("encrypted",(function(n){A(e),T(n,w(e),e.eme.sessions,e.tech_).catch(t)})):i.MSMediaKeys&&(e.tech_.el_.addEventListener("msneedkey",(function(n){A(e);try{S(n,w(e),e.eme.sessions,e.tech_)}catch(e){t(e)}})),e.tech_.on("mskeyerror",t),e.on("dispose",(function(){e.tech_.off("mskeyerror",t)}))))}(t,r)})),t.eme={initializeMediaKeys:function(i,o,a){void 0===i&&(i={}),void 0===o&&(o=function(){}),void 0===a&&(a=!1);var s=n.mergeOptions(t.currentSource(),e,i),l={initDataType:"cenc",initData:null,target:t.tech_.el_};if(A(t),t.tech_.el_.setMediaKeys)T(l,s,t.eme.sessions,t.tech_).then((function(){return o()})).catch((function(e){o(e),a||r(e)}));else if(t.tech_.el_.msSetMediaKeys){var u=function e(n){t.tech_.off("mskeyadded",e),t.tech_.off("mskeyerror",e),"mskeyerror"===n.type?(o(n.target.error),a||r(n.message)):o()};t.tech_.one("mskeyadded",u),t.tech_.one("mskeyerror",u);try{S(l,s,t.eme.sessions,t.tech_)}catch(e){t.tech_.off("mskeyadded",u),t.tech_.off("mskeyerror",u),o(e),a||r(e)}}},options:e}};(n.registerPlugin||n.plugin)("eme",P),e.hasSession=b,e.removeSession=E,e.handleEncryptedEvent=T,e.handleWebKitNeedKeyEvent=C,e.handleMsNeedKeyEvent=S,e.getOptions=w,e.setupSessions=A,e.emeErrorHandler=k,e.default=P,Object.defineProperty(e,"__esModule",{value:!0})})),function(e){"use strict";var t,n={VERSION:"1.6.1"},i={},r=function(e,t){return function(){return t.apply(e,arguments)}},o=function(){var e,t,n=arguments,i=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in i||!n[t].hasOwnProperty(e)||(i[e]=n[t][e]);return i},a=function(e,t){return{value:e,name:t}};n.TRACE=a(1,"TRACE"),n.DEBUG=a(2,"DEBUG"),n.INFO=a(3,"INFO"),n.TIME=a(4,"TIME"),n.WARN=a(5,"WARN"),n.ERROR=a(8,"ERROR"),n.OFF=a(99,"OFF");var s=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};s.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(n.TRACE,arguments)},debug:function(){this.invoke(n.DEBUG,arguments)},info:function(){this.invoke(n.INFO,arguments)},warn:function(){this.invoke(n.WARN,arguments)},error:function(){this.invoke(n.ERROR,arguments)},time:function(e){"string"==typeof e&&0<e.length&&this.invoke(n.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&0<e.length&&this.invoke(n.TIME,[e,"end"])},invoke:function(e,n){t&&this.enabledFor(e)&&t(n,o({level:e},this.context))}};var l,u=new s({filterLevel:n.OFF});(l=n).enabledFor=r(u,u.enabledFor),l.trace=r(u,u.trace),l.debug=r(u,u.debug),l.time=r(u,u.time),l.timeEnd=r(u,u.timeEnd),l.info=r(u,u.info),l.warn=r(u,u.warn),l.error=r(u,u.error),l.log=l.info,n.setHandler=function(e){t=e},n.setLevel=function(e){for(var t in u.setLevel(e),i)i.hasOwnProperty(t)&&i[t].setLevel(e)},n.getLevel=function(){return u.getLevel()},n.get=function(e){return i[e]||(i[e]=new s(o({name:e},u.context)))},n.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},i=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var a,s=console.log;o.level===n.TIME?(a=(o.name?"["+o.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):i(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(o.level===n.WARN&&console.warn?s=console.warn:o.level===n.ERROR&&console.error?s=console.error:o.level===n.INFO&&console.info?s=console.info:o.level===n.DEBUG&&console.debug?s=console.debug:o.level===n.TRACE&&console.trace&&(s=console.trace),e.formatter(r,o),i(s,r))}},n.useDefaults=function(e){n.setLevel(e&&e.defaultLevel||n.DEBUG),n.setHandler(n.createDefaultHandler(e))},n.setDefaults=n.useDefaults,"function"==typeof define&&define.amd?define(n):"undefined"!=typeof module&&module.exports?module.exports=n:(n._prevLogger=e.Logger,n.noConflict=function(){return e.Logger=n._prevLogger,n},e.Logger=n)}(this);var Best,High,Medium,Low,that,ClickableComponent=videojs.getComponent("ClickableComponent");let wrapperLayout,protSubtitle,reportPopup,selectedId;var opt,baseOptionspopup;let PopupChild,portraitheight,qualityheight,subtitleheight,audioheight,reportheight,popupQuality,popupSubtitle,popupAudio,popupReportIssue;function logituitVideoPopupComponent(){var e;this.PopupComponent=videojs.extend(ClickableComponent,{constructor:function(t,n,i,r,o){ClickableComponent.apply(this,arguments),this.uiEngine=o,this.options=n,this.baseOptions=r,that=this,this.uiEngine=o,this.player=t,opt=n,(e=this).isPortrait=!e.uiEngine.isLandscape()&&(e.uiEngine.isMobile()||e.uiEngine.isIPad()||e.uiEngine.isTablet()),e.isLandscape=e.uiEngine.isLandscape()&&(e.uiEngine.isMobile()||e.uiEngine.isIPad()||e.uiEngine.isTablet()),wrapperLayout=i,baseOptionspopup=r,this.updateTextContent(n.text),portraitheight=screen.height-350,this.el().setAttribute("class","videoQualityPopup"),e.isLandscape&&window.screen.width<=920&&!e.isTablet()&&!e.isIPad()?(this.applyStyles(this.options.option.styleCSSQuality),Settings=new ChildComponent(t,{style:{"font-size":"20px!important;",color:"#fff!important;","margin-left":"6.3%;","font-weight":"bold !important;","margin-bottom":"8.8%;","margin-top":"7.5%;",display:"flex;"},text:"Settings"}),this.addChildrenComponent(Settings),this.options.option.mobile_setting_option.forEach((function(t){if(that.isMobile()&&that.iOSDevice()&&that.isSafari()&&"Video Quality"==t.setting_title);else{let a=document.createElement("Label");a.setAttribute("class","containerPotrait"),a.setAttribute("id",t.setting_id);let s=document.createElement("span");s.style.backgroundImage=t.setting_icon,s.style.width="10%",s.style.height="100%",s.style.backgroundPosition="center",s.style.backgroundRepeat=" no-repeat",s.style.position="absolute";let l=document.createElement("Label");l.setAttribute("for",t.setting_title),l.innerHTML=t.setting_title,l.style.margin="2% 0% auto 14%",l.style.fontSize="14px";let u=document.createElement("br");var n,i=e.uiEngine.getVideoQuality();var r;let d;e.player.textTracks().tracks_.forEach((function(t){e.uiEngine.getSubtitleLanguage()==t.label&&(n=e.uiEngine.getSubtitleLanguage())}));let c=e.player.audioTracks_;c.tracks_.forEach((function(t,n){e.uiEngine.getAudioLanguage()==t.label&&(r=e.uiEngine.getAudioLanguage()),"main"==c.tracks_[n].kind.toLowerCase()&&(d=c.tracks_[n].label)})),r||(r=d||c.tracks_[0].label);var o=e.uiEngine.getAudioQuality();let p=document.createElement("span");p.setAttribute("class","optionSub"),p.style.color="#86888b",t.setting_selected_op&&("Video Quality"==t.setting_title?p.innerHTML=i||"Auto":"Audio Quality"==t.setting_title?p.innerHTML=o||"Default":"Subtitles"==t.setting_title?p.innerHTML=n||"Off":"Audio Language"==t.setting_title?p.innerHTML=r||"default":p.innerHTML=t.setting_selected_op,p.style.margin="auto",p.style.fontSize="12px",p.style.marginLeft="3.3%",p.style.opacity="0.5",p.style.marginTop="3%",p.style.textTransform="capitalize"),a.appendChild(s),a.appendChild(l),a.appendChild(u),a.appendChild(p),that.el().appendChild(a),a.addEventListener("touchstart",(function(t){if(selectedId=t.currentTarget.id,"1"==selectedId&&(e.haschild(wrapperLayout,"popup")?(e.isLandscape&&window.screen.width,e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileVideoQualityPopup(e.options.option)):e.uiEngine.addMobileSettingsPopup()),"2"==selectedId)e.haschild(wrapperLayout,"popup")?(window.matchMedia("(orientation: landscape)").matches&&window.screen.width,e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileAudioQualityPopup(e.options.option)):e.uiEngine.addMobileSettingsPopup();else if("3"==selectedId)e.haschild(wrapperLayout,"popup")?(e.isLandscape&&window.screen.width,e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileSubtitlePopup(e.options.option)):e.uiEngine.addMobileSettingsPopup();else if("4"==selectedId)if(e.haschild(wrapperLayout,"popup"))if(e.isLandscape&&window.screen.width<=920){sortTracks(e.player.audioTracks()).length>=1?(e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileAudioPopup(e.options.option)):e.uiEngine.removeMobileSettingsPopup()}else{sortTracks(e.player.audioTracks()).length>=1&&(e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileAudioPopup(e.options.option))}else e.uiEngine.addMobileSettingsPopup();else"5"==selectedId&&(e.haschild(wrapperLayout,"popup")?e.isLandscape&&window.screen.width<=920?(e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileReportIssuePopup(e.options.option)):(e.uiEngine.removeMobileSettingsPopup(),reportheight=screen.height-400,e.uiEngine.addMobileReportIssuePopup(e.options.option)):e.uiEngine.addMobileSettingsPopup())})),a.addEventListener("click",(function(e){selectedId=e.currentTarget.id}))}}))):!e.isPortrait||e.isTablet()||e.isIPad()||(this.applyStyles(n.option.styleCSSQuality),Settings=new ChildComponent(t,{style:{"font-size":"20px!important;",color:"#fff!important;","margin-left":"4.4%;","margin-bottom":"15px;","margin-top":"24px;","font-weight":"bold!important;",float:"left;",display:"flex;"},text:"Settings"}),this.addChildrenComponent(Settings),this.options.option.mobile_setting_option.forEach((function(t){if((that.isMobile()&&that.iOSDevice()||that.isSafari())&&"Video Quality"==t.setting_title);else{let a=document.createElement("Label");a.setAttribute("class","containerPotrait"),a.setAttribute("id",t.setting_id);let s=document.createElement("span");s.style.backgroundImage=t.setting_icon,s.style.width="8%",s.style.height="100%",s.style.backgroundRepeat=" no-repeat",s.style.backgroundPosition="center",s.style.position="absolute";let l=document.createElement("Label");l.setAttribute("for",t.setting_title),l.innerHTML=t.setting_title,l.style.margin="2% 0% auto 11%",l.style.fontSize="14px";let u=document.createElement("br"),d=document.createElement("span");d.setAttribute("class","optionSub"),d.style.color="#86888b";var n="";n="getVideoQuality"in e.uiEngine?e.uiEngine.getVideoQuality():e.uiEngine.defaultVideoQuality;e.uiEngine.getAudioLanguage();var i,r=e.uiEngine.getAudioQuality();var o;let c;e.player.textTracks().tracks_.forEach((function(t){e.uiEngine.getSubtitleLanguage()==t.label&&(i=e.uiEngine.getSubtitleLanguage())}));let p=e.player.audioTracks_;p.tracks_.forEach((function(t,n){e.uiEngine.getAudioLanguage()==t.label&&(o=e.uiEngine.getAudioLanguage()),"main"==p.tracks_[n].kind.toLowerCase()&&(c=p.tracks_[n].label)})),o||(o=c||p.tracks_[0].label),t.setting_selected_op&&("Video Quality"==t.setting_title?d.innerHTML=n||"Auto":"Audio Quality"==t.setting_title?d.innerHTML=r||"Default":"Subtitle"==t.setting_title?d.innerHTML=i||"Off":"Audio Language"==t.setting_title?d.innerHTML=o||"default":d.innerHTML=t.setting_selected_op,d.style.margin="auto",d.style.fontSize="12px",d.style.marginLeft="3.3%",d.style.opacity="0.5",d.style.marginTop="3%"),a.appendChild(s),a.appendChild(l),a.appendChild(u),a.appendChild(d),that.el().appendChild(a),a.addEventListener("touchstart",(function(t){if(selectedId=t.currentTarget.id,"1"==selectedId&&(e.haschild(wrapperLayout,"popup")?(e.isLandscape&&window.screen.width,e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileVideoQualityPopup(e.options.option)):e.uiEngine.addMobileSettingsPopup()),"2"==selectedId)e.haschild(wrapperLayout,"popup")?(window.matchMedia("(orientation: landscape)").matches&&window.screen.width,e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileAudioQualityPopup(e.options.option)):e.uiEngine.addMobileSettingsPopup();else if("3"==selectedId)e.haschild(wrapperLayout,"popup")?(e.isLandscape&&window.screen.width,e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileSubtitlePopup(e.options.option)):e.uiEngine.addMobileSettingsPopup();else if("4"==selectedId)if(e.haschild(wrapperLayout,"popup"))if(e.isLandscape&&window.screen.width<=920){sortTracks(e.player.audioTracks()).length>=1?(e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileAudioPopup(e.options.option)):e.uiEngine.removeMobileSettingsPopup()}else{sortTracks(e.player.audioTracks()).length>=1&&(e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileAudioPopup(e.options.option))}else e.uiEngine.addMobileSettingsPopup();else"5"==selectedId&&(e.haschild(wrapperLayout,"popup")?e.isLandscape&&window.screen.width<=920?(e.uiEngine.removeMobileSettingsPopup(),e.uiEngine.addMobileReportIssuePopup(e.options.option)):(e.uiEngine.removeMobileSettingsPopup(),reportheight=screen.height-400,e.uiEngine.addMobileReportIssuePopup(e.options.option)):e.uiEngine.addMobileSettingsPopup())})),a.addEventListener("click",(function(e){selectedId=e.currentTarget.id}))}}))),window.addEventListener("click",(function(t){t.target!=e.el()&&e.uiEngine.removeMobileSettingsPopup()}))},sendEvent:function(e,t){var n=new CustomEvent("settingsPopupOpened",{detail:null});that.uiEngine.reportEventToUiEngine(n)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},isSafari:function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},iOSDevice:function(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:""}),this.elementRef},setTextQuality:function(){wrapperLayout.addChild(settingPopup)},resetDataLandscape:function(){},resetDataPortrait:function(){},setTextQualityLandscape:function(){wrapperLayout.addChild(qualitypopup)},handleClick:function(e){this.sendEvent()},changeQualityLevelStatusDash:function(t,n){var i=sessionStorage.getItem("qualityName");t.textTracks();n<=t.qualityLevels().length&&"Auto"!=i?(e.player.dash.mediaPlayer.setQualityFor("video",n),e.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),e.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(e.player.dash.mediaPlayer.setQualityFor("video",t.qualityLevels().length-1),e.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),e.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}}))},changeQualityLevelStatus:function(e,t){if(e.qualityLevels().levels_.length){var n=e.qualityLevels().levels_,i=n[0].bitrate;let a=0;for(let e=1;e<n.length;e++)Math.abs(n[e].bitrate/1e3-Number.parseInt(t))<Math.abs(i/1e3-Number.parseInt(t))&&(i=n[e].bitrate,a=e);var r=a;"auto"===sessionStorage.getItem("qualityKey")&&(r=e.qualityLevels().length);for(var o=0;o<e.qualityLevels().length;o++)e.qualityLevels()[o].enabled=o==r}else{var a=e.dash.mediaPlayer.getBitrateInfoListFor("video");i=a[0].bitrate;let n=0;for(let e=1;e<a.length;e++)Math.abs(a[e].bitrate/1e3-Number.parseInt(t))<Math.abs(i/1e3-Number.parseInt(t))&&(i=a[e].bitrate,n=e);r=n;var s=sessionStorage.getItem("qualityName");1==r&&(i=a[0].bitrate,r=0),"Auto"!=s?(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}})),e.dash.mediaPlayer.setQualityFor("video",r),"auto"===sessionStorage.getItem("qualityKey")&&(r=e.dash.mediaPlayer.length)}},dividerLine:function(){let e=document.createElement("Div");e.style.height="1px",e.style.backgroundColor="#2d3f5c",e.style.width="177px",e.style.position="absolute",e.style.bottom="15%",e.style.marginLeft="7.7%",e.style.borderRadius="0.5px",this.el().appendChild(e)},updateTextContent:function(e){"string"!=typeof e&&(e=""),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},haschild:function(e,t){return 0!=e.children_.filter((function(e){if(e.name_)return e.name_==t})).length},addChildrenComponent:function(e){this.addChild(e)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.PopupComponent,this.PopupComponent=null)}}),videojs.registerComponent("PopupComponent",this.PopupComponent)}var ChildComponent=videojs.extend(ClickableComponent,{constructor:function(e,t){ClickableComponent.apply(this,arguments),this.applyStyles(t.style),this.updateTextContent(t.text),this.setBitrates(t.bitrate),this.setImage(t.image)},createEl:function(){return videojs.dom.createEl("div",{className:""})},updateTextContent:function(e){"string"!=typeof e&&(e=""),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();let n="",i=e;Object.keys(i).forEach((function(e){"object"==typeof i[e]?i[e].forEach((function(t){n=n+e+":"+t})):n=n+e+":"+i[e]})),t&&t.setAttribute(key,n)},setBitrates:function(e){this.el().setAttribute("Bitrates",e)},setImage:function(){var e=document.createElement("img");this.el().appendChild(e)},setClass:function(e){this.el().setAttribute("class",e)},setID:function(e){this.el().setAttribute("id",e)},setValue:function(e){this.el().setAttribute("value",e)},getID:function(){return this.el().getAttribute("id")},getValue:function(){return this.el().getAttribute("value")}});function logituitMobileVideoQualityPopup(){var e;this.mobileVideoQuality=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o){videojs.getComponent("ClickableComponent").apply(this,arguments),e=this,this.options=n,this.uiEngine=o,this.applyStyles(n.option.styleCSSQuality);let a=document.createElement("div"),s=document.createElement("span");e.isPortrait=!e.uiEngine.isLandscape()&&e.uiEngine.isMobile(),e.isLandscape=e.uiEngine.isLandscape()&&e.uiEngine.isMobile(),this.el().setAttribute("class","videoQualityChildPopup");let l=document.createElement("Label");l.innerHTML="Video Quality",l.setAttribute("class","containerTitle"),l.style.fontSize="20px",s.style.backgroundImage="url(UIComponent/Component/assets/LogiPlayer_iconsPortrait/asset_arrow/ic-arrow.png)",s.style.width="8%",s.style.height="10%",s.style.display="flex",s.style.backgroundRepeat="no-repeat",s.style.marginLeft="5%",s.style.top="7.5%",s.style.position="absolute",a.appendChild(s),a.appendChild(l);let u=document.createElement("div");u.setAttribute("class","qualityData"),r.videoQualitySettings.forEach((function(n){let i=document.createElement("Label");i.setAttribute("class","containerQuality"),i.setAttribute("id",n.playback_ql_id),i.setAttribute("bitrate",n.playback_ql_bitrate),i.setAttribute("quality",n.playback_ql_title),e.uiEngine.getVideoQuality()===n.playback_ql_title&&i.classList.add("activeClass"),n.playback_ql_checked&&(i.classList.add("activeClass"),n.playback_ql_checked=!1);let r=document.createElement("Label");r.setAttribute("for",n.playback_ql_title),n.playback_ql_quality?r.innerHTML=n.playback_ql_title+" Quality ("+n.playback_ql_quality+")":"Auto"==n.playback_ql_title?r.innerHTML=n.playback_ql_title:r.innerHTML=n.playback_ql_title+" Quality ("+n.playback_ql_qualityMweb+")",r.style.fontSize="14px";let o=document.createElement("br");i.appendChild(r),i.appendChild(o),u.appendChild(i),a.appendChild(u);document.getElementsByClassName("containerQuality");i.addEventListener("touchstart",(function(n){var r=document.querySelectorAll(".activeClass");r&&r[0]&&r[0].classList.remove("activeClass");let o=i.getAttribute("bitrate"),a=i.getAttribute("quality");i.classList.add("activeClass"),e.sendEvent(a,o),e.uiEngine.setVideoQuality(a),e.changeQualityLevelStatus(t,o),e.uiEngine.removeMobileVideoQualityPopup(),e.isLandscape&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad())}))})),e.isLandscape&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad()),s.addEventListener("touchstart",(function(t){e.uiEngine.removeMobileVideoQualityPopup(),e.uiEngine.addMobileSettingsPopup(e.options.option)})),e.el().appendChild(a),window.addEventListener("click",(function(t){t.target!=e.el()&&e.uiEngine.removeMobileVideoQualityPopup()}))},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:""}),this.elementRef},sendEvent:function(t){var n=new CustomEvent("qualityChanged",{detail:{qualitySelected:t}});e.uiEngine.reportEventToUiEngine(n)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},changeQualityLevelStatusDash:function(e,t){var n=e.dash.mediaPlayer.getBitrateInfoListFor("video"),i=n[0].bitrate;let r=0;for(let e=1;e<n.length;e++)Math.abs(n[e].bitrate/1e3-Number.parseInt(t))<Math.abs(i/1e3-Number.parseInt(t))&&(i=n[e].bitrate,r=e);var o=r,a=sessionStorage.getItem("qualityName");1==o&&(i=n[0].bitrate,o=0),"Auto"!=a?(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}})),e.dash.mediaPlayer.setQualityFor("video",o),e.dash.mediaPlayer.setFastSwitchEnabled(!0),"auto"===sessionStorage.getItem("qualityKey")&&(o=e.dash.mediaPlayer.length)},changeQualityLevelStatus:function(e,t){if(e.qualityLevels().levels_.length){var n=e.qualityLevels().levels_,i=n[0].bitrate;let a=0;for(let e=1;e<n.length;e++)Math.abs(n[e].bitrate/1e3-Number.parseInt(t))<Math.abs(i/1e3-Number.parseInt(t))&&(i=n[e].bitrate,a=e);var r=a;"auto"===sessionStorage.getItem("qualityKey")&&(r=e.qualityLevels().length);for(var o=0;o<e.qualityLevels().length;o++)e.qualityLevels()[o].enabled=o==r}else{var a=e.dash.mediaPlayer.getBitrateInfoListFor("video");i=a[0].bitrate;let n=0;for(let e=1;e<a.length;e++)Math.abs(a[e].bitrate/1e3-Number.parseInt(t))<Math.abs(i/1e3-Number.parseInt(t))&&(i=a[e].bitrate,n=e);r=n;var s=sessionStorage.getItem("qualityName");1==r&&(i=a[0].bitrate,r=0),"Auto"!=s?(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}})),e.dash.mediaPlayer.setQualityFor("video",r),"auto"===sessionStorage.getItem("qualityKey")&&(r=e.dash.mediaPlayer.length)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.mobileVideoQuality,this.mobileVideoQuality=null)}}),videojs.registerComponent("mobileVideoQuality",this.mobileVideoQuality)}function logituitMobileAudioQualityPopup(){var e;this.mobileAudioQuality=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o){videojs.getComponent("ClickableComponent").apply(this,arguments),e=this,this.options=n,this.uiEngine=o,this.applyStyles(n.option.styleCSSQuality);let a=document.createElement("div"),s=document.createElement("span");this.el().setAttribute("class","audioQualityChildPopup");let l=document.createElement("Label");l.innerHTML="Audio Quality",l.setAttribute("class","containerTitle"),l.style.fontSize="20px",s.style.backgroundImage="url(UIComponent/Component/assets/LogiPlayer_iconsPortrait/asset_arrow/ic-arrow.png)",s.style.width="8%",s.style.height="100%",s.style.display="flex",s.style.backgroundRepeat="no-repeat",s.style.marginLeft="5%",s.style.top="7.5%",s.style.position="absolute",a.appendChild(s),a.appendChild(l);let u=document.createElement("div");u.setAttribute("class","qualityData"),r.audioQualitySettings.forEach((function(t){let n=document.createElement("Label");n.setAttribute("class","containerQuality"),n.setAttribute("id",t.playback_ql_id),n.setAttribute("bitrate",t.playback_ql_bitrate),n.setAttribute("quality",t.playback_ql_title),e.uiEngine.getAudioQuality()===t.playback_ql_title&&n.classList.add("activeClass"),t.playback_ql_checked&&(n.classList.add("activeClass"),t.playback_ql_checked=!1);let i=document.createElement("Label");i.setAttribute("for",t.playback_ql_title),t.playback_ql_quality||t.playback_ql_title,i.innerHTML=t.playback_ql_title,i.style.fontSize="14px";let r=document.createElement("br");n.appendChild(i),n.appendChild(r),u.appendChild(n),a.appendChild(u);document.getElementsByClassName("containerQuality");n.addEventListener("touchstart",(function(t){var i=document.querySelectorAll(".activeClass");i&&i[0]&&i[0].classList.remove("activeClass");let r=n.getAttribute("bitrate"),o=n.getAttribute("quality");n.classList.add("activeClass"),e.sendEvent(o,r),e.uiEngine.setAudioQuality(o),e.uiEngine.removeMobileAudioQualityPopup(),window.matchMedia("(orientation: landscape)").matches&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad())}))})),window.matchMedia("(orientation: landscape)").matches&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad()),s.addEventListener("touchstart",(function(t){e.uiEngine.removeMobileAudioQualityPopup(),e.uiEngine.addMobileSettingsPopup(e.options.option)})),e.el().appendChild(a),window.addEventListener("click",(function(t){t.target!=e.el()&&e.uiEngine.removeMobileAudioQualityPopup()}))},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:""}),this.elementRef},sendEvent:function(t){var n=new CustomEvent("audioQualityChanged",{detail:{qualitySelected:t}});e.uiEngine.reportEventToUiEngine(n)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},changeQualityLevelStatusDash:function(e,t){var n=e.dash.mediaPlayer.getBitrateInfoListFor("video"),i=n[0].bitrate;let r=0;for(let e=1;e<n.length;e++)Math.abs(n[e].bitrate/1e3-Number.parseInt(t))<Math.abs(i/1e3-Number.parseInt(t))&&(i=n[e].bitrate,r=e);var o=r,a=sessionStorage.getItem("qualityName");1==o&&(i=n[0].bitrate,o=0),"Auto"!=a?(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}})),e.dash.mediaPlayer.setQualityFor("video",o),e.dash.mediaPlayer.setFastSwitchEnabled(!0),"auto"===sessionStorage.getItem("qualityKey")&&(o=e.dash.mediaPlayer.length)},changeQualityLevelStatus:function(e,t){if(e.qualityLevels().levels_.length){var n=e.qualityLevels().levels_,i=n[0].bitrate;let a=0;for(let e=1;e<n.length;e++)Math.abs(n[e].bitrate/1e3-Number.parseInt(t))<Math.abs(i/1e3-Number.parseInt(t))&&(i=n[e].bitrate,a=e);var r=a;"auto"===sessionStorage.getItem("qualityKey")&&(r=e.qualityLevels().length);for(var o=0;o<e.qualityLevels().length;o++)e.qualityLevels()[o].enabled=o==r}else{var a=e.dash.mediaPlayer.getBitrateInfoListFor("video");i=a[0].bitrate;let n=0;for(let e=1;e<a.length;e++)Math.abs(a[e].bitrate/1e3-Number.parseInt(t))<Math.abs(i/1e3-Number.parseInt(t))&&(i=a[e].bitrate,n=e);r=n;var s=sessionStorage.getItem("qualityName");1==r&&(i=a[0].bitrate,r=0),"Auto"!=s?(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),e.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}})),e.dash.mediaPlayer.setQualityFor("video",r),e.dash.mediaPlayer.setFastSwitchEnabled(!0),"auto"===sessionStorage.getItem("qualityKey")&&(r=e.dash.mediaPlayer.length)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.mobileAudioQuality,this.mobileAudioQuality=null)}}),videojs.registerComponent("mobileAudioQuality",this.mobileAudioQuality)}function logituitMobileReportIssuePopup(){var e;this.reportAnIssue=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o){ClickableComponent.apply(this,arguments),e=this,this.uiEngine=o,opt=n,this.options=n,e.isPortrait=!e.uiEngine.isLandscape()&&(e.uiEngine.isMobile()||e.uiEngine.isIPad()||e.uiEngine.isTablet()),e.isLandscape=e.uiEngine.isLandscape()&&(e.uiEngine.isMobile()||e.uiEngine.isIPad()||e.uiEngine.isTablet()),e.isLandscape&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad())?this.applyStyles(n.option.styleCSSReportIssue):(e.isPortrait||e.isPortrait&&e.isIPad())&&(reportheight=screen.height-400,this.applyStyles(n.option.styleCSSReportIssue));let a=document.createElement("div"),s=document.createElement("Label");s.innerHTML="Report an issue",s.setAttribute("class","containerTitle"),s.style.fontSize="20px";let l=document.createElement("span");l.style.backgroundImage="url(UIComponent/Component/assets/LogiPlayer_iconsPortrait/asset_arrow/ic-arrow.png)",l.style.width="8%",l.style.height="10%",l.style.display="flex",l.style.backgroundRepeat="no-repeat",l.style.marginLeft="5%",l.style.top="8.7%",l.style.position="absolute",a.appendChild(l),a.appendChild(s);let u=document.createElement("div");u.setAttribute("class","reportdata"),u.innerHTML="If you are facing troubles with";let d=document.createElement("ul");d.setAttribute("class","reportdataul");let c=document.createElement("li");c.innerHTML="video playback",d.appendChild(c);let p=document.createElement("li");p.innerHTML="Sound",d.appendChild(p);let h=document.createElement("li");h.innerHTML="Buffering",d.appendChild(h);let f=document.createElement("li");f.innerHTML="Other issues",d.appendChild(f);document.createElement("br");let g=document.createElement("button");g.setAttribute("class","reportbutton"),g.innerHTML="Report",a.appendChild(u),a.appendChild(d),a.appendChild(g),l.addEventListener("touchstart",(function(t){e.uiEngine.removeMobileReportPopup(),e.uiEngine.addMobileSettingsPopup(e.options.option)})),e.el().appendChild(a),window.addEventListener("click",(function(t){t.target!=e.el()&&e.uiEngine.removeMobileReportPopup()}))},createEl:function(){return videojs.dom.createEl("div",{className:""})},sendEvent:function(){var t=new CustomEvent("reportIssueClicked",{detail:{reposrtIssue:!0}});e.uiEngine.reportEventToUiEngine(t)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.mobileVideoQuality,this.mobileVideoQuality=null)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),videojs.registerComponent("reportAnIssue",this.reportAnIssue)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */sortTracks=function(e){try{for(let t=0;t<e.tracks_.length;t++)for(let n=0;n<t;n++)if(e.tracks_[t].label<e.tracks_[n].label){let i=e.tracks_[t];e.tracks_[t]=e.tracks_[n],e.tracks_[n]=i}}catch(e){}return e},videojs.registerComponent("ChildComponent",ChildComponent);var controlBar=videojs.getComponent("ControlBar"),CB=videojs.extend(controlBar,{constructor:function(e,t){controlBar.apply(this,arguments),this.applyStyles(t.styleCSS),this.updateTextContent(t.text)},createEl:function(){return videojs.dom.createEl("div",{className:""})},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}});
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */
function logituitReplayButtonComponent(){var e;this.replayButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r,o){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(i.styleCSS),this.updateTextContent(i.text),this.elementRef,this.player=t,this.uiEngine=r,this.eventManager=o,e=this,this.ReplayText()},tooltipDataFun:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_replayTooltip"),t.innerHTML="",e.el().appendChild(t)},ReplayText:function(){let t=document.createElement("div");t.setAttribute("class","logituit_replayText"),t.innerHTML="Replay",e.el().appendChild(t)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_replayButton"}),this.elementRef},sendEvent:function(){var t={replayTime:e.player.currentTime()},n=new CustomEvent("onReplayButtonClick",{detail:t});this.uiEngine?this.uiEngine.reportEventToUiEngine(n):this.eventManager&&this.eventManager.reportEventToEventManager(n)},handleClick:function(){this.sendEvent(),this.uiEngine.removeReplayScreen(),e.player.play()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.replayButton,this.replayButton=null)}}),videojs.registerComponent("replayButton",this.replayButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitLoadingSpinnerComponent(){var e;this.LoadingSpinner=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){n.icon&&(videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.player=t,this.uiEngine=i,e=this)},createEl:function(){const e=this.options_.icon;return void 0!==e&&(this.elementRef=document.getElementsByClassName("custom-spinner"),this.elementRef.length?this.elementRef=this.elementRef[0]:this.elementRef=videojs.dom.createEl("img",{className:"vjs-loading-spinner custom-spinner",src:e})),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onLoadingSpinner",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){this.sendEvent()},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.LoadingSpinner,this.LoadingSpinner=null)}}),videojs.registerComponent("LoadingSpinner",this.LoadingSpinner)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitWaterMarkComponent(){this.waterMark=videojs.extend(videojs.getComponent("Button"),{constructor:function(e,t){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(t.styleCSS),this.updateTextContent(t.text),this.elementRef,this.displayFunction()},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_watermark"}),this.elementRef},displayFunction:function(){this.el().style.display="none"},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},applyClass:function(e){this.el().setAttribute("class",e)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.waterMark,this.waterMark=null)}}),videojs.registerComponent("waterMark",this.waterMark)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMobileSubtitlePopup(){var e;this.subtitleComponent=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o){if(ClickableComponent.apply(this,arguments),this.updateTextContent(n.text),e=this,this.options=n,this.wrapperLayout=i,this.baseOptions=r,this.uiEngine=o,this.player=t,this.el().setAttribute("class","subtitlePopup"),e.isPortrait=!e.uiEngine.isLandscape()&&(e.uiEngine.isMobile()||e.uiEngine.isIPad()||e.uiEngine.isTablet()),e.isLandscape=e.uiEngine.isLandscape()&&(e.uiEngine.isMobile()||e.uiEngine.isIPad()||e.uiEngine.isTablet()),e.isLandscape&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad()))this.applyStyles(n.option.styleCSSSubtitle),this.subtitlepopupMweb();else if(e.isPortrait||e.isPortrait&&e.isIPad())subtitleheight=screen.height-320,this.applyStyles(n.option.styleCSSSubtitle),this.subtitlepopupMweb();else{this.applyStyles(n.option.styleCSSWebSubtitle),Subtitle=new subtitleChildComponent(t,{style:{"font-size":"14px!important;",color:"#fff!important;","margin-bottom":"16px!important;",position:"absolute;",opacity:"0.5;",left:"12%;","margin-top":"-26px;"},text:"Subtitle"}),this.addSubtitleChildrenComponent(Subtitle),tracksArray=[],t.textTracks_.tracks_.forEach(((e,t)=>{tracksArray.push({kind:"subtitles",label:e.label,language:e.language,id:t,src:""})}));t.textTracks_;tracksArray.forEach((function(n,i){if(""!=tracksArray[i].language){var r=tracksArray[i].label,o=tracksArray[i].language;let n=document.createElement("Label");n.setAttribute("class","quality-label-container");let a=document.createElement("Div"),s=document.createElement("input");s.setAttribute("type","radio"),s.setAttribute("name","SubtitlePopup"),s.setAttribute("value",o),s.setAttribute("title",r);let l=document.createElement("Label");l.setAttribute("for",r),r&&sessionStorage.setItem("audioKey",r),l.innerHTML=r,l.style.marginLeft="-54px",l.style.fontSize="14px";let u=document.createElement("br"),d=document.createElement("span");d.innerHTML="";let c=document.createElement("span");c.setAttribute("class","checkmarkAudio"),n.appendChild(s),n.appendChild(l),n.appendChild(u),n.appendChild(c),n.appendChild(d),n.appendChild(a),e.el().appendChild(n),s.addEventListener("change",(function(n){let i=t.textTracks_,r=s.getAttribute("value");e.sendEventSubtitle(r);var o=document.querySelectorAll(".activeColor");o&&o[0]&&o[0].classList.remove("activeColor"),i.tracks_.forEach((function(e,t){"showing"==i.tracks_[t].mode&&(i.tracks_[t].mode="disabled")})),i.tracks_.forEach((function(t,n){r.toLowerCase()!=i.tracks_[n].language.toLowerCase()&&e.uiEngine.getSubtitleLanguage()!=i.tracks_[n].language.toLowerCase()||(i.tracks_[n].mode="showing")})),e.uiEngine.setSubtitleLanguage(r),l.classList.add("activeColor")}))}}))}},subtitlepopupMweb:function(){let t=document.createElement("div"),n=document.createElement("Label");n.innerHTML="Subtitles",n.setAttribute("class","containerTitle"),n.style.fontSize="20px",this.el().setAttribute("class","subtitlePopup");let i=document.createElement("span");i.style.backgroundImage="url(UIComponent/Component/assets/LogiPlayer_iconsPortrait/asset_arrow/ic-arrow.png)",i.style.width="8%",i.style.height="18%",i.style.display="flex",i.style.backgroundRepeat="no-repeat",i.style.marginLeft="5%",i.style.top="7.5%",i.style.position="absolute",t.appendChild(i),t.appendChild(n);let r=document.createElement("div");r.setAttribute("class","qualityData");e.player.textTracks();var o=[];tracksArray=[],e.player.textTracks_.tracks_.forEach(((e,t)=>{tracksArray.push({kind:"subtitles",label:e.label,language:e.language,id:t,src:""})})),tracksArray=sortTextTracks(tracksArray),tracksArray.push({kind:"subtitles",label:"Off",language:"Off",id:"1",src:""});let a=e.uiEngine.getSubtitleLanguage()||"Off",s=!1;tracksArray.forEach((function(e,t){e.label==a&&(s=!0)})),s||(a="Off"),tracksArray.forEach((function(n,i){if((""!=tracksArray[i].language||"off"===tracksArray[i].label.toLowerCase())&&!o.includes(tracksArray[i].language)){o.push(tracksArray[i].language);var s=tracksArray[i].label,l=tracksArray[i].language;let u=document.createElement("Label");u.setAttribute("class","containerQuality"),u.setAttribute("value",l),u.setAttribute("title",s),a==s&&u.classList.add("activeClass");let d=document.createElement("Label");d.setAttribute("for",s),d.innerHTML=s,d.style.fontSize="14px";let c=document.createElement("br");u.appendChild(d),u.appendChild(c),r.appendChild(u),t.appendChild(r),u.addEventListener("touchstart",(function(t){try{let t=e.player.textTracks(),n=(u.getAttribute("code"),u.getAttribute("value")),i=u.getAttribute("title");t.tracks_.forEach((function(e,n){"showing"==t.tracks_[n].mode&&(t.tracks_[n].mode="disabled")})),t.tracks_.forEach((function(e,i){n.toLowerCase()==t.tracks_[i].language.toLowerCase()&&(t.tracks_[i].mode="showing")})),e.uiEngine.setSubtitleLanguage(i)}catch(e){Logger.error("error in switching subtitle",e)}var i=document.querySelectorAll(".activeClass");i&&i[0]&&i[0].classList.remove("activeClass"),e.uiEngine.setSubtitleLanguage(n.label);let r=u.getAttribute("title");u.classList.add("activeClass"),e.uiEngine.removeMobileSubtitlePopup(),e.sendEventSubtitle(r),setTimeout((()=>{let t=e.player.textTracks();t.tracks_.forEach((function(n,i){"showing"==t.tracks_[i].mode&&t.tracks_[i].label!=e.uiEngine.getSubtitleLanguage()&&(t.tracks_[i].mode="disabled")})),t.tracks_.forEach((function(n,i){t.tracks_[i].label,e.uiEngine.getSubtitleLanguage()}))}),1e3)}))}})),e.isLandscape&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad()),i.addEventListener("touchstart",(function(t){e.uiEngine.removeMobileSubtitlePopup(),e.uiEngine.addMobileSettingsPopup(e.options.option)})),this.el().appendChild(t),window.addEventListener("click",(function(t){t.target!=e.el()&&e.uiEngine.removeMobileSubtitlePopup()}))},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},isSafari:function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},iOSDevice:function(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:""}),this.elementRef},sendEventSubtitle:function(t){var n=new CustomEvent("subtitleLanguageChanged",{detail:{subtitleSelected:t}});e.uiEngine.reportEventToUiEngine(n)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.subtitleComponent,this.subtitleComponent=null)},updateTextContent:function(e){"string"!=typeof e&&(e=""),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStylesPot:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},addSubtitleChildrenComponent:function(e){this.addChild(e)}}),videojs.registerComponent("subtitleComponent",this.subtitleComponent)}videojs.registerComponent("CB",CB);var subtitleChildComponent=videojs.extend(ClickableComponent,{constructor:function(e,t){ClickableComponent.apply(this,arguments),this.applyStyles(t.style),this.updateTextContent(t.text)},createEl:function(){return videojs.dom.createEl("div",{className:""})},handleClick:function(){},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();let n="",i=e;Object.keys(i).forEach((function(e){"object"==typeof i[e]?i[e].forEach((function(t){n=n+e+":"+t})):n=n+e+":"+i[e]})),t&&t.setAttribute(key,n)},addSubtitleChildrenComponent:function(e){},setClass:function(e){this.el().setAttribute("class",e)},setID:function(e){this.el().setAttribute("id",e)}});
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */
function logituitMobileAudioPopup(){var e;this.subtitleAudioComponent=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o){if(ClickableComponent.apply(this,arguments),this.uiEngine=o,this.options=n,this.wrapperLayout=i,this.baseOptions=r,this.player=t,this.updateTextContent(n.text),this.el().setAttribute("class","audioPopup"),(e=this).isPortrait=!e.uiEngine.isLandscape()&&(e.uiEngine.isMobile()||e.uiEngine.isIPad()||e.uiEngine.isTablet()),e.isLandscape=e.uiEngine.isLandscape()&&(e.uiEngine.isMobile()||e.uiEngine.isIPad()||e.uiEngine.isTablet()),e.isLandscape&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad()))this.applyStyles(n.option.styleCSSAudio),this.audioPopupMweb();else if(e.isPortrait||e.isPortrait&&e.isIPad())audioheight=screen.height-320,this.applyStyles(n.option.styleCSSAudio),this.audioPopupMweb();else{var a=n.option.styleCSSWebAudio;a.style;e.isSafari()||-1==navigator.userAgent.indexOf("Mac OS X")?this.applyStyles(n.option.styleCSSWebAudio):this.applyStyles(a),AudioLanguage=new subtitleAudioChildComponent(t,{style:{"font-size":"14px!important;",color:"#fff!important;","margin-bottom":"16px !important;",opacity:"0.5;","margin-left":"-115px;","margin-top":"-26px;"},text:"Audio"}),this.addSubtitleAudioChildrenComponent(AudioLanguage),dividerLine=new ChildComponent(t,{style:{width:"1px;",position:"absolute;",right:"7%;","border-radius":"0.5px;",top:"9.3%;","background-color":"rgba(255, 255, 255, 0.25);!important;",height:"81.4%;"},text:""}),this.addSubtitleAudioChildrenComponent(dividerLine),sortTracks(t.audioTracks()).tracks_.forEach((function(n,i){var r=n.label,o=n.id;let a=document.createElement("Label");a.setAttribute("class","quality-label-container");let s=document.createElement("Div"),l=document.createElement("input");l.setAttribute("type","radio"),l.setAttribute("name","AudioPopup"),l.setAttribute("value",o),l.setAttribute("title",r);let u=document.createElement("Label");u.setAttribute("for",r),r&&sessionStorage.setItem("audioKey",r),u.innerHTML=r,u.style.marginLeft="-54px",u.style.fontSize="14px";let d=document.createElement("span");d.setAttribute("class","checkmarkAudio");let c=document.createElement("br"),p=document.createElement("span");p.innerHTML="",a.appendChild(l),a.appendChild(u),a.appendChild(c),a.appendChild(d),a.appendChild(p),a.appendChild(s),e.el().appendChild(a),l.addEventListener("change",(function(n){l.getAttribute("value");let i=l.getAttribute("title"),r=sortTracks(t.audioTracks());r.tracks_.forEach((function(e,t){1==r.tracks_[t].enabled&&(r.tracks_[t].enabled=!1)})),e.uiEngine.setAudioLanguage(i),r.tracks_.forEach((function(t,n){i.toLowerCase()==r.tracks_[n].label.toLowerCase()&&(r.tracks_[n].enabled=!0,r.tracks_[n].currentTime+=e.player.currentTime())}))}))}))}window.addEventListener("click",(function(t){t.target!=e.el()&&e.uiEngine.removeMobileAudioPopup()}))},isSafari:function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},audioPopupMweb:function(){let t=document.createElement("div"),n=document.createElement("Label");n.innerHTML="Audio Languages",n.setAttribute("class","containerTitle"),n.style.fontSize="20px";let i=document.createElement("span");i.style.backgroundImage="url(UIComponent/Component/assets/LogiPlayer_iconsPortrait/asset_arrow/ic-arrow.png)",i.style.width="8%",i.style.height="18%",i.style.display="flex",i.style.backgroundRepeat="no-repeat",i.style.marginLeft="5%",i.style.top="7.5%",i.style.position="absolute",t.appendChild(i),t.appendChild(n);let r=document.createElement("div");r.setAttribute("class","qualityData");let o=sortTracks(e.player.audioTracks());var a=e.uiEngine.getAudioLanguage()||localStorage.getItem("defaultAudioLanguage");let s,l=!1;if(o.tracks_.forEach((function(e,t){a==e.label&&(l=!0),"main"==o.tracks_[t].kind.toLowerCase()&&(s=o.tracks_[t].label)})),!l)try{a=s||o.tracks_[0].label}catch(e){}localStorage.getItem("defaultAudioLanguage")||(localStorage.setItem("defaultAudioLanguage",a),a=e.uiEngine.getAudioLanguage()||localStorage.getItem("defaultAudioLanguage")),o.tracks_.forEach((function(n,i){var o=n.label,s=n.id;let l=document.createElement("Label");l.setAttribute("class","containerQuality"),l.setAttribute("id",s),l.setAttribute("audioTitle",o),n.label==a&&l.classList.add("activeClass");let u=document.createElement("Label");""!=o?(u.setAttribute("for",o),u.innerHTML=o):(u.setAttribute("for",o),u.innerHTML="default"),u.style.fontSize="14px";let d=document.createElement("br");l.appendChild(u),l.appendChild(d),r.appendChild(l),t.appendChild(r),l.addEventListener("touchstart",(function(t){l.getAttribute("value");let n=l.getAttribute("audioTitle"),i=sortTracks(e.player.audioTracks());i.tracks_.forEach((function(e,t){1==i.tracks_[t].enabled&&(i.tracks_[t].enabled=!1)})),e.uiEngine.setAudioLanguage(n),i.tracks_.forEach((function(e,t){n.toLowerCase()==i.tracks_[t].label.toLowerCase()&&(i.tracks_[t].enabled=!0)})),e.uiEngine.removeMobileAudioPopup(),e.isLandscape&&(window.screen.width<=920||window.screen.width<=1366&&e.isIPad()),setTimeout((()=>{let t=e.player.textTracks();t.tracks_.forEach((function(n,i){"showing"==t.tracks_[i].mode&&t.tracks_[i].label!=e.uiEngine.getSubtitleLanguage()&&(t.tracks_[i].mode="disabled")})),t.tracks_.forEach((function(n,i){t.tracks_[i].label==e.uiEngine.getSubtitleLanguage()&&(t.tracks_[i].mode="showing")}))}),1500)}))})),window.screen.width>=481&&window.screen.width,i.addEventListener("touchstart",(function(t){e.uiEngine.removeMobileAudioPopup(),e.uiEngine.addMobileSettingsPopup(e.options.option)})),this.el().appendChild(t)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:""}),this.elementRef},sendEventAudioLang:function(t){var n=new CustomEvent("audioLanguageChanged",{detail:{audioSelected:t}});e.uiEngine.reportEventToUiEngine(n)},handleClick:function(){},updateTextContent:function(e){"string"!=typeof e&&(e=""),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.subtitleAudioComponent,this.subtitleAudioComponent=null)},addSubtitleAudioChildrenComponent:function(e){this.addChild(e)}}),videojs.registerComponent("subtitleAudioComponent",this.subtitleAudioComponent)}sortTextTracks=function(e){try{for(let t=0;t<e.length;t++)for(let n=0;n<t;n++)if(e[t].label<e[n].label){let i=e[t];e[t]=e[n],e[n]=i}}catch(e){}return e},videojs.registerComponent("subtitleChildComponent",subtitleChildComponent);var subtitleAudioChildComponent=videojs.extend(ClickableComponent,{constructor:function(e,t){ClickableComponent.apply(this,arguments),this.applyStyles(t.style),this.updateTextContent(t.text)},createEl:function(){return videojs.dom.createEl("div",{className:""})},handleClick:function(){this.setClass("select_quality")},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();let n="",i=e;Object.keys(i).forEach((function(e){"object"==typeof i[e]?i[e].forEach((function(t){n=n+e+":"+t})):n=n+e+":"+i[e]})),t&&t.setAttribute(key,n)},addSubtitleAudioChildrenComponent:function(e){},setClass:function(e){this.el().setAttribute("class",e)},setID:function(e){this.el().setAttribute("id",e)}});sortTracks=function(e){try{for(let t=0;t<e.tracks_.length;t++)for(let n=0;n<t;n++)if(e.tracks_[t].label<e.tracks_[n].label){let i=e.tracks_[t];e.tracks_[t]=e.tracks_[n],e.tracks_[n]=i}}catch(e){}return e},videojs.registerComponent("subtitleAudioChildComponent",subtitleAudioChildComponent);
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */
ClickableComponent=videojs.getComponent("ClickableComponent");var me,hindi,english,Auto,player,isoMap=new Map;isoMap.set("in-HI","Hindi"),isoMap.set("in-GU","Gujrati"),isoMap.set("in-TE","Telugu"),isoMap.set("in-TA","Tamil"),isoMap.set("in-KA","Kanada"),isoMap.set("ara","Arabic"),isoMap.set("eng","English"),isoMap.set("hi","Hindi"),isoMap.set("en","English");var subtitleAudioTVComponent=videojs.extend(ClickableComponent,{constructor:function(e,t,n){me=this,e=e,ClickableComponent.apply(this,arguments),this.updateTextContent(t.text),this.applyStyles({style:"border-radius: 6px;\n                    -webkit-backdrop-filter: blur(10px);\n                    backdrop-filter: blur(10px);\n                    background-color: #171f2c;\n                    padding: 47px;\n                    position: absolute;\n                    width: 28%;      \n                    height: 100%;     \n                    left:72%;\n                    z-index:99;\n                    font-size:25px;\n                    margin-bottom: 23%!important;\n                    opacity: 1;"}),this.audioTitle(),this.audioTV(),this.subtitlesTitle(),this.subtitleTV()},createEl:function(){return videojs.createEl("div",{className:"logituit_SUBTITLEtv"})},audioTitle:function(){var e=document.createElement("span");e.innerHTML="audio",e.style.top="9.3%",e.style.position="absolute",e.style.marginLeft="-40%",e.style.opacity="0.5",e.style.fontSize="20px",this.el().appendChild(e)},subtitlesTitle:function(){var e=document.createElement("span");e.innerHTML="subtitles",e.style.top="40.7%",e.style.position="absolute",e.style.marginLeft="-40%",e.style.opacity="0.5",e.style.fontSize="20px",this.el().appendChild(e)},audioTV:function(){var e=document.createElement("div");e.setAttribute("class","Audiocontainer"),e.style.marginTop="15.7%",e.style.height="27.3%",e.style.width="74%",e.style.display="grid",e.style.overflowY="scroll",e.style.position="absolute",me.el().appendChild(e)},subtitleTV:function(e){var t=document.createElement("div");t.setAttribute("class","Subtitlecontainer"),t.style.marginTop="78.7%",t.style.height="5.3%",t.style.width="74%",t.style.position="absolute",me.el().appendChild(t)},updateTextContent:function(e){"string"!=typeof e&&(e=""),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},addSubtitleAudioChildrenComponent:function(e){this.addChild(e)}});videojs.registerComponent("subtitleAudioTVComponent",subtitleAudioTVComponent);subtitleAudioChildComponent=videojs.extend(ClickableComponent,{constructor:function(e,t){ClickableComponent.apply(this,arguments),this.applyStyles(t),this.updateTextContent(t.text)},createEl:function(){return videojs.createEl("div",{className:""})},handleClick:function(){},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e)t&&t.setAttribute(key,e[key])},addSubtitleAudioChildrenComponent:function(e){},setClass:function(e){this.el().setAttribute("class",e)},setID:function(e){this.el().setAttribute("id",e)}});
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */
function logituitVideoQualityComponent(){let e,t;var n;this.videoQuality=videojs.extend(videojs.getComponent("Button"),{constructor:function(i,r,o,a,s){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(r.styleCSS),this.updateTextContent(r.text),e=o,this.elementRef,this.options=a,this.uiEngine=s,this.uiOptions=r,this.player=i,this.videoPopupComp=new logituitVideoPopupComponent,t=new this.videoPopupComp.PopupComponent(i,{name:"popup",option:r},o,a,s),n=this,this.tooltipDataFun()},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},tooltipDataFun:function(){var e=document.createElement("div");e.setAttribute("class","ContainerVideoWebQuality"),this.isTablet()&&(e.style.right="calc(-38% + 8px)");let t=document.createElement("span");t.style.backgroundImage="url(UIComponent/Component/assets/LogiPlayer_iconsPortrait/asset_arrow/ic-arrow.png)",t.style.width="9.1%",t.style.height="8.2%",t.style.display="flex",t.style.cursor="pointer",t.style.backgroundRepeat="no-repeat",t.style.marginLeft="7%",t.style.top="5.8%",t.style.position="absolute",t.style.zIndex="1",e.appendChild(t),t.addEventListener("click",(function(e){n.uiEngine.removeWebVideoQualityPopup()})),t.addEventListener("touchstart",(function(e){n.uiEngine.removeWebVideoQualityPopup()}));var i=document.createElement("Label");i.setAttribute("class","VideoWebQualityLabel"),i.innerHTML="Video Quality",e.appendChild(i),n.options.videoQualitySettings.forEach((function(t,i){let r=document.createElement("Label");r.setAttribute("class","quality-label-container quality-level"),r.style.marginLeft="27px",r.style.paddingLeft="unset",r.style.marginBottom="0px";let o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("name","VideoQualitys"),o.setAttribute("id","label-"+t.playback_ql_title),o.setAttribute("value",t.playback_ql_id),o.setAttribute("bitrate",t.playback_ql_bitrate),o.setAttribute("qualityKey",t.playback_ql_title),t.playback_ql_bitrate==n.options.initialVideoBirate&&o.setAttribute("checked","");let a=document.createElement("Span");a.setAttribute("for",t.playback_ql_title),t.playback_ql_title&&sessionStorage.setItem("qualityKey",t.playback_ql_title),r.style.display="block",a.innerHTML=t.playback_ql_title,a.style.float="left",a.style.marginLeft="10px",a.style.marginTop="6px",a.style.marginBottom="0px",a.style.fontSize="14px",n.uiEngine.getVideoQuality()===t.playback_ql_title?(a.classList.add("qualityActiveColor"),o.checked=t.playback_ql_title):o.checked=t.playback_ql_checked;let s=document.createElement("br"),l=document.createElement("span");l.innerHTML=t.playback_ql_subtitle,l.style.fontSize="12px",l.style.opacity="0.5",l.style.height="15px",l.style.float="left",l.style.margin="10px",l.style.marginTop="6px",l.style.marginBottom="0px";let u=document.createElement("span");u.setAttribute("class","checkmark"),r.appendChild(o),r.appendChild(a),r.appendChild(s),r.appendChild(u),r.appendChild(l),e.appendChild(r),n.el().appendChild(e),e.addEventListener("mouseleave",(function(e){n.uiEngine.removeWebVideoQualityPopup()})),o.addEventListener("change",(function(e){let t=o.getAttribute("bitrate"),i=o.getAttribute("qualityKey");var r=document.querySelectorAll(".qualityActiveColor");r&&r[0]&&r[0].classList.remove("qualityActiveColor"),n.sendEvent(i,t),n.uiEngine.setVideoQuality(i),a.classList.add("qualityActiveColor"),n.changeQualityLevelStatus(player,t)})),u.addEventListener("touchstart",(function(e){let i=o.getAttribute("bitrate"),r=o.getAttribute("qualityKey");var s=document.querySelectorAll(".qualityActiveColor");s&&s[0]&&s[0].classList.remove("qualityActiveColor"),n.sendEvent(r,i),n.uiEngine.setVideoQuality(r),a.classList.add("qualityActiveColor"),o.checked=t.playback_ql_title,n.changeQualityLevelStatus(player,i)}))}))},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_videoQualitySettings"}),this.elementRef},sendEvent:function(){var e={currentTime:n.player.currentTime()},t=new CustomEvent("qualityPopupClick",{detail:e});this.uiEngine.reportEventToUiEngine(t)},handleClick:function(){this.sendEvent()},updateTextContent:function(e){"string"!=typeof e&&(e=""),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},haschild:function(e,t){return 0!=e.children_.filter((function(e){if(e.name_)return e.name_==t})).length},applyClass:function(e){this.el().setAttribute("class",e)},changeQualityLevelStatus:function(e,t){if(n.player.qualityLevels().levels_.length){var i=n.player.qualityLevels().levels_,r=i[0].bitrate;let e=0;for(let n=1;n<i.length;n++)Math.abs(i[n].bitrate/1e3-Number.parseInt(t))<Math.abs(r/1e3-Number.parseInt(t))&&(r=i[n].bitrate,e=n);var o=e;"auto"===sessionStorage.getItem("qualityKey")&&(o=n.player.qualityLevels().length);for(var a=0;a<n.player.qualityLevels().length;a++)n.player.qualityLevels()[a].enabled=a==o}else{var s=n.player.dash.mediaPlayer.getBitrateInfoListFor("video");r=s[0].bitrate;let e=0;for(let n=1;n<s.length;n++)Math.abs(s[n].bitrate/1e3-Number.parseInt(t))<Math.abs(r/1e3-Number.parseInt(t))&&(r=s[n].bitrate,e=n);o=e;var l=sessionStorage.getItem("qualityName");1==o&&(r=s[0].bitrate,o=0),"Auto"!=l?(n.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),n.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(n.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),n.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}})),n.player.dash.mediaPlayer.setQualityFor("video",o),"auto"===sessionStorage.getItem("qualityKey")&&(o=n.player.dash.mediaPlayer.length)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.videoQuality,this.videoQuality=null)}}),videojs.registerComponent("LogixVideoQuality",this.videoQuality)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitVolumeComponent(){let e,t;var n;this.volume=videojs.extend(videojs.getComponent("Button"),{constructor:function(i,r,o,a){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(r.styleCSS),this.player=i,this.option=r,this.updateTextContent(r.text),this.volumeBarMouseOver(),this.volumeBarMouseIn(),this.volumeBarMouseOut(),this.volumeBarTouchIn(),this.uiEngine=a,e=o,t=new logituitVolumeSliderComponent(i,{name:"slider"}),n=this,i.volume()>=.7?n.showMoreVolumeIcon():this.player_.muted()||n.showVolumeIcon(),i.on("volumechange",n.onVolumechange)},onVolumechange:function(){n.player.volume();n.player.volume()>=.7?n.showMoreVolumeIcon():this.player_.muted()||n.showVolumeIcon()},tooltipDataFun:function(){let e=document.createElement("Label");e.setAttribute("class","logituit_volumeTooltip"),e.innerHTML="Volume",n.el().appendChild(e)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_volumePanel"}),this.elementRef},sendEvent:function(e){var t={mutedState:this.player_.muted()},n=new CustomEvent(e,{detail:t});this.uiEngine.reportEventToUiEngine(n)},volumeBarMouseOver:function(){this.el().addEventListener("mouseover",(function(e){}))},volumeBarMouseIn:function(){this.el().addEventListener("mouseenter",(function(e){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="visible"}))},volumeBarMouseOut:function(){this.el().addEventListener("mouseout",(function(e){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="hidden"}))},volumeBarTouchIn:function(){if(isIPad()||isTablet()){this.el().addEventListener("touchstart",(function(e){e.defaultPrevented=!1,document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="visible",n.uiEngine.volumeIconTimer&&clearTimeout(n.uiEngine.volumeIconTimer),n.uiEngine.volumeIconTimer=setTimeout((function(){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="hidden"}),3e3)}))}},handleClick:function(){this.player_.muted()?(this.player_.muted(!1),this.sendEvent("onUnmuteClick"),n.uiEngine.setMuteState(!1)):(this.player_.muted(!0),n.uiEngine.setMuteIcon(!0),n.uiEngine.setMuteState(!0),this.sendEvent("onMuteClick")),n.uiEngine.muteVolumeIcon()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},showMuteIcon:function(){this.el().style.backgroundImage="url('UIComponent/Component/assets/LogiPlayer_icons/ic-volume/ic-volume-mute.svg')"},showVolumeIcon:function(){n.player.volume()>=.7?n.showMoreVolumeIcon():n.el().style.backgroundImage="url("+n.options_.volumeicon.volumeImage},showMoreVolumeIcon:function(){n.el().style.backgroundImage="url("+n.options_.volumeicon.moreVolume},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.volume,this.volume=null)}}),isIPad=function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet=function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},videojs.registerComponent("LogixVolume",this.volume)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitVolumeSliderComponent(){var e;this.volumeSlider=videojs.extend(videojs.getComponent("VolumeBar"),{constructor:function(t,n,i,r){videojs.getComponent("VolumeBar").apply(this,arguments),this.applyStyles(n.styleCSS),this.applyClass(n.className),this.uiEngine=r,this.volumeBarTouchIn(),e=this,this.volumeBarMouseIn(),this.volumeBarMouseOut()},applyClass:function(e){this.el().classList.add("logituit_volumeSlider")},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},volumeBarMouseIn:function(){this.el().addEventListener("mouseenter",(function(e){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="visible"}))},volumeBarMouseOut:function(){this.el().addEventListener("mouseout",(function(e){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="hidden"}))},volumeBarTouchIn:function(){if(isIPad()||isTablet()){let t;this.el().addEventListener("touchstart",(function(n){n.defaultPrevented=!1,e.uiEngine.volumeIconTimer&&(clearTimeout(e.uiEngine.volumeIconTimer),e.uiEngine.volumeIconTimer=null),t&&(clearTimeout(t),e.uiEngine.clearTimeoutOfEventmanager(),e.uiEngine.showControlsFromEventManager(),t=null),document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="visible"})),this.el().addEventListener("touchend",(function(n){t||(t=setTimeout((function(){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="hidden",e.uiEngine.hideControlsWithTimeEventmanager()}),3e3))}))}},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),isIPad=function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet=function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},videojs.registerComponent("LogixVolumeSlider",this.volumeSlider)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMuteVolumeComponent(){let e;var t;this.muteVolume=videojs.extend(videojs.getComponent("Button"),{constructor:function(n,i,r,o){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(i.styleCSS),this.updateTextContent(i.text),this.volumeBarMouseOver(),this.volumeBarMouseOverShow(),this.volumeBarTouchIn(),this.volumeBarMouseOverHide(),this.uiEngine=o,e=r,t=this},tooltipDataFun:function(){let e=document.createElement("Label");e.setAttribute("class","logituit_muteVolumeTooltip"),e.innerHTML="Mute",t.el().appendChild(e)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_MuteVolumePanel"}),this.elementRef},sendEvent:function(e){var t={mutedState:this.player_.muted()},n=new CustomEvent(e,{detail:t});this.uiEngine.reportEventToUiEngine(n)},volumeBarMouseOver:function(){this.el().addEventListener("mouseover",(function(e){Logger.debug("mouseover")}))},volumeBarMouseOverShow:function(){this.el().addEventListener("mouseenter",(function(e){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="visible"}))},volumeBarMouseOverHide:function(){this.el().addEventListener("mouseout",(function(e){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="hidden"}))},volumeBarTouchIn:function(){(isIPad()||isTablet())&&this.el().addEventListener("touchstart",(function(e){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="visible",t.uiEngine.volumeIconTimer&&clearTimeout(t.uiEngine.volumeIconTimer),t.uiEngine.volumeIconTimer=setTimeout((function(){document.getElementsByClassName("logituit_volumeSlider")[0].style.visibility="hidden"}),3e3)}))},handleClick:function(){this.player_.muted()?(this.player_.muted(!1),this.sendEvent("onUnmuteClick"),t.uiEngine.setMuteIcon(!1)):(this.player_.muted(!0),this.sendEvent("onMuteClick")),t.uiEngine.displayVolumeIcon()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},showMuteIcon:function(){this.el().style.backgroundImage="url('UIComponent/Component/assets/LogiPlayer_icons/ic-volume/ic-volume-mute.svg')"},showVolumeIcon:function(){this.el().style.backgroundImage="url('UIComponent/Component/assets/LogiPlayer_icons/ic-volume/ic-volume.svg')"},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.muteVolume,this.muteVolume=null)}}),isIPad=function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet=function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},videojs.registerComponent("LogixMuteVolume",this.muteVolume)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMuteVolumeMobileComponent(){let e;var t;this.MuteMobileVolume=videojs.extend(videojs.getComponent("Button"),{constructor:function(n,i,r,o){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(i.styleCSS),this.updateTextContent(i.text),this.uiEngine=o,this.player=n,e=r,t=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_MuteMobileVolumePanel"}),this.elementRef},sendEvent:function(e){var n={mutedState:t.player.muted()},i=new CustomEvent(e,{detail:n});this.uiEngine.reportEventToUiEngine(i)},handleClick:function(){t.player.muted(!1),this.sendEvent("onMuteClick"),t.uiEngine.removeUnmuteIcon()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.MuteMobileVolume,this.MuteMobileVolume=null)}}),videojs.registerComponent("LogixMuteVolume",this.MuteMobileVolume)}function logituitRecommendedPopup(){var e;this.recommendedPopup=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o,a){videojs.getComponent("ClickableComponent").apply(this,arguments),this.options=n,this.uiEngine=o,this.player=t,this.endTime=a,this.baseOptions=r,(e=this).headerAllEpisode(),this.player.on("closerecomendation",e.closeRecomendationPopup)},sendEvent:function(e,t,n){var i=new CustomEvent(e,{detail:{assetId:t,contentId:n}});this.uiEngine.reportEventToUiEngine(i)},headerAllEpisode:function(){e.applyStyles(e.options.styleCSS);let t=document.createElement("div");t.setAttribute("class","containerRecommendedPopup");let n=document.createElement("div");n.setAttribute("class","topBarContainerPopup");let i=document.createElement("label");i.setAttribute("class","recommendedHeader"),i.innerHTML="Suggested for You";let r=document.createElement("img");r.setAttribute("src","UIComponent/Component/assets/LogiPlayer_icons/cta-close/ic-close.svg"),r.setAttribute("class","iconCloseRecommended"),r.addEventListener("click",(function(t){e.player.trigger({type:"closeRecommendation",bubbles:!1}),e.sendEvent("onRecommendedClosed",null,null),e.uiEngine.Wrapper.el_.removeChild(document.getElementsByClassName("logituit_recommendedUI")[0]),e.uiEngine.removeRecommendation(),(e.player.duration()==e.player.currentTime()||e.player_.duration()-e.player_.currentTime()<=1)&&(window.history.length<=1?window.close():window.history.go(-1))})),r.addEventListener("touchstart",(function(t){e.player.trigger({type:"closeRecommendation",bubbles:!1}),e.sendEvent("onRecommendedClosed",null,null),e.uiEngine.Wrapper.el_.removeChild(document.getElementsByClassName("logituit_recommendedUI")[0]),e.uiEngine.removeRecommendation(),(e.player.duration()==e.player.currentTime()||e.player_.duration()-e.player_.currentTime()<=1)&&(window.history.length<=1?window.close():window.history.go(-1))})),n.appendChild(i),n.appendChild(r),t.appendChild(n);var o=document.createElement("div");o.setAttribute("class","outerRecommendedContainer"),o.setAttribute("id","recommendation-scrollable-container"),e.baseOptions.recommendations.forEach((function(n,i){let r=document.createElement("Label");r.setAttribute("class","containerRecommended"),r.setAttribute("episodeId",i);let a=document.createElement("div");a.setAttribute("class","image_container");let s=document.createElement("div");s.setAttribute("class","recommendedImage");let l=document.createElement("img");l.setAttribute("class","recommendedImageTag");let u,d=n.images[0].cdn_url,c=n.images[0].variants.indexOf("xs");u=c>=0?"_"+n.images[0].variants[c]:"";let p=d.replace(".jpg",u+".jpg").replace(".png",u+".png").replace(".svg",u+".svg").replace(".jpeg",u+".jpeg");l.src=p;let h=document.createElement("div");h.setAttribute("class","recommendedImageFilter"),s.appendChild(l),s.appendChild(h),a.appendChild(s);let f=document.createElement("div");f.setAttribute("class","hover_container"),a.appendChild(f);let g=document.createElement("label");g.innerHTML=n.asset_title,g.setAttribute("class","hover_title");let m=document.createElement("div");m.setAttribute("class","hover_buttons_container");let y=document.createElement("div");y.setAttribute("class","hover_button");let v=document.createElement("img");v.setAttribute("class","hover_icon"),v.src=e.options.icons.play;let _=document.createElement("label");_.setAttribute("class","hover_text"),_.innerHTML="Watch",y.append(v),y.append(_),y.addEventListener("click",(function(t){e.sendEvent("recommendedWatchNowClicked",n.asset_id,n.content_id)})),y.addEventListener("touchstart",(function(t){e.sendEvent("recommendedWatchNowClicked",n.asset_id,n.content_id)}));let b=document.createElement("div");b.setAttribute("class","hover_button"),b.setAttribute("class","hover_button");let E=document.createElement("img");E.setAttribute("class","hover_icon"),E.src=e.options.icons.watchleast;let T=document.createElement("label");T.setAttribute("class","hover_text"),T.innerHTML="Watchlist",b.append(E),b.append(T),b.addEventListener("click",(function(t){e.sendEvent("recommendedWatchListClicked",n.asset_id,n.content_id)})),b.addEventListener("touchstart",(function(t){e.sendEvent("recommendedWatchListClicked",n.asset_id,n.content_id)}));let C=document.createElement("div");C.setAttribute("class","hover_button"),C.setAttribute("class","hover_button");let S=document.createElement("img");S.setAttribute("class","hover_icon"),S.src=e.options.icons.share;let w=document.createElement("label");w.setAttribute("class","hover_text"),w.innerHTML="Share",C.append(S),C.append(w),C.addEventListener("click",(function(t){e.sendEvent("recommendedShareClicked",n.asset_id,n.content_id)})),C.addEventListener("touchstart",(function(t){e.sendEvent("recommendedShareClicked",n.asset_id,n.content_id)}));let A=document.createElement("div");A.setAttribute("class","hover_button"),A.setAttribute("class","hover_button");let k=document.createElement("img");k.setAttribute("class","hover_icon"),k.src=e.options.icons.info;let P=document.createElement("label");P.setAttribute("class","hover_text"),P.innerHTML="Info",A.append(k),A.append(P),A.addEventListener("click",(function(t){e.sendEvent("recommendedInfoClicked",n.asset_id,n.content_id)})),A.addEventListener("touchstart",(function(t){e.sendEvent("recommendedInfoClicked",n.asset_id,n.content_id)})),m.appendChild(y),m.appendChild(b),m.appendChild(C),m.appendChild(A),f.appendChild(g),f.appendChild(m);let I=document.createElement("label");I.setAttribute("class","recommendedAssetTitle"),I.innerHTML=n.asset_title;let L=document.createElement("label");L.setAttribute("class","recommendedDesc"),L.innerHTML=n.description,r.appendChild(a),r.appendChild(I),r.appendChild(L),o.appendChild(r),t.appendChild(o),r.addEventListener("click",(function(t){try{let t=episodeContainer.getAttribute("episodeId");var n=document.querySelectorAll(".activeEpisode");n&&n[0]&&n[0].classList.remove("activeEpisode"),e.uiEngine.setAllEpisode(t),r.classList.add("activeEpisode")}catch(t){}}))}));let a=document.createElement("div");a.setAttribute("class","left_arrow_container"),a.setAttribute("id","recommended-left-arrow-container");let s=document.createElement("img");s.src="UIComponent/Component/assets/LogiPlayer_icons/icon-recommended/right-arrow.svg",s.setAttribute("class","left_arrow"),s.addEventListener("click",(function(){let e=document.getElementById("recommendation-scrollable-container"),t=document.getElementById("recommended-right-arrow-container"),n=document.getElementById("recommended-left-arrow-container");const i=e.scrollWidth;0!==e.scrollLeft&&e.scrollTo(e.scrollLeft-screen.width/4*3,0),0==e.scrollLeft&&(n.style.display="none"),e.scrollLeft+screen.width!==i&&(t.style.display="block")})),s.addEventListener("touchstart",(function(){let e=document.getElementById("recommendation-scrollable-container"),t=document.getElementById("recommended-right-arrow-container"),n=document.getElementById("recommended-left-arrow-container");const i=e.scrollWidth;0!==e.scrollLeft&&e.scrollTo(e.scrollLeft-screen.width/4*3,0),0==e.scrollLeft&&(n.style.display="none"),e.scrollLeft+screen.width!==i&&(t.style.display="block")})),a.appendChild(s),o.appendChild(a);let l=document.createElement("div");l.setAttribute("class","right_arrow_container"),l.setAttribute("id","recommended-right-arrow-container");let u=document.createElement("img");u.src="UIComponent/Component/assets/LogiPlayer_icons/icon-recommended/right-arrow.svg",u.setAttribute("class","right_arrow"),u.addEventListener("click",(function(){let e=document.getElementById("recommendation-scrollable-container"),t=document.getElementById("recommended-right-arrow-container"),n=document.getElementById("recommended-left-arrow-container");const i=e.scrollWidth;e.scrollLeft+screen.width!==i?e.scrollTo(e.scrollLeft+screen.width/4*3,0):t.style.display="none",0!==e.scrollLeft&&(n.style.display="block")})),u.addEventListener("touchstart",(function(){let e=document.getElementById("recommendation-scrollable-container"),t=document.getElementById("recommended-right-arrow-container"),n=document.getElementById("recommended-left-arrow-container");const i=e.scrollWidth;e.scrollLeft+screen.width!==i?e.scrollTo(e.scrollLeft+screen.width/4*3,0):t.style.display="none",0!==e.scrollLeft&&(n.style.display="block")})),l.appendChild(u),o.appendChild(l),(o.scrollLeft==o.scrollWidth||0!==o.scrollRight)&&(l.style.display="block"),0==o.scrollLeft?a.style.display="none":0!==o.scrollLeft&&(a.style.display="block"),e.el().appendChild(t)},closeRecomendationPopup:function(){e.uiEngine.Wrapper.el_.removeChild(document.getElementsByClassName("logituit_recommendedUI")[0])},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_recommendedUI"}),this.elementRef},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.allEpisode,this.allEpisode=null)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),isIPad=function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet=function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},videojs.registerComponent("recommendedPopup",this.recommendedPopup)}function logituitFullscreenRecommendedPopup(){var e;this.fullscreenRecommendedPopup=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o,a,s){videojs.getComponent("ClickableComponent").apply(this,arguments),this.options=n,this.uiEngine=o,this.player=t,this.baseOptions=r,this.width=a,this.height=s,(e=this).headerAllEpisode()},sendEvent:function(e,t,n){var i=new CustomEvent(e,{detail:{assetId:t,contentId:n}});this.uiEngine.reportEventToUiEngine(i)},headerAllEpisode:function(){e.applyStyles(e.options.styleCSS);let t,n=e.baseOptions.fullscreenRecommendationData[0].images[0].cdn_url,i=e.baseOptions.fullscreenRecommendationData[0].images[0].variants.indexOf("xl");t=i>=0?"_"+e.baseOptions.fullscreenRecommendationData[0].images[0].variants[i]:"";let r=n.replace(".jpg",t+".jpg").replace(".png",t+".png").replace(".svg",t+".svg").replace(".jpeg",t+".jpeg"),o=document.createElement("div");o.setAttribute("class","fullscreenRecommendedPopup"),o.style.width=e.width,o.style.height=e.height;let a=document.createElement("div");a.setAttribute("class","imgContainer");let s="linear-gradient(90deg, #000000, transparent),url("+r+")";a.style.backgroundImage=s;let l=document.createElement("div");l.setAttribute("class","innerFullscreenContainer");let u=document.createElement("div");u.setAttribute("class","leftContainer");let d=document.createElement("div");d.setAttribute("class","rightContainer");let c=document.createElement("img");c.setAttribute("src","UIComponent/Component/assets/LogiPlayer_icons/ic-close/icon-close-recommendation.png"),c.setAttribute("class","closeIconRecommended"),c.addEventListener("click",(function(t){e.uiEngine.removeFullscreenRecommendation(),window.history.length<=1?window.close():window.history.go(-1)}));let p=document.createElement("p");p.setAttribute("class","recommendedText"),p.innerHTML="Recommended for You";let h=document.createElement("div");h.setAttribute("class","detailContainer");let f=document.createElement("div");f.setAttribute("class","watchContainer");let g=document.createElement("p");g.setAttribute("class","recommendedgenre");let m=[];try{e.baseOptions.fullscreenRecommendationData[0].genres.forEach((function(e){m.push(e.genre_name)}))}catch(e){Logger.error("error in fullscreen recommendation",e)}g.innerHTML=m.join(" • ");let y=document.createElement("p");y.innerHTML=e.baseOptions.fullscreenRecommendationData[0].asset_title,y.setAttribute("class","recommendedTitle");let v=document.createElement("p");v.innerHTML=e.baseOptions.fullscreenRecommendationData[0].description,v.setAttribute("class","recommendedDescription");let _=document.createElement("div");_.setAttribute("class","watchNowRecommendedContainer"),_.addEventListener("click",(function(t){document.getElementById(e.baseOptions.divId).removeChild(e.container),e.sendEvent("recommendedPlayClicked",e.baseOptions.fullscreenRecommendationData[0].asset_id,e.baseOptions.fullscreenRecommendationData[0].content_id)}));let b=document.createElement("div");b.setAttribute("class","watchTrailerContainer"),b.addEventListener("click",(function(t){document.getElementById(e.baseOptions.divId).removeChild(e.container),e.sendEvent("recommendedTrailer",e.baseOptions.fullscreenRecommendationData[0].asset_id,e.baseOptions.fullscreenRecommendationData[0].content_id)}));let E=document.createElement("div");E.setAttribute("class","watchListContainer");let T=document.createElement("img");T.setAttribute("src","UIComponent/Component/assets/LogiPlayer_icons/cta-play/icon-play-recommendation.png"),T.setAttribute("class","playIconRecommended");let C=document.createElement("img");C.setAttribute("src","UIComponent/Component/assets/LogiPlayer_icons/ic-trailer/icon-trailer.png"),C.setAttribute("class","watchTrailerIcon");let S=document.createElement("img");S.setAttribute("src","UIComponent/Component/assets/LogiPlayer_icons/icon-watchlist/icon-watchlist.png"),S.setAttribute("class","watchListIconRecommended"),e.isTablet()&&(h.style.marginTop="48px"),(e.isSafari()||e.isTablet())&&(T.style.marginRight="16px",C.style.marginRight="16px",S.style.marginRight="16px");let w=document.createElement("p");w.innerHTML="Watch Now",w.setAttribute("class","recommendedWatchNowBtn");let A=document.createElement("p");A.innerHTML="Watch Trailer",A.setAttribute("class","recommendedWatchTrailer");let k=document.createElement("p");k.innerHTML="Watchlist",k.setAttribute("class","recommendedWatchList"),e.container=o,document.getElementById(e.baseOptions.divId).appendChild(e.container),o.appendChild(a),a.appendChild(l),o.appendChild(d),l.appendChild(u),d.appendChild(c),u.appendChild(p),u.appendChild(h),u.appendChild(f),f.appendChild(_),f.appendChild(b),f.appendChild(E),_.appendChild(T),_.appendChild(w),b.appendChild(C),b.appendChild(A),E.appendChild(S),E.appendChild(k),h.appendChild(g),h.appendChild(y),h.appendChild(v)},closeRecomendationPopup:function(){e.uiEngine.Wrapper.el_.removeChild(document.getElementsByClassName("logituit_recommendedUI")[0])},isSafari:function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_fullscreenRecommendedUI"}),this.elementRef},releaseResource:function(){document.getElementById(e.baseOptions.divId).removeChild(e.container),this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.allEpisode,this.allEpisode=null)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),videojs.registerComponent("recommendedPopup",this.fullscreenRecommendedPopup)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitShareButtonComponent(){var e;this.shareButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.uiEngine=i,this.player=t,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_sharebutton"}),this.elementRef},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onShareButtonClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){this.sendEvent()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.shareButton,this.shareButton=null)}}),videojs.registerComponent("shareButton",this.shareButton)}function logituitWatchNext(){var e;this.watchNext=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o,a,s){videojs.getComponent("ClickableComponent").apply(this,arguments),this.applyStyles(n.styleCSS),this.uiEngine=o,this.player=t,this.options=n,this.endTime=a,this.startTime=s,this.baseOptions=r,e=this,this.webWatchNextPopup()},isSafari:function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},setOnlineFlag(t){e.isOnline=t},setBackgroundFlag(t){e.isInBackground=t},webWatchNextPopup:function(){var t;let n=document.createElement("div");n.setAttribute("class","containerWatchNext"),document.createElement("div").setAttribute("class","desktopPopup"),document.createElement("div").setAttribute("class","mobilePopup"),document.createElement("div").setAttribute("class","landscapePopup");let i=document.createElement("div");i.setAttribute("class","innerContainerWatchNext");let r=document.createElement("div");r.setAttribute("class","watchNextImage");let o,a=this.baseOptions.next_content.images[0].cdn_url,s=this.baseOptions.next_content.images[0].variants.indexOf("xs");o=s>=0?"_"+this.baseOptions.next_content.images[0].variants[s]:"";let l=a.replace(".jpg",o+".jpg").replace(".png",o+".png").replace(".svg",o+".svg").replace(".jpeg",o+".jpeg");window.matchMedia("(orientation: portrait)").matches||window.matchMedia("(orientation: landscape)").matches&&e.isIPad(),r.style.backgroundImage="url("+l+")";let u=document.createElement("span");window.matchMedia("(orientation: portrait)").matches||window.matchMedia("(orientation: landscape)").matches&&e.isIPad(),u.style.backgroundImage=e.options.icon.close,u.setAttribute("class","iconNextCloseWatchNext"),u.addEventListener("click",(function(n){e.player.trigger({type:"recomendation",bubbles:!1}),e.player.trigger({type:"closeWatchNext",bubbles:!1}),e.uiEngine.removeWatchNow(),clearInterval(t)}));let d=document.createElement("div");d.setAttribute("class","watchNextLabel");let c=document.createElement("span");c.setAttribute("class","upNextLabelWatchNext"),c.innerHTML="UP NEXT";let p=document.createElement("span");p.setAttribute("class","upNextLabelWatchNextMobile"),p.innerHTML="UP NEXT";let h=document.createElement("span");h.innerHTML=this.baseOptions.next_content.content_title,h.setAttribute("class","contentLabelWatchNext");let f=document.createElement("div");f.setAttribute("class","logix-center-watchNext");let g=document.createElement("div");g.innerHTML='<div class="base-timer-watch-next">\n      <svg class="base-timer__svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n      <defs>\n      <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">\n        <stop offset="50%" stop-color="#0aa1ea" />      \n        <stop offset="100%" stop-color="#40c6b6" />\n      </linearGradient>\n    </defs>\n        <g class="base-timer__circle">\n          <circle class="base-timer__path-elapsed-watch-next" cx="50" cy="50" r="45"></circle>\n          <path\n            id="base-timer-path-remaining"\n            stroke-dasharray="'+(283*e.calculateTimeFraction(e.endTime-e.player.currentTime())).toFixed(1)+' 283"\n            class="base-timer__path-remaining orange"\n            stroke="url(#gradient)" \n            stroke-width="6" \n            fill="none"\n            d="\n              M 50, 50\n              m -45, 0\n              a 45,45 0 1,0 90,0\n              a 45,45 0 1,0 -90,0\n            "\n          ></path>\n        </g>\n      </svg><div id=\'episode-starts-card-timer-text\'"></div>\n      </span>\n    </div>',f.appendChild(g);let m=document.createElement("div");m.setAttribute("class","spinnerContainer");let y=document.createElement("div");y.setAttribute("class","spinnerBgWatchNext"),document.createElement("div").setAttribute("class","iconPlayBgWatchNext");let v=document.createElement("span");v.setAttribute("class","iconPlayWatchNext"),v.style.backgroundImage=e.options.icon.play,v.addEventListener("click",(function(n){clearInterval(t),e.player.trigger({type:"playnext",bubbles:!1})})),v.addEventListener("touchstart",(function(n){clearInterval(t),e.player.trigger({type:"playnext",bubbles:!1})}));let _=document.createElement("div");_.setAttribute("class","playingTimeCombine"),(e.isSafari()||e.isTablet())&&(_.style.marginLeft="9px",h.style.marginTop="10px",u.style.width="14px",u.style.height="14px",e.isSafari()&&e.isMobile()&&(d.style.marginLeft="15px"));let b=document.createElement("span");b.setAttribute("class","playingTimeWatchNext");let E=document.createElement("span");E.setAttribute("class","forSpaceWatchNext"),e.isSafari()||-1==navigator.userAgent.indexOf("Mac OS X")||(E.style.left="43%"),e.timerWatchNext=e.endTime-e.player.currentTime(),E.innerHTML=Number.parseInt(e.timerWatchNext)+" seconds",b.innerHTML="Playing in ",e.timerWatchNext>=0&&e.timerWatchNext<=e.endTime-e.startTime&&(t=setInterval((function(){e.timerWatchNext>e.endTime-e.startTime&&(clearInterval(t),e.uiEngine.removeWatchNow()),(e.timerWatchNext<=0||document.hidden&&(e.isMobile()||e.isTablet()||e.isIPad()))&&clearInterval(t);try{e.setCircleDasharray(e.timerWatchNext-1)}catch{}E.innerHTML=Number.parseInt(e.timerWatchNext)+" seconds",b.innerHTML="Playing in ",e.player.paused()&&e.timerWatchNext>0&&e.isOnline&&(!document.hidden&&(e.isMobile()||e.isTablet()||e.isIPad())||!e.isMobile()&&!e.isTablet()&&!e.isIPad())?e.timerWatchNext=e.timerWatchNext-1:e.endTime-e.player.currentTime()<e.timerWatchNext&&(e.timerWatchNext=e.endTime-e.player.currentTime()),e.timerWatchNext<=0&&e.isOnline&&!document.hidden&&(clearInterval(t),e.player.trigger({type:"playnext",bubbles:!1}))}),1e3));let T=document.createElement("div");T.setAttribute("class","mobileInnerContainer"),e.isMobile()?window.matchMedia("(orientation: portrait)").matches&&e.isMobile()?(n.classList.add("mobilePopup"),d.appendChild(c),d.appendChild(h),m.appendChild(y),m.appendChild(_),T.appendChild(r),r.appendChild(m),T.appendChild(d),n.appendChild(u),n.appendChild(T)):window.matchMedia("(orientation: landscape)").matches&&e.isMobile()&&(n.classList.add("landscapePopup"),m.appendChild(y),r.appendChild(m),d.appendChild(c),d.appendChild(h),d.appendChild(_),T.appendChild(r),T.appendChild(d),n.appendChild(u),n.appendChild(T)):(n.classList.add("desktopPopup"),d.appendChild(c),d.appendChild(h),m.appendChild(y),m.appendChild(_),i.appendChild(r),i.appendChild(u),n.appendChild(i),n.appendChild(d),n.appendChild(m)),_.appendChild(b),_.appendChild(E),y.appendChild(f),y.appendChild(v),e.el().appendChild(n),u.addEventListener("touchstart",(function(n){e.player.trigger({type:"closeWatchNext",bubbles:!1}),(e.isIPad()||e.isTablet())&&e.player.trigger({type:"recomendation",bubbles:!1}),e.uiEngine.removeWatchNow(),e.isMobile()&&(e.player.paused()||e.uiEngine.showPauseIcon()),clearInterval(t)}))},calculateTimeFraction:function(t){var n=e.endTime-e.startTime;const i=(n-t)/n;return i-1/n*(1-i)},setCircleDasharray:function(t){try{const n=`${(283*e.calculateTimeFraction(t)).toFixed(1)} 283`;document.getElementById("base-timer-path-remaining")&&document.getElementById("base-timer-path-remaining").setAttribute("stroke-dasharray",n)}catch(e){console.warn(e)}},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_watchNext"}),this.elementRef},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.watchNext,this.watchNext=null)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),videojs.registerComponent("LogixWatchNext",this.watchNext)}function logituitNextEpisode(){var e;this.nextEpisode=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o,a,s){videojs.getComponent("ClickableComponent").apply(this,arguments),this.applyStyles(n.styleCSS),e=this,this.endTime=a,this.startTime=s,this.uiEngine=o,this.player=t,this.options=n,this.baseOptions=r,this.webNextEpisodePopup()},isSafari:function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},setOnlineFlag(t){e.isOnline=t},setBackgroundFlag(t){e.isInBackground=t},webNextEpisodePopup:function(){var t;let n=document.createElement("div");n.setAttribute("class","containerNextEpisode");let i=document.createElement("div");i.setAttribute("class","landscapeInnerContainer"),document.createElement("div").setAttribute("class","desktopNextEpiPopup"),document.createElement("div").setAttribute("class","mobileNextEpiPopup"),document.createElement("div").setAttribute("class","landscapeNextEpiPopup"),n.style.display="none";let r=document.createElement("div");r.setAttribute("class","innerContainer");let o=document.createElement("div");o.setAttribute("class","nextEpisodeImage");let a,s=this.baseOptions.next_content.images[0].cdn_url,l=this.baseOptions.next_content.images[0].variants.indexOf("xs");a=l>=0?"_"+this.baseOptions.next_content.images[0].variants[l]:"";let u=s.replace(".jpg",a+".jpg").replace(".png",a+".png").replace(".svg",a+".svg").replace(".jpeg",a+".jpeg");window.matchMedia("(orientation: portrait)").matches||window.matchMedia("(orientation: landscape)").matches&&e.isIPad(),o.style.backgroundImage="url("+u+")";let d=document.createElement("span");window.matchMedia("(orientation: portrait)").matches||window.matchMedia("(orientation: landscape)").matches&&e.isIPad(),d.style.backgroundImage=e.options.icon.close,d.setAttribute("class","iconNextClose"),d.addEventListener("click",(function(n){e.player.trigger({type:"recomendation",bubbles:!1}),e.player.trigger({type:"closeWatchNext",bubbles:!1}),e.uiEngine.removeNextEpisode(),clearInterval(t)}));let c=document.createElement("div");c.setAttribute("class","nextEpisodeLabel");let p=document.createElement("span");p.setAttribute("class","upNextLabel"),p.innerHTML="UP NEXT";let h=document.createElement("span");h.setAttribute("class","upNextLabelMobile"),h.innerHTML="UP NEXT";let f=document.createElement("span");f.innerHTML=this.baseOptions.next_content.content_title,f.setAttribute("class","contentLabel");let g=document.createElement("span");g.innerHTML=this.baseOptions.next_content.asset_title,g.setAttribute("class","assetLabel");let m=document.createElement("div");m.setAttribute("class","loaderContainer");let y=document.createElement("div");y.setAttribute("class","logix-center");let v=document.createElement("div");e.timerWatchNext=e.endTime-e.player.currentTime(),v.innerHTML='<div class="base-timer">\n            <svg class="base-timer__nextEpisode" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n            <defs>\n    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">\n      <stop offset="50%" stop-color="#0aa1ea" />      \n      <stop offset="100%" stop-color="#40c6b6" />\n    </linearGradient>\n  </defs>\n              <g class="base-timer__circle-nextEpisode">\n                <circle class="base-timer__path-elapsed" cx="50" cy="50" r="45">\n                </circle>\n                <path\n                  id="base-timer-path-remaining"\n                  stroke-dasharray="'+(283*e.calculateTimeFraction(e.endTime-e.player.currentTime())).toFixed(1)+' 283"\n                  class="base-timer__path-remaining-nextEpisode orange"\n                  stroke="url(#gradient)" \n                  stroke-width="6" \n                  fill="none"\n                  d="\n                    M 50, 50\n                    m -45, 0\n                    a 45,45 0 1,0 90,0\n                    a 45,45 0 1,0 -90,0\n                  "\n                ></path>\n              </g>\n            </svg><div id=\'episode-starts-card-timer-text\'"></div>\n            </span>\n          </div>',y.appendChild(v);let _=document.createElement("div");_.setAttribute("class","spinnerBg"),document.createElement("div").setAttribute("class","iconPlayBg");let b=document.createElement("span");b.setAttribute("class","iconPlay"),b.style.backgroundImage=e.options.icon.play,b.addEventListener("click",(function(n){clearInterval(t),e.player.trigger({type:"playnext",bubbles:!1})})),b.addEventListener("touchstart",(function(n){clearInterval(t),e.player.trigger({type:"playnext",bubbles:!1})}));let E=document.createElement("div");E.setAttribute("class","playingTimeNextEpisode"),e.isSafari()&&(E.style.marginLeft="9px",f.style.marginTop="10px",g.style.marginTop="10px",d.style.width="14px",d.style.height="14px"),e.isSafari()&&e.isMobile()&&(c.style.marginLeft="15px"),e.isTablet()&&(E.style.marginLeft="9px",f.style.marginTop="10px",g.style.marginTop="10px");let T=document.createElement("span");T.setAttribute("class","playingTime");let C=document.createElement("span");C.setAttribute("class","forSpace"),e.isSafari()||-1==navigator.userAgent.indexOf("Mac OS X")||(C.style.left="43%"),window.matchMedia("(orientation: portrait)").matches&&e.isMobile()?n.style.display="flex":n.style.display="block",e.timerWatchNext=e.endTime-e.player.currentTime();e.endTime,e.startTime;e.timerWatchNext>=0&&e.timerWatchNext<=e.endTime-e.startTime&&(t=setInterval((function(){e.timerWatchNext>e.endTime-e.startTime&&(clearInterval(t),e.uiEngine.removeWatchNow()),(e.timerWatchNext<=0||document.hidden&&(e.isMobile()||e.isTablet()||e.isIPad()))&&clearInterval(t);try{e.setCircleDasharray(e.timerWatchNext-1)}catch{}C.innerHTML=Number.parseInt(e.timerWatchNext)+" seconds",T.innerHTML="Playing in ",e.player.paused()&&e.timerWatchNext>0&&e.isOnline&&(!document.hidden&&(e.isMobile()||e.isTablet()||e.isIPad())||!e.isMobile()&&!e.isTablet()&&!e.isIPad())?e.timerWatchNext=e.timerWatchNext-1:e.endTime-e.player.currentTime()<e.timerWatchNext&&(e.timerWatchNext=e.endTime-e.player.currentTime()),e.timerWatchNext<=0&&e.isOnline&&!document.hidden&&(clearInterval(t),e.player.trigger({type:"playnext",bubbles:!1}))}),1e3)),e.isMobile()?window.matchMedia("(orientation: portrait)").matches&&e.isMobile()?(n.classList.add("mobileNextEpiPopup"),m.appendChild(_),m.appendChild(E),_.appendChild(y),_.appendChild(b),n.appendChild(d),n.appendChild(p),n.appendChild(m),n.appendChild(f),n.appendChild(g)):window.matchMedia("(orientation: landscape)").matches&&e.isMobile()&&(n.classList.add("landscapeNextEpiPopup"),_.appendChild(y),_.appendChild(b),c.appendChild(p),c.appendChild(f),c.appendChild(g),c.appendChild(E),o.appendChild(_),i.appendChild(o),i.appendChild(c),n.appendChild(d),n.appendChild(i)):(n.classList.add("desktopNextEpiPopup"),_.appendChild(y),_.appendChild(b),m.appendChild(_),m.appendChild(E),c.appendChild(p),c.appendChild(f),c.appendChild(g),r.appendChild(o),r.appendChild(d),n.appendChild(r),n.appendChild(c),n.appendChild(m)),E.appendChild(T),E.appendChild(C),e.el().appendChild(n),d.addEventListener("touchstart",(function(n){e.player.trigger({type:"closeWatchNext",bubbles:!1}),(e.isIPad()||e.isTablet())&&e.player.trigger({type:"recomendation",bubbles:!1}),e.uiEngine.removeNextEpisode(),e.isMobile()&&(e.player.paused()||e.uiEngine.showPauseIcon()),clearInterval(t)}))},calculateTimeFraction:function(t){var n=e.endTime-e.startTime;const i=(n-t)/n;return i-1/n*(1-i)},setCircleDasharray:function(t){try{const n=`${(283*e.calculateTimeFraction(t)).toFixed(1)} 283`;document.getElementById("base-timer-path-remaining")&&document.getElementById("base-timer-path-remaining").setAttribute("stroke-dasharray",n)}catch(e){console.warn(e)}},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_nextEpisode"}),this.elementRef},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.nextEpisode,this.nextEpisode=null)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),videojs.registerComponent("LogixNextEpisode",this.nextEpisode)}function logituitAllEpisode(){var e;this.allEpisode=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o,a){videojs.getComponent("ClickableComponent").apply(this,arguments),this.applyStyles(n.styleCSS),this.uiEngine=o,this.player=t,this.endTime=a,this.baseOptions=r,e=this,this.headerAllEpisode()},headerAllEpisode:function(){let t=document.createElement("div");t.setAttribute("class","containerAllEpisode"),t.style.overflow="auto";let n=document.createElement("div");n.setAttribute("class","topBarContainer");let i=document.createElement("label");i.setAttribute("class","allEpisodeHeader"),i.innerHTML="All Episodes";let r=document.createElement("img");r.src=e.options_.icons.close,r.setAttribute("class","iconCloseAllEpisode"),r.addEventListener("click",(function(t){e.uiEngine.removeAllEpisode()})),r.addEventListener("touchstart",(function(t){e.uiEngine.removeAllEpisode()})),n.appendChild(i),n.appendChild(r),t.appendChild(n);let o=document.createElement("ul");o.setAttribute("class","episodMenubar");var a=e.baseOptions.allEpisodeData[0],s=0;let l,u=!1;e.baseOptions.allEpisodeData.forEach((function(n,i){let r=document.createElement("li");0==i&&(l=r);if(r.setAttribute("class","menuOption"),r.setAttribute("id",i),r.innerHTML=n.asset_title,n.contents.forEach((function(t){if(e.baseOptions.contentId==t.content_id){u=!0,s=parseInt(r.getAttribute("id")),a=t,4==s&&window.scrollBy(100,0);var n=document.querySelectorAll(".activeMenuOption");n&&n[0]&&n[0].classList.remove("activeMenuOption"),e.uiEngine.setAllEpisodeSeason(s),r.classList.add("activeMenuOption")}})),i==e.baseOptions.allEpisodeData.length-1&&!u){var d=document.querySelectorAll(".activeMenuOption");d&&d[0]&&d[0].classList.remove("activeMenuOption"),e.uiEngine.setAllEpisodeSeason(0),l&&l.classList.add("activeMenuOption")}o.appendChild(r),t.appendChild(o);let c,p,h=!1;o.addEventListener("mousedown",(e=>{h=!0,c=e.pageX-o.offsetLeft,p=o.scrollLeft})),o.addEventListener("mouseleave",(()=>{h=!1})),o.addEventListener("mouseup",(()=>{h=!1})),o.addEventListener("mousemove",(e=>{if(!h)return;e.preventDefault();const t=3*(e.pageX-o.offsetLeft-c);o.scrollLeft=p-t})),o.addEventListener("touchstart",(e=>{h=!0,c=e.pageX-o.offsetLeft,p=o.scrollLeft})),o.addEventListener("touchend",(()=>{h=!1})),o.addEventListener("touchmove",(e=>{if(!h)return;e.preventDefault();const t=3*(e.pageX-o.offsetLeft-c);o.scrollLeft=p-t})),r.addEventListener("click",(function(n){s=parseInt(r.getAttribute("id")),a=e.baseOptions.allEpisodeData[s],4==s&&window.scrollBy(100,0);var i=document.querySelectorAll(".activeMenuOption");i&&i[0]&&i[0].classList.remove("activeMenuOption"),e.uiEngine.setAllEpisodeSeason(s),r.classList.add("activeMenuOption"),e.setEpisodes(t,s,a)})),r.addEventListener("touchstart",(function(n){s=parseInt(r.getAttribute("id")),a=e.baseOptions.allEpisodeData[s],4==s&&window.scrollBy(100,0);var i=document.querySelectorAll(".activeMenuOption");i&&i[0]&&i[0].classList.remove("activeMenuOption"),e.uiEngine.setAllEpisodeSeason(s),r.classList.add("activeMenuOption"),e.setEpisodes(t,s,a)}))})),e.setEpisodes(t,s,a),e.el().appendChild(t)},setEpisodes:function(t,n,i){var r=document.getElementById("outerEpisodeContainer");r&&t.removeChild(r);var o=document.createElement("div");o.setAttribute("class","outerEpisodeContainer"),o.setAttribute("id","outerEpisodeContainer"),e.baseOptions.allEpisodeData[n].contents.forEach((function(i,r){let a=document.createElement("Label");a.setAttribute("class","containerEpisode"),a.setAttribute("episodeId",r),e.uiEngine.getAllEpisode()==r&&a.classList.add("activeEpisode");let s=document.createElement("div");s.setAttribute("class","imageContainer");let l,u=document.createElement("img");if(u.setAttribute("class","episodesImage"),i&&i.images){let e,t=i.images[0].cdn_url,n=i.images[0].variants.indexOf("xs");e=n>=0?"_"+i.images[0].variants[n]:"";let r=t.replace(".jpg",e+".jpg").replace(".png",e+".png").replace(".svg",e+".svg").replace(".jpeg",e+".jpeg");u.src=r,s.appendChild(u)}if(e.baseOptions.contentId!=i.content_id&&(l=document.createElement("img"),l.setAttribute("class","playImage"),l.src=e.options_.icons.play,s.appendChild(l),l.addEventListener("click",(function(t){e.uiEngine.removeAllEpisode(),e.sendEvent(i.content_id,e.baseOptions.allEpisodeData[n].asset_id)})),l.addEventListener("touchstart",(function(t){e.uiEngine.removeAllEpisode(),e.sendEvent(i.content_id,e.baseOptions.allEpisodeData[n].asset_id)}))),i.duration)var d=i.duration/60,c=Math.round(d);let p=document.createElement("div");p.setAttribute("class","episodeWrapper");let h=document.createElement("div");h.setAttribute("class","episodeDetailWrapper");let f=document.createElement("label");f.setAttribute("class","episodeNoLabel"),f.innerHTML=i.content_title+" . "+c+" min";let g=document.createElement("label");g.setAttribute("class","contentSubTitleLabel"),i.content_sub_title&&(g.innerHTML=i.content_sub_title);let m=document.createElement("label");m.setAttribute("class","descriptionLabel"),m.innerHTML=i.description;let y=document.createElement("div");y.setAttribute("class","nowWatching"),y.innerHTML="NOW WATCHING";let v=document.createElement("div");v.setAttribute("class","progressBar");let _=document.createElement("span");_.setAttribute("class","myProgress");let b=Math.round(e.player.currentTime()/e.player.duration()*100);_.style.width=b+"%",v.appendChild(_),s.appendChild(v),h.appendChild(f),h.appendChild(g),h.appendChild(y),p.appendChild(s),p.appendChild(h),a.appendChild(p),a.appendChild(m),o.appendChild(a),t.appendChild(o),e.baseOptions.contentId==i.content_id&&(y.style.visibility="visible",v.style.visibility="visible"),a.addEventListener("click",(function(t){i.content_id,i.asset_id;let n=a.getAttribute("episodeId");var r=document.querySelectorAll(".activeEpisode");r&&r[0]&&r[0].classList.remove("activeEpisode"),e.uiEngine.setAllEpisode(n),a.classList.add("activeEpisode")}))})),e.el().appendChild(t)},sendEvent:function(e,t){var n=new CustomEvent("onEpisodeSelected",{detail:{nextContentId:e,nextAssetId:t}});this.uiEngine.reportEventToUiEngine(n)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_allEpisode"}),this.elementRef},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.allEpisode,this.allEpisode=null)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),videojs.registerComponent("allEpisode",this.allEpisode)}function logituitAllEpisodeIcon(){var e;this.allEpisodeIcon=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(t,n,i,r,o,a){videojs.getComponent("ClickableComponent").apply(this,arguments),this.applyStyles(n.styleCSS),this.uiEngine=o,this.player=t,this.endTime=a,this.baseOptions=r,e=this,this.el().addEventListener("click",(function(t){null!=e.baseOptions.allEpisodeData&&null!=e.baseOptions.allEpisodeData&&"object"==typeof e.baseOptions.allEpisodeData&&e.baseOptions.allEpisodeData.length>0?(e.uiEngine.createAllEpisode(),e.sendEvent()):null!=e.baseOptions.allEpisodeData&&null!=e.baseOptions.allEpisodeData&&"boolean"==typeof e.baseOptions.allEpisodeData&&1==e.baseOptions.allEpisodeData&&e.sendEvent()})),this.el().addEventListener("touchstart",(function(t){null!=e.baseOptions.allEpisodeData&&null!=e.baseOptions.allEpisodeData&&"object"==typeof e.baseOptions.allEpisodeData&&e.baseOptions.allEpisodeData.length>0?(e.uiEngine.createAllEpisode(),e.sendEvent()):null!=e.baseOptions.allEpisodeData&&null!=e.baseOptions.allEpisodeData&&"boolean"==typeof e.baseOptions.allEpisodeData&&1==e.baseOptions.allEpisodeData&&e.sendEvent()})),this.tooltipDataFun()},sendEvent:function(){var t=new CustomEvent("onAllEpisodeIconClicked",{detail:{}});e.uiEngine.reportEventToUiEngine(t)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_allEpisodeIcon"}),this.elementRef},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.allEpisode,this.allEpisode=null)},tooltipDataFun:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_allEpisodeTooltip"),t.innerHTML="All Episodes",e.el().appendChild(t)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),videojs.registerComponent("allEpisodeIcon",this.allEpisodeIcon)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitFullScreenComponent(){var e;fullScreenEngine=new FullscreenEngine,this.fullScreenObj=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){try{videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.applyClass(n.className),this.makeVideofullScreen(t),this.elementRef,this.player=t,e=this,this.uiEngine=i,this.tooltipDataFun()}catch(e){Logger.error("error: ",e)}},hideIcon:function(){e.el().style.display="none"},tooltipDataFun:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_fullscreenTooltip"),t.innerHTML="Fullscreen",e.el().appendChild(t)},sendEvent:function(t){var n={currentTime:e.player.currentTime()},i=new CustomEvent(t,{detail:n});this.uiEngine.reportEventToUiEngine(i)},iOSDevice:function(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},makeVideofullScreen:function(e){try{var t;t=this.iOSDevice();var n=!1;t&&(n=!0),fullScreenEngine&&fullScreenEngine.InitializePlugin(e,n)}catch(e){Logger.error("Exception : ",e)}},handleClick:function(){this.player.isFullscreen()?(this.player_.exitFullscreen(),e.uiEngine.showFullScreenIcon(),e.player.paused()&&e.player.pause()):(this.player_.requestFullscreen(),e.uiEngine.showExitScreenIcon())},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},applyClass:function(e){this.el().setAttribute("class","logituit_fullscreen")},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.fullScreenObj,this.fullScreenObj=null)}}),videojs.registerComponent("LogixFullscreen",this.fullScreenObj)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitExitScreenComponent(){var e;this.exitScreenObj=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){try{videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.applyClass(n.className),this.elementRef,this.player=t,e=this,this.uiEngine=i,this.tooltipDataFun()}catch(e){Logger.error("error: ",e)}},hideIcon:function(){e.el_.style.display="none"},tooltipDataFun:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_exitScreenTooltip"),t.innerHTML="Exit Fullscreen",e.el().appendChild(t)},sendEvent:function(t){var n={currentTime:e.player.currentTime()},i=new CustomEvent(t,{detail:n});this.uiEngine.reportEventToUiEngine(i)},iOSDevice:function(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},makeVideofullScreen:function(e){try{var t;t=this.iOSDevice();var n=!1;t&&(n=!0),ExitscreenEngine&&ExitscreenEngine.InitializePlugin(e,n)}catch(e){Logger.error("Exception : ",e)}},handleClick:function(){this.player_.exitFullscreen(),e.uiEngine.showFullScreenIcon()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},applyClass:function(e){this.el().setAttribute("class","logituit_exitscreen")},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.fullScreenObj,this.fullScreenObj=null)}}),videojs.registerComponent("LogixExitscreen",this.exitScreenObj)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitTimeDividerComponent(){this.timeDivider=videojs.extend(videojs.getComponent("TimeDivider"),{constructor:function(e,t){videojs.getComponent("TimeDivider").apply(this,arguments),this.applyStyles(t.styleCSS),this.applyClass(t.className),this.forTablet()},applyClass:function(e){this.el().classList.add("logituit_timeDivider")},forTablet:function(){window.matchMedia("(orientation: portrait)").matches&&(this.isIPad()||this.isTablet())?this.el().style.left="90.5%":window.matchMedia("(orientation: landscape)").matches&&(this.isIPad()||this.isTablet())&&(this.el().style.left="calc(93.5% - 28px)")},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){r[e];"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.timeDivider&&(delete this.timeDivider,this.timeDivider=null)}}),videojs.registerComponent("logixTimeDivider",this.timeDivider)}function logituitDivider(){this.divider=videojs.extend(videojs.getComponent("ClickableComponent"),{constructor:function(e,t,n,i,r,o){videojs.getComponent("ClickableComponent").apply(this,arguments),this.applyStyles(t.styleCSS),this.uiEngine=r,this.player=e,this.baseOptions=i,this},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_divider"}),this.elementRef},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.divider,this.divider=null)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}}),videojs.registerComponent("divider",this.divider)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitCurrentTimeComponent(){var e;this.currentTime=videojs.extend(videojs.getComponent("CurrentTimeDisplay"),{constructor:function(t,n){videojs.getComponent("CurrentTimeDisplay").apply(this,arguments),this.player=t,e=this,this.applyStyles(n.styleCSS),this.applyClass(n.className),this.currentTime()},applyClass:function(e){this.el().classList.add("logituit_currentTime")},currentTime:function(){var t=e.player.currentTime(),n=Math.floor(t/60),i=Math.floor(t-60*n),r=n<10?"0"+n:n,o=i<10?"0"+i:i;this.formattedTime_="",this.eventBusEl_.getElementsByClassName("vjs-current-time").innerHTML=this.formattedTime_,this.el().getElementsByClassName("logituit_currentTime").innerHTML=r+":"+o},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},setClass:function(e){this.el().setAttribute("class",e)},releaseResource:function(){this.currentTime&&(delete this.currentTime,this.currentTime=null)}}),videojs.registerComponent("logixCurrentTIme",this.currentTime)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */let subtitlepopup,subtitleAudiopopup;videojs.registerComponent("subtitleAudioChildComponent",subtitleAudioChildComponent);let listenToEvents=!0;function logituitSubTitleComponent(){let e,t;let n;this.subTitle=videojs.extend(videojs.getComponent("Button"),{constructor:function(n,i,r,o,a){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(i.styleCSS),this.updateTextContent(i.text),this.appendChildSub(),this.elementRef,this.uiEngine=a,this.baseOptions=o,e=r,this.logituitMobileAudioPopup=new logituitMobileAudioPopup,subtitleAudiopopup=new this.logituitMobileAudioPopup.subtitleAudioComponent(n,{name:"popup",option:i},r,o,this.uiEngine),this.logituitMobileSubtitlePopup=new logituitMobileSubtitlePopup,subtitlepopup=new this.logituitMobileSubtitlePopup.subtitleComponent(n,{name:"popup",option:i},r,o,this.uiEngine),subtitleAudioTv=new subtitleAudioTVComponent(n,{name:"popup"}),t=this,this.player=n;this.tooltipDataFun(this.player);try{this.elementRef.addEventListener("touchstart",(function(e){var t=document.getElementsByClassName("containerSubAudioParent");"hidden"==t[0].style.visibility?t[0].style.visibility="visible":t[0].style.visibility="hidden"}))}catch(e){Logger.error(e)}},tooltipDataFun:function(e){try{n=document.createElement("div"),n.setAttribute("class","containerSubAudioParent");let e=document.createElement("div");e.setAttribute("class","containerSubAudio");let s=document.createElement("div");s.setAttribute("class","containerAudio");let l=document.createElement("label");l.setAttribute("class","audioLabel"),l.innerHTML="Audio",s.appendChild(l);let u=document.createElement("label");u.setAttribute("class","dividerLineSubAudio");let d=t.uiEngine.getSubtitleLanguage()||localStorage.getItem("defaultTextTrack");(isIPad()||isTablet())&&e.addEventListener("touchstart",(function(e){e.stopPropagation(),e.preventDefault()}));let c=t.player.audioTracks();var i=t.uiEngine.getAudioLanguage()||localStorage.getItem("defaultAudioLanguage");let p=!1,h=!1,f="";if(c.tracks_.forEach((function(e,t){c.tracks_[t].label.toLowerCase()=="Hindi".toLowerCase()&&(h=!0),"main"==c.tracks_[t].kind.toLowerCase()&&(f=c.tracks_[t].label),(i&&c.tracks_[t].label==i||c.tracks_[t].label==localStorage.getItem("defaultAudioLanguage"))&&(p=!0)})),!p)try{i=f||c.tracks_[0].label}catch(e){}localStorage.getItem("defaultAudioLanguage")||(localStorage.setItem("defaultAudioLanguage",i),i=t.uiEngine.getAudioLanguage()||localStorage.getItem("defaultAudioLanguage")),c=sortTracks(c),c.tracks_.forEach((function(e,n){if(1==c.length&&e.label,""!=e.label||1==c.length&&""==e.label){if(1==c.length&&""==e.label)var r="default";else r=e.label;var o=e.id;let a=document.createElement("Label");a.setAttribute("class","quality-label-container");let l=document.createElement("Div"),u=document.createElement("input");u.setAttribute("type","radio"),u.setAttribute("name","AudioPopups"),u.setAttribute("class","inputCheck"),u.setAttribute("value",o),u.setAttribute("title",r);let d=document.createElement("Span");d.setAttribute("for",r),d.setAttribute("class","subPopupLabel"),d.setAttribute("id","label-"+r),r&&sessionStorage.setItem("audioKey",r),d.innerHTML=r,-1!=navigator.userAgent.indexOf("Firefox")&&(d.style.marginTop="5px"),(isSafari()||isIPad())&&(a.style.whiteSpace="pre");let h=document.createElement("span");h.setAttribute("class","checkmarkAudio"),h.setAttribute("type","radio"),-1!=navigator.userAgent.indexOf("Firefox")&&(h.style.marginTop="5px");let f=document.createElement("br"),g=document.createElement("span");g.innerHTML="",a.appendChild(u),a.appendChild(d),a.appendChild(f),a.appendChild(h),a.appendChild(g),a.appendChild(l),s.appendChild(a),i&&c.tracks_[n].label==i?(p=!0,c.tracks_[n].enabled=!0,d.classList.add("audioActiveColor"),u.setAttribute("checked","")):1==c.length&&""==e.label&&(d.classList.add("audioActiveColor"),u.setAttribute("checked","")),u.addEventListener("change",(function(e){u.getAttribute("value");let n=u.getAttribute("title"),i="label-"+n,r=document.getElementById(i),o=sortTracks(t.player.audioTracks());o.tracks_.forEach((function(e,t){if(1==o.tracks_[t].enabled){o.tracks_[t].enabled=!1;var n=document.querySelectorAll(".audioActiveColor");n&&n[0]&&n[0].classList.remove("audioActiveColor")}}));let a=t.player.currentTime();t.uiEngine.setAudioLanguage(n),o.tracks_.forEach((function(e,i){n.toLowerCase()==o.tracks_[i].label.toLowerCase()&&(o.tracks_[i].enabled=!0,r.classList.add("audioActiveColor"),o.tracks_[i].currentPlayerTime=t.player.currentTime(),t.player.currentTime(a))})),setTimeout((()=>{let e=t.player.textTracks(),n=t.uiEngine.getSubtitleLanguage()||localStorage.getItem("defaultTextTrack");e.tracks_.forEach((function(t,i){e.tracks_[i].label==n?e.tracks_[i].mode="showing":e.tracks_[i].mode="disabled"}))}),1e3)})),a.addEventListener("touchstart",(function(e){u.getAttribute("value");let n=u.getAttribute("title"),i="label-"+n,r=document.getElementById(i),o=sortTracks(t.player.audioTracks());o.tracks_.forEach((function(e,t){if(1==o.tracks_[t].enabled){o.tracks_[t].enabled=!1;var n=document.querySelectorAll(".audioActiveColor"),i=document.querySelectorAll(".inputCheck:checked");i&&i[0]&&i[0].removeAttribute("checked"),n&&n[0]&&n[0].classList.remove("audioActiveColor")}}));let a=t.player.currentTime();t.uiEngine.setAudioLanguage(n),o.tracks_.forEach((function(e,i){n.toLowerCase()==o.tracks_[i].label.toLowerCase()&&(o.tracks_[i].enabled=!0,u.setAttribute("checked",""),r.classList.add("audioActiveColor"),o.tracks_[i].currentPlayerTime=t.player.currentTime(),t.player.currentTime(a))})),setTimeout((()=>{let e=t.player.textTracks(),n=t.uiEngine.getSubtitleLanguage()||localStorage.getItem("defaultTextTrack");e.tracks_.forEach((function(t,i){e.tracks_[i].label==n?e.tracks_[i].mode="showing":e.tracks_[i].mode="disabled"}))}),1e3)}))}}));let g=document.createElement("div");g.setAttribute("class","containerSub");let m=document.createElement("label");m.setAttribute("class","SubtitleLabel"),m.innerHTML="Subtitles",g.appendChild(m);let y=t.player.textTracks(),v=[...y.tracks_],_=-1;for(let e=0;e<y.tracks_.length;e++)(y.tracks_[e].label.toLowerCase().includes("off")||y.tracks_[e].language.toLowerCase().includes("off"))&&(_=e);v=[...y.tracks_],d=t.uiEngine.getSubtitleLanguage();let b=!1;v.forEach((e=>{t.uiEngine.getSubtitleLanguage()!=e.label&&t.uiEngine.getSubtitleLanguage()!=e.language||(b=!0)})),null!=d&&b||(d="Off"),localStorage.setItem("defaultTextTrack",d);var r=[],o=[],a=[];t.baseOptions.subtitles;!function(e){if(void 0!==e&&e.track&&"Off"!==e.track.label)return;console.count("count");let n=t.player.textTracks(),i=[...n.tracks_];i=[...n.tracks_],i.forEach((function(e){if(""!=e.label)if(a.length)if(0==a.filter((function(t){let n=t.language,i=e.language;return t.language.includes("external")&&(n=t.language.substring(0,t.language.indexOf("_external"))),e.language.includes("external")&&(i=e.language.substring(0,e.language.indexOf("_external"))),n==i})).length)a.push(e);else{let t=-1;a.forEach((function(n,i){let r=n.language,o=e.language;n.language.includes("external")&&(r=n.language.substring(0,n.language.indexOf("_external"))),e.language.includes("external")&&(o=e.language.substring(0,e.language.indexOf("_external"))),r==o&&n.id.includes("external")&&(t=i)})),t>=0&&(a.splice(t,1),a.push(e))}else a.push(e)})),(a=sortTextTracks(a)).push({kind:"subtitles",label:"Off",language:"Off",id:"1",src:""}),a.forEach((function(e,n){if(""!=e.label){e.label==d?e.mode="showing":e.mode="disabled";var i=r.includes(e.language);i||r.push(e.language);var a=o.includes(e.label);if(a||o.push(e.label),!(""==r||""==o||a||i||"subtitles"!=e.kind&&"captions"!=e.kind)){var s=o[n],l=r[n],u=d==e.label||d==e.language;let i=document.createElement("Label");i.setAttribute("class","quality-label-container");let a=document.createElement("Div"),c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("class","inputCheckSub"),c.setAttribute("name","SubtitlePopup"),c.setAttribute("value",l),c.setAttribute("title",s);let p=document.createElement("Span");p.setAttribute("for",s),p.setAttribute("class","popupSubLabel"),s&&sessionStorage.setItem("audioKey",s),-1!=navigator.userAgent.indexOf("Firefox")&&(p.style.marginTop="5px"),p.innerHTML=s,p.setAttribute("id","subtitle-"+s);let h=document.createElement("br"),f=document.createElement("span");f.innerHTML="",u&&(p.classList.add("activeColor"),c.setAttribute("checked",""));let m=document.createElement("span");m.setAttribute("class","checkmarkAudio"),-1!=navigator.userAgent.indexOf("Firefox")&&(m.style.marginTop="5px"),i.appendChild(c),i.appendChild(p),i.appendChild(h),i.appendChild(m),i.appendChild(f),i.appendChild(a),g.appendChild(i),i.addEventListener("touchstart",(function(e){var n=c.getAttribute("title");let i=t.player.textTracks(),r=c.getAttribute("value"),o="subtitle-"+n;document.getElementById(o);t.sendEventSubtitle(r);var a=document.querySelector(".popupSubLabel.activeColor"),s=document.querySelector(".inputCheckSub:checked");a&&(a.classList.remove("activeColor"),s.removeAttribute("checked")),document.getElementById("subtitle-"+n).classList.add("activeColor"),c.setAttribute("checked",""),t.uiEngine.setSubtitleLanguage(n),t.sendEventSubtitle(r),i.tracks_.forEach((function(e,t){i.tracks_[t].label.toLowerCase()==n.toLowerCase()?i.tracks_[t].mode="showing":i.tracks_[t].mode="disabled"}))})),c.addEventListener("change",(function(e){var n=c.getAttribute("title");let i=t.player.textTracks(),r=c.getAttribute("value"),o="subtitle-"+n;document.getElementById(o);var a=document.querySelector(".popupSubLabel.activeColor");a&&a.classList.remove("activeColor"),document.getElementById("subtitle-"+n).classList.add("activeColor"),t.uiEngine.setSubtitleLanguage(n),t.sendEventSubtitle(r),i.tracks_.forEach((function(e,t){i.tracks_[t].label.toLowerCase()==n.toLowerCase()?i.tracks_[t].mode="showing":i.tracks_[t].mode="disabled"}))}))}}}))}(),e.appendChild(s),e.appendChild(u),e.appendChild(g),n.appendChild(e),t.el().appendChild(n)}catch(e){Logger.error("exception in sub-title: ",e)}},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_subtitleButton"}),this.elementRef},sendEventSubtitle:function(e){var n=new CustomEvent("subtitleLanguageChanged",{detail:{subtitleSelected:e}});t.uiEngine.reportEventToUiEngine(n)},appendChildSub:function(){let e=document.createElement("span");e.innerHTML="Audio&Subtitles",e.style.fontSize="26px",e.style.marginLeft="55px"},sendEvent:function(){var e=new CustomEvent("subtitlePopupClicked",{detail:{}});this.uiEngine.reportEventToUiEngine(e)},handleClick:function(){this.haschild(e,"popup")?e.removeChild(subtitleAudioTv):(navigator.userAgent.indexOf("Tizen")>-1||navigator.userAgent.indexOf("web0S")>-1)&&e.addChild(subtitleAudioTv),this.sendEvent()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},haschild:function(e,t){return 0!=e.children_.filter((function(e){if(e.name_)return e.name_==t})).length},applyClass:function(e){this.el().setAttribute("class",e)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.subTitle,this.subTitle=null)}}),sortTracks=function(e){try{for(let t=0;t<e.tracks_.length;t++)for(let n=0;n<t;n++)if(e.tracks_[t].label<e.tracks_[n].label){let i=e.tracks_[t];e.tracks_[t]=e.tracks_[n],e.tracks_[n]=i}}catch(e){}return e},sortTextTracks=function(e){try{for(let t=0;t<e.length;t++)for(let n=0;n<t;n++)if(e[t].label<e[n].label){let i=e[t];e[t]=e[n],e[n]=i}}catch(e){}return e},isIPad=function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet=function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},isSafari=function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},videojs.registerComponent("LogixSubtitle",this.subTitle)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitForwardButtonComponent(){var e,t,n=0;this.forwardButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.opt=n,this.elementRef,this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.uiEngine=r,this.player=t,e=this,this.forwardFun()},showForwardAnimation:function(){var e=document.getElementsByClassName("logituit_forward_animation")[0];e.classList.add("visible");var t=document.getElementsByClassName("animationForwardIcon")[0];t.classList.add("visible"),setTimeout((function(){e.classList.remove("visible"),t.classList.remove("visible")}),1e3)},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},forwardFun:function(){let t=document.createElement("div");t.setAttribute("class","logituit_forward_animation"),e.player_.el().appendChild(t);let n=document.createElement("img");n.setAttribute("class","animationForwardIcon");var i=e.options_.icons.forward;n.setAttribute("src",i),e.player_.el().appendChild(n);let r=!e.uiEngine.isLandscape()&&e.uiEngine.isMobile(),o=e.uiEngine.isLandscape()&&e.uiEngine.isMobile();r&&window.screen.width<=480&&(this.forwardIcon(),this.innerText(),e.el().addEventListener("click",(function(e){setTimeout((function(){var e=document.getElementsByClassName("logituit_forwardIcon")[0],t=document.getElementsByClassName("logituit_forwardText")[0];e.classList.remove("logituit_forwardIcon_animation"),t.classList.remove("logituit_forwardText_animation")}),0)})),e.el().addEventListener("touchstart",(function(e){clearTimeout(i);var t=document.getElementsByClassName("logituit_forwardIcon")[0],n=document.getElementsByClassName("logituit_forwardText")[0];t.classList.add("logituit_forwardIcon_animation"),n.classList.add("logituit_forwardText_animation");var i=setTimeout((function(){t.classList.remove("logituit_forwardIcon_animation"),n.classList.remove("logituit_forwardText_animation")}),1e3)}))),o&&window.screen.width<=920&&e.isMobile()&&(this.forwardIcon(),this.innerText(),e.el().addEventListener("click",(function(e){var t=document.getElementsByClassName("logituit_forwardIcon")[0],n=document.getElementsByClassName("logituit_forwardText")[0];setTimeout((function(){t.classList.remove("logituit_forwardIcon_animation"),n.classList.remove("logituit_forwardText_animation")}),0)})),e.el().addEventListener("touchstart",(function(e){clearTimeout(i);var t=document.getElementsByClassName("logituit_forwardIcon")[0],n=document.getElementsByClassName("logituit_forwardText")[0];t.classList.add("logituit_forwardIcon_animation"),n.classList.add("logituit_forwardText_animation");var i=setTimeout((function(){t.classList.remove("logituit_forwardIcon_animation"),n.classList.remove("logituit_forwardText_animation")}),1e3)})))},forwardIcon:function(){let t=document.createElement("div");t.setAttribute("class","logituit_forwardIcon"),t.style.backgroundImage="url("+e.opt.icons.forward+")",e.el().appendChild(t)},innerText:function(){let t=document.createElement("p");t.setAttribute("class","logituit_forwardText"),t.innerHTML="10",e.el().appendChild(t)},tooltipDataFun:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_forwardTooltip"),t.innerHTML="+10 s",e.el().appendChild(t)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_forward"}),this.elementRef},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},sendEvent:function(t){var n={currentTime:e.player.currentTime(),seekTime:e.player.currentTime()+t},i=new CustomEvent("onForwardButtonClick",{detail:n});this.uiEngine.reportEventToUiEngine&&this.uiEngine.reportEventToUiEngine(i)},handleClick:function(){let t=10;this.opt.forwardTime&&(t=this.opt.forwardTime),this.isMobile()&&e.timeAnimation(),e.player.currentTime(e.player.currentTime()+t),this.sendEvent(t)},timeAnimation:function(){var e=document.getElementsByClassName("logituit_forwardIcon")[0],i=document.getElementsByClassName("logituit_forwardText")[0];n+=10,document.getElementsByClassName("logituit_forwardText")[0].innerHTML="+"+n,e.classList.add("logituit_forwardIcon_animation"),i.classList.add("logituit_forwardText_animation"),clearTimeout(t),t=setTimeout((()=>{e.classList.remove("logituit_forwardIcon_animation"),i.classList.remove("logituit_forwardText_animation"),n=0,document.getElementsByClassName("logituit_forwardText")[0].innerHTML=10}),1e3)},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},applyClass:function(e){this.el().setAttribute("class",e)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.forwardButton,this.forwardButton=null)}}),videojs.registerComponent("ForwardBtn",this.forwardButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */
function logituitMiniPlayerComponent(){var e;this.miniPlayer=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.appendChildSubPip(),this.elementRef,this.player=t,this.uiEngine=i,this.baseOptions=r,e=this,this.tooltipDataFun()},offLine:function(t){e.uiEngine.getMiniplayerState()&&(e.player.play()&&e.player.pause(),e.uiEngine.showMiniplayerNoInternetError())},tooltipDataFun:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_miniPlayerTooltip"),t.innerHTML="Mini-player",e.el().appendChild(t)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_miniPlayer"}),this.elementRef},sendEvent:function(){var t={afterSeek:e.player.currentTime()},n=new CustomEvent("onMiniPlayerClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){e.showMiniplayer(),this.sendEvent()},showMiniplayer(){var t=document.getElementById(e.baseOptions.videoId),n=document.getElementById(e.baseOptions.videoId+"_html5_api");e.uiEngine.getMiniplayerState()||(e.player.isFullscreen()&&e.player.exitFullscreen(),e.uiEngine.setMiniplayerState(!0),window.document.activeElement.blur(),e.uiEngine.addkeyboardcontroldisableremove(),t.classList.remove("vjs-16-9"),t.classList.remove("vjs-fluid"),t.classList.remove("desktopMainVideoContainer"),e.player.textTracks_.tracks_.forEach((function(t,n){"showing"==e.player.textTracks_.tracks_[n].mode&&(e.player.textTracks_.tracks_[n].mode="disabled")})),t.classList.add("logituit_miniplayer_container"),n.classList.add("logituit_miniplayer_container_video"),t.style.width="427px",t.style.height="240px",t.style.minHeight="unset",t.style.padding="0",t.style.position="fixed",t.style.bottom="3.2%",t.style.right="2%",t.style.zIndex="1",n.style.borderRadius="8px",t.style.borderRadius="8px",window.addEventListener("offline",this.offLine,isConnected=!1),e.uiEngine.releaseResourceFromEventManager())},showMiniPlayerAtEndOfPlayback(){var t=document.getElementById(e.baseOptions.videoId),n=document.getElementById(e.baseOptions.videoId+"_html5_api");e.uiEngine.getMiniplayerState()||(e.player.isFullscreen()&&e.player.exitFullscreen(),e.uiEngine.setMiniplayerState(!0),window.document.activeElement.blur(),e.uiEngine.addkeyboardcontroldisableremove(),t.classList.remove("vjs-16-9"),t.classList.remove("vjs-fluid"),t.classList.remove("desktopMainVideoContainer"),e.player.textTracks_.tracks_.forEach((function(t,n){"showing"==e.player.textTracks_.tracks_[n].mode&&(e.player.textTracks_.tracks_[n].mode="disabled")})),t.classList.add("logituit_miniplayer_container"),n.classList.add("logituit_miniplayer_container_video"),t.style.width="427px",t.style.height="240px",t.style.minHeight="unset",t.style.padding="0",t.style.position="fixed",t.style.bottom="3.2%",t.style.right="2%",t.style.zIndex="1",n.style.borderRadius="8px",t.style.borderRadius="8px",e.uiEngine.releaseResourceFromMiniplayerEndOfPlayback())},appendChildSubPip:function(){let e=document.createElement("div");e.setAttribute("id","PiP"),this.el().appendChild(e)},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},applyClass:function(e){this.el().setAttribute("class",e)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.miniPlayer,this.miniPlayer=null)}}),videojs.registerComponent("LogixMiniPlayer",this.miniPlayer)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMiniplayerCloseComponent(){var e;this.closeButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.uiEngine=i,this.baseOptions=r,this.player=t,e=this,this.applyStyles(n.styleCSS)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_miniplayer_close"}),this.elementRef},handleClick:function(){e.uiEngine.setMiniplayerState(!1),e.player.pause(),e.player.trigger({type:"close",bubbles:!1})},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.closeButton&&(delete this.closeButton,this.closeButton=null)}}),videojs.registerComponent("logicMiniplayerCloseButton",this.closeButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMiniplayerEpisodeTitleComponent(){this.miniplayerEpisodeTitle=videojs.extend(videojs.getComponent("Component"),{constructor:function(e,t,n,i,r){videojs.getComponent("Component").apply(this,arguments),this.applyStyles(t.styleCSS),this.updateTextContent(i.episodeTitle),this.elementRef,r&&(this.el().style.bottom="10%",this.el().classList.remove("logituit_miniplayer_episode_title"),this.el().classList.add("logituit_miniplayer_episode_title_recommendation"))},createEl:function(e){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_miniplayer_episode_title"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.miniplayerEpisodeTitle,this.miniplayerEpisodeTitle=null)}}),videojs.registerComponent("miniplayerEpisodeTitle",this.miniplayerEpisodeTitle)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMiniplayerExpandComponent(){var e;this.expandButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.uiEngine=i,this.baseOptions=r,this.player=t,e=this,this.applyStyles(n.styleCSS)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_miniplayer_expand"}),this.elementRef},handleClick:function(){var t=document.getElementById(e.baseOptions.videoId),n=document.getElementById(e.baseOptions.videoId+"_html5_api");e.uiEngine.getMiniplayerState()&&(e.uiEngine.setMiniplayerState(!1),e.uiEngine.addkeyboardcontroldisable(),t.classList.add("vjs-fluid"),t.classList.add("desktopMainVideoContainer"),t.classList.remove("logituit_miniplayer_container"),n.classList.remove("logituit_miniplayer_container_video"),t.style.width="100%",t.style.height="0",t.style.display="block",t.style.minHeight="100vh",t.style.removeProperty("position"),t.style.removeProperty("padding"),t.style.removeProperty("bottom"),t.style.removeProperty("right"),t.style.removeProperty("border-radius"),n.style.removeProperty("border-radius")),e.uiEngine.initializeResources(),e.player.currentTime(e.player.currentTime()),"function"==typeof e.player.vttThumbnails.initializeThumbnailsFunc&&e.player.vttThumbnails.initializeThumbnailsFunc(),window.navigator.onLine||e.uiEngine.showErrorMsg(),setTimeout((()=>{navigator.userAgent,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?e.player.currentTime(e.player.currentTime()+1e-4):e.player.currentTime(e.player.currentTime())}),100)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.expandButton&&(delete this.expandButton,this.expandButton=null)}}),videojs.registerComponent("logicMiniplayerExpandButton",this.expandButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMiniplayerPlayComponent(){var e;this.playButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.uiEngine=i,this.baseOptions=r,this.elementRef,this.player=t,e=this,this.applyStyles(n.styleCSS)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_miniplayer_play"}),this.elementRef},handleClick:function(){e.player.paused()?(e.el().style.backgroundImage="url("+e.options_.miniplayerPlayPause.miniplayerPlay+")",e.baseOptions.isLive&&e.player.liveTracker.seekToLiveEdge(),e.player.play()):(e.el().style.backgroundImage="url("+e.options_.miniplayerPlayPause.miniplayerPause+")",e.player.pause()),window.document.activeElement.blur()},online:function(t){e.player.paused()&&(e.player.play(),e.el().style.backgroundImage="url("+e.options_.miniplayerPlayPause.miniplayerPlay+")")},applyStyles:function(t){var n=this.el();for(key in t){let e=t[key],i="",r=e;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),n&&n.setAttribute(key,i)}e.player.paused()?this.el().style.backgroundImage="url("+e.options_.miniplayerPlayPause.miniplayerPause+")":this.el().style.backgroundImage="url("+e.options_.miniplayerPlayPause.miniplayerPlay+")"},releaseResource:function(){this.playButton&&(delete this.playButton,this.playButton=null)}}),videojs.registerComponent("logicMiniplayerPlayButton",this.playButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMiniplayerTitleComponent(){this.miniplayerTitle=videojs.extend(videojs.getComponent("Component"),{constructor:function(e,t,n,i,r){videojs.getComponent("Component").apply(this,arguments),this.applyStyles(t.styleCSS),this.updateTextContent(i.contentTitle),this.elementRef,r&&(this.el().style.bottom="20%",this.el().classList.remove("logituit_miniplayer_title"),this.el().classList.add("logituit_miniplayer_title_recommendation"))},createEl:function(e){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_miniplayer_title"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.miniplayerTitle,this.miniplayerTitle=null)}}),videojs.registerComponent("miniplayerTitle",this.miniplayerTitle)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMiniplayerWatchNowComponent(){this.miniplayerWatchNow=videojs.extend(videojs.getComponent("Component"),{constructor:function(e,t,n,i,r){videojs.getComponent("Component").apply(this,arguments),this.applyStyles(t.styleCSS),this.updateTextContent("YOU WERE WATCHING"),this.elementRef,r&&(this.el().style.bottom="34%")},createEl:function(e){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_miniplayer_watchnow"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.miniplayerWatchNow,this.miniplayerWatchNow=null)}}),videojs.registerComponent("miniplayerWatchNow",this.miniplayerWatchNow)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMiniplayerErrorMessageComponent(){var e;this.miniplayerErrorMessage=videojs.extend(videojs.getComponent("Component"),{constructor:function(t,n,i){videojs.getComponent("Component").apply(this,arguments),this.applyStyles(n.styleCSS),this.elementRef,this.uiEngine=i,this.options=n,e=this,this.ErrorMsgPopup(e.options.retryImage)},createEl:function(e){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_miniplayer_error_msg"}),this.elementRef},ErrorMsgPopup(t){let n=document.createElement("div");n.setAttribute("class","miniplayer_error_msg");let i=document.createElement("div");i.style.height="17%",i.style.width="9%",i.style.left="48%",i.style.top="30%",i.style.position="absolute",i.style.backgroundRepeat="no-repeat",i.style.backgroundImage=t,i.addEventListener("click",(function(t){online=window.navigator.onLine,online&&(e.uiEngine.playPauseButtonState(),e.uiEngine.removeMiniplayerNoInternetError())})),i.addEventListener("touchstart",(function(t){online=window.navigator.onLine,online&&(e.uiEngine.playPauseButtonState(),e.uiEngine.removeMiniplayerNoInternetError())}));let r=document.createElement("p");r.setAttribute("class","miniplayer_error_text"),r.innerHTML="No Internet Connection";let o=document.createElement("p");o.setAttribute("class","miniplayer_error_text_msg"),o.innerHTML="Check your internet connection and try again",n.appendChild(r),n.appendChild(o),n.appendChild(i),e.el().appendChild(n),n.addEventListener("touchstart",(function(e){e.stopPropagation()}))},show(){document.getElementsByClassName("miniplayer_error_msg")[0].classList.add("visible")},hide(){document.getElementsByClassName("miniplayer_error_msg")[0].classList.remove("visible")},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null)}}),videojs.registerComponent("miniplayerError",this.miniplayerErrorMessage)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function loguituRewindButtonComponent(){var e,t,n=0;this.rewindButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(e,n,i){videojs.getComponent("Button").apply(this,arguments),this.opt=n,this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.player=e,t=this,this.uiEngine=i,this.rewindFun()},showRewindAnimation:function(){var e=document.getElementsByClassName("logituit_rewind_animation")[0];e.classList.add("visible");var t=document.getElementsByClassName("animationRewindIcon")[0];t.classList.add("visible"),setTimeout((function(){e.classList.remove("visible"),t.classList.remove("visible")}),1e3)},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},rewindFun:function(){let e=document.createElement("div");e.setAttribute("class","logituit_rewind_animation"),t.player_.el().appendChild(e);let n=document.createElement("img");n.setAttribute("class","animationRewindIcon");var i=t.options_.icons.rewind;n.setAttribute("src",i),t.player_.el().appendChild(n);let r=!t.uiEngine.isLandscape()&&t.uiEngine.isMobile(),o=t.uiEngine.isLandscape()&&t.uiEngine.isMobile();r&&window.screen.width<=480&&(this.forwardIcon(),this.innerText(),t.el().addEventListener("click",(function(e){var t=document.getElementsByClassName("logituit_rewindIcon")[0],n=document.getElementsByClassName("logituit_rewindText")[0];setTimeout((function(){t.classList.remove("logituit_rewindIcon_animation"),n.classList.remove("logituit_rewindText_animation")}),0)})),t.el().addEventListener("touchstart",(function(e){clearTimeout(i);var t=document.getElementsByClassName("logituit_rewindIcon")[0],n=document.getElementsByClassName("logituit_rewindText")[0];t.classList.add("logituit_rewindIcon_animation"),n.classList.add("logituit_rewindText_animation");var i=setTimeout((function(){t.classList.remove("logituit_rewindIcon_animation"),n.classList.remove("logituit_rewindText_animation")}),1e3)}))),o&&window.screen.width<=920&&t.isMobile()&&(this.forwardIcon(),this.innerText(),t.el().addEventListener("click",(function(e){var t=document.getElementsByClassName("logituit_rewindIcon")[0],n=document.getElementsByClassName("logituit_rewindText")[0];setTimeout((function(){t.classList.remove("logituit_rewindIcon_animation"),n.classList.remove("logituit_rewindText_animation")}),0)})),t.el().addEventListener("touchstart",(function(e){clearTimeout(i);var t=document.getElementsByClassName("logituit_rewindIcon")[0],n=document.getElementsByClassName("logituit_rewindText")[0];t.classList.add("logituit_rewindIcon_animation"),n.classList.add("logituit_rewindText_animation");var i=setTimeout((function(){t.classList.remove("logituit_rewindIcon_animation"),n.classList.remove("logituit_rewindText_animation")}),1e3)})))},forwardIcon:function(){let e=document.createElement("div");e.setAttribute("class","logituit_rewindIcon"),e.style.backgroundImage="url("+t.opt.icons.rewind+")",t.el().appendChild(e)},innerText:function(){let e=document.createElement("p");e.setAttribute("class","logituit_rewindText"),e.innerHTML="10",t.el().appendChild(e)},tooltipDataFun:function(){let e=document.createElement("Label");e.setAttribute("class","logituit_rewindTooltip"),e.innerHTML="-10 s",t.el().appendChild(e)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_rewind"}),this.elementRef},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},sendEvent:function(e){var n={currentTime:t.player.currentTime(),seekTime:t.player.currentTime()-e},i=new CustomEvent("onRewindButtonClick",{detail:n});this.uiEngine.reportEventToUiEngine&&this.uiEngine.reportEventToUiEngine(i)},handleClick:function(){let e=10;this.opt.rewindTime&&(e=this.opt.rewindTime),this.isMobile()&&t.timeAnimation(),t.player.currentTime(t.player.currentTime()-10),this.sendEvent(e)},timeAnimation:function(){var t=document.getElementsByClassName("logituit_rewindIcon")[0],i=document.getElementsByClassName("logituit_rewindText")[0];n-=10,document.getElementsByClassName("logituit_rewindText")[0].innerHTML=n,t.classList.add("logituit_rewindIcon_animation"),i.classList.add("logituit_rewindText_animation"),clearTimeout(e),e=setTimeout((()=>{t.classList.remove("logituit_rewindIcon_animation"),i.classList.remove("logituit_rewindText_animation"),n=0,document.getElementsByClassName("logituit_rewindText")[0].innerHTML=10}),1e3)},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.rewindButton,this.rewindButton=null)}}),videojs.registerComponent("RewndBtn",this.rewindButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitChromeCastComponent(){this.logixCC=videojs.extend(videojs.getComponent("Button"),{constructor:function(e,t){videojs.getComponent("Button").apply(this,arguments),this.elementRef,this.applyStyles(t.styleCSS),this.updateTextContent(t.text)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit-chromecast"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="";n.forEach((function(e){for(ele in e)i=i+ele+":"+e[ele]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.logixCC,this.logixCC=null)}}),videojs.registerComponent("LogixCC",this.logixCC)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitLiveButtonTvComponent(){var e;this.duration=new logituitDurationComponent,this.durationObj=this.duration,this.liveButtonTv=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.player=t,this.uiEngine=i,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_livebuttonTV"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onLiveClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){e.player.currentTime(e.player.duration())},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.liveButtonTv,this.liveButtonTv=null)}}),videojs.registerComponent("liveButton",this.liveButtonTv)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitButtongoLiveTvComponent(){var e;this.duration=new logituitDurationComponent,this.durationObj=this.duration,this.GoliveButtonTv=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.player=t,this.uiEngine=i,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_GolivebuttonTV"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onLiveClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){e.player.currentTime(e.player.duration()),this.el().style.display="none",document.getElementsByClassName("logituit_livebuttonTV")[0].style.display="block",e.player.play(),document.getElementsByClassName("play")[0].style.backgroundImage="url(player/assets/player_assets/ic-backbuttontv/icon_pause_broad.png)"},applyStyles:function(e){for(key in element,e){let t=e[key],n="",i=t;Object.keys(i).forEach((function(e){"object"==typeof i[e]?i[e].forEach((function(t){n=n+e+":"+t})):n=n+e+":"+i[e]})),element&&element.setAttribute(key,n)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.GoliveButtonTv,this.GoliveButtonTv=null)}}),videojs.registerComponent("liveButton",this.GoliveButtonTv)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitButtonnextEpisodeTvComponent(){var e;this.duration=new logituitDurationComponent,this.durationObj=this.duration,this.nextEpisodeButtonTv=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.uiEngine=i,this.player=t,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_nextEpisodeButtonTv"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onLiveClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(t){e.player.trigger({type:"playnext",bubbles:!1})},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.nextEpisodeButtonTv,this.nextEpisodeButtonTv=null)}}),videojs.registerComponent("liveButton",this.nextEpisodeButtonTv)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitskipintroTvComponent(){var e;this.duration=new logituitDurationComponent,this.durationObj=this.duration,this.skipintroButtonTv=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.uiEngine=i,this.player=t,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_skipintroButtonTv"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onLiveClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){e.player.currentTime(100),document.getElementsByClassName("logituit_skipintroButtonTv")[0].style.display="none"},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.skipintroButtonTv,this.skipintroButtonTv=null)}}),videojs.registerComponent("liveButton",this.skipintroButtonTv)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitCloseButtonComponent(){var e;this.closeButtonObj=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.player=t,this.uiEngine=i,this.eventManager=r,e=this,this.tooltipDataFun()},tooltipDataFun:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_closeTooltip"),t.innerHTML="Close",e.el().appendChild(t)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_close"}),this.elementRef},sendEvent:function(){var t={closeTime:e.player.currentTime()},n=new CustomEvent("onCloseButtonClick",{detail:t});this.uiEngine?this.uiEngine.reportEventToUiEngine(n):this.eventManager&&this.eventManager.reportEventToEventManager(n)},handleClick:function(){this.sendEvent(),this.player_.trigger({type:"close",bubbles:!1})},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.closeButton,this.closeButton=null)}}),videojs.registerComponent("closeButton",this.closeButtonObj)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMoreButtonsComponent(){let e;var t;this.moreButtons=videojs.extend(videojs.getComponent("Button"),{constructor:function(n,i,r,o,a){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(i.styleCSS),this.updateTextContent(i.text),e=r,this.elementRef,this.uiEngine=a,this.uiOptions=i,this.player=n,t=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_morebutton"}),this.elementRef},sendEvent:function(){var e={currentTime:t.player.currentTime()},n=new CustomEvent("onMoreButtonClick",{detail:e});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){this.haschild(e,"popup")?(t.uiEngine.removeMobileSettingsPopup(),t.uiEngine.showPauseIcon()):(t.uiEngine.addMobileSettingsPopup(t.uiOptions),t.uiEngine.showPlayIcon()),this.sendEvent()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},haschild:function(e,t){return 0!=e.children_.filter((function(e){if(e.name_)return e.name_==t})).length},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.moreButtons,this.moreButtons=null)}}),videojs.registerComponent("LogixMoreButton",this.moreButtons)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitLiveButtonComponent(){var e;this.duration=new logituitDurationComponent,this.durationObj=this.duration,this.liveButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.uiEngine=i,this.player=t,e=this,this.forIpad()},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},forIpad(){var t=document.getElementsByClassName("logituit_seekbar")[0],n=document.getElementsByClassName("logituit_subtitleButton")[0],i=document.getElementsByClassName("logituit_videoQualityButton")[0];t.style.width="87%",(window.matchMedia("(orientation: landscape)").matches&&e.isIPad()||window.matchMedia("(orientation: portrait)").matches&&e.isIPad())&&(this.elementRef.style.left="76vw",this.elementRef.style.bottom="0.1%"),t&&i&&!n?t.style.width="94.5%":t&&!n&&(t.style.width="100%")},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_livebutton"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onLiveClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.liveButton,this.liveButton=null)}}),videojs.registerComponent("liveButton",this.liveButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitButtongoLiveComponent(){var e;this.duration=new logituitDurationComponent,this.durationObj=this.duration,this.GoliveButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.player=t,this.uiEngine=i,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_Golivebutton"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onLiveClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){this.el().style.display="none";var t=document.getElementsByClassName("logituit_forward");t&&t[0]&&(t[0].style.disabled="true",t[0].style.opacity="0.5",t[0].style.display="block"),this.showOrHideControlsByClass("logituit_currentTime","none"),this.showOrHideControlsByClass("logituit_timeDivider","none"),this.showOrHideControlsByClass("logituit_duration","none"),e.player.liveTracker.seekToLiveEdge(),e.player.play(),document.getElementsByClassName("play")[0].style.backgroundImage="url(UIComponent/Component/assets/LogiPlayer_iconsMobile/assets_03/drawable-mdpi/cta_pause.png)"},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},showOrHideControlsByClass:function(e,t){var n=document.getElementsByClassName(e);n&&n[0]&&(n[0].style.display=t)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.GoliveButton,this.GoliveButton=null)}}),videojs.registerComponent("GoliveButton",this.GoliveButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitEpisodeButtonComponent(){var e;this.episodeButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.appendChildSub(),this.elementRef,this.player=t,this.uiEngine=i,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_Episode"}),this.elementRef},deactivatedall:function(){document.getElementsByClassName("logituit_Episode")[0].style.display="none"},appendChildSub:function(){let e=document.createElement("div");e.innerHTML="Next Episode",e.style.left="100%",e.style.paddingLeft="10px",e.style.color="#ffffff",e.style.fontSize="12px",e.style.fontWeight="normal",e.style.fontStretch="normal",e.style.fontStyle="normal",e.style.letterSpacing="normal",e.style.bottom="6px",e.style.position="absolute",e.style.width="100px",e.style.display="flex",this.el().appendChild(e)},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onEpisodeClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){e.player.trigger({type:"playnext",bubbles:!1}),this.sendEvent()},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.episodeButton,this.episodeButton=null)}}),videojs.registerComponent("episodeButton",this.episodeButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitVideoTitleComponent(){this.videoTitle=videojs.extend(videojs.getComponent("Button"),{constructor:function(e,t){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(t.styleCSS),this.updateTextContent(t.text),this.elementRef},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_videotitle"}),this.elementRef},handleClick:function(){},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.videoTitle,this.videoTitle=null)}}),videojs.registerComponent("videotitle",this.videoTitle)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitBackButtonComponent(){var e;this.backButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.applyClass(n.className),this.uiEngine=i,this.player=t,e=this},createEl:function(){return videojs.dom.createEl("button",{className:""})},sendEvent:function(t){var n={currentTime:e.player.currentTime()},i=new CustomEvent("onBackButtonClick",{detail:n});this.uiEngine.reportEventToUiEngine(i)},handleClick:function(){this.sendEvent("onBackButtonClick"),window.history.back()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},applyClass:function(e){this.el().setAttribute("class",e),this.el().setAttribute("class","logituit_backbutton"),this.el().setAttribute("id","backbuttonid")},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.backButton,this.backButton=null)}}),videojs.registerComponent("backbutton",this.backButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitDurationComponent(){this.duration=videojs.extend(videojs.getComponent("DurationDisplay"),{constructor:function(e,t){videojs.getComponent("DurationDisplay").apply(this,arguments),this.applyStyles(t.styleCSS),this.updateContent(),this.applyClass(t.className)},updateTextContent:function(e){this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime())},applyClass:function(e){this.el().classList.add("logituit_duration")},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.duration&&(delete this.duration,this.duration=null)}}),videojs.registerComponent("logixDuration",this.duration)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitTitleBarComponent(){this.titleBar=videojs.extend(videojs.getComponent("Component"),{constructor:function(e,t){videojs.getComponent("Component").apply(this,arguments),this.applyStyles(t.styleCSS),this.updateTextContent(t.text),this.elementRef},createEl:function(e){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_vjs-title-bar"}),this.elementRef},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.titleBar,this.titleBar=null)}}),videojs.registerComponent("TitleBar",this.titleBar)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */ClickableComponent=videojs.getComponent("ClickableComponent");var play,WrapperComponent=videojs.extend(ClickableComponent,{constructor:function(e,t){ClickableComponent.apply(this,arguments)},addChildToWrapper:function(e,t){e.applyStyles(t),this.addChild(e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}}});
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */
function loguituitSkipRecapButtonComponent(){var e;this.skipRecapButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.opt=n,this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.uiEngine=i,this.player=t,this.baseOptions=r,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_skiprecap"}),this.elementRef},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onSkipRecapButtonClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){var t;this.el_.style.display="none",e.baseOptions.cuePointList.forEach((function(e){"recap"==e.title.toString().toLowerCase()&&(t=e)})),e.player.currentTime(e.player.currentTime()+(t.end_time-e.player.currentTime())),this.sendEvent()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.skipRecapButton,this.skipRecapButton=null)}}),videojs.registerComponent("skipRecapButton",this.skipRecapButton)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function loguituitSkipIntroButtonComponent(){var e;this.skipIntroButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r){videojs.getComponent("Button").apply(this,arguments),this.opt=n,this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.uiEngine=i,this.player=t,this.baseOptions=r,e=this},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_skipIntro"}),this.elementRef},sendEvent:function(){var t={currentTime:e.player.currentTime()},n=new CustomEvent("onSkipIntroButtonClick",{detail:t});this.uiEngine.reportEventToUiEngine(n)},handleClick:function(){var t;this.el_.style.display="none",e.baseOptions.cuePointList.forEach((function(e){"intro"==e.title.toString().toLowerCase()&&(t=e)})),e.player.currentTime(e.player.currentTime()+(t.end_time-e.player.currentTime())),this.sendEvent()},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.skipIntroButton,this.skipIntroButton=null)}}),videojs.registerComponent("skipIntroButton",this.skipIntroButton)}function logituitPauseButton(){var e;this.pauseButton=videojs.extend(videojs.getComponent("Button"),{constructor:function(t,n,i,r,o,a){videojs.getComponent("Button").apply(this,arguments),this.uiEngine=o,this.player=t,this.baseOptions=r,this.backgroundImgUrl,this.options=n,e=this,this.applyStyles(n.styleCSS),this.pauseAnimFunc(n.styleCSS)},pauseAnimFunc:function(t){let n=document.createElement("div");n.setAttribute("class","logituit_pause_animation"),e.player.el().appendChild(n);let i=document.createElement("img");for(key in i.setAttribute("class","pause_img"),t){let n=t[key];Object.keys(n).forEach((function(t){"background-image"==t&&(e.backgroundImgUrl=n[t],i.setAttribute("style",t+":"+n[t]))}))}e.player_.el().appendChild(i)},tooltipDataFunc:function(){let t=document.createElement("Label");t.setAttribute("class","logituit_pauseTooltip"),t.innerHTML="Pause",e.el().appendChild(t)},createEl:function(){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_pause"}),this.elementRef},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.allEpisode,this.allEpisode=null)},handleClick:function(){e.baseOptions.isLive&&(e.player.liveTracker.seekToLiveEdge(),e.uiEngine.setLiveFlag(!1)),this.player_.pause(),this.sendEvent("onPauseClick"),e.uiEngine.showPlayIcon()},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},sendEvent:function(t){var n={currentTime:e.player.currentTime()},i=new CustomEvent(t,{detail:n});this.uiEngine.reportEventToUiEngine(i)},showPauseAnimation:function(){var e=document.getElementsByClassName("logituit_pause_animation")[0];e.classList.add("visible");var t=document.getElementsByClassName("pause_img")[0];t.classList.add("visible"),setTimeout((function(){e.classList.remove("visible"),t.classList.remove("visible")}),1e3)},showPauseIcon:function(){this.el().style.backgroundImage=e.backgroundImgUrl}}),videojs.registerComponent("pauseButton",this.pauseButton)}function SubtitleEngine(){this.subtitleConfig=async function(e,t,n=null){this.textElement=new Array,navigator.userAgent.indexOf("Tizen")>-1&&(t=t.reverse());try{t||(t=[]);let r=!1;if(t.forEach((e=>{"Off"==e.name&&(r=!0)})),navigator.userAgent.indexOf("web0S")>-1||navigator.userAgent.indexOf("Tizen")>-1)for(var i=0;i<t.length;i++)this.textElement[i]=document.createElement("track"),this.textElement[i].setAttribute("kind",t[i].kind),this.textElement[i].setAttribute("src",t[i].cdn_url),this.textElement[i].setAttribute("srclang",t[i].code),this.textElement[i].setAttribute("label",t[i].name),e.appendChild(this.textElement[i]);else if(t)for(i=0;i<t.length;i++)("Off"==t[i].name||null!=t[i].cdn_url&&""!=t[i].cdn_url)&&(this.textElement[i]=document.createElement("track"),this.textElement[i].setAttribute("kind",t[i].kind),this.textElement[i].setAttribute("src",t[i].cdn_url),this.textElement[i].setAttribute("language",t[i].code+"_external"),this.textElement[i].setAttribute("srclang",t[i].code),this.textElement[i].setAttribute("label",t[i].name),this.textElement[i].setAttribute("id",t[i].name+"_external"),n?n.addRemoteTextTrack({kind:t[i].kind,src:t[i].cdn_url,language:t[i].code+"_external",srclang:t[i].code,label:t[i].name,id:t[i].name+"_external"},!1):e.appendChild(this.textElement[i]))}catch(e){Logger.error("error in subtitle Engine",e)}return!0}}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitUiEngine(){var e,t,n,i,r=!1,o=document,a=0,s=0;this.volumeIconTimer;var l;this.UIEngine=videojs.extend(videojs.getComponent("Component"),{constructor:function(e,r,o){try{videojs.getComponent("Component").apply(this,arguments),t=this,this.eventManager=o,this.player=e,n=t.isMobile(),i=t.iOSDevice(),l=t.isLandscape(),this.playerState="",this.baseOptions=r,this.uiStyleOption,this.videoPlaying="";let h=t.baseOptions.defaultSubtitle,f=t.player.textTracks_.tracks_,g=!1;if(null==h||""===h||t.getSubtitleLanguage()||f.forEach((function(e){h==e.language&&(g=!0)})),!g&&!t.getSubtitleLanguage()){f.forEach((function(e){e.label}));let e=t.player.textTracks();var a=t.getSubtitleLanguage();e.tracks_.forEach((function(t,n){a==t.label?"off"==f.tracks_[n].language&&(e.tracks_[n].mode="disabled"):e.tracks_[n].mode="disabled"}))}if(t.isMobile()){let e=t.player.textTracks();a=t.getSubtitleLanguage();e.tracks_.forEach((function(t,n){a==t.label?f&&f.tracks_&&"off"==f.tracks_[n].language&&(e.tracks_[n].mode="disabled"):e.tracks_[n].mode="disabled"}))}try{t.isMobile()&&(document.querySelector("html").classList.add("landscape-mobile-dimen"),document.querySelector("body").classList.add("landscape-mobile-dimen"),document.querySelector("#main").classList.add("landscape-mobile-dimen"),document.querySelector("#erosPlayer").classList.add("landscape-mobile-dimen"),document.querySelector(".video-js.vjs-16-9").classList.add("landscape-mobile-dimen"),document.querySelector(".video-js.vjs-16-9").classList.add("landscape-mobile-player-dimen"))}catch(e){}let m=!1,y=sortTracks(t.player.audioTracks());if(t.baseOptions.defaultAudio&&""!=t.baseOptions.defaultAudio&&!t.eventManager.selectedAudioLanguage&&y.tracks_.forEach((function(e){e.language.toLowerCase()==t.baseOptions.defaultAudio.toLowerCase()&&(t.eventManager.selectedAudioLanguage=e.label,m=!0)})),!m&&y.length>0&&(t.eventManager.selectedAudioLanguage=y.tracks_[0].label,y.tracks_.forEach((function(e){1==e.enabled&&(t.eventManager.selectedAudioLanguage=e.label)}))),t.isMobile()){let e=sortTracks(t.player.audioTracks());a=t.getAudioLanguage();var s=!1;let n="";e.tracks_.forEach((function(t,i){"hindi"==e.tracks_[i].label.toLowerCase()&&!0,"main"==e.tracks_[i].kind.toLowerCase()&&(n=e.tracks_[i].label),a&&e.tracks_[i].label==a?(e.tracks_[i].enabled=!0,s=!0):e.tracks_[i].enabled=!1})),s||(n?e.tracks_.forEach((function(t,i){t.label.toLowerCase()==n.toLowerCase()&&(e.tracks_[i].enabled=!0)})):e.tracks_[0].enabled=!0)}var u=document.getElementsByClassName("vjs-tech");t.isMobile()&&u&&u[0]&&(u[0].style.opacity="0.5"),this.defaultVideoQuality=t.eventManager.selectedBitrate,this.Wrapper=this.initializeWrapperLayout({style:{position:"absolute;",top:"0;",height:"100%;",width:"100%;"}},e);let v=!t.isLandscape()&&(t.isMobile()||t.isIPad()||t.isTablet()),_=t.isLandscape()&&(t.isMobile()||t.isIPad()||t.isTablet());if(Logger.debug("------------------\x3e isLandscape: ",_),Logger.debug("------------------\x3e isPortrait: ",v),_&&(t.isIPad()||t.isTablet())||v&&(t.isIPad()||t.isTablet()))if(this.baseOptions.isLive)this.initializeComponent(r.playerControlsLayout.livejson,this.Wrapper,e,r),t.baseOptions.playerControlsLayout.livejson.forEach((function(n){"live_button"==n.control&&(t.liveButtonComponent=new logituitLiveButtonComponent,t.logituitLiveButton=new t.liveButtonComponent.liveButton(e,n),t.Wrapper.addChild(t.logituitLiveButton))})),(d=document.getElementsByClassName("vjs-play-progress"))&&d[1]&&(d[1].style.display="none"),(c=document.getElementsByClassName("vjs-load-progress"))&&c[1]&&(c[1].style.display="none"),(p=document.getElementsByClassName("logituit_seekbar"))&&p[0]&&(p[0].style.backgroundImage="linear-gradient(to right, #0aa1ea, #40c6b6)"),this.uiStyleOption=r.playerControlsLayout.livejson;else this.initializeComponent(r.playerControlsLayout.desktopjson,this.Wrapper,e,r),this.uiStyleOption=r.playerControlsLayout.desktopjson,this.showSkipRecap=!0,this.showSkipIntro=!0;else if(v){if(this.baseOptions.isLive)this.initializeComponent(r.playerControlsLayout.protraitLiveJson,this.Wrapper,e,r),t.baseOptions.playerControlsLayout.protraitLiveJson.forEach((function(n){"live_button"==n.control&&(t.liveButtonComponent=new logituitLiveButtonComponent,t.logituitLiveButton=new t.liveButtonComponent.liveButton(e,n),t.Wrapper.addChild(t.logituitLiveButton))})),(d=document.getElementsByClassName("vjs-play-progress"))&&d[1]&&(d[1].style.display="none"),(c=document.getElementsByClassName("vjs-load-progress"))&&c[1]&&(c[1].style.display="none"),(p=document.getElementsByClassName("logituit_seekbar"))&&p[0]&&(p[0].style.backgroundImage="linear-gradient(to right, #0aa1ea, #40c6b6)"),this.uiStyleOption=r.playerControlsLayout.protraitLiveJson;else this.initializeComponent(r.playerControlsLayout.protrait,this.Wrapper,e,r),this.uiStyleOption=r.playerControlsLayout.protrait,this.showSkipRecap=!1,this.showSkipIntro=!1}else if(_&&window.screen.width<=920||i&&l||n&&l){if(this.baseOptions.isLive)this.initializeComponent(r.playerControlsLayout.mobilelivejson,this.Wrapper,e,r),t.baseOptions.playerControlsLayout.mobilelivejson.forEach((function(n){"live_button"==n.control&&(t.liveButtonComponent=new logituitLiveButtonComponent,t.logituitLiveButton=new t.liveButtonComponent.liveButton(e,n),t.Wrapper.addChild(t.logituitLiveButton))})),(d=document.getElementsByClassName("vjs-play-progress"))&&d[1]&&(d[1].style.display="none"),(c=document.getElementsByClassName("vjs-load-progress"))&&c[1]&&(c[1].style.display="none"),(p=document.getElementsByClassName("logituit_seekbar"))&&p[0]&&(p[0].style.backgroundImage="linear-gradient(to right, #0aa1ea, #40c6b6)"),this.uiStyleOption=r.playerControlsLayout.mobilelivejson;else this.initializeComponent(r.playerControlsLayout.mobilejson,this.Wrapper,e,r),this.uiStyleOption=r.playerControlsLayout.mobilejson,this.showSkipRecap=!0,this.showSkipIntro=!0}else{var d,c,p;if(this.baseOptions.isLive)this.initializeComponent(r.playerControlsLayout.livejson,this.Wrapper,e,r),t.baseOptions.playerControlsLayout.livejson.forEach((function(n){"live_button"==n.control&&(t.liveButtonComponent=new logituitLiveButtonComponent,t.logituitLiveButton=new t.liveButtonComponent.liveButton(e,n),t.Wrapper.addChild(t.logituitLiveButton))})),(d=document.getElementsByClassName("vjs-play-progress"))&&d[1]&&(d[1].style.display="none"),(c=document.getElementsByClassName("vjs-load-progress"))&&c[1]&&(c[1].style.display="none"),(p=document.getElementsByClassName("logituit_seekbar"))&&p[0]&&(p[0].style.backgroundImage="linear-gradient(to right, #0aa1ea, #40c6b6)"),this.uiStyleOption=r.playerControlsLayout.livejson;else this.uiStyleOption=r.playerControlsLayout.desktopjson,this.initializeComponent(r.playerControlsLayout.desktopjson,this.Wrapper,e,r),this.showSkipIntro=!0,this.showSkipRecap=!0}}catch(e){Logger.error("Exception->> UI Engine Constructior: ",e)}},getSeekTime(){if(t.eventManager.seekTime)return t.eventManager.seekTime},getPlayerState:e=>t.eventManager.isPlayerPaused?"Paused":"Play",initializeWrapperLayout:function(t,n){try{return(e=new WrapperComponent(n)).applyStyles(t),e}catch(e){Logger.error("exception occured initializeWrapperLayout: ",e)}},createWatchNow:function(e,r,o){t.baseOptions.next_content=o,window.matchMedia("(orientation: portrait)").matches&&window.screen.width<=480?t.baseOptions.playerControlsLayout.protrait.forEach((function(n){"watchNext_popup"==n.control&&(t.logituitWatchNextButton||(t.WatchNextComponent=new logituitWatchNext,t.logituitWatchNextButton=new t.WatchNextComponent.watchNext(t.player,n,t.Wrapper,t.baseOptions,t,e,r),t.Wrapper.addChild(t.logituitWatchNextButton)))})):window.matchMedia("(orientation: landscape)").matches&&t.isIPad()||window.matchMedia("(orientation: portrait)").matches&&t.isIPad()?t.baseOptions.playerControlsLayout.desktopjson.forEach((function(n){"watchNext_popup"==n.control&&(t.logituitWatchNextButton||(t.WatchNextComponent=new logituitWatchNext,t.logituitWatchNextButton=new t.WatchNextComponent.watchNext(t.player,n,t.Wrapper,t.baseOptions,t,e,r),t.Wrapper.addChild(t.logituitWatchNextButton)))})):window.matchMedia("(orientation: landscape)").matches&&window.screen.width<=920||i&&l||n&&l?t.baseOptions.playerControlsLayout.mobilejson.forEach((function(n){"watchNext_popup"==n.control&&(t.logituitWatchNextButton||(t.WatchNextComponent=new logituitWatchNext,t.logituitWatchNextButton=new t.WatchNextComponent.watchNext(t.player,n,t.Wrapper,t.baseOptions,t,e,r),t.Wrapper.addChild(t.logituitWatchNextButton)))})):t.baseOptions.playerControlsLayout.desktopjson.forEach((function(n){"watchNext_popup"==n.control&&(t.logituitWatchNextButton||(t.WatchNextComponent=new logituitWatchNext,t.logituitWatchNextButton=new t.WatchNextComponent.watchNext(t.player,n,t.Wrapper,t.baseOptions,t,e,r),t.Wrapper.addChild(t.logituitWatchNextButton)))}))},addkeyboardcontroldisable:function(){t.eventManager.addkeyboardcontrol()},addkeyboardcontroldisableremove:function(){t.eventManager.addkeyboardcontrolremove()},removeWatchNow:function(){t.logituitWatchNextButton&&(t.logituitWatchNextButton.releaseResource(),t.Wrapper.removeChild(t.logituitWatchNextButton),delete t.logituitWatchNextButton,t.logituitWatchNextButton=null),t.WatchNextComponent&&(delete t.WatchNextComponent,t.WatchNextComponent=null)},createNextEpisode:function(e,r,o){t.baseOptions.next_content=o,window.matchMedia("(orientation: portrait)").matches&&window.screen.width<=480?t.baseOptions.playerControlsLayout.protrait.forEach((function(n){"watchNext_popup"==n.control&&(t.logituitNextEpisodeButton||(t.NextEpisodeComponent=new logituitNextEpisode,t.logituitNextEpisodeButton=new t.NextEpisodeComponent.nextEpisode(t.player,n,t.Wrapper,t.baseOptions,t,e,r),t.Wrapper.addChild(t.logituitNextEpisodeButton)))})):window.matchMedia("(orientation: landscape)").matches&&t.isIPad()||window.matchMedia("(orientation: portrait)").matches&&t.isIPad()?t.baseOptions.playerControlsLayout.desktopjson.forEach((function(n){"watchNext_popup"==n.control&&(t.logituitNextEpisodeButton||(t.NextEpisodeComponent=new logituitNextEpisode,t.logituitNextEpisodeButton=new t.NextEpisodeComponent.nextEpisode(t.player,n,t.Wrapper,t.baseOptions,t,e,r),t.Wrapper.addChild(t.logituitNextEpisodeButton)))})):window.matchMedia("(orientation: landscape)").matches&&window.screen.width<=920||i&&l||n&&l?t.baseOptions.playerControlsLayout.mobilejson.forEach((function(n){"watchNext_popup"==n.control&&(t.logituitNextEpisodeButton||(t.NextEpisodeComponent=new logituitNextEpisode,t.logituitNextEpisodeButton=new t.NextEpisodeComponent.nextEpisode(t.player,n,t.Wrapper,t.baseOptions,t,e,r),t.Wrapper.addChild(t.logituitNextEpisodeButton)))})):t.baseOptions.playerControlsLayout.desktopjson.forEach((function(n){"watchNext_popup"==n.control&&(t.logituitNextEpisodeButton||(t.NextEpisodeComponent=new logituitNextEpisode,t.logituitNextEpisodeButton=new t.NextEpisodeComponent.nextEpisode(t.player,n,t.Wrapper,t.baseOptions,t,e,r),t.Wrapper.addChild(t.logituitNextEpisodeButton)))}))},removeNextEpisode:function(){t.logituitNextEpisodeButton&&(t.logituitNextEpisodeButton.releaseResource(),t.Wrapper.removeChild(t.logituitNextEpisodeButton),delete t.logituitNextEpisodeButton,t.logituitNextEpisodeButton=null),t.NextEpisodeComponent&&(delete t.NextEpisodeComponent,t.NextEpisodeComponent=null)},createAllEpisode:function(){t.baseOptions.playerControlsLayout.desktopjson.forEach((function(e){"allEpisode_ui"==e.control&&(t.logituitAllEpisodeButton||(t.allEpisodeComponent=new logituitAllEpisode,t.logituitAllEpisodeButton=new t.allEpisodeComponent.allEpisode(t.player,e,t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(t.logituitAllEpisodeButton)))}))},removeAllEpisode:function(){t.logituitAllEpisodeButton&&(t.logituitAllEpisodeButton.releaseResource(),t.Wrapper.removeChild(t.logituitAllEpisodeButton),delete t.logituitAllEpisodeButton,t.logituitAllEpisodeButton=null),t.allEpisodeComponent&&(delete t.allEpisodeComponent,t.allEpisodeComponent=null)},removePlayPause:function(){t.logituitVideoPlayPauseButton&&(t.logituitVideoPlayPauseButton.releaseResource(),t.Wrapper.removeChild(t.logituitVideoPlayPauseButton),delete t.logituitVideoPlayPauseButton,t.logituitVideoPlayPauseButton=null),t.videoPlayPauseButtonComponent&&(delete t.videoPlayPauseButtonComponent,t.videoPlayPauseButtonComponent=null)},addPlayPause:function(){t.uiStyleOption.forEach((function(e){"videoplaypause_button"!=e.control||t.logituitVideoPlayPauseButton||(t.videoPlayPauseButtonComponent=new loguituitVideoPlayPauseButtonComponent,t.logituitVideoPlayPauseButton=new t.videoPlayPauseButtonComponent.videoPlayPauseButton(t.player,e,t.baseOptions,t),t.Wrapper.addChild(t.logituitVideoPlayPauseButton))}))},releaseResource:function(){try{t.logituitForwardButton&&(t.logituitForwardButton.releaseResource(),t.Wrapper.removeChild(t.logituitForwardButton),delete t.logituitForwardButton,t.logituitForwardButton=null),t.forwardButtonComponent&&(delete t.forwardButtonComponent,t.forwardButtonComponent=null),t.logituitRewindButton&&(t.logituitRewindButton.releaseResource(),t.Wrapper.removeChild(t.logituitRewindButton),delete t.logituitRewindButton,t.logituitRewindButton=null),t.rewindButtonComponent&&(delete t.rewindButtonComponent,t.rewindButtonComponent=null),t.logituitSeekBar&&(t.logituitSeekBar.releaseResource(),t.Wrapper.removeChild(t.logituitSeekBar),delete t.logituitSeekBar,t.logituitSeekBar=null),t.seekBarComponent&&(delete t.seekBarComponent,t.seekBarComponent=null),t.logituitupnextTv&&(t.logituitupnextTv.releaseResource(),t.Wrapper.removeChild(t.logituitupnextTv),delete t.logituitupnextTv,t.logituitupnextTv=null),t.upnexttvComponent&&(delete t.upnexttvComponent,t.upnexttvComponent=null),t.logituitVideoTitle&&(t.logituitVideoTitle.releaseResource(),t.Wrapper.removeChild(t.logituitVideoTitle),delete t.logituitVideoTitle,t.logituitVideoTitle=null),t.videoTitleComponent&&(delete t.videoTitleComponent,t.videoTitleComponent=null),t.logituitErrorMsg&&(t.logituitErrorMsg.releaseResource(),t.Wrapper.removeChild(t.logituitErrorMsg),delete t.logituitErrorMsg,t.logituitErrorMsg=null),t.errroMsgComponent&&(delete t.errroMsgComponent,t.errroMsgComponent=null),t.logituitBackButton&&(t.logituitBackButton.releaseResource(),t.Wrapper.removeChild(t.logituitBackButton),delete t.logituitBackButton,t.logituitBackButton=null),t.backButtonComponent&&(delete t.backButtonComponent,t.backButtonComponent=null),t.logituitTitleBar&&(t.logituitTitleBar.releaseResource(),t.Wrapper.removeChild(t.logituitTitleBar),delete t.logituitTitleBar,t.logituitTitleBar=null),t.titleBarComponent&&(delete t.titleBarComponent,t.titleBarComponent=null),t.episodelogituitTitleBar&&(t.episodelogituitTitleBar.releaseResource(),t.Wrapper.removeChild(t.episodelogituitTitleBar),delete t.episodelogituitTitleBar,t.episodelogituitTitleBar=null),t.episodetitleBarComponent&&(delete t.episodetitleBarComponent,t.episodetitleBarComponent=null),t.logituitPlayPause&&(t.logituitPlayPause.releaseResource(),t.Wrapper.removeChild(t.logituitPlayPause),delete t.logituitPlayPause,t.logituitPlayPause=null),t.playPauseComponent&&(delete t.playPauseComponent,t.playPauseComponent=null),t.logituitPause&&(t.logituitPause.releaseResource(),t.Wrapper.removeChild(t.logituitPause),delete t.logituitPause,t.logituitPause=null),t.pauseComponent&&(delete t.pauseComponent,t.pauseComponent=null),t.logituitFullScreen&&(t.logituitFullScreen.releaseResource(),t.Wrapper.removeChild(t.logituitFullScreen),delete t.logituitFullScreen,t.logituitFullScreen=null),t.fullScreenComponent&&(delete t.fullScreenComponent,t.fullScreenComponent=null),t.logituitExitScreen&&(t.logituitExitScreen.releaseResource(),t.Wrapper.removeChild(t.logituitExitScreen),delete t.logituitExitScreen,t.logituitExitScreen=null),t.exitScreenComponent&&(delete t.exitScreenComponent,t.exitScreenComponent=null),t.logituitVolume&&(t.logituitVolume.releaseResource(),t.Wrapper.removeChild(t.logituitVolume),delete t.logituitVolume,t.logituitVolume=null),t.volumeComponent&&(delete t.volumeComponent,t.volumeComponent=null),t.logituitVolumeSlider&&(t.logituitVolumeSlider.releaseResource(),t.Wrapper.removeChild(t.logituitVolumeSlider),delete t.logituitVolumeSlider,t.logituitVolumeSlider=null),t.volumeSliderComponent&&(delete t.volumeSliderComponent,t.volumeSliderComponent=null),t.logituitMuteVolume&&(t.logituitMuteVolume.releaseResource(),t.Wrapper.removeChild(t.logituitMuteVolume),delete t.logituitMuteVolume,t.logituitMuteVolume=null),t.muteVolumeComponent&&(delete t.muteVolumeComponent,t.muteVolumeComponent=null),t.logituitVideoQuality&&(t.logituitVideoQuality.releaseResource(),t.Wrapper.removeChild(t.logituitVideoQuality),delete t.logituitVideoQuality,t.logituitVideoQuality=null),t.videoQuality&&(delete t.videoQuality,t.videoQuality=null),t.logituitSubTitle&&(t.logituitSubTitle.releaseResource(),t.Wrapper.removeChild(t.logituitSubTitle),delete t.logituitSubTitle,t.logituitSubTitle=null),t.subTitleComponent&&(delete t.subTitleComponent,t.subTitleComponent=null),t.logituitChromeCast&&(t.logituitChromeCast.releaseResource(),t.Wrapper.removeChild(t.logituitChromeCast),delete t.logituitChromeCast,t.logituitChromeCast=null),t.chromeCastComponent&&(delete t.chromeCastComponent,t.chromeCastComponent=null),t.logituitShareButton&&(t.logituitShareButton.releaseResource(),t.Wrapper.removeChild(t.logituitShareButton),delete t.logituitShareButton,t.logituitShareButton=null),t.shareButtonComponent&&(delete t.shareButtonComponent,t.shareButtonComponent=null),t.logituitMiniPlayer&&(t.logituitMiniPlayer.releaseResource(),t.Wrapper.removeChild(t.logituitMiniPlayer),delete t.logituitMiniPlayer,t.logituitMiniPlayer=null),t.miniPlayerComponent&&(delete t.miniPlayerComponent,t.miniPlayerComponent=null),t.logituitTimeDivider&&(t.logituitTimeDivider.releaseResource(),t.Wrapper.removeChild(t.logituitTimeDivider),delete t.logituitTimeDivider,t.logituitTimeDivider=null),t.timeDividerComponent&&(delete t.timeDividerComponent,t.timeDividerComponent=null),t.logituitCurrentTime&&(t.logituitCurrentTime.releaseResource(),t.Wrapper.removeChild(t.logituitCurrentTime),delete t.logituitCurrentTime,t.logituitCurrentTime=null),t.currentTimeComponent&&(delete t.currentTimeComponent,t.currentTimeComponent=null),t.logituitCloseButton&&(t.logituitCloseButton.releaseResource(),t.Wrapper.removeChild(t.logituitCloseButton),delete t.logituitCloseButton,t.logituitCloseButton=null),t.closeButtonComponent&&(delete t.closeButtonComponent,t.closeButtonComponent=null),t.logituitEpisodeButton&&(t.logituitEpisodeButton.releaseResource(),t.Wrapper.removeChild(t.logituitEpisodeButton),delete t.logituitEpisodeButton,t.logituitEpisodeButton=null),t.episodeButtonComponent&&(delete t.episodeButtonComponent,t.episodeButtonComponent=null),t.logituitLoadingSpinner&&(t.logituitLoadingSpinner.releaseResource(),t.Wrapper.removeChild(t.logituitLoadingSpinner),delete t.logituitLoadingSpinner,t.logituitLoadingSpinner=null),t.loadingSpinnerComponent&&(delete t.loadingSpinnerComponent,t.loadingSpinnerComponent=null),t.logituitWaterMark&&(t.logituitWaterMark.releaseResource(),t.Wrapper.removeChild(t.logituitWaterMark),delete t.logituitWaterMark,t.logituitWaterMark=null),t.waterMarkComponent&&(delete t.waterMarkComponent,t.waterMarkComponent=null),t.logituitMoreButtons&&(t.logituitMoreButtons.releaseResource(),t.Wrapper.removeChild(t.logituitMoreButtons),delete t.logituitMoreButtons,t.logituitMoreButtons=null),t.moreButtonsComponent&&(delete t.moreButtonsComponent,t.moreButtonsComponent=null),t.logituitLiveButton&&(t.logituitLiveButton.releaseResource(),t.Wrapper.removeChild(t.logituitLiveButton),delete t.logituitLiveButton,t.logituitLiveButton=null),t.liveButtonComponent&&(delete t.liveButtonComponent,t.liveButtonComponent=null),t.logituitButtongoLive&&(t.logituitButtongoLive.releaseResource(),t.Wrapper.removeChild(t.logituitButtongoLive),delete t.logituitButtongoLive,t.logituitButtongoLiveTv=null),t.ButtongoLiveComponent&&(delete t.ButtongoLiveComponent,t.ButtongoLiveComponent=null),t.logituitLiveButtonTv&&(t.logituitLiveButtonTv.releaseResource(),t.Wrapper.removeChild(t.logituitLiveButtonTv),delete t.logituitLiveButtonTv,t.logituitLiveButtonTv=null),t.liveButtonTvComponent&&(delete t.liveButtonTvComponent,t.liveButtonTvComponent=null),t.logituitButtongoLiveTv&&(t.logituitButtongoLiveTv.releaseResource(),t.Wrapper.removeChild(t.logituitButtongoLiveTv),delete t.logituitButtongoLiveTv,t.logituitButtongoLiveTv=null),t.ButtongoLiveTvComponent&&(delete t.ButtongoLiveTvComponent,t.ButtongoLiveTvComponent=null),t.logituitnextEpisodeButton&&(t.logituitnextEpisodeButton.releaseResource(),t.Wrapper.removeChild(t.logituitnextEpisodeButton),delete t.logituitnextEpisodeButton,t.logituitnextEpisodeButton=null),t.nextEpisodeButtonComponent&&(delete t.nextEpisodeButtonComponent,t.nextEpisodeButtonComponent=null),t.playpauseAnimationComponent&&(t.playpauseAnimationComponent.releaseResource(),t.Wrapper.removeChild(t.playpauseAnimationComponent),delete t.playpauseAnimationComponent,t.playpauseAnimationComponent=null),t.playpauseAnimationComponent&&(delete t.playpauseAnimationComponent,t.playpauseAnimationComponent=null),t.logituitVideoPlayPauseButton&&(t.logituitVideoPlayPauseButton.releaseResource(),t.Wrapper.removeChild(t.logituitVideoPlayPauseButton),delete t.logituitVideoPlayPauseButton,t.logituitVideoPlayPauseButton=null),t.videoPlayPauseButtonComponent&&(delete t.videoPlayPauseButtonComponent,t.videoPlayPauseButtonComponent=null);try{t.logituitDividerComponent&&(t.logituitDividerComponent.releaseResource(),t.Wrapper.removeChild(t.logituitDividerComponent),delete t.logituitDividerComponent,t.logituitDividerComponent=null),t.logituitDividerButton&&(delete t.logituitDividerButton,t.logituitDividerButton=null)}catch(e){}t.player.removeChild(t.Wrapper),delete t.Wrapper,t.Wrapper=null}catch(e){Logger.error("release resource error UIEngine: ",e)}try{this.isMobile()&&(document.querySelector("html").classList.remove("landscape-mobile-dimen"),document.querySelector("body").classList.remove("landscape-mobile-dimen"),document.querySelector("#main").classList.remove("landscape-mobile-dimen"),document.querySelector("#erosPlayer").classList.remove("landscape-mobile-dimen"),document.querySelector(".video-js.vjs-16-9").classList.remove("landscape-mobile-dimen"),document.querySelector(".video-js.vjs-16-9").classList.remove("landscape-mobile-player-dimen"))}catch(e){}},applyStyles:function(e){var t=this.el();for(key in e)t&&t.setAttribute(key,e[key])},destroyMember:function(){this.subtitle=null,this.videoquality=null,this.FrdBtn=null},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},isSafari:function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},iOSDevice:function(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)},iosMobile:function(){var e=navigator.userAgent;return e.match(/iphone/i)||e.match(/iPod/i)},iPhone:function(){return navigator.userAgent.match(/iphone/i)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},iOSversion:function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}},isLandscape:function(){var e=!1;try{window.orientation||window.screen.orientation;var t,n=this.isMobile(),i=this.iOSDevice();if(n){if(i&&i.length>0)switch(window.orientation){case 0:case 180:t="portrait";break;case-90:case 90:t="landscape"}else t=(window.screen.orientation||{}).type||window.screen.mozOrientation||window.screen.msOrientation;e="portrait"!=t&&"portrait-primary"!=t&&"portrait-secondary"!=t&&0!=t&&-180!=t}}catch(e){Logger.error("this.isLandscape : Error ",e)}return e},setLiveFlag:function(e){e&&(window.matchMedia("(orientation: landscape)").matches&&t.isIPad()||window.matchMedia("(orientation: portrait)").matches&&t.isIPad()?t.baseOptions.playerControlsLayout.livejson.forEach((function(e){"live_button"==e.control&&(t.logituitLiveButton||(t.liveButtonComponent=new logituitLiveButtonComponent,t.logituitLiveButton=new t.liveButtonComponent.liveButton(t.player,e),t.Wrapper.addChild(t.logituitLiveButton)))})):window.matchMedia("(orientation: portrait)").matches?t.baseOptions.playerControlsLayout.protraitLiveJson.forEach((function(e){"live_button"==e.control&&(t.logituitLiveButton||(t.liveButtonComponent=new logituitLiveButtonComponent,t.logituitLiveButton=new t.liveButtonComponent.liveButton(t.player,e),t.Wrapper.addChild(t.logituitLiveButton)))})):window.matchMedia("(orientation: landscape)").matches&&window.screen.width<=920||i&&l||n&&l?t.baseOptions.playerControlsLayout.mobilelivejson.forEach((function(e){"live_button"==e.control&&(t.logituitLiveButton||(t.liveButtonComponent=new logituitLiveButtonComponent,t.logituitLiveButton=new t.liveButtonComponent.liveButton(t.player,e),t.Wrapper.addChild(t.logituitLiveButton)))})):t.baseOptions.playerControlsLayout.livejson.forEach((function(e){"live_button"==e.control&&(t.logituitLiveButton||(t.liveButtonComponent=new logituitLiveButtonComponent,t.logituitLiveButton=new t.liveButtonComponent.liveButton(t.player,e),t.Wrapper.addChild(t.logituitLiveButton)))})))},reportEventToUiEngine:function(e){try{this.eventManager.reportEventToEventManager(e)}catch(e){Logger.error("error in throwing event in UiEngine",e)}},initializeComponent:function(e,n,i,r){try{e.forEach((function(e){try{if("forwardbutton"==e.control){if(0!=r.isLive)return;t.forwardButtonComponent=new logituitForwardButtonComponent,e.forwardTime=r.forwardRewindTime,t.logituitForwardButton=new t.forwardButtonComponent.forwardButton(i,e,r,t),t.Wrapper.addChild(t.logituitForwardButton)}else if("rewindbutton"==e.control){if(0!=r.isLive)return;t.rewindButtonComponent=new loguituRewindButtonComponent,e.rewindTime=r.forwardRewindTime,t.logituitRewindButton=new t.rewindButtonComponent.rewindButton(i,e,t),t.Wrapper.addChild(t.logituitRewindButton)}else"seekbar"==e.control?(this.seekBarComponent=new logituitSeekBarComponent,this.logituitSeekBar=new seekBarComponent.seekBar(i,e,t),n.addChild(this.logituitSeekBar)):"videotitle"==e.control?(this.videoTitleComponent=new logituitVideoTitleComponent,this.logituitVideoTitle=new videoTitleComponent.videoTitle(i,e),n.addChild(this.logituitVideoTitle)):"backbutton"==e.control?(this.backButtonComponent=new logituitBackButtonComponent,this.logituitBackButton=new backButtonComponent.backButton(i,e,t),n.addChild(logituitBackButton)):"upnexttv"==e.control?(this.upnexttvComponent=new loguituitupnextTvComponent,this.logituitupnextTv=new upnexttvComponent.upnextButton(i,e,t),n.addChild(this.logituitupnextTv)):"mouseTime"==e.control?(this.mouseTime=new mouseTime(i,e),n.addChild(mouseTime)):"errorMsg"==e.control?(t.errroMsgComponent=new logituitErrorMessageComponent,t.logituitErrorMsg=new t.errroMsgComponent.errorMessage(i,e,t),n.addChild(t.logituitErrorMsg)):"title"==e.control?(this.titleBarComponent=new logituitTitleBarComponent,e.text=r.contentTitle,this.logituitTitleBar=new titleBarComponent.titleBar(i,e,r),n.addChild(this.logituitTitleBar)):"play_pause"==e.control&&i.paused()?(t.logituitPause&&(t.logituitPause.releaseResource(),t.Wrapper.removeChild(t.logituitPause),delete t.logituitPause,t.logituitPause=null),t.pauseComponent&&(delete t.pauseComponent,t.pauseComponent=null),t.playPauseComponent=new logituitPlayPauseComponent,t.logituitPlayPause=new t.playPauseComponent.playPause(i,e,n,r,t),n.addChild(t.logituitPlayPause)):"pauseButton"!=e.control||i.paused()?"fullScreen"!=e.control||i.isFullscreen()||!(t.isMobile()&&t.iosMobile()&&t.isLandscape())&&t.iosMobile()?"exit-fullScreen"==e.control&&i.isFullscreen()&&(t.isMobile()&&t.iosMobile()&&t.isLandscape()||!t.iosMobile())?(t.exitScreenComponent=new logituitExitScreenComponent,t.logituitExitScreen=new t.exitScreenComponent.exitScreenObj(i,e,t),n.addChild(t.logituitExitScreen)):"volume"!=e.control||t.player.muted()?"volumeSlider"==e.control?(this.volumeSliderComponent=new logituitVolumeSliderComponent,this.logituitVolumeSlider=new volumeSliderComponent.volumeSlider(i,e,n,t),n.addChild(this.logituitVolumeSlider)):"muteVolume"==e.control&&t.player.muted()?(t.muteVolumeComponent=new logituitMuteVolumeComponent,t.logituitMuteVolume=new t.muteVolumeComponent.muteVolume(i,e,n,t),n.addChild(t.logituitMuteVolume)):"MobileMuteVolume"==e.control||("videoQuality"==e.control?(t.QualitySettingsComponent=new logituitSettingsComponent,t.logituitQualitySettings=new t.QualitySettingsComponent.videoQuality(i,e,n,r,t),t.Wrapper.addChild(t.logituitQualitySettings)):"subtitle"==e.control?(this.subTitleComponent=new logituitSubTitleComponent,this.logituitSubTitle=new subTitleComponent.subTitle(i,e,n,r,t),n.addChild(this.logituitSubTitle)):"chromeCast"==e.control?(this.chromeCastComponent=new logituitChromeCastComponent,this.logituitChromeCast=new chromeCastComponent.logixCC(i,e),n.addChild(logituitChromeCast)):"duration"==e.control?(this.durationComponent=new logituitDurationComponent,this.logituitDuration=new durationComponent.duration(i,e),n.addChild(this.logituitDuration)):"share"==e.control?(this.shareButtonComponent=new logituitShareButtonComponent,this.logituitShare=new shareComponent.shareButton(i,e,t),n.addChild(this.logituitShare)):"miniPalyer"==e.control?(t.miniPlayerComponent=new logituitMiniPlayerComponent,t.logituitMiniPlayer=new t.miniPlayerComponent.miniPlayer(i,e,t,t.baseOptions),n.addChild(t.logituitMiniPlayer)):"timeDivider"==e.control?(this.timeDividerComponent=new logituitTimeDividerComponent,this.logituitTimeDivider=new timeDividerComponent.timeDivider(i,e),n.addChild(this.logituitTimeDivider)):"currentTime"==e.control?(this.currentTimeComponent=new logituitCurrentTimeComponent,this.logituitCurrentTime=new currentTimeComponent.currentTime(i,e),n.addChild(this.logituitCurrentTime)):"close"==e.control?(this.closeButtonComponent=new logituitCloseButtonComponent,this.logituitCloseButton=new closeButtonComponent.closeButtonObj(i,e,t),n.addChild(this.logituitCloseButton)):"episode"==e.control&&"Episode"==t.baseOptions.assetType&&t.baseOptions.nextVideoMetadata?(t.episodeButtonComponent=new logituitEpisodeButtonComponent,t.logituitExpisodeButton=new t.episodeButtonComponent.episodeButton(i,e,t),n.addChild(t.logituitExpisodeButton)):"loadingSpinner"==e.control?(this.loadingSpinnerComponent=new logituitLoadingSpinnerComponent,this.logituitLoadingSpinner=new loadingSpinnerComponent.LoadingSpinner(i,e,t),n.addChild(this.logituitLoadingSpinner)):"waterMark"==e.control?(this.waterMarkComponent=new logituitWaterMarkComponent,this.logituitWaterMark=new waterMarkComponent.waterMark(i,e),n.addChild(this.logituitWaterMark)):"more_button"==e.control?(this.moreButtonsComponent=new logituitMoreButtonsComponent,this.logituitMoreButtons=new moreButtonsComponent.moreButtons(i,e,n,r,t),n.addChild(this.logituitMoreButtons)):"Golive_button"==e.control?(this.GoliveButtonComponent=new logituitButtongoLiveComponent,this.logituitGoLiveButton=new GoliveButtonComponent.GoliveButton(i,e),n.addChild(this.logituitGoLiveButton)):"nextEpisode_button"==e.control?(this.nextEpisodeButtonComponent=new logituitButtonnextEpisodeTvComponent,this.logituitnextEpisodeButton=new nextEpisodeButtonComponent.nextEpisodeButtonTv(i,e),n.addChild(this.logituitnextEpisodeButton)):"videoplaypause_button"==e.control?(t.videoPlayPauseButtonComponent=new loguituitVideoPlayPauseButtonComponent,t.logituitVideoPlayPauseButton=new t.videoPlayPauseButtonComponent.videoPlayPauseButton(i,e,r,t),t.Wrapper.addChild(t.logituitVideoPlayPauseButton)):"live_buttonTv"==e.control?(this.liveButtonTvComponent=new logituitLiveButtonTvComponent,this.logituitLiveTvButton=new liveButtonTvComponent.liveButtonTv(i,e),n.addChild(this.logituitLiveTvButton)):"Golive_buttonTv"==e.control&&(this.GoliveButtonTvComponent=new logituitButtongoLiveTvComponent,this.logituitGoLiveTvButton=new GoliveButtonTvComponent.GoliveButtonTv(i,e),n.addChild(this.logituitGoLiveTvButton))):(t.volumeComponent=new logituitVolumeComponent,t.logituitVolume=new t.volumeComponent.volume(i,e,n,t),n.addChild(t.logituitVolume)):(t.fullScreenComponent=new logituitFullScreenComponent,t.logituitFullScreen=new t.fullScreenComponent.fullScreenObj(i,e,t),n.addChild(t.logituitFullScreen)):(t.logituitPlayPause&&(t.logituitPlayPause.releaseResource(),t.Wrapper.removeChild(t.logituitPlayPause),delete t.logituitPlayPause,t.logituitPlayPause=null),t.playPauseComponent&&(delete t.playPauseComponent,t.playPauseComponent=null),t.pauseComponent=new logituitPauseButton,t.logituitPause=new t.pauseComponent.pauseButton(i,e,n,r,t),n.addChild(t.logituitPause))}catch(t){Logger.error("Exception in control: ",e.control,t)}})),i.addChild(n)}catch(e){Logger.error("Exception initializeComponent: ",e)}},removeMobileSettingsPopup:function(){t.eventManager.showingMwebSettingsPopup=!1,t.logituitMobileSettingsPopup&&("PLAY"==t.videoPlaying?t.player.play():t.player.pause(),t.logituitMobileSettingsPopup.releaseResource(),t.Wrapper.removeChild(t.logituitMobileSettingsPopup),delete t.logituitMobileSettingsPopup,t.logituitMobileSettingsPopup=null),t.settingPopupComponent&&(delete t.settingPopupComponent,t.settingPopupComponent=null)},addReplayButtonScreen:function(){if(t.Wrapper=this.initializeWrapperLayout({style:{position:"absolute;",top:"0;",height:"100%;",width:"100%;"}},player),t.player.addChild(t.Wrapper),this.replayscreen=!0,t.replayscreen)for(var e,n=0;n<t.uiStyleOption.length;n++)if("replayButton"==t.uiStyleOption[n].control){e=t.uiStyleOption[n];break}if(t.isMobile()||t.isIPad()||(t.replayButtonComponent=new logituitReplayButtonComponent,t.logituitreplayButton=new t.replayButtonComponent.replayButton(t.player,t.Wrapper,e,t),t.Wrapper.addChild(t.logituitreplayButton)),this.title=!0,t.title){var i;for(n=0;n<t.uiStyleOption.length;n++)if("title"==t.uiStyleOption[n].control){i=t.uiStyleOption[n];break}}if((!t.isSafari()||t.isMobile()||t.isIPad())&&(t.titleBarComponent=new logituitTitleBarComponent,t.logituitTitleBar=new t.titleBarComponent.titleBar(player,i,t.baseOptions),t.Wrapper.addChild(this.logituitTitleBar)),this.closeButtonreplayscreen=!0,t.closeButtonreplayscreen){var r;for(n=0;n<t.uiStyleOption.length;n++)if("close"==t.uiStyleOption[n].control){r=t.uiStyleOption[n];break}}(!t.isSafari()||t.isMobile()||t.isIPad())&&(t.closeButtonComponent=new logituitCloseButtonComponent,t.logituitCloseButton=new t.closeButtonComponent.closeButtonObj(player,r,t),t.Wrapper.addChild(this.logituitCloseButton))},removeReplayScreen:function(){t.logituitCloseButton&&(t.logituitCloseButton.releaseResource(),t.Wrapper.removeChild(t.logituitCloseButton),delete t.logituitCloseButton,t.logituitCloseButton=null),t.closeButtonComponent&&(delete t.closeButtonComponent,t.closeButtonComponent=null),t.logituitTitleBar&&(t.logituitTitleBar.releaseResource(),t.Wrapper.removeChild(t.logituitTitleBar),delete t.logituitTitleBar,t.logituitTitleBar=null),t.titleBarComponent&&(delete t.titleBarComponent,t.titleBarComponent=null),t.logituitreplayButton&&(t.logituitreplayButton.releaseResource(),t.Wrapper.removeChild(t.logituitreplayButton),delete t.logituitreplayButton,t.logituitreplayButton=null),t.replayButtonComponent&&(delete t.replayButtonComponent,t.replayButtonComponent=null),t.player.removeChild(t.Wrapper),delete t.Wrapper,t.Wrapper=null,this.replayscreen=!1,t.eventManager.initializeUiResources()},addSkipRecapButton:function(){if(t.showSkipRecap){for(var e,n=0;n<t.uiStyleOption.length;n++)if("skipRecap"==t.uiStyleOption[n].control){e=t.uiStyleOption[n];break}t.skipRecapButtonComponent=new loguituitSkipRecapButtonComponent,t.loguituitSkipRecapButtonComponent=new t.skipRecapButtonComponent.skipRecapButton(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.loguituitSkipRecapButtonComponent)}},addSkipIntroButton:function(){if(t.showSkipIntro){for(var e,n=0;n<t.uiStyleOption.length;n++)if("skipIntro"==t.uiStyleOption[n].control){e=t.uiStyleOption[n];break}t.skipIntroButtonComponent=new loguituitSkipIntroButtonComponent,t.loguituitSkipIntroButtonComponent=new t.skipIntroButtonComponent.skipIntroButton(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.loguituitSkipIntroButtonComponent)}},showRecomendationScreen:function(e){if(!t.recommendedPopupComponent){for(var n,i=0;i<t.uiStyleOption.length;i++)if("recommendedUI"==t.uiStyleOption[i].control){n=t.uiStyleOption[i];break}t.baseOptions.recommendations=e,t.recommendedPopupComponent=new logituitRecommendedPopup,t.logituitRecommendedPopupButton=new t.recommendedPopupComponent.recommendedPopup(t.player,n,t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(t.logituitRecommendedPopupButton)}},removeRecommendation:function(){t.logituitRecommendedPopupButton&&(t.logituitRecommendedPopupButton.releaseResource(),t.Wrapper.removeChild(t.logituitRecommendedPopupButton),delete t.logituitRecommendedPopupButton,t.logituitRecommendedPopupButton=null),t.recommendedPopupComponent&&(delete t.recommendedPopupComponent,t.recommendedPopupComponent=null)},showFullScreenRecommendation:function(e,n){if(!t.fullscreenRecommendedPopupComponent&&t.baseOptions.fullscreenRecommendation){for(var i,r=0;r<t.uiStyleOption.length;r++)if("fullscreenRecommendedUI"==t.uiStyleOption[r].control){i=t.uiStyleOption[r];break}t.fullscreenRecommendedPopupComponent=new logituitFullscreenRecommendedPopup,t.logituitFullscreenRecommendedPopupButton=new t.fullscreenRecommendedPopupComponent.fullscreenRecommendedPopup(t.player,i,t.Wrapper,t.baseOptions,t,e,n),t.Wrapper.addChild(t.logituitFullscreenRecommendedPopupButton)}},removeFullscreenRecommendation:function(){t.logituitFullscreenRecommendedPopupButton&&(t.logituitFullscreenRecommendedPopupButton.releaseResource(),t.Wrapper.removeChild(t.logituitFullscreenRecommendedPopupButton),delete t.logituitFullscreenRecommendedPopupButton,t.logituitFullscreenRecommendedPopupButton=null),t.fullscreenRecommendedPopupComponent&&(delete t.fullscreenRecommendedPopupComponent,t.fullscreenRecommendedPopupComponent=null)},addSettingPopup:function(){t.logituitQualitySettings&&t.logituitQualitySettings.showSettingsPopup()},removeSettingPopup:function(){t.logituitQualitySettings&&t.logituitQualitySettings.hideSettingsPopup()},addWebAudioQualityPopup:function(){if(this.showQualityPopup=!0,t.showQualityPopup)for(var e,n=0;n<t.uiStyleOption.length;n++)if("audioQuality"==t.uiStyleOption[n].control){e=t.uiStyleOption[n];break}t.isMobile()||(t.audioQualityComponent=new logituitAudioQualityComponent,t.logituitAudioQuality=new t.audioQualityComponent.videoQuality(t.player,e,t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(this.logituitAudioQuality))},addWebVideoQualityPopup:function(){if(this.showQualityPopup=!0,t.showQualityPopup)for(var e,n=0;n<t.uiStyleOption.length;n++)if("videoQuality"==t.uiStyleOption[n].control){e=t.uiStyleOption[n];break}(!t.isSafari()||t.isMobile()||t.isIPad())&&(t.videoQualityComponent=new logituitVideoQualityComponent,t.logituitVideoQuality=new t.videoQualityComponent.videoQuality(t.player,e,t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(this.logituitVideoQuality))},removeWebAudioQualityPopup:function(){t.showQualityPopup&&(t.logituitAudioQuality&&(t.logituitAudioQuality.releaseResource(),t.Wrapper.removeChild(t.logituitAudioQuality),delete t.logituitAudioQuality,t.logituitAudioQuality=null),t.videoQualityComponent&&(delete t.videoQualityComponent,t.videoQualityComponent=null))},removeWebVideoQualityPopup:function(){t.showQualityPopup&&(t.logituitVideoQuality&&(t.logituitVideoQuality.releaseResource(),t.Wrapper.removeChild(t.logituitVideoQuality),delete t.logituitVideoQuality,t.logituitVideoQuality=null),t.videoQualityComponent&&(delete t.videoQualityComponent,t.videoQualityComponent=null))},removeQualitySettingsPopup:function(){t.logituitQualitySettings&&(t.logituitQualitySettings.releaseResource(),t.Wrapper.removeChild(t.logituitQualitySettings),delete t.logituitQualitySettings,t.logituitQualitySettings=null),t.videoQualityComponent&&(delete t.videoQualityComponent,t.videoQualityComponent=null)},removeSkipRecapButton:function(){t.showSkipRecap&&(t.loguituitSkipRecapButtonComponent&&(t.loguituitSkipRecapButtonComponent.releaseResource(),t.Wrapper.removeChild(t.loguituitSkipRecapButtonComponent),delete t.loguituitSkipRecapButtonComponent,t.loguituitSkipRecapButtonComponent=null),t.skipRecapButtonComponent&&(delete t.skipRecapButtonComponent,t.skipRecapButtonComponent=null))},removeSkipIntroButton:function(){t.showSkipIntro&&(t.loguituitSkipIntroButtonComponent&&(t.loguituitSkipIntroButtonComponent.releaseResource(),t.Wrapper.removeChild(t.loguituitSkipIntroButtonComponent),delete t.loguituitSkipIntroButtonComponent,t.loguituitSkipIntroButtonComponent=null),t.skipIntroButtonComponent&&(delete t.skipIntroButtonComponent,t.skipIntroButtonComponent=null))},addMobileSettingsPopup:function(e){t.eventManager.showingMwebSettingsPopup=!0,""==t.videoPlaying&&(t.player.paused()?t.videoPlaying="PAUSE":t.videoPlaying="PLAY"),t.player.pause(),t.settingPopupComponent=new logituitVideoPopupComponent,t.logituitMobileSettingsPopup=new t.settingPopupComponent.PopupComponent(t.player,{name:"popup",option:e},t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(this.logituitMobileSettingsPopup)},addMobileAudioQualityPopup:function(e){t.eventManager.showingMwebSettingsPopup=!0,""==t.videoPlaying&&(t.player.paused()?t.videoPlaying="PAUSE":t.videoPlaying="PLAY"),t.player.pause(),t.mobileAudioQualityPopupComponent=new logituitMobileAudioQualityPopup,t.logituitMobileAudioQualityPopup=new t.mobileAudioQualityPopupComponent.mobileAudioQuality(t.player,{name:"popup",option:e},t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(this.logituitMobileAudioQualityPopup)},removeMobileAudioQualityPopup:function(){t.eventManager.showingMwebSettingsPopup=!1,t.logituitMobileAudioQualityPopup&&("PLAY"==t.videoPlaying?t.player.play():t.player.pause(),t.logituitMobileAudioQualityPopup.releaseResource(),t.Wrapper.removeChild(t.logituitMobileAudioQualityPopup),delete t.logituitMobileAudioQualityPopup,t.logituitMobileAudioQualityPopup=null),t.mobileVideoQualityPopupComponent&&(delete t.mobileVideoQualityPopupComponent,t.mobileVideoQualityPopupComponent=null)},addMobileVideoQualityPopup:function(e){t.eventManager.showingMwebSettingsPopup=!0,""==t.videoPlaying&&(t.player.paused()?t.videoPlaying="PAUSE":t.videoPlaying="PLAY"),t.player.pause(),t.mobileVideoQualityPopupComponent=new logituitMobileVideoQualityPopup,t.logituitMobileVideoQualityPopup=new t.mobileVideoQualityPopupComponent.mobileVideoQuality(t.player,{name:"popup",option:e},t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(this.logituitMobileVideoQualityPopup)},removeMobileVideoQualityPopup:function(){t.eventManager.showingMwebSettingsPopup=!1,t.logituitMobileVideoQualityPopup&&("PLAY"==t.videoPlaying?t.player.play():t.player.pause(),t.logituitMobileVideoQualityPopup.releaseResource(),t.Wrapper.removeChild(t.logituitMobileVideoQualityPopup),delete t.logituitMobileVideoQualityPopup,t.logituitMobileVideoQualityPopup=null),t.mobileVideoQualityPopupComponent&&(delete t.mobileVideoQualityPopupComponent,t.mobileVideoQualityPopupComponent=null)},addMobileAudioPopup:function(e){t.eventManager.showingMwebSettingsPopup=!0,""==t.videoPlaying&&(t.player.paused()?t.videoPlaying="PAUSE":t.videoPlaying="PLAY"),t.player.pause(),t.mobileAudioPopupComponent=new logituitMobileAudioPopup,t.logituitMobileAudioPopup=new t.mobileAudioPopupComponent.subtitleAudioComponent(t.player,{name:"popup",option:e},t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(this.logituitMobileAudioPopup)},removeMobileAudioPopup:function(){t.eventManager.showingMwebSettingsPopup=!1,t.logituitMobileAudioPopup&&("PLAY"==t.videoPlaying?t.player.play():t.player.pause(),t.logituitMobileAudioPopup.releaseResource(),t.Wrapper.removeChild(t.logituitMobileAudioPopup),delete t.logituitMobileAudioPopup,t.logituitMobileAudioPopup=null),t.mobileAudioPopupComponent&&(delete t.mobileAudioPopupComponent,t.mobileAudioPopupComponent=null)},addMobileSubtitlePopup:function(e){t.eventManager.showingMwebSettingsPopup=!0,""==t.videoPlaying&&(t.player.paused()?t.videoPlaying="PAUSE":t.videoPlaying="PLAY"),t.player.pause(),t.mobileSubtitlePopupComponent=new logituitMobileSubtitlePopup,t.logituitMobileSubtitlePopup=new t.mobileSubtitlePopupComponent.subtitleComponent(t.player,{name:"popup",option:e},t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(this.logituitMobileSubtitlePopup)},removeMobileSubtitlePopup:function(){t.eventManager.showingMwebSettingsPopup=!1,t.logituitMobileSubtitlePopup&&("PLAY"==t.videoPlaying?t.player.play():t.player.pause(),t.logituitMobileSubtitlePopup.releaseResource(),t.Wrapper.removeChild(t.logituitMobileSubtitlePopup),delete t.logituitMobileSubtitlePopup,t.logituitMobileSubtitlePopup=null),t.mobileSubtitlePopupComponent&&(delete t.mobileSubtitlePopupComponent,t.mobileSubtitlePopupComponent=null)},addMobileReportIssuePopup:function(e){t.eventManager.showingMwebSettingsPopup=!0,""!=t.videoPlaying&&(t.player.paused()?t.videoPlaying="PAUSE":t.videoPlaying="PLAY"),t.player.pause(),t.mobileReportIssueComponent=new logituitMobileReportIssuePopup,t.logituitMobileReportIssuePopup=new t.mobileReportIssueComponent.reportAnIssue(t.player,{name:"popup",option:e},t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(this.logituitMobileReportIssuePopup)},removeMobileReportPopup:function(){t.eventManager.showingMwebSettingsPopup=!1,t.logituitMobileReportIssuePopup&&("PLAY"==t.videoPlaying?t.player.play():t.player.pause(),t.logituitMobileReportIssuePopup.releaseResource(),t.Wrapper.removeChild(t.logituitMobileReportIssuePopup),delete t.logituitMobileReportIssuePopup,t.logituitMobileReportIssuePopup=null),t.mobileReportIssueComponent&&(delete t.mobileReportIssueComponent,t.mobileReportIssueComponent=null)},showRewindAnimation:function(){t.logituitRewindButton&&t.logituitRewindButton.showRewindAnimation()},pauseTimer:function(e){t.logituitWatchNextButton?t.logituitWatchNextButton.setOnlineFlag(e):t.logituitNextEpisodeButton&&t.logituitNextEpisodeButton.setOnlineFlag(e)},pauseTimerBackground:function(e){t.logituitWatchNextButton?t.logituitWatchNextButton.setBackgroundFlag(e):t.logituitNextEpisodeButton&&t.logituitNextEpisodeButton.setBackgroundFlag(e)},showForwardAnimation:function(){t.logituitForwardButton&&t.logituitForwardButton.showForwardAnimation()},hideFullscreen:function(){t.logituitExitScreen?t.logituitExitScreen.hideIcon():t.logituitFullScreen&&t.logituitFullScreen.hideIcon()},showPauseAnimation:function(){t.logituitPause&&t.logituitPause.showPauseAnimation()},showPlayAnimation:function(){t.logituitPlayPause&&t.logituitPlayPause.showPlayAnimation()},displayVolumeIcon:function(){t.logituitVolume||(t.logituitMuteVolume&&(t.logituitMuteVolume.releaseResource(),t.Wrapper.removeChild(t.logituitMuteVolume),delete t.logituitMuteVolume,t.logituitMuteVolume=null),t.muteVolumeComponent&&(delete t.muteVolumeComponent,t.muteVolumeComponent=null),t.uiStyleOption.forEach((function(e){"volume"!=e.control||t.replayscreen||(t.volumeComponent=new logituitVolumeComponent,t.logituitVolume=new t.volumeComponent.volume(t.player,e,t.Wrapper,t),t.Wrapper.addChild(t.logituitVolume))})))},muteVolumeIcon:function(){t.logituitMuteVolume||(t.logituitVolume&&(t.logituitVolume.releaseResource(),t.Wrapper.removeChild(t.logituitVolume),delete t.logituitVolume,t.logituitVolume=null),t.volumeComponent&&(delete t.volumeComponent,t.volumeComponent=null),t.uiStyleOption.forEach((function(e){"muteVolume"==e.control&&(t.muteVolumeComponent=new logituitMuteVolumeComponent,t.logituitMuteVolume=new t.muteVolumeComponent.muteVolume(t.player,e,t.Wrappers,t),t.Wrapper.addChild(t.logituitMuteVolume))})))},showExitScreenIcon:function(){t.logituitFullScreen&&(t.logituitFullScreen.releaseResource(),t.Wrapper.removeChild(t.logituitFullScreen),delete t.logituitFullScreen,t.logituitFullScreen=null),t.fullScreenComponent&&(delete t.fullScreenComponent,t.fullScreenComponent=null),t.logituitExitScreen||!(t.isMobile()&&t.iosMobile()&&t.isLandscape())&&t.iosMobile()||t.uiStyleOption.forEach((function(e){"exit-fullScreen"==e.control&&(t.exitScreenComponent=new logituitExitScreenComponent,t.logituitExitScreen=new t.exitScreenComponent.exitScreenObj(t.player,e,t),t.Wrapper.addChild(t.logituitExitScreen))}))},showFullScreenIcon:function(){t.logituitExitScreen&&(t.logituitExitScreen.releaseResource(),t.Wrapper.removeChild(t.logituitExitScreen),delete t.logituitExitScreen,t.logituitExitScreen=null),t.exitScreenComponent&&(delete t.exitScreenComponent,t.exitScreenComponent=null),t.logituitFullScreen||!(t.isMobile()&&t.iosMobile()&&t.isLandscape())&&t.iosMobile()||t.uiStyleOption.forEach((function(e){"fullScreen"==e.control&&(t.fullScreenComponent=new logituitFullScreenComponent,t.logituitFullScreen=new t.fullScreenComponent.fullScreenObj(t.player,e,t),t.getMiniplayerState()||t.Wrapper.addChild(t.logituitFullScreen))}))},showErrorMsg(){t.logituitErrorMsg&&(t.eventManager.errorMsgVisible=!0,t.logituitErrorMsg.showErrorMsg())},removeErrorMsg(){t.logituitErrorMsg&&t.logituitErrorMsg.removeErrorMsg()},showPlayIcon:function(){t.logituitPause&&(t.logituitPause.releaseResource(),t.Wrapper.removeChild(t.logituitPause),delete t.logituitPause,t.logituitPause=null),t.pauseComponent&&(delete t.pauseComponent,t.pauseComponent=null),t.uiStyleOption.forEach((function(e){"play_pause"!=e.control||t.logituitPlayPause||(t.playPauseComponent=new logituitPlayPauseComponent,t.logituitPlayPause=new t.playPauseComponent.playPause(t.player,e,t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(t.logituitPlayPause))}))},showPauseIcon:function(){t.logituitPlayPause&&(t.logituitPlayPause.releaseResource(),t.Wrapper.removeChild(t.logituitPlayPause),delete t.logituitPlayPause,t.logituitPlayPause=null),t.playPauseComponent&&(delete t.playPauseComponent,t.playPauseComponent=null),t.uiStyleOption&&t.uiStyleOption.forEach((function(e){"pauseButton"!=e.control||t.logituitPause||(t.pauseComponent=new logituitPauseButton,t.logituitPause=new t.pauseComponent.pauseButton(t.player,e,t.Wrapper,t.baseOptions,t),t.Wrapper.addChild(t.logituitPause))}))},setVideoQuality:function(e){t.eventManager.selectedBitrate=e},getVideoQuality:function(){return t.eventManager.selectedBitrate},setAudioLanguage:function(e){localStorage.setItem("selectedAudioLanguage",e),t.eventManager.selectedAudioLanguage=e},getAudioLanguage:function(){return localStorage.getItem("selectedAudioLanguage")},setSubtitleLanguage:function(e){localStorage.setItem("selectedSubtitleLanguage",e),t.eventManager.selectedSubtitleLanguage=e},getSubtitleLanguage:function(){return localStorage.getItem("selectedSubtitleLanguage")},setAudioQuality:function(e){t.eventManager.selectedAudioQuality=e},getAudioQuality:function(){return t.eventManager.selectedAudioQuality},setAllEpisodeSeason:function(e){a=e},getAllEpisodeSeason:function(){return a},setAllEpisode:function(e){s=e},getAllEpisode:function(){return s},setMiniplayerState(e){r=e},getMiniplayerState:()=>r,releaseResourceFromEventManager(){t.releaseResource(),t.Wrapper=this.initializeWrapperLayout({style:{position:"absolute;",top:"0;",height:"100%;",width:"100%;"}},player),setTimeout((function(){t.uiStyleOption.forEach((function(e){"miniPlayerExpand"==e.control&&(t.miniplayerExpandComponent=new logituitMiniplayerExpandComponent,t.logituitMiniplayerExpandButton=new t.miniplayerExpandComponent.expandButton(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.logituitMiniplayerExpandButton)),"miniPlayerClose"==e.control&&(t.miniplayerCloseComponent=new logituitMiniplayerCloseComponent,t.logituitMiniplayerCloseButton=new t.miniplayerCloseComponent.closeButton(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.logituitMiniplayerCloseButton)),"miniPlayerPlay"==e.control&&(t.miniplayerPlayComponent=new logituitMiniplayerPlayComponent,t.logituitMiniplayerPlayButton=new t.miniplayerPlayComponent.playButton(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.logituitMiniplayerPlayButton)),"miniplayerEpisodeTitle"==e.control&&(t.miniplayerEpisodeTitleComponent=new logituitMiniplayerEpisodeTitleComponent,t.logituitMiniplayerEpisodeTitle=new t.miniplayerEpisodeTitleComponent.miniplayerEpisodeTitle(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.logituitMiniplayerEpisodeTitle)),"miniplayerTitle"==e.control&&(t.miniplayerTitleComponent=new logituitMiniplayerTitleComponent,t.logituitMiniplayerTitle=new t.miniplayerTitleComponent.miniplayerTitle(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.logituitMiniplayerTitle)),"miniplayerErrorMsg"==e.control&&(t.logituitMiniplayerErrorComponent=new logituitMiniplayerErrorMessageComponent,t.logituitMiniplayerError=new t.logituitMiniplayerErrorComponent.miniplayerErrorMessage(player,e,t),t.Wrapper.addChild(t.logituitMiniplayerError))}))}),700),t.player.addChild(t.Wrapper)},initializeResources(){t.logituitMiniplayerTitle&&(t.logituitMiniplayerTitle.releaseResource(),t.Wrapper.removeChild(t.logituitMiniplayerTitle),delete t.logituitMiniplayerTitle,t.logituitMiniplayerTitle=null),t.miniplayerTitleComponent&&(delete t.miniplayerTitleComponent,t.miniplayerTitleComponent=null),t.logituitMiniplayerEpisodeTitle&&(t.logituitMiniplayerEpisodeTitle.releaseResource(),t.Wrapper.removeChild(t.logituitMiniplayerEpisodeTitle),delete t.logituitMiniplayerEpisodeTitle,t.logituitMiniplayerEpisodeTitle=null),t.miniplayerEpisodeTitleComponent&&(delete t.miniplayerEpisodeTitleComponent,t.miniplayerEpisodeTitleComponent=null),t.logituitMiniplayerPlayButton&&(t.logituitMiniplayerPlayButton.releaseResource(),t.Wrapper.removeChild(t.logituitMiniplayerPlayButton),delete t.logituitMiniplayerPlayButton,t.logituitMiniplayerPlayButton=null),t.miniplayerPlayComponent&&(delete t.miniplayerPlayComponent,t.miniplayerPlayComponent=null),t.logituitMiniplayerExpandButton&&(t.logituitMiniplayerExpandButton.releaseResource(),t.Wrapper.removeChild(t.logituitMiniplayerExpandButton),delete t.logituitMiniplayerExpandButton,t.logituitMiniplayerExpandButton=null),t.miniplayerExpandComponent&&(delete t.miniplayerExpandComponent,t.miniplayerExpandComponent=null),t.logituitMiniplayerCloseButton&&(t.logituitMiniplayerCloseButton.releaseResource(),t.Wrapper.removeChild(t.logituitMiniplayerCloseButton),delete t.logituitMiniplayerCloseButton,t.logituitMiniplayerCloseButton=null),t.miniplayerCloseComponent&&(delete t.miniplayerCloseComponent,t.miniplayerCloseComponent=null),t.logituitFullscreenRecommendedPopupButton&&(t.logituitFullscreenRecommendedPopupButton.releaseResource(),t.Wrapper.removeChild(t.logituitFullscreenRecommendedPopupButton),delete t.logituitFullscreenRecommendedPopupButton,t.logituitFullscreenRecommendedPopupButton=null),t.fullscreenRecommendedPopupComponent&&(delete t.fullscreenRecommendedPopupComponent,t.fullscreenRecommendedPopupComponent=null),t.logituitMiniplayerWatchNow&&(t.logituitMiniplayerWatchNow.releaseResource(),t.Wrapper.removeChild(t.logituitMiniplayerWatchNow),delete t.logituitMiniplayerWatchNow,t.logituitMiniplayerWatchNow=null),t.miniplayerWatchNowComponent&&(delete t.miniplayerWatchNowComponent,t.miniplayerWatchNowComponent=null),t.player.removeChild(t.Wrapper),delete t.Wrapper,t.Wrapper=null,t.eventManager.initializeUiResources(),t.eventManager.skipIntroVisible=!1,t.eventManager.skipRecapVisible=!1;try{const e=t.getNextVolume()||1;t.player.volume(e),t.player.muted()?o.querySelectorAll(".vjs-volume-level")[1].style.width="0%":o.querySelectorAll(".vjs-volume-level")[1].style.width=100*e+"%"}catch(e){console.error(e)}},showMiniPlayer(){t.logituitMiniPlayer.showMiniplayer()},showMiniPlayerAtEndOfPlayback(){t.logituitMiniPlayer.showMiniPlayerAtEndOfPlayback()},releaseResourceFromMiniplayerEndOfPlayback(){t.releaseResource(),t.Wrapper=this.initializeWrapperLayout({style:{position:"absolute;",top:"0;",height:"100%;",width:"100%;"}},player),t.uiStyleOption.forEach((function(e){"miniPlayerExpand"==e.control&&(t.miniplayerExpandComponent=new logituitMiniplayerExpandComponent,t.logituitMiniplayerExpandButton=new t.miniplayerExpandComponent.expandButton(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.logituitMiniplayerExpandButton)),"miniplayerWatchingNow"==e.control&&(t.miniplayerWatchNowComponent=new logituitMiniplayerWatchNowComponent,t.logituitMiniplayerWatchNow=new t.miniplayerWatchNowComponent.miniplayerWatchNow(t.player,e,t,t.baseOptions,!0),t.Wrapper.addChild(t.logituitMiniplayerWatchNow)),"miniplayerEpisodeTitle"==e.control&&(t.miniplayerEpisodeTitleComponent=new logituitMiniplayerEpisodeTitleComponent,t.logituitMiniplayerEpisodeTitle=new t.miniplayerEpisodeTitleComponent.miniplayerEpisodeTitle(t.player,e,t,t.baseOptions,!0),t.Wrapper.addChild(t.logituitMiniplayerEpisodeTitle)),"miniplayerTitle"==e.control&&(t.miniplayerTitleComponent=new logituitMiniplayerTitleComponent,t.logituitMiniplayerTitle=new t.miniplayerTitleComponent.miniplayerTitle(t.player,e,t,t.baseOptions,!0),t.Wrapper.addChild(t.logituitMiniplayerTitle))})),t.player.addChild(t.Wrapper)},showMuteIcon(){t.logituitVolume.showMuteIcon()},showVolumeIcon(){t.logituitVolume&&t.logituitVolume.showVolumeIcon()},onLine(){t.eventManager.onLine()},showUnmuteIcon(){t.uiStyleOption.forEach((function(e){"MobileMuteVolume"==e.control&&!t.logituitMuteMobileVolume&&t.iPhone()&&t.player.muted()&&(t.muteMobileVolumeComponent=new logituitMuteVolumeMobileComponent,t.logituitMuteMobileVolume=new t.muteMobileVolumeComponent.MuteMobileVolume(t.player,e,t.Wrapper,t),t.Wrapper.addChild(t.logituitMuteMobileVolume))}))},removeUnmuteIcon(){t.logituitMuteMobileVolume&&(t.logituitMuteMobileVolume.releaseResource(),t.Wrapper.removeChild(t.logituitMuteMobileVolume),delete t.logituitMuteMobileVolume,t.logituitMuteMobileVolume=null),t.muteMobileVolumeComponent&&(delete t.muteMobileVolumeComponent,t.muteMobileVolumeComponent=null)},setAllEpisodeData(e){t.baseOptions.allEpisodeData=e},showdivider(){},setNextVolume:function(e){localStorage.setItem("setNextVideoVolume",e)},getNextVolume:function(){return localStorage.getItem("setNextVideoVolume")||t.eventManager.setNextVideoVolume},setMuteIcon:function(e){t.eventManager.ismute=e},getMuteIcon:function(){return t.eventManager.ismute},setMuteState:function(e){localStorage.setItem("muteState",e)},getMuteState:function(){return localStorage.getItem("muteState")},showMiniplayerNoInternetError(){t.logituitMiniplayerError&&t.logituitMiniplayerError.show()},removeMiniplayerNoInternetError(){t.logituitMiniplayerError&&t.logituitMiniplayerError.hide()},playPauseButtonState(){t.logituitMiniplayerPlayButton&&t.logituitMiniplayerPlayButton.online()},showControlsFromEventManager(){t.eventManager.showControls()},hideControlsWithTimeEventmanager(){t.eventManager.hideControlsTimeout()},clearTimeoutOfEventmanager(){t.eventManager.clearControlsTimeout()},showMiniPlayerPlayicon(){t.logituitMiniplayerPlayButton&&(t.logituitMiniplayerPlayButton.releaseResource(),t.Wrapper.removeChild(t.logituitMiniplayerPlayButton),delete t.logituitMiniplayerPlayButton,t.logituitMiniplayerPlayButton=null),t.miniplayerPlayComponent&&(delete t.miniplayerPlayComponent,t.miniplayerPlayComponent=null),t.uiStyleOption.forEach((function(e){"miniPlayerPlay"==e.control&&(t.miniplayerPlayComponent=new logituitMiniplayerPlayComponent,t.logituitMiniplayerPlayButton=new t.miniplayerPlayComponent.playButton(t.player,e,t,t.baseOptions),t.Wrapper.addChild(t.logituitMiniplayerPlayButton))}))},isVideoEnded:()=>t.eventManager.videoEnded,setVideoEnded(e){t.eventManager.videoEnded=e},sortTracks(e){try{for(let t=0;t<e.tracks_.length;t++)for(let n=0;n<t;n++)if(e.tracks_[t].label<e.tracks_[n].label){let i=e.tracks_[t];e.tracks_[t]=e.tracks_[n],e.tracks_[n]=i}}catch(e){}return e},showNextEpisodeButton(){t.uiStyleOption.forEach((function(e){t.logituitExpisodeButton||"episode"!=e.control||"Episode"!=t.baseOptions.assetType||(t.episodeButtonComponent=new logituitEpisodeButtonComponent,t.logituitExpisodeButton=new t.episodeButtonComponent.episodeButton(t.player,e,t),t.Wrapper.addChild(t.logituitExpisodeButton))}))}}),videojs.registerComponent("UIEngine",this.UIEngine)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */videojs.registerComponent("WrapperComponent",WrapperComponent);var TVKeyEvent={};function adsEngine(){this.videoPlayer,this.videoId,this.contentPlayer,this.startEvent;var e=this;this.adsConfig,this.initializePlugin=async function(t,n,i,r){e.videoPlayer=t,e.videoId=n,e.adsConfig=i,e.eventManager=r;try{e.videoPlayer.ima({id:n,adTagUrl:e.adsConfig.adsUrl,adsRenderingSettings:{autoAlign:!0,bitrate:e.adsConfig.bitrate,enablePreloading:e.adsConfig.enablePreloading,loadVideoTimeout:e.adsConfig.loadVideoTimeout},adsManagerLoadedCallback:e.eventManager.adsManagerLoadedCallback.bind(this),contribAdsSettings:{prerollTimeout:3e3,timeout:3e3,debug:!0},preventLateAdStart:!0}),e.configurePlugin()}catch(e){Logger.error("Exception e",e)}},this.playAdsMuted=function(){Logger.debug("############ ads muted")},this.configurePlugin=function(){document.getElementById(e.videoId+"_ima-ad-container").style.top="0px",e.contentPlayer=document.getElementById(e.videoId+"_html5_api"),(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&e.contentPlayer.hasAttribute("controls")&&e.contentPlayer.removeAttribute("controls"),e.startEvent="click",(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&(e.startEvent="touchend"),document.getElementById(e.videoId).addEventListener(e.startEvent,t)},destroyPlugin=function(){},this.releaseResouces=function(){};var t=function(){e.videoPlayer.ima&&e.videoPlayer.ima.initializeAdDisplayContainer(),document.getElementById(e.videoId).removeEventListener(e.startEvent,t)}}function serviceFactory(){this.serviceEndpoints,this.apibase="AGL",this.version="1.4",this.cluster="A",this.language="ENG",this.platform="WEB",this.epg="EPG",this.countryapiresponse="IN/",this.token="",this.country="IN/";var e=this;this.baseurl="https://apidev.sonyliv.com",this.platformurl="",this.environment="development","localhost"==location.host?this.environment="development":"sonyliv.com"==location.host?this.environment="production":"preprod-web.sonliv.com"==location.host?this.environment="preproduction":"logixdev2.sonyliv.com"==location.host||"logixqa2.sonyliv.com"==location.host?this.environment="development":this.environment="preproduction","development"==this.environment?this.baseurl="https://apidev.sonyliv.com":"preproduction"==this.environment?this.baseurl="https://apipreprod.sonyliv.com":"qa"==this.environment||"production"==this.environment?this.baseurl="https://apiqa.sonyliv.com":this.baseurl="https://apidev.sonyliv.com",this.platformUrl=this.baseurl+"/"+this.apibase+"/"+this.version+"/"+this.cluster+"/"+this.language+"/"+this.platform+"/",this.setEnvironment=function(e){this.baseurl=e,this.platformUrl=this.baseurl+"/"+this.apibase+"/"+this.version+"/"+this.cluster+"/"+this.language+"/"+this.platform+"/",Logger.debug("Setting Environment ",e)},this.serviceEndpoints={getCountry:"ALL/USER/ULD",GetToken:"ALL/GETTOKEN",Detail:"DETAIL/",getEpisode:"CONTENT/DETAIL/BUNDLE/",getGroupOfBundel:"CONTENT/DETAIL/GROUP_OF_BUNDLES/",nextEpisode:"CONTENT/NEXTANDPREVIOUS/",next:"CONTENT/NEXT/",preview:"PREVIEW/GETUSERPLAYBACKPREVIEWDETAILS",DrmLicence:"CONTENT/GETLAURL",addXdr:"USER/XDR",deletXdr:"USER/XDR/DELETE?assetId=",addPrev:"PREVIEW/ADD"},this.getplayermetadata=function(){return new Promise((function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):200!=this.status&&this.status},n.open("GET","https://enstgappstorage.blob.core.windows.net/enstgcontentprofileresponses/bajirao_mastani_movie.json?sp=r&st=2020-10-21T08:48:35Z&se=2021-04-30T16:48:35Z&spr=https&sv=2019-12-12&sr=b&sig=YhI52i5AWJ8P8ySBzofCucj05owItXizSSPAIXu6m6w%3D",!0),n.send()}))},this.getSecurityToken=function(){return Logger.debug("security Token",this.token),this.token},this.setSecurityToken=function(e){e?this.token=e:Logger.debug("Token is not set",this.token),Logger.debug("security Token",this.token)},this.setAuthorization=function(e){e?this.authorization=e:Logger.debug("Auth is not set",this.authorization),Logger.debug("Auth Token",this.authorization)},this.initializeFactory=function(t){t&&(this.cluster=t.D1,this.language=t.D2,this.country=t.country,this.apibase=t.middleware,this.platform=t.platform,this.version=t.version,e.setEnvironment(t.basepath))},this.makeAPICall=function(e,t){var n=this,i=this.platformUrl+this.serviceEndpoints[e];return null==t&&(t="GET"),Logger.debug("realUrl",i),new Promise((function(e,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status?e(this.responseText):200!=this.status&&this.status,i()},r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("security-token",n.token),r.open(t,realurl,!0),r.send()}))},this.geEpisodeData=function(e){var t=this,n=this.platformUrl+t.countryapiresponse+"/"+this.serviceEndpoints.nextEpisode+e;return new Promise((function(e,i){var r=new XMLHttpRequest;r?(r.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):200!=this.status&&this.status},r.open("GET",n,!0),r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("security_token",t.token),"NA"!=t.authorization&&null!=t.authorization&&r.setRequestHeader("Authorization","Bearer "+t.authorization),r.send()):Logger.debug("OOPS xmlhttprequest is undefined",r)}))},this.getSeasonData=function(e,t,n){var i=this,r=this.platformUrl+i.countryapiresponse+this.serviceEndpoints.getEpisode+e+"?from="+t+"&to="+n;return new Promise((function(e,t){var n=new XMLHttpRequest;n?(n.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):200!=this.status&&this.readyState},n.open("GET",r,!0),n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("security_token",i.token),"NA"!=i.authorization&&null!=i.authorization&&n.setRequestHeader("Authorization","Bearer "+i.authorization),n.send()):Logger.debug("OOPS xmlhttprequest is undefined",n)}))},this.getAllSeasonData=function(e,t){var n=this,i=this.platformUrl+n.countryapiresponse+this.serviceEndpoints.getEpisode+e;return new Promise((function(e,r){var o=new XMLHttpRequest;o?(o.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):200!=this.status&&this.status},o.open("GET",i,!0),o.setRequestHeader("Content-type","application/json"),o.setRequestHeader("security_token",n.token),"NA"!=t&&null!=t&&o.setRequestHeader("Authorization","Bearer "+n.authorization),o.send()):Logger.debug("OOPS xmlhttprequest is undefined",o)}))},this.getVodDetail=function(e){var t=this,n=this.platformUrl+t.countryapiresponse+this.serviceEndpoints.Detail+e;return new Promise((function(e,i){var r=new XMLHttpRequest;r?(r.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):200!=this.status&&this.status},r.open("GET",n,!0),r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("security_token",t.token),"NA"!=t.authorization&&null!=t.authorization&&r.setRequestHeader("Authorization","Bearer "+t.authorization),r.send()):Logger.debug("OOPS xmlhttprequest is undefined",r)}))},this.nextContent=function(e){var t=this,n=this.platformUrl+t.countryapiresponse+this.serviceEndpoints.next+e;return new Promise((function(e,i){var r=new XMLHttpRequest;r?(r.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):4==this.readyState&&200!=this.status&&i(JSON.parse(this.responseText))},r.open("GET",n,!0),r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("security_token",t.token),"NA"!=t.authorization&&null!=t.authorization&&r.setRequestHeader("Authorization","Bearer "+t.authorization),r.send()):Logger.debug("OOPS xmlhttprequest is undefined",r)}))},this.getCountry=function(){var e=this,t=this.platformUrl+this.serviceEndpoints.getCountry;return new Promise((function(n,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status){let t=JSON.parse(this.responseText);e.countryapiresponse=t,n(JSON.parse(this.responseText))}},r.open("GET",t,!0),r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("security_token",e.token),r.send()}))},this.getToken=function(){var e=this,t=this.platformUrl+this.serviceEndpoints.GetToken;return new Promise((function(n,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status){let t=JSON.parse(this.responseText);e.token=t.resultObj,n(this.responseText)}},r.open("GET",t,!0),r.setRequestHeader("Content-type","application/json"),r.send()}))},this.getVideoData=function(e){try{return Logger.debug("server url",e),new Promise((function(t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&t(this.responseText)},i.open("GET",e,!0),i.send()}))}catch(e){document.getElementById("TVDevice").innerHTML=e+"catch2",Logger.debug("caught an error trying to create and add src to player:",e)}},this.createInterceptor=function(e,t){var n="sony",i=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);t&&t.DeviceID&&(n=t.DeviceID),videojs.browser.IS_ANY_SAFARI?videojs.Hls.xhr.beforeRequest=function(e){if(null!=i&&null!=e)return null==e.headers&&(e.headers={}),e.uri.indexOf(i[2])>=0&&(void 0!==e.headers["x-playback-session-id"]&&null!==e.headers["x-playback-session-id"]&&""!==e.headers["x-playback-session-id"]||(e.headers["x-playback-session-id"]=n)),e}:null!=window.xhook&&(window.xhook.enable(),window.xhook.before((function(e){null!=i&&void 0!==e.url&&null!==e.url&&(i.length<2||e.url.indexOf(i[2])>=0&&(void 0!==e.headers["x-playback-session-id"]&&null!==e.headers["x-playback-session-id"]&&""!==e.headers["x-playback-session-id"]||(e.headers["x-playback-session-id"]=n)))})))},this.continueWatchAddXDR=function(t,n,i){var r=Math.floor(i);localStorage.getItem("accessToken"),localStorage.getItem("security_token");let o=e.platformUrl+e.countryapiresponse+this.serviceEndpoints.addXdr;return new Promise((function(n,i){var a=new XMLHttpRequest;a.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&n(this.responseText)},a.open("POST",o,!0),a.setRequestHeader("Content-type","application/json"),"NA"!=e.authorization&&null!=e.authorization&&a.setRequestHeader("Authorization","Bearer "+e.authorization),a.setRequestHeader("security_token",e.token),a.setRequestHeader("x-via-device","true"),a.send(JSON.stringify([{assetId:t.contentId.toString(),offset:{assetDuration:1e3*t.duration,position:1e3*r},updatedTime:t.updateDate,isOnAir:t.isOnAir}]))}))},this.continueWatchDeleteXDR=function(t,n){localStorage.getItem("accessToken"),localStorage.getItem("security_token");let i=e.platformUrl+e.countryapiresponse+this.serviceEndpoints.deletXdr+t;return new Promise((function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&t(this.responseText)},r.open("POST",i,!0),r.setRequestHeader("Content-type","application/json"),"NA"!=e.authorization&&null!=e.authorization&&r.setRequestHeader("Authorization","Bearer "+e.authorization),r.setRequestHeader("security_token",e.token),r.setRequestHeader("x-via-device","true"),r.send()}))},this.addPreviewDetails=function(t,n,i){localStorage.getItem("accessToken"),localStorage.getItem("security_token");let r=e.platformUrl+e.countryapiresponse+this.serviceEndpoints.addPrev;var o=0,a=localStorage.getItem("durationConsumed"),s=localStorage.getItem("freePreviewTimer");return 0==a&&t.elapsedTime==t.previewDuration?o=t.previewDuration-s:0==a&&s>a?o=t.elapsedTime-s:0!=a&&(o=a-s),localStorage.setItem("durationConsumed",s),new Promise((function(n,a){var s=new XMLHttpRequest;s.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&n(this.responseText)},s.open("POST",r,!0),s.setRequestHeader("Content-type","application/json"),"NA"!=e.authorization&&null!=e.authorization&&s.setRequestHeader("Authorization","Bearer "+e.authorization),s.setRequestHeader("security_token",e.token),s.setRequestHeader("x-via-device","true"),s.send(JSON.stringify({deviceId:i,assetId:t.asset_id.toString(),previewConsumed:o,created_at:1582528869,previewDuration:parseInt(t.previewDuration)}))}))},this.getTimeLineMarker=function(e){return new Promise((function(t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&t(this.responseText)},i.open("GET",e,!0),i.send()}))},this.showThumbnail=function(e){Logger.debug("coming to tlm"),window.dispatchEvent(new CustomEvent("markerClick1",{detail:{marker:e}}))},this.switchPlayer=function(e){Logger.debug("coming to tlm"),window.dispatchEvent(new CustomEvent("markerClick2",{detail:{marker:e}}))},this.getPreviewDuration=function(t){let n=e.platformUrl+e.countryapiresponse+this.serviceEndpoints.preview;return new Promise((function(t,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&t(this.responseText)},r.open("POST",n,!0);localStorage.getItem("accessToken"),localStorage.getItem("security_token");r.setRequestHeader("Content-type","application/json"),"NA"!=e.authorization&&null!=e.authorization&&r.setRequestHeader("Authorization","Bearer "+e.authorization),r.setRequestHeader("security_token",e.token),r.send(JSON.stringify(previewRequest))}))},this.getDRMLicence=function(t){let n=e.platformUrl+e.countryapiresponse+this.serviceEndpoints.DrmLicence;return new Promise((function(t,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){Logger.debug("readystate",this.readyState,this.status),4==this.readyState&&200==this.status&&t(this.responseText)},r.open("POST",n,!0);var o=localStorage.getItem("accessToken");e.setAuthorization(o);localStorage.getItem("security_token");r.setRequestHeader("Content-type","application/json"),"NA"!=e.authorization&&null!=e.authorization&&r.setRequestHeader("Authorization","Bearer "+e.authorization),r.setRequestHeader("security_token",e.token),r.send(JSON.stringify(drmLicenceRequest))}))}}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitLogger(e){e?(Logger.useDefaults(),Logger.setLevel(Logger.ALL)):(Logger.useDefaults(),Logger.setLevel(Logger.WARN))}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function EventManager(){var e=!1;fullScreenEngine=new FullscreenEngine;var t=document;let n;this.orientationChanged=!1,this.logixplayerEvent,this.logixPlayerUiEvent,this.options=null,this.closeWatchNext=!1,this.isRecomendationClose=!1,this.nextCard=!1;this.playNextVideoFlag=!1,showNextVideoPopup=!1;var i,r=this,o=0,a=0;this.logituitPlayer;let l=!1;var u,d=!1,c=!1,p=!1;this.selectedBitrate="Auto",this.selectedAudioLanguage,this.setNextVideoVolume,this.ismute=!1,this.selectedSubtitleLanguage,this.selectedAudioQuality="Default";var f="READY",g="ABORT",m="PLAY",y="PAUSE",v="ENDED",_="STALLED",b="SUSPEND",E="CLOSE";function T(){r.options.playerControlsLayout;try{r.logituitPlayer.controlsLoaded||(r.logituitPlayer.controlsLoaded=!0,r.logituitUiManager=new logituitUiEngine,i=new r.logituitUiManager.UIEngine(n,r.options,r))}catch(e){Logger.error("UIEngine function exception: ",e)}}function C(e,t){if(n)try{var i=new CustomEvent(t,{detail:{event:e,currentTime:n.currentTime()}});r.logixplayerEvent.dispatchEvent(i)}catch(e){Logger.error("error in reportEventToApp",e)}}function S(e){r.playerState=f;try{C(e,"onPlayerReady")}catch(e){Logger.error("error in onplayerReady",e)}}function A(e){Logger.debug("onfullScreenChange"),window.matchMedia("(orientation: portrait)").matches||window.matchMedia("(orientation: landscape)").matches&&(window.screen.width<=920||window.screen.width<=1366&&r.isIPad())||r.iOSDevice()&&r.isLandscape()||r.isMobile()&&r.isLandscape()?n.isFullscreen()?i&&i.showExitScreenIcon():i&&i.showFullScreenIcon():n.isFullscreen()?(i&&!i.getMiniplayerState()&&i.showExitScreenIcon(),(1==r.skipIntroVisible||1==r.skipRecapVisible||r.nextCard||l)&&(i.hideFullscreen(),M())):(i&&!i.getMiniplayerState()&&i.showFullScreenIcon(),(1==r.skipIntroVisible||1==r.skipRecapVisible||r.nextCard||l)&&(i.hideFullscreen(),M()))}function k(o){new Date;document.hidden||d||(d=!0,Logger.debug(this,"orientation"),i&&(i.releaseResource(),delete i,i=null),M(),clearTimeout(u),r.isPlayerPaused||I(),setTimeout((function(){if(setTimeout((()=>{if(0==e)if(r.isPlayerPaused){n.pause(),setTimeout((()=>{navigator.userAgent,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?n.currentTime(n.currentTime()+1e-4):n.currentTime(n.currentTime())}),100)}else n.play()}),0),r.logituitUiManager)if(i=new r.logituitUiManager.UIEngine(n,r.options,r),r.videoEnded&&r.isMobile()&&n.currentTime(n.currentTime()),1==e&&r.iOSDevice()){P(),document.getElementsByTagName("video")[0].style.opacity="1";n.ima.getAdsManager()}else M(),clearTimeout(u),r.isPlayerPaused||I();if(i&&r.skipRecapVisible&&(r.isMobile()&&r.isLandscape()||r.isIPad())&&(P(),i.addSkipRecapButton(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)),i&&r.skipIntroVisible&&(r.isMobile()&&r.isLandscape()||r.isIPad())&&(P(),i.addSkipIntroButton(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)),n.ima&&"function"==typeof n.ima.getAdsManager){let e=getComputedStyle(n.el());w=parseFloat(e.width.replace("px","")),h=parseFloat(e.height.replace("px",""));let t=n.ima.getAdsManager();t&&t.resize(w,h,google.ima.ViewMode.NORMAL)}if(r.isMobile()&&"function"==typeof n.vttThumbnails?n.vttThumbnails({src:r.options.thumbnailUrl}):r.isMobile()&&n.vttThumbnails&&("function"==typeof n.vttThumbnails.resetFunc&&n.vttThumbnails.resetFunc(),"function"==typeof n.vttThumbnails.initializeThumbnailsFunc&&n.vttThumbnails.initializeThumbnailsFunc()),r.iosMobile()&&r.isLandscape()){var o=document.getElementsByClassName("logituit_currentTime"),a=document.getElementsByClassName("logituit_timeDivider"),s=document.getElementsByClassName("logituit_duration");o&&o[0]&&(o[0].style.right="90%"),a&&a[0]&&(a[0].style.right="calc(90.5% - 20px)"),s&&s[0]&&(s[0].style.left="11.1%")}r.iOSDevice()&&i&&n.muted()&&(i.removeUnmuteIcon(),i.showUnmuteIcon())}),0),d=!1)}function P(){l=!0;var t=document.getElementsByClassName("logituit_play"),n=document.getElementsByClassName("logituit_pause"),i=document.getElementsByClassName("logituit_volumePanel"),o=document.getElementsByClassName("logituit_MuteVolumePanel"),a=document.getElementsByClassName("logituit_subtitleButton"),s=document.getElementsByClassName("logituit_rewind"),u=document.getElementsByClassName("logituit_forward"),d=document.getElementsByClassName("logituit_fullscreen"),c=document.getElementsByClassName("logituit_exitscreen"),p=document.getElementsByClassName("logituit_seekbar"),h=document.getElementsByClassName("logituit_duration"),f=document.getElementsByClassName("logituit_videoQualityButton"),g=document.getElementsByClassName("logituit_videoQualitySettings"),m=document.getElementsByClassName("logituit_audioQualitySettings"),y=(document.getElementsByClassName("videoQualityPopup"),document.getElementsByClassName("subtitlePopup")),v=document.getElementsByClassName("audioPopup"),_=document.getElementsByClassName("videoQualityChildPopup"),b=document.getElementsByClassName("logituit_miniPlayer"),E=document.getElementsByClassName("logituit_currentTime"),T=document.getElementsByClassName("logituit_close"),C=document.getElementsByClassName("logituit_vjs-title-bar"),S=document.getElementsByClassName("logituit_volumeSlider"),w=document.getElementsByClassName("logituit_muteVolumeSlider"),A=document.getElementsByClassName("logituit_watermark"),k=document.getElementsByClassName("logituit_timeDivider"),P=document.getElementsByClassName("logituit_backbutton"),I=document.getElementsByClassName("logituit_morebutton"),L=document.getElementsByClassName("logituit_allEpisode"),M=document.getElementsByTagName("video"),R=document.getElementsByClassName("logituit_livebutton"),D=document.getElementsByClassName("logituit_vjs-episode-title-bar"),x=document.getElementsByClassName("logituit_allEpisodeIcon"),O=document.getElementsByClassName("logituit_divider"),N=document.getElementsByClassName("logituit_favorite"),B=document.getElementsByClassName("logituit_nextContent"),U=document.getElementsByClassName("logituit_previousContent");if(r.skipIntroVisible||r.skipRecapVisible){var F=document.getElementsByClassName("logituit_skipIntro"),j=document.getElementsByClassName("logituit_skiprecap");F&&F[0]&&(F[0].style.display="block"),j&&j[0]&&(j[0].style.display="block")}t&&t[0]&&(t[0].style.display="none"),n&&n[0]&&(n[0].style.display="none"),i&&i[0]&&(i[0].style.display="none"),L&&L[0]&&(L[0].style.display="none"),o&&o[0]&&(o[0].style.display="none"),a&&a[0]&&(a[0].style.display="none"),s&&s[0]&&(s[0].style.display="none"),u&&u[0]&&(u[0].style.display="none"),d&&d[0]&&(d[0].style.display="none"),c&&c[0]&&(c[0].style.display="none"),p&&p[0]&&(p[0].style.display="none"),h&&h[0]&&(h[0].style.display="none"),N&&N[0]&&(N[0].style.display="none"),B&&B[0]&&(B[0].style.display="none"),U&&U[0]&&(U[0].style.display="none"),f&&f[0]&&(f[0].style.display="none"),g&&g[0]&&(g[0].style.display="none"),m&&m[0]&&(m[0].style.display="none"),y&&y[0]&&(y[0].style.display="none"),v&&v[0]&&(v[0].style.display="none"),_&&_[0]&&(_[0].style.display="none"),b&&b[0]&&(b[0].style.display="none"),E&&E[0]&&(E[0].style.display="none"),T&&T[0]&&(T[0].style.display="none",T[1]&&(T[1].style.display="none")),0==e?r.skipRecapVisible||r.skipIntroVisible||showNextVideoPopup?(C&&C[0]&&(C[0].style.display="none"),D&&D[0]&&(D[0].style.display="none")):(C&&C[0]&&(C[0].style.display="block"),D&&D[0]&&(D[0].style.display="block")):(C&&C[0]&&(C[0].style.display="none"),D&&D[0]&&(D[0].style.display="none")),S&&S[0]&&(S[0].style.display="none"),w&&w[0]&&(w[0].style.display="none"),1==e?A&&A[0]&&(A[0].style.display="none"):A&&A[0]&&(A[0].style.display="block"),k&&k[0]&&(k[0].style.display="none"),P&&P[0]&&(P[0].style.display="none"),I&&I[0]&&(I[0].style.display="none"),M&&M[0],R&&R[0]&&(R[0].style.display="none"),x&&x[0]&&(x[0].style.display="none"),O&&O[0]&&(O[0].style.display="none")}function I(){if(r.showingMwebSettingsPopup)clearTimeout(u),M();else{var e=1e3*r.options.controlsDisappearTimerValue;u=setTimeout((function(){r.showingMwebSettingsPopup||(P(),c&&(c=!1))}),e)}}function L(){if(r.isPlayerPaused)u&&clearTimeout(u),r.skipRecapVisible||r.skipIntroVisible||M();else{r.options.controlsDisappearTimerValue;u&&clearTimeout(u),r.skipRecapVisible||r.skipIntroVisible||(M(),I())}}function M(){l=!1;var t=document.getElementsByClassName("vjs-tech");R()&&t&&t[0]&&(t[0].style.opacity="0.5"),clearTimeout(u);var o=document.getElementsByClassName("logituit_play"),a=document.getElementsByClassName("logituit_pause"),s=document.getElementsByClassName("logituit_volumePanel"),d=document.getElementsByClassName("logituit_MuteVolumePanel"),c=document.getElementsByClassName("logituit_subtitleButton"),p=document.getElementsByClassName("logituit_rewind"),h=document.getElementsByClassName("logituit_forward"),f=document.getElementsByClassName("logituit_fullscreen"),g=document.getElementsByClassName("logituit_exitscreen"),m=document.getElementsByClassName("logituit_seekbar"),y=document.getElementsByClassName("logituit_duration"),v=document.getElementsByClassName("logituit_videoQualityButton"),_=document.getElementsByClassName("logituit_videoQualitySettings"),b=document.getElementsByClassName("logituit_audioQualitySettings"),E=(document.getElementsByClassName("videoQualityPopup"),document.getElementsByClassName("subtitlePopup")),T=document.getElementsByClassName("audioPopup"),C=document.getElementsByClassName("videoQualityChildPopup"),S=document.getElementsByClassName("logituit_miniPlayer"),w=document.getElementsByClassName("logituit_currentTime"),A=document.getElementsByClassName("logituit_close"),k=document.getElementsByClassName("logituit_vjs-title-bar"),P=document.getElementsByClassName("logituit_volumeSlider"),I=document.getElementsByClassName("logituit_muteVolumeSlider"),L=document.getElementsByClassName("logituit_watermark"),M=document.getElementsByClassName("logituit_timeDivider"),D=document.getElementsByClassName("logituit_backbutton"),x=document.getElementsByClassName("logituit_morebutton"),O=document.getElementsByClassName("logituit_allEpisode"),N=document.getElementsByTagName("video"),B=document.getElementsByClassName("logituit_livebutton"),U=document.getElementsByClassName("logituit_vjs-episode-title-bar"),F=document.getElementsByClassName("logituit_allEpisodeIcon"),j=document.getElementsByClassName("logituit_divider"),q=document.getElementsByClassName("logituit_favorite"),V=document.getElementsByClassName("logituit_nextContent"),H=document.getElementsByClassName("logituit_previousContent"),W=document.getElementsByClassName("logituit_skipIntro"),G=document.getElementsByClassName("logituit_skiprecap");1!=showNextVideoPopup&&1!=e&&(!r.isMobile()||r.isMobile()&&!r.isLandscape()||r.isMobile()&&r.isLandscape())&&(W&&W[0]&&(W[0].style.display="none"),G&&G[0]&&(G[0].style.display="none"),O&&O[0]&&(O[0].style.display="block"),o&&o[0]&&(o[0].style.display="block"),a&&a[0]&&(a[0].style.display="block"),s&&s[0]&&(s[0].style.display="block"),d&&d[0]&&(d[0].style.display="block"),c&&c[0]&&(c[0].style.display="block"),1!=r.options.isLive?(p&&p[0]&&(p[0].style.display="block"),h&&h[0]&&(h[0].style.display="block")):(p&&p[0]&&(p[0].style.display="none"),h&&h[0]&&(h[0].style.display="none")),f&&f[0]&&(f[0].style.display="block"),g&&g[0]&&(g[0].style.display="block"),m&&m[0]&&(m[0].style.display="block"),y&&y[0]&&(y[0].style.display="block"),v&&v[0]&&(v[0].style.display="block"),_&&_[0]&&(_[0].style.display="block"),b&&b[0]&&(b[0].style.display="block"),E&&E[0]&&(E[0].style.display="block"),T&&T[0]&&(T[0].style.display="block"),C&&C[0]&&(C[0].style.display="block"),S&&S[0]&&(S[0].style.display="block"),w&&w[0]&&(w[0].style.display="block"),A&&A[0]&&(A[0].style.display="block",A[1]&&(A[1].style.display="block")),k&&k[0]&&(k[0].style.display="block"),U&&U[0]&&(U[0].style.display="block"),P&&P[0]&&(P[0].style.display="block"),I&&I[0]&&(I[0].style.display="block"),L&&L[0]&&(L[0].style.display="none"),M&&M[0]&&(M[0].style.display="block"),D&&D[0]&&(D[0].style.display="block"),q&&q[0]&&(q[0].style.display="block"),V&&V[0]&&(V[0].style.display="block"),H&&H[0]&&(H[0].style.display="block"),x&&x[0]&&(x[0].style.display="block"),N&&N[0],t&&t[0],B&&B[0]&&(B[0].style.display="block"),F&&F[0]&&(F[0].style.display="block"),j&&j[0]&&(j[0].style.display="block")),n.paused()?i&&!i.getMiniplayerState()&&r.nextCard:!i||i.getMiniplayerState()||r.nextCard||i.showPauseIcon(),i&&0==n.volume()&&!i.getMiniplayerState()?i.muteVolumeIcon():!i||n.muted()||i.getMiniplayerState()||i.displayVolumeIcon()}function R(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}function D(t){if(document.hidden)r.iOSDevice()&&r.isMobile()&&r.isTablet()||0==r.logituitPlayer.bumperVideo&&n.pause();else{r.playerState=m,!i||l||i.getMiniplayerState()||r.nextCard||r.skipRecapVisible||r.skipIntroVisible||i.addMobileAudioQualityPopup||(i.showPauseIcon(),clearTimeout(u),M(),I()),r.videoEnded&&r.isMobile()&&(i.showPlayIcon(),n.currentTime(n.duration())),r.isTablet()&&(!i||!i.getMiniplayerState()||r.nextCard||r.skipRecapVisible||r.skipIntroVisible||i.showMiniPlayerPlayicon()),(r.isMobile()||r.isTablet())&&(0==window.navigator.onLine?n.paused()||n.pause():i&&!i.getMiniplayerState()&&i.showPauseIcon()),r.iOSDevice()&&i&&n.muted()&&i.showUnmuteIcon(),1==e&&P(),Logger.debug("#####onPlay#####",t);try{r.isPlayerPaused=!1,(R()&&!r.isPlayerPaused||r.isIPad()||r.isTablet())&&I(),C(t,"onPlay")}catch(e){Logger.error("error in play",e)}}}function x(e){r.playerState=g;try{C(e,"onAbort"),Logger.debug("abort Event Triggered")}catch(e){Logger.error("error in onAbort ==>",e)}}function O(e){try{e.stopImmediatePropagation(),C(e,"onError"),Logger.debug("onerror Errror",e)}catch(e){Logger.error("error in onerror event",e)}}function N(e){i&&("Movie"==r.options.assetType?i.createWatchNow(endTime,startTime,r.options.next_content):"Episode"==r.options.assetType&&i.createNextEpisode(endTime,startTime,r.options.next_content))}function B(e){try{var t=new SubtitleEngine;let e=document.getElementById(n.id_+"_html5_api");t.subtitleConfig(e,r.options.subtitles,n)}catch(e){}try{try{r.isIPad()||r.isSafari()||r.options.isLive&&n.volume(i.getNextVolume()),n.volume(i.getNextVolume()),r.isSafari()&&!r.iOSDevice()&&n.muted(!1)}catch(e){}C(e,"onLoadedMetadata"),setTimeout((function(){r.options.isContinueWatch&&(n.currentTime(r.options.startTime),Logger.debug("continue watch 1: ",r.options.isContinueWatch,r.options.startTime))}),100);try{n.disablePictureInPicture(!0)}catch(e){}}catch(e){Logger.error("error in onLoadmetadata event",e)}}this.isVolumeChanging=!1,this.playerState,this.isPlayerPaused=!0,this.seekTime=0,this.adsManager,this.skipRecapVisible=!1,this.skipIntroVisible=!1,this.errorMsgVisible=!1,this.showingMwebSettingsPopup=!1,this.videoEnded=!1,this.videoStalled=!1,this.videoSuspended=!1,this.videoClosed=!1,this.eventManagerErrroMsgComponent,this.eventManagerLogituitErrorMsg,this.uiJson,this.watchNextCardEvent=!1,this.nextEpisodeCardEvent=!1,this.postRollPlayed,this.getPlayerState=function(){return r.playerState},this.getSelectedQualityBitrate=function(){return r.selectedBitrate},this.getSelectedAudioLanguage=function(){return localStorage.getItem("selectedAudioLanguage")},this.getSelectedSubtitleLanguage=function(){return localStorage.getItem("selectedSubtitleLanguage")},this.releaseResources=function(){i&&(r.logituitPlayer.controlsLoaded=!1,i.releaseResource(),delete i,i=null)},this.onLine=function(e){r.errorMsgVisible&&(i?i.removeErrorMsg():(n.removeChild(r.eventManagerLogituitErrorMsg),r.eventManagerLogituitErrorMsg&&(r.eventManagerLogituitErrorMsg.releaseResource(),delete r.eventManagerLogituitErrorMsg,r.eventManagerLogituitErrorMsg=null),r.eventManagerErrroMsgComponent&&(delete r.eventManagerErrroMsgComponent,r.eventManagerErrroMsgComponent=null)),setTimeout((()=>{(r.isTablet()||r.isIPad())&&n.paused()&&n.play()}),1e3),n.paused()&&n.play(),t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0),M(),r.errorMsgVisible=!1)},this.initializeUiResources=function(){r.logituitPlayer.controlsLoaded=!0,i=new r.logituitUiManager.UIEngine(n,r.options,r)},this.drmNextVideo=function(){1==r.options.isEncrypted&&n.src(n.src())},this.initializeResources=function(){t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0),t.addEventListener("keydown",U,!0),r.selectedBitrate="Auto",r.selectedAudioLanguage=void 0,r.selectedSubtitleLanguage=void 0,r.selectedAudioQuality="Default",T(),i.showPauseIcon(),n.volume(r.setNextVideoVolume),"true"==i.getMuteState()?(n.muted(!0),i.showMuteIcon()):(i.displayVolumeIcon(),i.showVolumeIcon()),r.iOSDevice()&&n.paused()&&n.play()},this.configureVolumeSlider=function(){t.querySelectorAll(".logituit_volumeSlider")[0];t.querySelectorAll(".vjs-volume-level")&&t.querySelectorAll(".vjs-volume-level")[1]&&(t.querySelectorAll(".vjs-volume-level")[1].removeEventListener("mousedown",r.volumeMouseDown),t.querySelectorAll(".vjs-volume-level")[1].addEventListener("mousedown",r.volumeMouseDown),t.removeEventListener("mouseup",r.volumeMouseUp),t.addEventListener("mouseup",r.volumeMouseUp),t.removeEventListener("mousemove",r.volumeMouseMove),t.addEventListener("mousemove",r.volumeMouseMove))},this.volumeMouseDown=e=>{this.isVolumeChanging=!0;const n=t.querySelectorAll(".logituit_volumeSlider")[0];n&&(n.style.visibility="visible")},this.volumeMouseMove=e=>{const n=t.querySelectorAll(".logituit_volumeSlider")[0];if(this.isVolumeChanging)try{n.style.visibility="visible"}catch(e){}},this.volumeMouseUp=e=>{const r=t.querySelectorAll(".logituit_volumeSlider")[0];this.isVolumeChanging,this.isVolumeChanging=!1,i.setNextVolume(n.volume()),n&&(i.getNextVolume()&&!n.muted()?i.setMuteIcon(!1):i.setMuteIcon(!0));try{r&&(r.style.visibility="")}catch(e){}},this.removeVolumeSliderListeners=function(){t.removeEventListener("mouseup",r.volumeMouseUp),t.removeEventListener("mousemove",r.volumeMouseMove)},this.initialize=function(e,o,a){r.options=o,n=e,r.logituitPlayer=a,r.options.autoplay&&(r.isPlayerPaused=!1);try{!function(e,o){try{if(Logger.debug("coming to logiplayer",e),n=e,null==e)return void Logger.debug("Player is null returning doRegisterEvents",e);r.logixPlayerUiEvent.addEventListener("onEpisodeSelected",(function(e){n.muted()?i.setMuteState(!0):i.setMuteState(!1)})),e.on("ready",S),e.on("fullscreenchange",A),e.on("abort",x),e.on("error",O),e.on("loadedmetadata",B),e.on("firstplay",q),e.on("progress",V),e.on("play",D),e.on("pause",H),e.on("timeupdate",W),e.on("loadeddata",ie),e.on("ended",G),e.on("touchstart",z),e.on("playnext",fe),e.on("closeWatchNext",r.closeWatchNextFunc),e.on("closeRecommendation",r.closeRecommendation),e.on("enterpictureinpicture",ge),e.on("leavepictureinpicture",ye),e.on("offline",me),e.on("ads-request",oe),e.on("ads-ad-started",ae),e.on("ads-manager",se),e.on("adprogress",le),e.on("readyforpreroll",de),e.on("readyforpostroll",ce),e.on("adtimeout",Ae),e.on("adserror",ue),e.on("ads-ad-contnetResumed",pe),e.on("ad-complete",he),e.on("adend",ve),e.on("adskip",_e),e.on("ads-click",be),e.on("ads-pause",Ee),e.on("ads-resume",Te),e.on("all-ads-completed",Ce),e.on("adslog",onAdLog),e.on("loadstart",K),e.on("ratechange",Y),e.on("stalled",Q),e.on("suspend",X),e.on("playing",$),e.on("seeked",J),e.on("seeking",Z),e.on("volumechange",ee),e.on("waiting",te),e.on("resolutionchange",ne),e.on("close",re),e.on("recomendation",r.showRecommendation),e.on("nextVideo",N),navigator.userAgent.indexOf("Tizen")>-1||navigator.userAgent.indexOf("Web0S")>-1||window.screen.width>=481&&window.screen.width<=920||window.screen.width<=480||e.on("mousemove",L),window.addEventListener("orientationchange",k),window.addEventListener("offline",me,isConnected=!1),window.addEventListener("visibilitychange",Se),t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0)}catch(e){Logger.error("error in doRegisterEvents",e)}}(e)}catch(e){Logger.error("error from doRegisterevents",e)}return{playerEventListener:r.logixplayerEvent,playerUIListener:r.logixPlayerUiEvent}},r.duration=function(){this.logixPlayer&&this.logixPlayer.duration()},this.reportEventToEventManager=function(e){try{"qualityChanged"==e.type&&(r.selectedBitrate=e.detail.selectedBitrate),"audioLanguageChanged"==e.type&&(r.selectedAudioLanguage=e.detail.audioSelected),"subtitleLanguageChanged"==e.type&&(r.selectedSubtitleLanguage=e.detail.subtitleSelected),r.logixPlayerUiEvent.dispatchEvent(e)}catch(e){Logger.error("error getting the event in event manager: ",e)}},this.releaseResource=function(){r.logituitPlayer.controlsLoaded=!1,function(e){try{Logger.debug("coming to logiplayer",e),r.logixPlayerUiEvent.removeEventListener("onEpisodeSelected",(function(e){})),e.off("ready",S),e.off("fullscreenchange",A),e.off("adskip",_e),e.off("abort",x),e.off("error",O),e.off("loadedmetadata",B),e.off("firstplay",q),e.off("progress",V),e.off("play",D),e.off("pause",H),e.off("timeupdate",W),e.off("loadeddata",ie),e.off("ended",G),e.off("enterpictureinpicture",ge),e.off("leavepictureinpicture",ye),e.off("loadstart",K),e.off("ratechange",Y),e.off("offline",me),e.off("stalled",Q),e.off("suspend",X),e.off("playing",$),e.off("seeked",onseeked),e.off("seeking",onseeking),e.off("volumechange",ee),e.off("waiting",te),e.off("resolutionchange",ne),e.off("close",re),e.off("touchstart",z),e.off("recomendation",r.showRecommendation),e.off("nextVideo",N),window.removeEventListener("orientationchange",k),window.removeEventListener("offline",me),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),t.removeEventListener("keydown",U,!0)}catch(e){Logger.error("error in doremoveevent",e)}}(n),i&&i.releaseResource()},this.initResource=function(){this.initializeResources()},this.uiManagerInitializeResources=function(){i.initializeResources()},playAd=function(){n.src(r.options.adsConfig.adsUrl),n.ads.startLinearAdMode(),n.trigger("ads-ad-started"),n.one("adended",(function(){n.trigger("ads-ad-ended"),n.ads.endLinearAdMode()}))},this.adsManagerLoadedCallback=function(){for(var e=[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE],t=0;t<e.length;t++)n&&n.ima&&(n.ima.addEventListener(e[t],onAdEvent.bind(this)),n.on("adslog",onAdLog.bind(this)))},onAdLog=function(e){Logger.debug("Ad log: "+e.data.AdError)},onAdEvent=function(e){var t="Ad event: "+e.type;Logger.debug(t)},log=function(e){},this.clearControlsTimeout=function(){clearTimeout(u)},this.showControls=M,this.hideControlsTimeout=I,this.showRecommendation=function(e){if(i&&null!=r.options.recommendations&&null!=r.options.recommendations&&"object"==typeof r.options.recommendations&&r.options.recommendations.length>0){i.showRecomendationScreen(r.options.recommendations);let e=new CustomEvent("showRecommendations",{detail:{}});r.reportEventToEventManager(e)}else if(null!=r.options.recommendations&&null!=r.options.recommendations&&"boolean"==typeof r.options.recommendations&&1==r.options.recommendations){showNextVideoPopup=!1;let e=new CustomEvent("showRecommendations",{detail:{}});r.reportEventToEventManager(e)}};function U(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 32:e.preventDefault()}}function F(e){if(i&&!i.getMiniplayerState()){try{var o=t.getElementById(n.id_)}catch(e){Logger.error(e)}var a;switch(o&&(a=o.querySelector(".video-js .vjs-volume-panel .vjs-volume-control logituit_volumePanel")),e.keyCode){case 37:e.preventDefault(),Logger.debug("left arrow pressed"),r.options.isLive||(n.currentTime(n.currentTime()-10),i&&i.showRewindAnimation());break;case 38:e.preventDefault(),Logger.debug("up arrow pressed"),n.isFullscreen()&&a&&(a.style.opacity="1",setTimeout((function(){a.style.removeProperty("opacity")}),2e3));var s=n.volume();n.volume(s+.1),n.muted()&&(n.muted(!1),n.volume(.1)),M(),I();break;case 39:e.preventDefault(),Logger.debug("right arrow pressed"),r.options.isLive||(n.currentTime(n.currentTime()+10),i&&i.showForwardAnimation());break;case 40:e.preventDefault(),Logger.debug("down arrow pressed"),n.isFullscreen()&&a&&(a.style.opacity="1",setTimeout((function(){a.style.removeProperty("opacity")}),2e3));s=n.volume();n.volume(s-.1),M(),I();break;case 32:e.preventDefault()}}}function j(e){if(i&&!i.getMiniplayerState()){try{var o=t.getElementById(n.id_)}catch(e){Logger.error(e)}o&&o.querySelector(".video-js .vjs-volume-panel .vjs-volume-control logituit_volumePanel");var a=e.keyCode;e.type;switch(a){case 27:Logger.debug("escape pressed"),re(e);break;case 32:e.preventDefault(),Logger.debug("event",e),Logger.debug("keycode",a),Logger.debug("space button is pressed"),n.paused()?(Logger.debug("in play...***"),n.play(),i&&(r.options.isLive&&(n.liveTracker.seekToLiveEdge(),i.setLiveFlag(!0)),l||(i.showPauseIcon(),clearTimeout(u),M(),I()),i.showPauseAnimation())):(Logger.debug("in pause...***"),n.pause(),i&&(r.options.isLive&&(n.liveTracker.seekToLiveEdge(),i.setLiveFlag(!1)),i.showPlayIcon(),i.showPlayAnimation(),clearTimeout(u),M()));break;case 40:case 38:case 37:case 39:break;case 73:Logger.debug("i pressed"),i&&(i.showMiniPlayer(),window.document.activeElement.blur(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0));break;case 70:Logger.debug("f pressed"),n.isFullscreen()?n.isFullscreen()&&i&&(n.exitFullscreen(),i.showFullScreenIcon()):i&&(n.requestFullscreen(),i.showExitScreenIcon());break;case 69:if(null!=r.options.allEpisodeData&&null!=r.options.allEpisodeData&&"object"==typeof r.options.allEpisodeData&&r.options.allEpisodeData.length>0){if(!r.options.isLive){i.createAllEpisode();new CustomEvent("onAllEpisodeIconClicked",{detail:{}})}}else if(null!=r.options.allEpisodeData&&null!=r.options.allEpisodeData&&"boolean"==typeof r.options.allEpisodeData&&!r.options.isLive){let e=new CustomEvent("onAllEpisodeIconClicked",{detail:{}});r.reportEventToEventManager(e)}}}}function q(e){try{C(e,"onFirstPlay"),Logger.debug("#####onfirstPlay#####")}catch(e){Logger.error("error in on first play event",e)}}function V(e){}function q(e){try{C(e,"onFirstPlay")}catch(e){Logger.error("error in on first play data event",e)}}function H(e){r.playerState=y,i&&!l&&!i.getMiniplayerState()&&!r.nextCard&&!r.skipRecapVisible&&r.skipIntroVisible,r.skipRecapVisible||r.skipIntroVisible||(clearTimeout(u),M()),(r.isTablet()||(r.isMobile()||r.iosMobile())&&i&&!i.getMiniplayerState())&&(!i||!i.getMiniplayerState()||r.nextCard||r.skipRecapVisible||r.skipIntroVisible?!i||i.getMiniplayerState()||r.nextCard||r.skipRecapVisible||r.skipIntroVisible||n.seeking()||i.showPlayIcon():i.showMiniPlayerPlayicon());try{r.isPlayerPaused=!0,R()&&r.isPlayerPaused&&(clearTimeout(u),M()),C(e,"onPause")}catch(e){Logger.error("error in on pause event",e)}}function W(e){if(r.logituitPlayer.bumperVideo);else{if(i&&!i.getMiniplayerState()&&!r.options.isLive){var o=n.currentTime(),a=Math.floor(o/60),s=Math.floor(o-60*a);if(a<60)var d=a<10?"0"+a:a;else if(a>=60){var h;h=(h=Math.floor(a/60))<10?"0"+h:h,d=(d=Math.floor(o/60%60))<10?"0"+d:d}var f=s<10?"0"+s:s;this.formattedTime_="",this.eventBusEl_.getElementsByClassName("vjs-current-time")[0].innerHTML=this.formattedTime_,a<=59?document.getElementsByClassName("logituit_currentTime")&&document.getElementsByClassName("logituit_currentTime")[0]&&(document.getElementsByClassName("logituit_currentTime")[0].innerHTML=d+":"+f):document.getElementsByClassName("logituit_currentTime")&&document.getElementsByClassName("logituit_currentTime")[0]&&(document.getElementsByClassName("logituit_currentTime")[0].innerHTML=h+":"+d+":"+f)}let k=window.navigator.onLine;if(k&&r.nextCard&&i.pauseTimer(!0),k||(t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)),n.duration()-n.currentTime()>=1&&(p=!1),r.isMobile()&&!r.isLandscape())r.skipRecapVisible&&(clearTimeout(u),M(),I(),r.skipRecapVisible=!1);else if(r.isMobile()&&r.isLandscape()||r.isIPad()||r.isTablet()){if(r.skipRecapVisible||r.skipIntroVisible,r.options.cuePointList){r.options.cuePointList.forEach((e=>{"recap"==e.title.toString().toLowerCase()&&(S=!0,m=e.start_time,y=e.end_time)}));var g=n.currentTime();Logger.debug(g);try{g>=m&&g<=y&&!r.skipRecapVisible?i&&(P(),i&&!i.getMiniplayerState()&&(i.addSkipRecapButton(),document.getElementById(n.id_).focus()),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),r.skipRecapVisible=!0,P()):i&&!i.getMiniplayerState()&&(g<=m&&r.skipRecapVisible||y<=g&&r.skipRecapVisible)&&i&&(i.removeSkipRecapButton(),i.addPlayPause(),window.document.activeElement.blur(),t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0),r.skipRecapVisible=!1)}catch(e){Logger.error("error in remove skip recap event",e)}}}else{var m,y;if((r.skipRecapVisible||r.skipIntroVisible)&&P(),r.options.cuePointList){r.options.cuePointList.forEach((e=>{"recap"==e.title.toString().toLowerCase()&&(S=!0,m=e.start_time,y=e.end_time)}));g=n.currentTime();Logger.debug(g);try{C(e,"onTimeUpdate"),g>=m&&g<=y&&!r.skipRecapVisible?i&&(P(),i&&!i.getMiniplayerState()&&(i.addSkipRecapButton(),document.getElementById(n.id_).focus()),n.seeking()&&n.currentTime(n.currentTime()+1),i.removePlayPause(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),r.skipRecapVisible=!0):i&&!i.getMiniplayerState()&&(g<=m&&r.skipRecapVisible||y<=g&&r.skipRecapVisible)&&i&&(i.removeSkipRecapButton(),i.addPlayPause(),window.document.activeElement.blur(),t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0),r.skipRecapVisible=!1)}catch(e){Logger.error("error in remove skip recap event",e)}}}if(r.isMobile()&&!r.isLandscape())r.skipIntroVisible&&(clearTimeout(u),M(),I(),r.skipIntroVisible=!1);else if(r.isMobile()&&r.isLandscape()||r.isIPad()||r.isTablet()){if(r.skipRecapVisible||r.skipIntroVisible,r.options.cuePointList){r.options.cuePointList.forEach((e=>{"intro"==e.title.toString().toLowerCase()&&(S=!0,_=e.start_time,b=e.end_time)}));var v=n.currentTime();try{C(e,"onTimeUpdate"),v>=_&&v<=b&&!r.skipIntroVisible?i&&(P(),i&&!i.getMiniplayerState()&&(i.addSkipIntroButton(),document.getElementById(n.id_).focus()),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),r.skipIntroVisible=!0,P()):i&&!i.getMiniplayerState()&&(v<=_&&r.skipIntroVisible||b<=v&&r.skipIntroVisible)&&i&&(i.removeSkipIntroButton(),i.addPlayPause(),t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0),r.skipIntroVisible=!1)}catch(e){Logger.error("error near skip intro event",e)}}}else{var _,b;if((r.skipRecapVisible||r.skipIntroVisible)&&P(),r.options.cuePointList){r.options.cuePointList.forEach((e=>{"intro"==e.title.toString().toLowerCase()&&(S=!0,_=e.start_time,b=e.end_time)}));v=n.currentTime();try{C(e,"onTimeUpdate"),v>=_&&v<=b&&!r.skipIntroVisible?i&&(P(),i.removePlayPause(),i&&!i.getMiniplayerState()&&(i.addSkipIntroButton(),document.getElementById(n.id_).focus()),n.seeking()&&n.currentTime(n.currentTime()+1),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),r.skipIntroVisible=!0):i&&!i.getMiniplayerState()&&(v<=_&&r.addSkipIntroButton||b<=v&&r.skipIntroVisible)&&i&&(i.removeSkipIntroButton(),i.addPlayPause(),window.document.activeElement.blur(),t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0),r.skipIntroVisible=!1)}catch(e){Logger.error("error near skip intro event",e)}}}try{C(e,"onTimeUpdate")}catch(e){Logger.error("error near report timeupdate event",e)}if(r.options.cuePointList){var E,T,S=!1;if(r.options.cuePointList.forEach((e=>{"autoplay"==e.action_type&&(S=!0,E=e.start_time,T=e.end_time)})),!(navigator.userAgent.indexOf("Tizen")>-1||navigator.userAgent.indexOf("web0S")>-1)){var w=E,A=Number.parseInt(n.currentTime())-Number.parseInt(w);if(S&&!r.closeWatchNext&&A>=1){if((w=n.currentTime())>E&&w<T)if(0==r.closeWatchNext?(P(),showNextVideoPopup=!0,t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),i&&i.removePlayPause()):(showNextVideoPopup=!1,clearTimeout(u),M(),I()),null!=r.options.next_content&&0!=r.options.next_content.length){if("Movie"==r.options.assetType){if(i)if(r.nextCard=!0,i&&!i.getMiniplayerState()&&null!=r.options.next_content&&null!=r.options.next_content&&"object"==typeof r.options.next_content){i.createWatchNow(T,E,r.options.next_content),r.watchNextCardEvent=!0;let e=new CustomEvent("showWatchNextCard",{detail:{}});r.reportEventToEventManager(e),document.getElementById(n.id_).focus()}else if(i&&!i.getMiniplayerState()&&null!=r.options.next_content&&null!=r.options.next_content&&"boolean"==typeof r.options.next_content&&1==r.options.next_content&&!r.watchNextCardEvent){r.watchNextCardEvent=!0,showNextVideoPopup=!1;let e=new CustomEvent("showWatchNextCard",{detail:{}});r.reportEventToEventManager(e),document.getElementById(n.id_).focus()}}else if("Episode"==r.options.assetType&&i)if(r.nextCard=!0,i&&!i.getMiniplayerState()&&null!=r.options.next_content&&null!=r.options.next_content&&"object"==typeof r.options.next_content){i.createNextEpisode(T,E,r.options.next_content),r.nextEpisodeCardEvent=!0;let e=new CustomEvent("showNextEpisodeCard",{detail:{}});r.reportEventToEventManager(e),document.getElementById(n.id_).focus()}else if(i&&!i.getMiniplayerState()&&null!=r.options.next_content&&null!=r.options.next_content&&"boolean"==typeof r.options.next_content&&1==r.options.next_content&&!r.nextEpisodeCardEvent){r.nextEpisodeCardEvent=!0,showNextVideoPopup=!1;let e=new CustomEvent("showNextEpisodeCard",{detail:{}});r.reportEventToEventManager(e),document.getElementById(n.id_).focus()}}else r.nextCard=!1,showNextVideoPopup=!1,i.addPlayPause(),t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0);else if(w<E&&i&&!i.getMiniplayerState()){if(showNextVideoPopup=!1,clearTimeout(u),M(),I(),"Movie"==r.options.assetType){if(r.nextCard=!1,null!=r.options.next_content&&null!=r.options.next_content&&"object"==typeof r.options.next_content){i.removeWatchNow();let e=new CustomEvent("removeWatchNextCard",{detail:{}});r.reportEventToEventManager(e)}else if(null!=r.options.next_content&&null!=r.options.next_content&&"boolean"==typeof r.options.next_content&&1==r.options.next_content){let e=new CustomEvent("removeWatchNextCard",{detail:{}});r.reportEventToEventManager(e),r.watchNextCardEvent=!1}}else if("Episode"==r.options.assetType)if(r.nextCard=!1,null!=r.options.next_content&&null!=r.options.next_content&&"object"==typeof r.options.next_content){i.removeNextEpisode();let e=new CustomEvent("removeEpisodeNextCard",{detail:{}});r.reportEventToEventManager(e)}else if(null!=r.options.next_content&&null!=r.options.next_content&&"boolean"==typeof r.options.next_content&&1==r.options.next_content){let e=new CustomEvent("removeEpisodeNextCard",{detail:{}});r.reportEventToEventManager(e),r.nextEpisodeCardEvent=!1}}else if(w>=T&&i&&!i.getMiniplayerState())if(showNextVideoPopup=!1,clearTimeout(u),M(),I(),"Movie"==r.options.assetType){if(r.nextCard=!1,null!=r.options.next_content&&null!=r.options.next_content&&"object"==typeof r.options.next_content){i.removeWatchNow();let e=new CustomEvent("removeWatchNextCard",{detail:{}});r.reportEventToEventManager(e)}else if(null!=r.options.next_content&&null!=r.options.next_content&&"boolean"==typeof r.options.next_content&&1==r.options.next_content){let e=new CustomEvent("removeWatchNextCard",{detail:{}});r.reportEventToEventManager(e),r.watchNextCardEvent=!1}}else if("Episode"==r.options.assetType){if(r.nextCard=!1,null!=r.options.next_content&&null!=r.options.next_content&&"object"==typeof r.options.next_content){i.removeNextEpisode();let e=new CustomEvent("removeEpisodeNextCard",{detail:{}});r.reportEventToEventManager(e)}else if(null!=r.options.next_content&&null!=r.options.next_content&&"boolean"==typeof r.options.next_content&&1==r.options.next_content){let e=new CustomEvent("removeEpisodeNextCard",{detail:{}});r.reportEventToEventManager(e),r.nextEpisodeCardEvent=!1}}else 0==r.closeWatchNext&&n.trigger({type:"playnext",bubbles:!1})}else n.currentTime()<E?(r.closeWatchNext=!1,r.nextCard=!1):r.closeWatchNext&&(showNextVideoPopup=!1,c||(I(),c=!0))}}n.paused()?i&&!l&&!i.getMiniplayerState()&&r.nextCard:!i||l||i.getMiniplayerState()||r.nextCard||i.showPauseIcon()}0==Math.round(r.logituitPlayer.duration()-r.logituitPlayer.currentTime())&&(console.warn("synthetic end event"),G())}function G(e){if(r.logituitPlayer.bumperVideo)Object.keys(document.getElementsByClassName("vjs-tech")).forEach(((e,t)=>{document.getElementsByClassName("vjs-tech")[t].style.pointerEvents="all"})),r.logituitCloseButton&&(r.logituitCloseButton.releaseResource(),n.removeChild(r.logituitCloseButton),delete r.logituitCloseButton,r.logituitCloseButton=null),r.closeButtonComponent&&(delete r.closeButtonComponent,r.closeButtonComponent=null);else{let t=!1;if(r.adsManager){let e=r.adsManager.getCuePoints().filter((e=>-1==e));e&&e.length>0&&(t=!0)}r.videoEnded=!0,i&&i.releaseResource(),i.addReplayButtonScreen();try{C(e,"onEnded")}catch(e){Logger.error("error near report on ended event",e)}let o=r.options.fullscreenRecommendation;if(r.isPlayerPaused=!0,r.playerState=v,r.isMobile()&&r.isPlayerPaused&&i.showPlayIcon(),1==i.getMiniplayerState()&&!p&&(!t||t&&r.postRollPlayed)?(Logger.debug("entered into if block"),n.trigger({type:"close",bubbles:!1})):Logger.debug("entered into else block destroy player"),(1==r.closeWatchNext&&1==r.isRecomendationClose||1==r.closeWatchNext&&r.isMobile())&&(Logger.debug("entered in"),i.player.pause(),window.history.length<=1?window.close():window.history.go(-1)),null==r.options.next_content||0==r.options.next_content.length){if(o&&!p&&(!t||t&&r.postRollPlayed)){let e=getComputedStyle(n.el());parseFloat(e.width.replace("px","")),parseFloat(e.height.replace("px",""));p=!0,r.isSafari()&&setTimeout((function(){n.currentTime(n.duration())}),2e3)}}else 0!=r.closeWatchNext||p||n.trigger({type:"playnext",bubbles:!1})}}function z(t){if(Logger.debug("touch event"),e||(M(),clearTimeout(u),r.isPlayerPaused||I()),r.isIPad()||r.isTablet()){var n=t.target.innerHTML,o=t.target.className,a=document.getElementsByClassName("containerSubAudioParent"),s=document.getElementsByClassName("ContainerQuality"),l=document.getElementsByClassName("ContainerWebQuality"),d=document.getElementsByClassName("ContainerVideoWebQuality");"logituit_videoQualityButton"==o?(i.removeAllEpisode(),"hidden"==a[0].style.visibility||(a[0].style.visibility="hidden")):"logituit_subtitleButton"==o?(i.removeAllEpisode(),"hidden"==s[0].style.visibility||(s[0].style.visibility="hidden"),l&&l[0]&&("hidden"==l[0].style.visibility||(l[0].style.visibility="hidden")),d&&d[0]&&("hidden"==d[0].style.visibility||(d[0].style.visibility="hidden"))):"logituit_allEpisodeIcon"==o?("hidden"==s[0].style.visibility||(s[0].style.visibility="hidden"),"hidden"==a[0].style.visibility||(a[0].style.visibility="hidden"),l&&l[0]&&("hidden"==l[0].style.visibility||(l[0].style.visibility="hidden")),d&&d[0]&&("hidden"==d[0].style.visibility||(d[0].style.visibility="hidden"))):"logituit_audioQualitySettings"==o?("hidden"==l[0].style.visibility?l[0].style.visibility="visible":l[0].style.visibility="hidden","hidden"==a[0].style.visibility||(a[0].style.visibility="hidden")):"logituit_videoQualitySettings"==o&&("hidden"==d[0].style.visibility?d[0].style.visibility="visible":d[0].style.visibility="hidden","hidden"==a[0].style.visibility||(a[0].style.visibility="hidden"))}else{n=t.target.innerHTML,o=t.target.className;"Settings<img>"==n||"Video Quality"==n||"Video Quality"==n||"Subtitles"==n||"Audio Languages"==n||"Report An Issue"==n||"Video Quality"==n||"containerPotrait"==o||"qualityData"==o||""==o||"optionSub"==o||"logituit_videoQualityButton"==o||"logituit_morebutton"==o||"videoQualityPopup"==o||"videoQualityChildPopup"==o||"Subtitles"==n||"subtitlePopup"==o||"Audio Languages"==n||"audioPopup"==o||"Report An Issue"==n||"reportdataul"==o||"Audio Quality"==n||"audioQualityChildPopup"==o||i&&(i.logituitMobileSettingsPopup&&i.removeMobileSettingsPopup(),i.logituitMobileAudioQualityPopup&&i.removeMobileAudioQualityPopup(),i.logituitMobileVideoQualityPopup&&i.removeMobileVideoQualityPopup(),i.logituitMobileAudioPopup&&i.removeMobileAudioPopup(),i.logituitMobileSubtitlePopup&&i.removeMobileSubtitlePopup(),i.logituitMobileReportIssuePopup&&i.removeMobileReportPopup()),Logger.debug("Settingqualitypopup is in open"),!i||i.logituitMobileSettingsPopup||i.logituitMobileAudioQualityPopup||i.logituitMobileVideoQualityPopup||i.logituitMobileAudioPopup||i.logituitMobileSubtitlePopup||i.logituitMobileReportIssuePopup||(i.videoPlaying="")}}function K(t){1==e&&P(),r.iOSDevice()&&n.paused()&&n.play();try{C(t,"onLoadStart")}catch(e){Logger.error("error near onloadstart event",e)}}function Y(e){try{C(e,"onRateChange")}catch(e){Logger.error("error in onratechange event",e)}}function Q(e){r.playerState=_,r.videoStalled=!0;try{C(e,"onStalled"),Logger.debug("stalled Event Triggered")}catch(e){Logger.error("error in  onstalled",e)}}function X(e){r.playerState=b,r.videoSuspended=!0;try{C(e,"onSuspend"),Logger.debug("suspend Event Triggered")}catch(e){Logger.error("error in onSuspend",e)}}function $(e){Logger.debug("playing event",e),Logger.debug("#####onPlaying#####");try{r.isSafari()&&n.currentTime()<=5&&setTimeout((function(){r.options.isContinueWatch&&(n.currentTime(r.options.startTime),Logger.debug("continue watch 1: ",r.options.isContinueWatch,r.options.startTime))}),100),C(e,"onPlaying")}catch(e){Logger.error("error in onSuspend",e)}}function J(e){try{r.playNextVideoFlag?(r.playNextVideoFlag=!1,r.logituitPlayer.switchNextVideoContent(),i&&i.showPauseIcon()):(clearTimeout(u),I()),C(e,"onSeeked")}catch(e){Logger.error("error in onSuspend",e)}}function Z(e){if(r.isTablet()&&n.seeking,i&&!i.getMiniplayerState()&&!r.options.isLive){let e=document.getElementsByTagName("video")[0];n.duration();var t=Math.floor(e.currentTime/60);Math.floor(e.currentTime-60*t);if(t<60)var o=t<10?"0"+t:t;else if(t>=60){var a;a=(a=Math.floor(t/60))<10?"0"+a:a,o=(o=Math.floor(e.currentTime/60%60))<10?"0"+o:o}if(t<=59);else;}r.skipIntroVisible||r.skipRecapVisible||(M(),clearTimeout(u));try{C(e,"onSeeking")}catch(e){Logger.error("error in onSuspend",e),s}}function ee(e){try{Logger.debug("event: ",e);var t=n.volume();0==t&&(n.volume(t+.1),n.muted(!0)),0==n.volume()&&n.muted(!0),!i||0!=n.volume()&&!n.muted()||l||i.getMiniplayerState()||i.isMobile()?!i||n.muted()||l||i.getMiniplayerState()||i.isMobile()||i.displayVolumeIcon():i.muteVolumeIcon(),clearTimeout(u),M(),I(),C(e,"onVolumeChange")}catch(e){Logger.error("error in onSuspend",e)}}function te(e){try{C(e,"onWaiting"),C(e,"buffering")}catch(e){Logger.error("error in onSuspend",e)}}function ne(e){try{C(e,"onResolutionChange")}catch(e){Logger.error("error in onSuspend",e)}}function ie(o){if(r.logituitPlayer.bumperVideo){t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),t.addEventListener("keydown",U,!0),Object.keys(document.getElementsByClassName("vjs-tech")).forEach(((e,t)=>{document.getElementsByClassName("vjs-tech")[t].style.pointerEvents="none"}));let e=r.isMobile(),i=r.iOSDevice(),o=r.isLandscape(),a=!r.isLandscape()&&(r.isMobile()||r.isIPad()||r.isTablet()),s=r.isLandscape()&&(r.isMobile()||r.isIPad()||r.isTablet());s&&(r.isIPad()||r.isTablet())||a&&(r.isIPad()||r.isTablet())?r.options.isLive?r.uiJson=r.options.playerControlsLayout.livejson:r.uiJson=r.options.playerControlsLayout.desktopjson:a?r.options.isLive?r.uiJson=r.options.playerControlsLayout.protraitLiveJson:r.uiJson=r.options.playerControlsLayout.protrait:s&&window.screen.width<=920||i&&o||e&&o?r.options.isLive?r.uiJson=r.options.playerControlsLayout.mobilelivejson:r.uiJson=r.options.playerControlsLayout.mobilejson:r.options.isLive?r.uiJson=r.options.playerControlsLayout.livejson:r.uiJson=r.options.playerControlsLayout.desktopjson,r.uiJson.forEach((function(e){"close"==e.control&&(r.closeButtonComponent=new logituitCloseButtonComponent,r.logituitCloseButton=new r.closeButtonComponent.closeButtonObj(n,e,null,r),n.addChild(r.logituitCloseButton))}))}else{r.videoEnded=!1,Logger.debug("#####onloadeddata#####"),r.logituitPlayer.controlsLoaded||(t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0)),t.addEventListener("keydown",U,!0),n.paused()&&n.play();try{r.isSafari()&&n.muted(!0);try{r.initResource()}catch(e){}r.getSelectedSubtitleLanguage()||localStorage.getItem("defaultTextTrack"),r.getSelectedAudioLanguage()||localStorage.getItem("defaultAudioLanguage");try{let e=(r.isIPad(),1500);setTimeout((()=>{let e=r.getSelectedSubtitleLanguage()||localStorage.getItem("defaultTextTrack"),t=n.textTracks();for(let n=0;n<t.tracks_.length;n++)t.tracks_[n].label&&e&&t.tracks_[n].label.toLowerCase()==e.toLowerCase()?t.tracks_[n].mode="showing":t.tracks_[n].mode="disabled"}),e)}catch(e){}"function"==typeof n.vttThumbnails?n.vttThumbnails({src:r.options.thumbnailUrl}):"function"!=typeof n.vttThumbnails&&n.vttThumbnails&&("function"==typeof n.vttThumbnails.resetFunc&&n.vttThumbnails.resetFunc(),"function"==typeof n.vttThumbnails.initializeThumbnailsFunc&&n.vttThumbnails.initializeThumbnailsFunc()),window.navigator.onLine||n.trigger("offline");(new Date).getTime();T();try{r.isIPad()||r.isSafari()||r.options.isLive&&n.volume(i.getNextVolume()),n.volume(i.getNextVolume()),r.isSafari()&&!r.iOSDevice()&&n.muted(!1)}catch(e){}if(r.isIPad()&&i.showMuteIcon(),(r.isSafari()||r.isIPad())&&i.showPauseIcon(),n.volume(r.setNextVideoVolume),"true"==i.getMuteState()?(n.muted(!0),i.showMuteIcon()):(i.displayVolumeIcon(),setTimeout((function(){i.showVolumeIcon()}),100)),!r.options.isLive&&!r.iosMobile()&&r.isMobile()&&r.options.playInLandscape&&setTimeout((async()=>{r.isLandscape()&&(await n.requestFullscreen(),function(e){try{var t;t=r.iOSDevice();var n=!1;t&&(n=!0),fullScreenEngine&&fullScreenEngine.InitializePlugin(player,n)}catch(e){Logger.error("Exception : ",e)}}(),screen.orientation.lock("landscape"))}),0),r.iosMobile()&&r.isLandscape()){var a=document.getElementsByClassName("logituit_currentTime"),s=document.getElementsByClassName("logituit_timeDivider"),l=document.getElementsByClassName("logituit_duration");a&&a[0]&&(a[0].style.right="90%"),s&&s[0]&&(s[0].style.right="calc(90.5% - 20px)"),l&&l[0]&&(l[0].style.left="11.1%")}setTimeout((()=>{r.iOSDevice()&&(n.muted(!0),i&&n.muted()&&i.showUnmuteIcon())}),1e3),1==e&&r.iOSDevice()&&P(),I()}catch(e){Logger.error("error",e)}try{C(o,"firstFrame"),C(o,"onLoadedData")}catch(e){Logger.error("error in onSuspend",e)}r.configureVolumeSlider();var u=t.getElementById(n.id_);u&&u.classList.add("disable-user-select")}}function re(e){r.playerState=E,this.videoClosed=!0,n.muted()?i&&i.setMuteState(!0):i&&i.setMuteState(!1);try{n.paused||n.pause(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),r.removeVolumeSliderListeners(),C(e,"onClose")}catch(e){Logger.error("error in onClose",e)}}function oe(e){Logger.debug("#####on adrequest event#####");try{C(e,"onAdsRequest")}catch(e){Logger.error("error in onClose",e)}}function ae(o){window.document.activeElement.blur(),Logger.debug("#####on onadStartEvent event#####"),n.pause(),P(),e=!0,(r.isMobile()||i&&i.getMiniplayerState())&&(n.ima.controller.adUi.fullscreenDiv.style.display="none"),r.adsManager&&r.adsManager.resume(),r.iOSDevice()&&i&&i.removeUnmuteIcon(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),document.getElementsByTagName("video")[0].style.opacity="1",t.getElementsByClassName("logituit_watermark")[0].style.display="none",t.getElementsByClassName("logituit_vjs-episode-title-bar")[0].style.display="none";try{var a=n.ima.getAdsManager(),s=a&&a.h&&a.h.g&&a.h.g.adPodInfo&&a.h.g.adPodInfo.podIndex?a.h.g.adPodInfo.podIndex:0;totalAdCount=a.h.g.adPodInfo.totalAds,Logger.debug("IMA total ads:",totalAdCount),s>0?(s="mid",i&&i.getMiniplayerState()&&(n.ima.controller.adUi.fullscreenDiv.style.display="none")):s=-1==s?"post":"pre",adStatus={status:"ad-playing",position:s},C(o,"onAdStart"),hideControlsAdsTV()}catch(e){Logger.error("error in onClose",e)}}function se(e){Logger.debug("#####on onadManagerEvent event#####");try{r.adsManager=e.adsManager,r.options.isContinueWatch&&r.adsManager.discardAdBreak()}catch(e){Logger.error("error in onClose",e)}}function le(e){try{var t=n.ima.getAdsManager(),r=t&&t.h&&t.h.g&&t.h.g.adPodInfo&&t.h.g.adPodInfo.podIndex?t.h.g.adPodInfo.podIndex:0;r>0?(r="mid",i&&i.getMiniplayerState()&&(n.ima.controller.adUi.fullscreenDiv.style.display="none")):r=-1==r?"post":"pre"}catch(e){Logger.error("error in onClose",e)}try{Logger.debug("#####onAdProgressEvent#####")}catch(e){Logger.debug("Error onAdProgressEvent: ",e)}}function ue(e){try{M(),Logger.debug("#####onAdError#####")}catch(e){Logger.debug("Error onAdError: ",e)}}function de(e){P(),Logger.debug("#####onReadyForPreroll event#####")}function ce(e){(P(),r.postRollPlayed=!0,Logger.debug("#####onReadyForPreroll event#####"),i&&i.getMiniplayerState())&&(t.getElementsByClassName("ima-fullscreen-div")[0].style.display="none")}function pe(e){try{P(),Logger.debug("#####onContentResume#####")}catch(e){Logger.error("Error onAdComplete: ",e)}}function he(e){try{Logger.debug("#####onAdComplete#####")}catch(e){Logger.error("Error onAdComplete: ",e)}}function fe(){if(r.watchNextCardEvent){r.watchNextCardEvent=!1,showNextVideoPopup=!1;let e=new CustomEvent("removeWatchNextCard",{detail:{}});r.reportEventToEventManager(e),clearTimeout(u),M(),I()}if(r.nextEpisodeCardEvent){r.nextEpisodeCardEvent=!1,showNextVideoPopup=!1;let e=new CustomEvent("removeNextEpisodeCard",{detail:{}});r.reportEventToEventManager(e),clearTimeout(u),M(),I()}n.muted()?i.setMuteState(!0):i.setMuteState(!1),r.closeWatchNext=!1,showNextVideoPopup=!1,r.nextCard=!1,r.isFullscreenRecomendationShown=!1,n.seeking()?r.playNextVideoFlag=!0:(r.logituitPlayer.switchNextVideoContent(),i&&i.showPauseIcon())}function ge(e){document.getElementById(n.id_).style.display="none",C(e,"enteredPictureInPicture")}function me(e){if(!i){let e=r.isMobile(),i=r.iOSDevice(),o=r.isLandscape(),a=!r.isLandscape()&&(r.isMobile()||r.isIPad()||r.isTablet()),s=r.isLandscape()&&(r.isMobile()||r.isIPad()||r.isTablet());s&&(r.isIPad()||r.isTablet())||a&&(r.isIPad()||r.isTablet())?r.options.isLive?r.uiJson=r.options.playerControlsLayout.livejson:r.uiJson=r.options.playerControlsLayout.desktopjson:a?r.options.isLive?r.uiJson=r.options.playerControlsLayout.protraitLiveJson:r.uiJson=r.options.playerControlsLayout.protrait:s&&window.screen.width<=920||i&&o||e&&o?r.options.isLive?r.uiJson=r.options.playerControlsLayout.mobilelivejson:r.uiJson=r.options.playerControlsLayout.mobilejson:r.options.isLive?r.uiJson=r.options.playerControlsLayout.livejson:r.uiJson=r.options.playerControlsLayout.desktopjson,r.uiJson.forEach((function(e){"errorMsg"==e.control&&(r.eventManagerErrroMsgComponent=new logituitErrorMessageComponent,r.eventManagerLogituitErrorMsg=new r.eventManagerErrroMsgComponent.errorMessage(n,e,null,r),n.addChild(r.eventManagerLogituitErrorMsg),r.eventManagerLogituitErrorMsg.showErrorMsg())})),n.play()&&n.pause(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),r.errorMsgVisible=!0}!i||r.errorMsgVisible||isConnected||i.getMiniplayerState()||(i.showErrorMsg(),n.play()&&n.pause(),i&&r.nextCard&&i.pauseTimer(!1),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0),clearTimeout(u),P(),r.errorMsgVisible=!0)}function ye(e){document.getElementById(n.id_).style.display="block",C(e,"leftPictureInPicture")}function ve(s){if(e=!1,a+=1,o+=1,clearTimeout(u),M(),I(),document.getElementById(n.id_).focus(),t.removeEventListener("keyup",j),t.addEventListener("keyup",j),t.removeEventListener("keydown",F,!0),t.addEventListener("keydown",F,!0),i||r.logituitUiManager&&(i=new r.logituitUiManager.UIEngine(n,r.options,r)),n.ended())n.pause();else{if(r.isMobile()){var l=n.ima.getAdsManager(),d=l&&l.h&&l.h.g&&l.h.g.adPodInfo&&l.h.g.adPodInfo.podIndex?l.h.g.adPodInfo.podIndex:0;d>0?d="mid":-1==d?d="post":(d="pre",1==o&&we())}n.play(),r.iOSDevice()||r.isIPad()?i&&n.muted()&&i.showMuteIcon():r.isIPad()?(n.muted(!0),i.showMuteIcon()):n.muted()&&n.muted(!1)}try{Logger.debug("#####onAdEndEvent#####"),showControlsAdsTV(),navigator.userAgent.indexOf("Web0S")>-1&&a===(Logger.debug("IMA totalAdCount",totalAdCount),totalAdCount)&&(a=0,we()),navigator.userAgent.indexOf("Tizen")>-1&&1==o&&n.load()}catch(e){Logger.error("Error onAdEndEvent: ",e)}}function _e(e){try{n.play(),Logger.debug("#####onAdSkipEvent#####")}catch(e){Logger.error("Error onAdSkipEvent: ",e)}}function be(e){try{Logger.debug("#####onadClick#####")}catch(e){Logger.error("Error onAdClick: ",e)}}function Ee(e){try{Logger.debug("#####onAdPause#####")}catch(e){Logger.error("Error onAdPause: ",e)}}function Te(e){try{Logger.debug("#####onAdResumed#####")}catch(e){Logger.error("Error onAdResumed: ",e)}}function Ce(e){try{Logger.debug("#####onAllAdsCompleted#####")}catch(e){Logger.error("Error onAllAdsCompleted: ",e)}}function Se(o){d||(d=!0,setTimeout((function(){if(document.hidden)document.hidden&&(r.nextCard&&(r.backgroundState=!0,i.pauseTimerBackground(r.backgroundState)),d=!1,!n.paused()&&r.isMobile()&&n.pause());else{if((r.videoStalled||r.videoSuspended)&&r.isIPad()){let e=n.currentTime();n.src(n.src()),n.pause(),n.load(),n.pause(),n.currentTime(e),n.pause(),r.videoStalled=!1,r.videoSuspended=!1}r.nextCard&&(r.backgroundState=!1,i.pauseTimerBackground(r.backgroundState));let a=!r.isLandscape()&&(r.isMobile()||r.isIPad()||r.isTablet()),s=r.isLandscape()&&(r.isMobile()||r.isIPad()||r.isTablet());if(a){var o=n.currentTime();i&&(i.releaseResource(),delete i,i=null),setTimeout((function(){if(setTimeout((()=>{0==e&&(r.isPlayerPaused?n.pause():n.play())}),0),r.logituitUiManager&&!e&&(i=new r.logituitUiManager.UIEngine(n,r.options,r),r.videoEnded&&r.isMobile()&&n.currentTime(o),n.currentTime(o)),(r.iOSDevice()||r.isTablet())&&n.paused()&&n.currentTime(n.currentTime()),r.isIPad()||r.isTablet())i.getMiniplayerState()&&i.releaseResourceFromEventManager();else{if(i&&r.skipRecapVisible&&(r.isMobile()&&r.isLandscape()||r.isIPad())&&(P(),i.addSkipRecapButton(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)),i&&r.skipIntroVisible&&(r.isMobile()&&r.isLandscape()||r.isIPad())&&(P(),i.addSkipIntroButton(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)),n.ima&&"function"==typeof n.ima.getAdsManager){let e=getComputedStyle(n.el());w=parseFloat(e.width.replace("px","")),h=parseFloat(e.height.replace("px","")),n.ima.getAdsManager().resize(w,h,google.ima.ViewMode.NORMAL)}r.isMobile()&&"function"==typeof n.vttThumbnails?n.vttThumbnails({src:r.options.thumbnailUrl}):r.isMobile()&&n.vttThumbnails&&("function"==typeof n.vttThumbnails.resetFunc&&n.vttThumbnails.resetFunc(),"function"==typeof n.vttThumbnails.initializeThumbnailsFunc&&n.vttThumbnails.initializeThumbnailsFunc())}d=!1}),300)}else if(s){o=n.currentTime();i&&(i.releaseResource(),delete i,i=null),setTimeout((function(){if(setTimeout((()=>{0==e&&(r.isPlayerPaused?n.pause():n.play())}),0),r.logituitUiManager&&!e&&(i=new r.logituitUiManager.UIEngine(n,r.options,r),r.videoEnded&&r.isMobile()&&n.currentTime(o),n.currentTime(o)),r.iosMobile()&&r.isLandscape()){var a=document.getElementsByClassName("logituit_currentTime"),s=document.getElementsByClassName("logituit_timeDivider"),l=document.getElementsByClassName("logituit_duration");a&&a[0]&&(a[0].style.right="90%"),s&&s[0]&&(s[0].style.right="calc(90.5% - 20px)"),l&&l[0]&&(l[0].style.left="11.1%")}if(r.isIPad()||r.isTablet())i.getMiniplayerState()&&i.releaseResourceFromEventManager();else{if(i&&r.skipRecapVisible&&(r.isMobile()&&r.isLandscape()||r.isIPad())&&(P(),i.addSkipRecapButton(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)),i&&r.skipIntroVisible&&(r.isMobile()&&r.isLandscape()||r.isIPad())&&(P(),i.addSkipIntroButton(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)),n.ima&&"function"==typeof n.ima.getAdsManager){let e=getComputedStyle(n.el());w=parseFloat(e.width.replace("px","")),h=parseFloat(e.height.replace("px","")),n.ima.getAdsManager().resize(w,h,google.ima.ViewMode.NORMAL)}r.isMobile()&&"function"==typeof n.vttThumbnails?n.vttThumbnails({src:r.options.thumbnailUrl}):r.isMobile()&&n.vttThumbnails&&("function"==typeof n.vttThumbnails.resetFunc&&n.vttThumbnails.resetFunc(),"function"==typeof n.vttThumbnails.initializeThumbnailsFunc&&n.vttThumbnails.initializeThumbnailsFunc())}d=!1}),300),i&&r.skipRecapVisible&&(r.isMobile()&&r.isLandscape()||r.isIPad())&&(P(),i.addSkipRecapButton(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)),i&&r.skipIntroVisible&&(r.isMobile()&&r.isLandscape()||r.isIPad())&&(P(),i.addSkipIntroButton(),t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0))}}}),300))}function we(){setTimeout((function(){n.src(n.src()),Logger.debug("profiling","Source attached"),n.load(),Logger.debug("profiling","player reloaded"),n.play(),Logger.debug("profiling","player play triggered")}),200)}function Ae(e){M(),Logger.log("ad timeout"),n.pause(),n.currentTime(n.currentTime()),n.play()}this.addkeyboardcontrol=function(){t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0)},this.addkeyboardcontrolremove=function(){t.removeEventListener("keyup",j),t.removeEventListener("keydown",F,!0)},this.closeWatchNextFunc=function(){Logger.debug("watch next closed"),showNextVideoPopup=!1,r.closeWatchNext=!0},this.closeRecommendation=function(){i&&n.duration()==n.currentTime()||n.duration()-n.currentTime()<=1?(i.player.pause(),window.history.go(-1)):(t.addEventListener("keyup",j),t.addEventListener("keydown",F,!0),i.addPlayPause(),r.isRecomendationClose=!0)},this.setRecommendation=function(e){r.options.recommendations=e},this.setnextVideoScreen=function(e){r.options.next_content=e},this.setAllEpisodes=function(e){r.options.allEpisodeData=e,i&&i.setAllEpisodeData(r.options.allEpisodeData),i&&!i.getMiniplayerState()&&(null!=r.options.allEpisodeData&&null!=r.options.allEpisodeData&&("object"==typeof r.options.allEpisodeData&&r.options.allEpisodeData.length>0||"boolean"==typeof r.options.allEpisodeData&&1==r.options.allEpisodeData)&&(i.showAllEpisodeIcon(r.options.allEpisodeData),i.showdivider()),(r.nextCard||r.skipRecapVisible||r.skipIntroVisible)&&P())},this.setNextVideoContent=function(){r.isMobile()&&r.isLandscape()&&i&&i.showNextEpisodeButton()},this.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},this.isSafari=function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},this.iOSDevice=function(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)},this.iosMobile=function(){var e=navigator.userAgent;return e.match(/iphone/i)||e.match(/iPod/i)},this.isIPad=function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},this.isTablet=function(){const e=navigator.userAgent.toLowerCase(),t=/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e);return Logger.debug(t),t},this.iOSversion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}},this.isLandscape=function(){var e=!1;try{window.orientation||window.screen.orientation;var t,n=r.isMobile(),i=r.iOSDevice();if(n){if(i&&i.length>0)switch(window.orientation){case 0:case 180:t="portrait";break;case-90:case 90:t="landscape"}else t=(window.screen.orientation||{}).type||window.screen.mozOrientation||window.screen.msOrientation;e="portrait"!=t&&"portrait-primary"!=t&&"portrait-secondary"!=t&&0!=t&&-180!=t}}catch(e){Logger.error("this.isLandscape : Error ",e)}return e};var ke=document.createTextNode(null);!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var Pe=function(e){this.addEventListener=ke.addEventListener.bind(ke),this.removeEventListener=ke.removeEventListener.bind(ke),this.dispatchEvent=ke.dispatchEvent.bind(ke)};this.logixplayerEvent=new Pe,this.logixPlayerUiEvent=new Pe,this.playerInstance=this.logixplayerEvent}function DolbyEngine(){this.dolbyPlugin,this.videoPlayer;var e=this,t=!1,n="IE";this.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},this.checkBrowserDetails=function(){var e=navigator.userAgent.toLowerCase();t=this.isMobile(),!1,isAndroid=!1,n="chrome";if(t)e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)?(isIOSDevice=!0,n=-1!=e.indexOf("CriOS")||-1!=e.indexOf("chrome")?"Chrome":-1!=e.indexOf("safari")?"Safari":e.match("fxios")||e.match("firefox")?"FireFox":"Chrome"):n=e.match(/android/i)?(-1!=e.indexOf("CriOS")||-1!=e.indexOf("chrome")||e.match("fxios")||e.match("firefox"),"Chrome"):"Chrome";else{var i=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,r=!!document.documentMode,o=!r&&!!window.StyleMedia,a="undefined"!=typeof InstallTrigger,s=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),l=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),u=(l||i)&&!!window.CSS;n=r&&e.indexOf("ie")>-1||o||-1!=e.indexOf("edg")||navigator.userAgent.indexOf("Edge")>=0?"IE":l&&-1!=e.indexOf("chrome")||a&&(-1!=e.indexOf("fxios")||e.match("firefox"))?"Chrome":s&&-1!=e.indexOf("safari")?"Safari":"Chrome";var d="Detecting browsers by ducktyping: \n";d+="isFirefox: "+a+"\n",d+="isChrome: "+l+"\n",d+="isSafari: "+s+"\n",d+="isOpera: "+i+"\n",d+="isIE: "+r+"\n",d+="isEdge: "+o+"\n",d+="isBlink: "+u+"\n",console.log("Browser Agent Detail output :",d)}return console.log("Browser details =>",n),n},this.InitializeDolbyPlugin=function(t,n,i){console.log("--------------------------------");var r="DolbyInitSuccess",o="DolbyInitFailed ",a=!1;e.videoPlayer=t;e.checkBrowserDetails();return new Promise((function(e,t){try{if(!Dolby)return console.error("Dolby is Undefined "),void t({isDDPlusSupported:a,error:o});console.log("Dolby is Defined "),a=Dolby.checkDDPlus()}catch(e){return console.error("Dolby Check DDPlus is failed :",e),void t({isDDPlusSupported:a,error:e})}0==a?t({isDDPlusSupported:a,error:o}):e({isDDPlusSupported:a,success:r}),console.error("Dolby Check DDPlus is success ",r)}))},this.ConfigurePlugin=function(){},this.destroyPlugin=function(){console.log("destroy plugin")},this.releaseResources=function(){console.log("-----player resource released--------")}}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */TVKeyEvent.VK_ENTER=13,TVKeyEvent.VK_LEFT=37,TVKeyEvent.VK_UP=38,TVKeyEvent.VK_RIGHT=39,TVKeyEvent.VK_DOWN=40,TVKeyEvent.VK_SPACE=32,TVKeyEvent.VK_BACK_SPACE=8,TVKeyEvent.INDEX_BACK_BUTTON=0,TVKeyEvent.INDEX_SUBTITLE=1,TVKeyEvent.INDEX_PLAY_PAUSE=2,TVKeyEvent.INDEX_SEEK_BAR=3,TVKeyEvent.INDEX_EPISODES=4,TVKeyEvent.INDEX_BACK=5,TVKeyEvent.INDEX_QUALITY=6,TVKeyEvent.INDEX_VOLUME=7,TVKeyEvent.INDEX_CAROUSAL_SEASONS=1,TVKeyEvent.INDEX_CAROUSAL_EPISODES=0,TVKeyEvent.INDEX_DONE=-1,TVKeyEvent.INDEX_GO_LIVE=7,TVKeyEvent.INDEX_SUBTITLE_LANGUAGE=1,TVKeyEvent.INDEX_SUBTITLE_AUDIO=0,TVKeyEvent.SAMSUNG_PLAY_PAUSE=402,TVKeyEvent.SAMSUNG_BACK=461,TVKeyEvent.SONY_PAUSE=19,TVKeyEvent.SONY_PLAY=415,TVKeyEvent.SONY_REWIND=412,TVKeyEvent.SONY_FAST_FWD=465,TVKeyEvent.SONY_STOP=413,TVKeyEvent.LG_FAST_FWD=417;var debugTvLog=!1;function TVConsole(e,t){if(debugTvLog){null==t&&(t=" ");var n=document.createElement("span"),i=document.createTextNode(JSON.stringify(e+" :"+t));n.appendChild(i),document.getElementById("playerLogs").appendChild(n);var r=document.createElement("br");document.getElementById("playerLogs").appendChild(r)}else Logger.debug(e,t)}function logituitplayer(){this.options=null,this.divId=null,this.videoelement=null,this.eventEmitter=null,this.uiEventEmitter=null,this.allEpisodeData,this.recommendationData,this.nextVideoData,this.isDRM=!1,this.isVOD=!1,this.isLive=!1,this.uuid=0,this.videoComponent;this.video_ele=null;var e=this;e.logituitPlayer=!1;var t,n,i="chrome";this.init=function(){this.options=null,this.divId=null,this.videoelement=null,this.eventEmitter=null},e.bumperVideo=!1;var r=new EventManager;new SubtitleEngine;function o(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}function a(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)}function s(){var e=navigator.userAgent;return e.match(/iphone/i)||e.match(/iPod/i)}function l(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}function u(){return e.options&&1==e.options.isLive}function d(){return e.options&&1==e.options.isLive}fullScreenEngine=new FullscreenEngine,this.makeVideofullScreen=function(e){try{var t;t=a();var n=!1;t&&(n=!0),fullScreenEngine&&fullScreenEngine.InitializePlugin(e,n)}catch(e){Logger.error("Exception : ",e)}};async function c(t,i,r){var a;e.uuid=(a=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==e?t:3&t|8).toString(16)})));var s="erosnowPlayer_"+e.uuid,l=document.createElement("source");n=document.createElement("video");let u=i.src;i.bumperVideoUrl&&!i.isContinueWatch&&(u=i.bumperVideoUrl),l.setAttribute("src",u);let d=i.type;i.bumperVideoType&&!i.isContinueWatch&&(d=i.bumperVideoType),l.setAttribute("type",d),l.setAttribute("id","source_"+e.uuid),n.appendChild(l),n.setAttribute("id",s),n.setAttribute("width","640"),n.setAttribute("height","264"),n.setAttribute("controls",""),n.setAttribute("autoplay","true"),n.setAttribute("playsinline",""),n.setAttribute("preload","auto"),n.setAttribute("disablePictureInPicture",!0),o()?n.className="video-js vjs-default-skin video_main vjs-16-9 mainVideoContainer":n.className="video-js vjs-default-skin video_main vjs-16-9 desktopMainVideoContainer",r&&n.setAttribute("muted","true"),document.getElementById(t).appendChild(n),Logger.debug("video_ele",n);let c=document.getElementById(t);return c&&c.appendChild(n),s}function p(t,n){if(n.bumperVideoUrl&&!n.isContinueWatch){e.bumperVideo=!0;o();var i=!1;i=a();l();return new Promise((function(u,d){let p=new Promise((async function(a,l){try{if(Logger.debug(" initializePlayback "),null==t||""==t)return Logger.debug("Player div Id is null "),void Logger.debug(t);var u;null!=n&&""!=n||(Logger.debug("Player options is null "),Logger.debug(n)),null!=n&&(Logger.warn("src.indexOf('/*~hmac') !== -1,: ",-1!==n.bumperVideoUrl.indexOf("/*~hmac")),u={autoplay:!1,inactivityTimeout:1e3*n.controlsDisappearTimerValue,html5:{hls:{overrideNative:!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IE_VERSION||videojs.browser.IS_EDGE||window.navigator.userAgent.indexOf("Macintosh")>=0),enableLowInitialPlaylist:!0,smoothQualityChange:!0,withCredentials:-1!==n.src.indexOf("/*~hmac")}},aspectRatio:"16:9",fluid:!0});var d=await c(t,n,i);Logger.debug("Video tag id : UUID",d),e.options.videoId=d,Logger.debug("is DRM :",e.isDRM),e.videoPlayer=videojs(d,u,(function(){if(!n.isLive&&!s()&&o()&&n.playInLandscape){e.videoPlayer.isFullscreen()||e.videoPlayer.requestFullscreen(),e.makeVideofullScreen(e.videoPlayer);try{"function"==typeof screen.orientation.lock&&screen.orientation.lock("landscape").then((e=>console.log("lock supported",e)),(e=>{console.log("lock not supported",e)}))}catch(e){Logger.error("exception for orientation: ",e)}}var t=r.initialize(e.videoPlayer,e.options,e);e.eventEmitter=t.playerEventListener,e.uiEventEmitter=t.playerUIListener,a(e.videoPlayer)})),e.videoPlayer.on("error",(function(t){Logger.error("rror: ",t),Logger.error("player error: ",e.videoPlayer.error());let n=e.videoPlayer.error();2==n.code&&(e.mediaErrorComponent=new logituitMediaErrorMessageComponent,e.logituitMuteVolume=new e.mediaErrorComponent.mediaErrorMessage(e.videoPlayer,n.code,n.message,e),e.videoPlayer.addChild(logituitMuteVolume))}))}catch(e){Logger.error("bumper video - ",e)}}));p.then((function(t,n){u(e.videoPlayer),e.videoPlayer.play(),e.videoPlayer.one("error",(function(t){o();a();l();e.videoPlayer.paused||e.videoPlayer.pause(),e.videoPlayer.reset();document.getElementById("source_"+e.uuid);if(e.videoPlayer.load(),e.videoPlayer.src({src:e.options.src,type:e.options.type}),1==e.isDRM)Logger.debug("is DRM :",e.isDRM),h(e.options),e.drmEngine=new DRMPlayerEngine,e.drmEngine.InitializePlugin(e.videoPlayer,e.options,navigator).then((function(t){if(e.videoPlayer.play(),Logger.debug("DRM Engine Initalize plugin success =>",t),e.options.adsConfig.adsUrl&&(new adsEngine).initializePlugin(e.videoPlayer,e.options.videoId,e.options.adsConfig,r),!e.options.isLive&&!s()&&o()&&e.options.playInLandscape){e.videoPlayer.isFullscreen()||e.videoPlayer.requestFullscreen(),e.makeVideofullScreen(e.videoPlayer);try{"function"==typeof screen.orientation.lock&&screen.orientation.lock("landscape").then((e=>console.log("lock supported",e)),(e=>{console.log("lock not supported",e)}))}catch(e){Logger.error("exception for orientation: ",e)}}}),(function(e){Logger.error(" DRM Engine Initalize plugin is failure ",e)})).catch((function(e){Logger.error("error: ",e)})),e.videoPlayer.on("error",(function(t){Logger.error("rror: ",t),Logger.error("player error: ",e.videoPlayer.error());let n=e.videoPlayer.error();2==n.code&&(e.mediaErrorComponent=new logituitMediaErrorMessageComponent,e.logituitMuteVolume=new e.mediaErrorComponent.mediaErrorMessage(e.videoPlayer,n.code,n.message,e),e.videoPlayer.addChild(logituitMuteVolume))}));else if(0==e.isDRM)try{if(e.videoPlayer.play(),e.options.adsConfig.adsUrl&&(new adsEngine).initializePlugin(e.videoPlayer,e.options.videoId,e.options.adsConfig,r),!e.options.isLive&&!s()&&o()&&e.options.playInLandscape){e.videoPlayer.isFullscreen()||e.videoPlayer.requestFullscreen(),e.makeVideofullScreen(e.videoPlayer);try{"function"==typeof screen.orientation.lock&&screen.orientation.lock("landscape").then((e=>console.log("lock supported",e)),(e=>{console.log("lock not supported",e)}))}catch(e){Logger.error("exception for orientation: ",e)}}e.videoPlayer.on("error",(function(t){Logger.error("rror: ",t),Logger.error("player error: ",e.videoPlayer.error());let n=e.videoPlayer.error();2==n.code&&(e.mediaErrorComponent=new logituitMediaErrorMessageComponent,e.logituitMuteVolume=new e.mediaErrorComponent.mediaErrorMessage(e.videoPlayer,n.code,n.message,e),e.videoPlayer.addChild(e.logituitMuteVolume))})),(navigator.userAgent.indexOf("Tizen")>-1||navigator.userAgent.indexOf("Web0S")>-1)&&(e.options.adsConfig.adsUrl="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpostpod&cmsid=496&vid=short_onecue&correlator=")}catch(e){Logger.error("error",e)}e.videoPlayer.one("loadedmetadata",(function(){e.bumperVideo&&(e.bumperVideo=!1)}))})),e.videoPlayer.one("ended",(function(){o();a();l();e.videoPlayer.paused||e.videoPlayer.pause(),e.videoPlayer.reset();document.getElementById("source_"+e.uuid);if(e.videoPlayer.load(),e.videoPlayer.src({src:e.options.src,type:e.options.type}),1==e.isDRM)Logger.debug("is DRM :",e.isDRM),h(e.options),e.drmEngine=new DRMPlayerEngine,e.drmEngine.InitializePlugin(e.videoPlayer,e.options,navigator).then((function(t){if(e.videoPlayer.play(),Logger.debug("DRM Engine Initalize plugin success =>",t),e.options.adsConfig.adsUrl&&(new adsEngine).initializePlugin(e.videoPlayer,e.options.videoId,e.options.adsConfig,r),!e.options.isLive&&!s()&&o()&&e.options.playInLandscape){e.videoPlayer.isFullscreen()||e.videoPlayer.requestFullscreen(),e.makeVideofullScreen(e.videoPlayer);try{"function"==typeof screen.orientation.lock&&screen.orientation.lock("landscape").then((e=>console.log("lock supported",e)),(e=>{console.log("lock not supported",e)}))}catch(e){Logger.error("exception for orientation: ",e)}}}),(function(e){Logger.error(" DRM Engine Initalize plugin is failure ",e)})).catch((function(e){Logger.error("error: ",e)})),e.videoPlayer.on("error",(function(t){Logger.error("rror: ",t),Logger.error("player error: ",e.videoPlayer.error());let n=e.videoPlayer.error();2==n.code&&(e.mediaErrorComponent=new logituitMediaErrorMessageComponent,e.logituitMuteVolume=new e.mediaErrorComponent.mediaErrorMessage(e.videoPlayer,n.code,n.message,e),e.videoPlayer.addChild(logituitMuteVolume))}));else if(0==e.isDRM)try{if(e.videoPlayer.play(),e.options.adsConfig.adsUrl&&(new adsEngine).initializePlugin(e.videoPlayer,e.options.videoId,e.options.adsConfig,r),!e.options.isLive&&!s()&&o()&&e.options.playInLandscape){e.videoPlayer.isFullscreen()||e.videoPlayer.requestFullscreen(),e.makeVideofullScreen(e.videoPlayer);try{"function"==typeof screen.orientation.lock&&screen.orientation.lock("landscape").then((e=>console.log("lock supported",e)),(e=>{console.log("lock not supported",e)}))}catch(e){Logger.error("exception for orientation: ",e)}}e.videoPlayer.on("error",(function(t){Logger.error("rror: ",t),Logger.error("player error: ",e.videoPlayer.error());let n=e.videoPlayer.error();2==n.code&&(e.mediaErrorComponent=new logituitMediaErrorMessageComponent,e.logituitMuteVolume=new e.mediaErrorComponent.mediaErrorMessage(e.videoPlayer,n.code,n.message,e),e.videoPlayer.addChild(e.logituitMuteVolume))})),(navigator.userAgent.indexOf("Tizen")>-1||navigator.userAgent.indexOf("Web0S")>-1)&&(e.options.adsConfig.adsUrl="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpostpod&cmsid=496&vid=short_onecue&correlator=")}catch(e){Logger.error("error",e)}e.videoPlayer.one("loadedmetadata",(function(){e.bumperVideo&&(e.bumperVideo=!1)}))}))}))}))}e.bumperVideo=!1;o();i=!1;i=a();l();return new Promise((async function(a,l){try{if(Logger.debug(" initializePlayback "),Logger.debug("videoTag id",t),Logger.debug("options id",n),null==t||""==t)return Logger.debug("Player div Id is null "),void Logger.debug(t);var u;null!=n&&""!=n||(Logger.debug("Player options is null "),Logger.debug(n)),null!=n&&(e._options=n,Logger.warn("src.indexOf('/*~hmac') !== -1,: ",-1!==n.src.indexOf("/*~hmac")),u={inactivityTimeout:1e3*n.controlsDisappearTimerValue,html5:{hls:{overrideNative:!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IE_VERSION||videojs.browser.IS_EDGE||window.navigator.userAgent.indexOf("Macintosh")>=0),enableLowInitialPlaylist:!0,smoothQualityChange:!0,withCredentials:-1!==n.src.indexOf("/*~hmac")}},aspectRatio:"16:9",fluid:!0});var d=await c(t,n,i);if(Logger.debug("Video tag id : UUID",d),e.options.videoId=d,1==e.isDRM)Logger.debug("is DRM :",e.isDRM),h(e.options),e.videoPlayer=videojs(d,u,(function(){e.drmEngine=new DRMPlayerEngine,e.drmEngine.InitializePlugin(e.videoPlayer,e.options,navigator).then((function(t){Logger.debug("DRM Engine Initalize plugin success =>",t),(navigator.userAgent.indexOf("Tizen")>-1||navigator.userAgent.indexOf("Web0S")>-1)&&(e.options.adsConfig.adsUrl="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpostpod&cmsid=496&vid=short_onecue&correlator="),e.options.adsConfig.adsUrl&&(new adsEngine).initializePlugin(e.videoPlayer,d,e.options.adsConfig,r);var n=r.initialize(e.videoPlayer,e.options,e);if(e.eventEmitter=n.playerEventListener,e.uiEventEmitter=n.playerUIListener,!e.options.isLive&&!s()&&o()&&e.options.playInLandscape){e.videoPlayer.isFullscreen()||e.videoPlayer.requestFullscreen(),e.makeVideofullScreen(e.videoPlayer);try{"function"==typeof screen.orientation.lock&&screen.orientation.lock("landscape").then((e=>console.log("lock supported",e)),(e=>{console.log("lock not supported",e)}))}catch(e){Logger.error("exception for orientation: ",e)}}e.videoPlayer.autoplay(!0),a(e.videoPlayer)}),(function(e){Logger.error(" DRM Engine Initalize plugin is failure ",e)})).catch((function(e){Logger.error("error: ",e)}))})),e.videoPlayer.on("error",(function(t){Logger.error("rror: ",t),Logger.error("player error: ",e.videoPlayer.error());let n=e.videoPlayer.error();2==n.code&&(e.mediaErrorComponent=new logituitMediaErrorMessageComponent,e.logituitMuteVolume=new e.mediaErrorComponent.mediaErrorMessage(e.videoPlayer,n.code,n.message,e),e.videoPlayer.addChild(logituitMuteVolume))}));else if(0==e.isDRM)try{e.videoPlayer=videojs(d,u,(function(){if(this){e.options.adsConfig.adsUrl&&(new adsEngine).initializePlugin(e.videoPlayer,d,e.options.adsConfig,r);var t=r.initialize(e.videoPlayer,e.options,e);if(e.eventEmitter=t.playerEventListener,e.uiEventEmitter=t.playerUIListener,!e.options.isLive&&!s()&&o()&&e.options.playInLandscape){e.videoPlayer.isFullscreen()||e.videoPlayer.requestFullscreen(),e.makeVideofullScreen(e.videoPlayer);try{"function"==typeof screen.orientation.lock&&screen.orientation.lock("landscape").then((e=>console.log("lock supported",e)),(e=>{console.log("lock not supported",e)}))}catch(e){Logger.error("exception for orientation: ",e)}}e.videoPlayer.autoplay(!0),a(e.videoPlayer)}})),e.videoPlayer.on("error",(function(t){Logger.error("rror: ",t),Logger.error("player error: ",e.videoPlayer.error());let n=e.videoPlayer.error();2==n.code&&(e.mediaErrorComponent=new logituitMediaErrorMessageComponent,e.logituitMuteVolume=new e.mediaErrorComponent.mediaErrorMessage(e.videoPlayer,n.code,n.message,e),e.videoPlayer.addChild(e.logituitMuteVolume))})),(navigator.userAgent.indexOf("Tizen")>-1||navigator.userAgent.indexOf("Web0S")>-1)&&(e.options.adsConfig.adsUrl="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpostpod&cmsid=496&vid=short_onecue&correlator=")}catch(e){Logger.error("error",e)}}catch(e){Logger.error("error",e)}}))}function h(t){var n=t.licenseUrl;if("IE"==i||navigator.userAgent.indexOf("ie")>-1||-1!=navigator.userAgent.indexOf("edg")||navigator.userAgent.indexOf("Edg")>=0||navigator.userAgent.indexOf("PIXEL_UNICORN")>=0)BrowserName="com.microsoft.playready",e.options.type="application/dash+xml",e.options.keySystemOptions=[{name:BrowserName,options:{serverURL:n}}],e.options.plugins={httpSourceSelector:{default:"auto"}};else if(navigator.userAgent.indexOf("Chrome")>=0||navigator.userAgent.indexOf("Firefox")>=0||navigator.userAgent.indexOf("Tizen")>=0||navigator.userAgent.indexOf("SamsungBrowser")>=0){BrowserName="com.widevine.alpha",e.options.type="application/dash+xml",e.options.keySystemOptions=[{name:BrowserName,options:{serverURL:n}}],e.options.plugins={httpSourceSelector:{default:"high"}},(new ParserEngine).InitializePlugin("",t).then((function(e){}))}else navigator.userAgent.indexOf("Safari")>=0?(e.options.type="application/x-mpegURL",e.options.keySystemOptions=[{options:{audioContentType:'audio/webm; codecs="vorbis"',videoContentType:'video/webm; codecs="vp9"',certificateUri:"https://x-drm.uplynk.com/fairplay/public_key/30c99d5c0fb743218071b427384f4647.cer",serverURL:n}}],e.options.plugins={httpSourceSelector:{default:"auto"}}):(e.options.type="application/dash+xml",e.options.keySystemOptions=[{name:BrowserName,options:{serverURL:n}}],e.options.plugins={httpSourceSelector:{default:"auto"}})}this.reinitPlayer=function(){e.logituitMuteVolume&&(e.videoPlayer.removeChild(e.logituitMuteVolume),e.logituitMuteVolume.releaseResource(),delete e.logituitMuteVolume,e.logituitMuteVolume=null),e.mediaErrorComponent&&(delete e.mediaErrorComponent,e.mediaErrorComponent=null),e.videoComponent.reinitPlayer(e.divId,e.playerBuilder)},this.switchNextVideoContent=async function(){navigator.userAgent.indexOf("web0S")>-1||navigator.userAgent.indexOf("Tizen")>-1?(e.options.src=playbackData.nextContenturl,e.options.type=playbackData.type,e.options.licenseUrl=playbackData.licenseUrl,e.options.certificateUrl=playbackData.certificateUrl):(e.options.src=t.src,e.options.type=t.type,e.options.licenseUrl=t.licenseUrl,e.options.certificateUrl=t.certificateUrl,e.options.startTime=t.startTime,e.options.subtitles=t.subtitles,e.options.audioLangOptions=t.audioLangOptions,e.options.initialVideoBirate=t.initialVideoBirate,e.options.autoplay=t.autoplay,e.options.contentTitle=t.contentTitle,e.options.episodeTitle=t.episodeTitle,e.options.isContinueWatch=t.isContinueWatch,e.options.assetType=t.assetType,e.options.isLive=t.isLive,e.options.isEncrypted=t.isEncrypted,e.options.next_content=null,e.options.cuePointList=null,e.options.contentId=t.contentId,e.options.assetId=t.assetId,e.options.allEpisodeData=t.allEpisodeData,e.options.recommendations=t.recommendations,e.options.thumbnailUrl=t.thumbnailUrl,e.options.controlsDisappearTimerValue=t.controlsDisappearTimerValue,e.options.videoQualitySettings=t.videoQualitySettings,e.options.audioQualitySettings=t.audioQualitySettings,e.options.mobile_setting_option=t.mobile_setting_option,e.options.forwardRewindTime=t.forwardRewindTime,e.options.adsConfig=t.adsConfig,e.options.loadInLandscape=t.loadInLandscape,e.options.bumperVideoUrl=t.bumperVideoUrl,e.options.bumperVideoType=t.bumperVideoType),e.videoPlayer.paused||e.videoPlayer.pause(),e.videoPlayer.reset();a();document.getElementById("source_"+e.uuid);if(r.releaseResources(),e.videoPlayer.off("error"),e.options.bumperVideoUrl&&!e.options.isContinueWatch){e.bumperVideo=!0,new Promise((async function(t,n){e.videoPlayer.one("error",(function(){e.videoPlayer.paused()||e.videoPlayer.pause(),e.videoPlayer.reset();document.getElementById("source_"+e.uuid);e.videoPlayer.load(),e.videoPlayer.src({src:e.options.src,type:e.options.type}),r.drmNextVideo(),e.videoPlayer.play(),e.videoPlayer.one("loadedmetadata",(function(){e.bumperVideo&&(e.bumperVideo=!1)}))})),e.videoPlayer.src({src:e.options.bumperVideoUrl,type:e.options.bumperVideoType}),e.videoPlayer.load(),e.videoPlayer.autoplay(!0),e.videoPlayer.play(),e.videoPlayer.one("canplaythrough",(function(){setTimeout((()=>{e.videoPlayer.play(),t()}),2e3)}))})).then((function(t,n){e.videoPlayer.play(),e.videoPlayer.one("ended",(function(t){e.videoPlayer.paused()||e.videoPlayer.pause(),e.videoPlayer.reset();document.getElementById("source_"+e.uuid);e.videoPlayer.load(),e.videoPlayer.src({src:e.options.src,type:e.options.type}),r.drmNextVideo(),e.videoPlayer.play(),e.videoPlayer.one("loadedmetadata",(function(){e.bumperVideo&&(e.bumperVideo=!1)}))}))}))}else e.videoPlayer.src({src:e.options.src,type:e.options.type}),e.videoPlayer.load(),r.drmNextVideo(),e.videoPlayer.play(),setTimeout((()=>{}),2e3);e.videoPlayer.on("error",(function(t){Logger.error("rror: ",t),Logger.error("player error: ",e.videoPlayer.error());let n=e.videoPlayer.error();2==n.code&&(e.mediaErrorComponent=new logituitMediaErrorMessageComponent,e.logituitMuteVolume=new e.mediaErrorComponent.mediaErrorMessage(e.videoPlayer,n.code,n.message,e),e.videoPlayer.addChild(e.logituitMuteVolume))}))},this.setNextVideoContent=function(n){t=n.convertDatamodels(),e.options.nextVideoMetadata=t,r.setNextVideoContent()},this.setRecommendation=function(e){r.setRecommendation(e)},this.setnextVideoScreen=function(e){r.setnextVideoScreen(e)},this.setAllEpisodes=function(e){r.setAllEpisodes(e)},this.showRecommendationScreen=function(){r.showRecommendation()},this.closeRecommendation=function(){r.closeRecommendation()},this.closeNextCard=function(){r.closeWatchNextFunc()},this.initializePlayer=function(t,n,i){e.videoComponent=i,e.playerBuilder=n,e.divId=t;try{e.options=n.convertDatamodels()}catch(e){Logger.error("exception in converting data",e)}return Logger.debug("options in initialize player: ",e.options),e.options&&(e.options.playerControlsLayout=e.playerUILayout),Logger.debug("options in initialize player: ",e.options),this.divId=t,e.options.divId=t,new Promise((function(n,i){try{e.options&&1==e.options.isEncrypted?(e.isDRM=!0,p(t,e.options).then((function(t){playerObj={player:t,eventEmitter:e.eventEmitter,uiEventEmitter:e.uiEventEmitter},n(playerObj)}))):e.options&&0==e.options.isEncrypted&&(1==d()?e.isVOD=!0:1==u()&&(e.isLive=!0),p(t,e.options).then((function(t){playerObj={player:t,eventEmitter:e.eventEmitter,uiEventEmitter:e.uiEventEmitter},n(playerObj)})))}catch(e){Logger.error("error",e)}}))},this.setup=function(t,n){return n&&(n.src=n.videoUrl,n.playerControlsLayout=this.playerUILayout),this.divId=t,this.options=n,new Promise((function(i,r){try{n&&1==n.isEncrypted?(e.isDRM=!0,p(t,n).then((function(t){playerObj={player:t,eventEmitter:e.eventEmitter,uiEventEmitter:e.uiEventEmitter},i(playerObj)}))):n&&0==n.isEncrypted&&(1==d()?e.isVOD=!0:1==u()&&(e.isLive=!0),p(t,n).then((function(t){playerObj={player:t,eventEmitter:e.eventEmitter,uiEventEmitter:e.uiEventEmitter},i(playerObj)})))}catch(e){Logger.error("error",e)}}))},this.setLayout=function(e){this.playerUILayout=e},this.duration=function(){let t=0;return e.videoPlayer&&(t=e.videoPlayer.duration()),t},this.destoryPlayer=function(){if(e.videoPlayer){e.videoPlayer.paused()||e.videoPlayer.pause();try{e.videoPlayer.dispose()}catch(t){document.getElementById(e.videoPlayer.id_).remove()}r&&r.releaseResource()}},this.play=function(){e.videoPlayer&&e.videoPlayer.play()},this.pause=function(){e.videoPlayer&&e.videoPlayer.pause()},this.seekToTime=function(t){try{var n=t/1e3;e.videoPlayer&&e.videoPlayer.currentTime(n)}catch(e){Logger.error("seek exception: ",e)}},this.getVideoInstance=function(){return e.videoPlayer},this.destroyVideoInstance=function(){e.videoPlayer=null,delete e.videoPlayer},this.setVolume=function(t){e.videoPlayer&&e.videoPlayer.volume(t)},this.setMute=function(t){e.videoPlayer&&e.videoPlayer.muted(t)},this.isMuted=function(){let t=!1;return e.videoPlayer&&(t=e.videoPlayer.muted()),t},this.getCurrentTime=function(){let t=0;return e.videoPlayer&&(t=e.videoPlayer.currentTime()),t},this.getPlayerState=function(){if(r)return r.getPlayerState()},this.getSelectedQualityBitrate=function(){if(r)return r.getSelectedQualityBitrate()},this.getSelectedAudioLanguage=function(){if(r)return r.getSelectedAudioLanguage()},this.getSelectedSubtitleLanguage=function(){if(r)return r.getSelectedSubtitleLanguage()},this.continueWatchSeekPosition=function(){try{setTimeout((function(){e.options.isContinueWatch&&(e.videoPlayer.currentTime(e.options.startTime),Logger.debug("continue watch 1: ",e.options.isContinueWatch,e.options.startTime))}),0)}catch(e){Logger.error(e)}},this.initialiseAdPlayback=function(e,t){}}
//  * @license
function WebSDK(e){let t,n=this,i="",r="",o=null;this.eventHandler={};let a={autoplay:!0,licenseUrl:"",certificateUrl:"",continueWatchingStartTime:12,initialVideoBirateInKbps:360,playInLandscape:!0,defaultSubtitle:"",audioLanguages:[],defaultAudio:"",subtitles:[]},s={isLive:!1,isEncrypted:!1,content_title:"Smokeless fire in the woods",asset_title:"S2 E1: The return of Xander Cage",asset_id:7001683,content_id:1234,isContinueWatch:!1,asset_type:"",thumbnail_stream_url:"https://www.radiantmediaplayer.com/media/vtt/thumbnails/bbb-thumbnails.vtt",watermarkUrl:"",next_content:null,marker:null,allEpisodes:null,recommendations:null},l={basePath:"../../assets/erosPlayer/",debugMode:!1,videoQualitySettings:[{playback_ql_bitrate:2500,playback_ql_id:1,playback_ql_render_title:"360p",playback_ql_checked:!0,playback_ql_subtitle:"",playback_ql_title:"Auto",playback_ql_qualityMweb:""},{playback_ql_bitrate:1500,playback_ql_id:3,playback_ql_render_title:"252p",playback_ql_subtitle:"Uses about 0.9 GB per hour",playback_ql_title:"High(1080p)",playback_ql_qualityMweb:"720 MB"},{playback_ql_bitrate:700,playback_ql_id:2,playback_ql_render_title:"144p",playback_ql_subtitle:"Uses about 0.4 GB per hour",playback_ql_title:"Medium(480p)",playback_ql_qualityMweb:"200 MB"},{playback_ql_bitrate:400,playback_ql_id:2,playback_ql_render_title:"144p",playback_ql_subtitle:"Uses about 0.2 GB per hour",playback_ql_title:"Low(144p)",playback_ql_qualityMweb:"100 MB"}],audioQualitySettings1:[{playback_ql_bitrate:2500,playback_ql_id:1,playback_ql_render_title:"360p",playback_ql_checked:!0,playback_ql_subtitle:"",playback_ql_title:"Dolby Atmos",playback_ql_qualityMweb:""},{playback_ql_bitrate:2500,playback_ql_id:4,playback_ql_render_title:"360p",playback_ql_subtitle:"",playback_ql_title:"Dummy1",playback_ql_qualityMweb:"1.5 GB"},{playback_ql_bitrate:1500,playback_ql_id:3,playback_ql_render_title:"252p",playback_ql_subtitle:"",playback_ql_title:"Dummy2",playback_ql_qualityMweb:"720 MB"},{playback_ql_bitrate:700,playback_ql_id:2,playback_ql_render_title:"144p",playback_ql_subtitle:"",playback_ql_title:"Dummy3",playback_ql_qualityMweb:"200 MB"},{playback_ql_bitrate:400,playback_ql_id:2,playback_ql_render_title:"144p",playback_ql_subtitle:"",playback_ql_title:"Standard Stereo",playback_ql_qualityMweb:"100 MB"}],audioQualitySettings:[{playback_ql_bitrate:2500,playback_ql_id:1,playback_ql_render_title:"360p",playback_ql_checked:!0,playback_ql_subtitle:"",playback_ql_title:"Default",playback_ql_qualityMweb:""}]},u={mobile_setting_option:[{setting_id:1,setting_title:"Video Quality",setting_selected_op:"Auto",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/Setting_Pop_Up/icon-video.svg')"},{setting_id:2,setting_title:"Subtitle",setting_selected_op:"English",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/Setting_Pop_Up/icon-subs.svg')"},{setting_id:3,setting_title:"Audio Language",setting_selected_op:"English",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/Setting_Pop_Up/ic-audio.svg')"},{setting_id:4,setting_title:"Report an issue",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/assets_REPORT/icon-help.svg')"}],defaultVideoQualityBitrate:1e3,forwardRewindTime:10,controlsDisappearTimerValue:5};function d(e,t){return new Promise(((n,i)=>{try{t?a.videoUrl=e.videoUrl:(s.asset_id=e.asset_id,s.asset_title=e.asset_title,s.asset_type=e.asset_type,s.content_id=e.content_id,s.content_title=e.content_title,s.thumbnail_stream_url=e.thumbnail_stream_url,a.videoUrl=e.profiles[0].url,a.continueWatchingStartTime=e.play_state.progress),fetch("../../assets/erosPlayer/dynamicUIJSON.json").then((e=>e.json())).then((function(e){!function(e,t){if(dynamicUiJsonString=JSON.stringify(e),t&&(t.basePath||""==t.basePath))for(;dynamicUiJsonString.indexOf("{$basePath}")>=0;)dynamicUiJsonString=dynamicUiJsonString.replace("{$basePath}",t.basePath);logger=new logituitLogger(t.debugMode),Logger.debug("video player component -- dynamicUiJsonString: ",dynamicUiJsonString),logixPlayer=new logituitplayer,logixPlayer&&logixPlayer.setLayout(JSON.parse(dynamicUiJsonString))}(e,l),a.playerControlsLayout=e,a.videoUrl.indexOf("mpd")>-1?a.type="application/dash+xml":a.videoUrl.indexOf("m3u8")>-1&&(a.type="application/x-mpegURL");var t=new PlayerBuilder;t.setPlaybackData(a),t.setAssetMetaData(s),t.setPlayerConfig(l),t.setPlayerConfig(u),n(t)}))}catch(e){i(new Error("Failed to load data"+e))}}))}this.fetchProgressData=function(e){return new Promise(((n,o)=>{null!=e&&null!=e&&""!=e||o(new Error("Invalid asset id"));const a={method:"GET",headers:{"x-api-client":t.apiClientId,"x-country":t.country,"x-platform":"web","x-partner-code":t.partnerCode,"x-device-id":t.deviceId,"Content-Type":"application/json","x-api-token":r}};fetch(i+"/api/v1/core/assets/"+e+"/user_content_progress",a).then((e=>(e.ok||o(Error("Asset content progress api failed: "+e.status)),e.json()))).then((e=>{n(e)}))}))},this.doLogin=function(e,n){return new Promise(((o,a)=>{null!=e&&null!=e&&""!=e||a(new Error("Invalid partner user token")),null!=n&&null!=n&&""!=n||a(new Error("Invalid partner id"));const s={partner_id:n,partner_user_token:e,email:n,bypass_user_verification:"PRODUCTION"!=t.env},l={method:"POST",headers:{"x-api-client":t.apiClientId,"x-country":t.country,"x-platform":"web","x-partner-code":t.partnerCode,"x-device-id":t.deviceId,"Content-Type":"application/json"},body:JSON.stringify(s)};fetch(i+"/api/v1/partner/sso-login",l).then((e=>(e.ok||a(Error("Login api failed: "+e.status)),e.json()))).then((e=>{r=e.data.auth_token,o(e)}))}))},this.fetchContentProfile=function(e,n){return new Promise(((r,o)=>{const a={method:"GET",headers:{"x-api-client":t.apiClientId,"x-platform":"web","x-country":t.country,"x-device-id":t.deviceId,"x-api-token":n,"Content-Type":"application/json"}};fetch(i+"/api/v1/core/content_profile/"+e,a).then((e=>(e.ok||o(Error("Content profile api failed with status : "+e.status)),e.json()))).then((e=>{r(e)}))}))},this.setNextVideo=function(e){try{logixPlayer.setNextVideoContent(e)}catch(e){Logger.error("exception setNextVideo: ",e)}},this.playNextVideo=function(e){try{logixPlayer.setNextVideoContent(e),logixPlayer.switchNextVideoContent()}catch(e){Logger.error("exception setNextVideo: ",e)}},this.setNextVideoObject=function(e){logixPlayer.setnextVideoScreen(e)},this.playContent=function(e,t){let i,a;return new Promise((async(s,l)=>{try{isNaN(parseInt(t))?(i={data:{}},i.data.videoUrl=t,a=await d(i.data,!0)):(i=await n.fetchContentProfile(t,r),a=await d(i.data,!1));let l=await function(e,t){return new Promise((function(n,i){try{logixPlayer.initializePlayer(e,t,me).then((function(e){Logger.debug("eros sdk player is iniatlized.....******************",e),n(e)}))}catch(e){Logger.error("error",e)}}))}(e,a);o=l.player,function(e){e.eventEmitter.addEventListener("onProgress",(function(e){Logger.debug("playerProgressEvent",e.detail.event)})),e.eventEmitter.addEventListener("onPlaying",(function(e){Logger.debug("playingEvent",e.detail.event)})),e.eventEmitter.addEventListener("onFullScreenChange",(function(e){Logger.debug("onfullscreenChangeEvent",window.screen.orientation.type)})),e.eventEmitter.addEventListener("onAdStart",(function(e){Logger.debug("onAdstartEvent")})),e.eventEmitter.addEventListener("onAdEnd",(function(e){Logger.debug("onAdEndEvent")})),e.eventEmitter.addEventListener("onAdSkip",(function(e){Logger.debug("onAdskipEvent")})),e.eventEmitter.addEventListener("onError",(function(e){Logger.debug("onErrorEvent")})),e.eventEmitter.addEventListener("onLoadedData",(function(e){Logger.debug("onloadeddataEvent")})),e.eventEmitter.addEventListener("onLoadedMetadata",(function(e){Logger.debug("onloadedmetadataEvent")})),e.eventEmitter.addEventListener("onEnded",(function(e){Logger.debug("onendedEvent")})),e.eventEmitter.addEventListener("onLoadStart",(function(e){Logger.debug("onloadstartEvent")})),e.eventEmitter.addEventListener("onPlay",(function(e){Logger.debug("onPlayEvent",e)})),e.eventEmitter.addEventListener("onPause",(function(e){Logger.debug("onPausesEvent",e)})),e.eventEmitter.addEventListener("onTimeUpdate",(function(e){Logger.debug("onTimeUpdateEvent",e)})),e.eventEmitter.addEventListener("onAdProgress",(function(e){Logger.debug("onAdProgressEvent")})),e.eventEmitter.addEventListener("onPlayerReady",(function(e){Logger.debug("onPlayerReadyEvent")})),e.eventEmitter.addEventListener("onRateChange",(function(e){Logger.debug("onrateChangeEvent")})),e.eventEmitter.addEventListener("onSuspend",(function(e){Logger.debug("onsuspendEvent")})),e.eventEmitter.addEventListener("onStalled",(function(e){Logger.debug("onStalledEvent")})),e.eventEmitter.addEventListener("onSeeked",(function(e){Logger.debug("onseekedEvent")})),e.eventEmitter.addEventListener("onSeeking",(function(e){Logger.debug("onseekingEvent")})),e.eventEmitter.addEventListener("onVolumechange",(function(e){Logger.debug("onvolumechangeEvent")})),e.eventEmitter.addEventListener("onResolutionChange",(function(e){Logger.debug("onResolutionChangeEvent")})),e.eventEmitter.addEventListener("onPlayerReady",(function(e){Logger.debug("onPlayerReadyEvent")})),e.eventEmitter.addEventListener("onAbort",(function(e){Logger.debug("onabortevent")})),e.eventEmitter.addEventListener("onFirstPlay",(function(e){Logger.debug("onfirstPlayEvent")})),e.eventEmitter.addEventListener("onClose",(function(t){Logger.debug("onClose");try{!function(e){e.eventEmitter.removeEventListener("onProgress",(function(e){Logger.debug("playerProgressEvent",e.detail.event)})),e.eventEmitter.removeEventListener("onPlaying",(function(e){Logger.debug("playingEvent",e.detail.event)})),e.eventEmitter.removeEventListener("onfullscreenChange",(function(e){Logger.debug("onfullscreenChangeEvent",window.screen.orientation.type)})),e.eventEmitter.removeEventListener("onAdstart",(function(e){Logger.debug("onAdstartEvent")})),e.eventEmitter.removeEventListener("onAdEnd",(function(e){Logger.debug("onAdEndEvent")})),e.eventEmitter.removeEventListener("onAdskip",(function(e){Logger.debug("onAdskipEvent")})),e.eventEmitter.removeEventListener("onError",(function(e){Logger.debug("onErrorEvent")})),e.eventEmitter.removeEventListener("onloadeddata",(function(e){Logger.debug("onloadeddataEvent")})),e.eventEmitter.removeEventListener("onloadedmetadata",(function(e){Logger.debug("onloadedmetadataEvent")})),e.eventEmitter.removeEventListener("onended",(function(e){Logger.debug("onendedEvent")})),e.eventEmitter.removeEventListener("onloadstart",(function(e){Logger.debug("onloadstartEvent")})),e.eventEmitter.removeEventListener("onPlay",(function(e){Logger.debug("onPlayEvent",e)})),e.eventEmitter.removeEventListener("onPause",(function(e){Logger.debug("onPausesEvent",e)})),e.eventEmitter.removeEventListener("onTimeUpdate",(function(e){Logger.debug("onTimeUpdateEvent",e)})),e.eventEmitter.removeEventListener("onAdProgress",(function(e){Logger.debug("onAdProgressEvent")})),e.eventEmitter.removeEventListener("onPlayerReady",(function(e){Logger.debug("onPlayerReadyEvent")})),e.eventEmitter.removeEventListener("onRateChange",(function(e){Logger.debug("onrateChangeEvent")})),e.eventEmitter.removeEventListener("onSuspend",(function(e){Logger.debug("onsuspendEvent")})),e.eventEmitter.removeEventListener("onStalled",(function(e){Logger.debug("onStalledEvent")})),e.eventEmitter.removeEventListener("onSeeked",(function(e){Logger.debug("onseekedEvent")})),e.eventEmitter.removeEventListener("onSeeking",(function(e){Logger.debug("onseekingEvent")})),e.eventEmitter.removeEventListener("onVolumechange",(function(e){Logger.debug("onvolumechangeEvent")})),e.eventEmitter.removeEventListener("onResolutionChange",(function(e){Logger.debug("onResolutionChangeEvent")})),e.eventEmitter.removeEventListener("onPlayerReady",(function(e){Logger.debug("onPlayerReadyEvent")})),e.eventEmitter.removeEventListener("onAbort",(function(e){Logger.debug("onabortevent")})),e.eventEmitter.removeEventListener("onFirstPlay",(function(e){Logger.debug("onfirstPlayEvent")})),e.eventEmitter.removeEventListener("onClose",(function(e){Logger.debug("onClose")})),e.eventEmitter.removeEventListener("enteredPictureInPicture",(function(e){Logger.debug("enteredPictureInPicture")})),e.eventEmitter.removeEventListener("leftPictureInPicture",(function(e){Logger.debug("leftPictureInPicture")})),e.uiEventEmitter.removeEventListener("onForwardButtonClick",(function(e){Logger.debug("onForwardButtonClickEvent",e.detail)})),e.uiEventEmitter.removeEventListener("onRewindButtonClick",(function(e){Logger.debug("onRewindButtonClick",e.detail)})),e.uiEventEmitter.removeEventListener("onSeekBarClick",(function(e){Logger.debug("onSeekBarClick",e.detail)})),e.uiEventEmitter.removeEventListener("onBackButtonClick",(function(e){Logger.debug("onBackButtonClick",e.detail)})),e.uiEventEmitter.removeEventListener("onPlayClick",(function(e){Logger.debug("onPlayClick",e.detail)})),e.uiEventEmitter.removeEventListener("onPauseClick",(function(e){Logger.debug("onPauseClick",e.detail)})),e.uiEventEmitter.removeEventListener("onFullScreenClick",(function(e){Logger.debug("onFullScreenClick",e.detail)})),e.uiEventEmitter.removeEventListener("onExitFullScreenclick",(function(e){Logger.debug("onExitFullScreenclick",e.detail)})),e.uiEventEmitter.removeEventListener("onUnmuteClick",(function(e){Logger.debug("onUnmuteClick",e.detail)})),e.uiEventEmitter.removeEventListener("onMuteClick",(function(e){Logger.debug("onMuteClick",e.detail)})),e.uiEventEmitter.removeEventListener("qualityPopupClick",(function(e){Logger.debug("qualityPopupClick",e.detail)})),e.uiEventEmitter.removeEventListener("subtitlePopupClicked",(function(e){Logger.debug("subtitlePopupClicked",e.detail)})),e.uiEventEmitter.removeEventListener("onShareButtonClick",(function(e){Logger.debug("onShareButtonClick",e.detail)})),e.uiEventEmitter.removeEventListener("onCloseButtonClick",(function(e){Logger.debug("onCloseButtonClick",e.detail)})),e.uiEventEmitter.removeEventListener("onEpisodeClick",(function(e){Logger.debug("onEpisodeClick",e.detail)})),e.uiEventEmitter.removeEventListener("onMoreButtonClick",(function(e){Logger.debug("onMoreButtonClick",e.detail)})),e.uiEventEmitter.removeEventListener("qualityChanged",(function(e){Logger.debug("qualityChanged",e.detail)})),e.uiEventEmitter.removeEventListener("audioLanguageChanged",(function(e){Logger.debug("audioLanguageChanged",e.detail)})),e.uiEventEmitter.removeEventListener("reportIssueClicked",(function(e){Logger.debug("reportIssueClicked",e.detail)})),e.uiEventEmitter.removeEventListener("subtitleLanguageChanged",(function(e){Logger.debug("subtitleLanguageChanged",e.detail)})),e.uiEventEmitter.removeEventListener("onEpisodeSelected",(function(e){Logger.debug("episode selected: ",e.detail)})),e.uiEventEmitter.removeEventListener("onRecommendedClosed",(function(e){Logger.debug("recommended poup closed: ",e.detail)})),e.uiEventEmitter.removeEventListener("onRecommendedItemClicked",(function(e){Logger.debug("recommended video selected: ",e.detail)})),e.uiEventEmitter.removeEventListener("recommendedTrailer",(function(e){Logger.debug("recommended trailer clicked: ",e.detail)})),e.uiEventEmitter.removeEventListener("recommendedPlayClicked",(function(e){Logger.debug("recommended watch now clicked: ",e.detail)})),e.uiEventEmitter.removeEventListener("recommendedWatchNowClicked",(function(e){Logger.debug("recommended watch now clicked: ",e.detail)})),e.uiEventEmitter.removeEventListener("recommendedWatchListClicked",(function(e){Logger.debug("recommended watchlist clicked: ",e.detail)})),e.uiEventEmitter.removeEventListener("recommendedShareClicked",(function(e){Logger.debug("recommended share button clicked: ",e.detail)})),e.uiEventEmitter.removeEventListener("recommendedInfoClicked",(function(e){Logger.debug("recommended info clicked: ",e.detail)}))}(e),logixPlayer&&logixPlayer.destoryPlayer()}catch(e){Logger.error("error in destroying player: ",e)}})),e.eventEmitter.addEventListener("enteredPictureInPicture",(function(e){Logger.debug("enteredPictureInPicture")})),e.eventEmitter.addEventListener("leftPictureInPicture",(function(e){Logger.debug("leftPictureInPicture")})),e.uiEventEmitter.addEventListener("onForwardButtonClick",(function(e){Logger.debug("onForwardButtonClickEvent",e.detail)})),e.uiEventEmitter.addEventListener("onRewindButtonClick",(function(e){Logger.debug("onRewindButtonClick",e.detail)})),e.uiEventEmitter.addEventListener("onSeekBarClick",(function(e){Logger.debug("onSeekBarClick",e.detail)})),e.uiEventEmitter.addEventListener("onBackButtonClick",(function(e){Logger.debug("onBackButtonClick",e.detail)})),e.uiEventEmitter.addEventListener("onPlayClick",(function(e){Logger.debug("onPlayClick",e.detail)})),e.uiEventEmitter.addEventListener("onPauseClick",(function(e){Logger.debug("onPauseClick",e.detail)})),e.uiEventEmitter.addEventListener("onFullScreenClick",(function(e){Logger.debug("onFullScreenClick",e.detail)})),e.uiEventEmitter.addEventListener("onExitFullScreenclick",(function(e){Logger.debug("onExitFullScreenclick",e.detail)})),e.uiEventEmitter.addEventListener("onUnmuteClick",(function(e){Logger.debug("onUnmuteClick",e.detail)})),e.uiEventEmitter.addEventListener("onMuteClick",(function(e){Logger.debug("onMuteClick",e.detail)})),e.uiEventEmitter.addEventListener("qualityPopupClick",(function(e){Logger.debug("qualityPopupClick",e.detail)})),e.uiEventEmitter.addEventListener("subtitlePopupClicked",(function(e){Logger.debug("subtitlePopupClicked",e.detail)})),e.uiEventEmitter.addEventListener("onShareButtonClick",(function(e){Logger.debug("onShareButtonClick",e.detail)})),e.uiEventEmitter.addEventListener("onCloseButtonClick",(function(e){Logger.debug("onCloseButtonClick",e.detail)})),e.uiEventEmitter.addEventListener("onEpisodeClick",(function(e){Logger.debug("onEpisodeClick",e.detail)})),e.uiEventEmitter.addEventListener("onMoreButtonClick",(function(e){Logger.debug("onMoreButtonClick",e.detail)})),e.uiEventEmitter.addEventListener("qualityChanged",(function(e){Logger.debug("qualityChanged",e.detail)})),e.uiEventEmitter.addEventListener("audioLanguageChanged",(function(e){Logger.debug("audioLanguageChanged",e.detail)})),e.uiEventEmitter.addEventListener("reportIssueClicked",(function(e){Logger.debug("reportIssueClicked",e.detail)})),e.uiEventEmitter.addEventListener("subtitleLanguageChanged",(function(e){Logger.debug("subtitleLanguageChanged",e.detail)})),e.uiEventEmitter.addEventListener("onEpisodeSelected",(function(e){Logger.debug("episode selected: ",e.detail)})),e.uiEventEmitter.addEventListener("onRecommendedClosed",(function(e){Logger.debug("recommended poup closed: ",e.detail)})),e.uiEventEmitter.addEventListener("onRecommendedItemClicked",(function(e){Logger.debug("recommended video selected: ",e.detail)})),e.uiEventEmitter.addEventListener("recommendedWatchNowClicked",(function(e){Logger.debug("recommended watch now clicked: ",e.detail)})),e.uiEventEmitter.addEventListener("recommendedTrailer",(function(e){Logger.debug("recommended trailer clicked: ",e.detail)})),e.uiEventEmitter.addEventListener("recommendedPlayClicked",(function(e){Logger.debug("recommended watch now clicked: ",e.detail)})),e.uiEventEmitter.addEventListener("recommendedWatchListClicked",(function(e){Logger.debug("recommended watchlist clicked: ",e.detail)})),e.uiEventEmitter.addEventListener("recommendedShareClicked",(function(e){Logger.debug("recommended share button clicked: ",e.detail)})),e.uiEventEmitter.addEventListener("recommendedInfoClicked",(function(e){Logger.debug("recommended info clicked: ",e.detail)}))}(l),n.eventHandler.playerEvent=l.eventEmitter,n.eventHandler.uiEvent=l.uiEventEmitter,s(n.eventHandler)}catch(e){l(new Error("failed to play content"+e))}}))};let c=!0;return Object.keys({partnerCode:"",deviceId:"",country:"",env:""}).forEach((function(t){null!=e[t]&&null!=e[t]&&""!=e[t]||(c=!1)})),c?("apiClientId"in Object.keys(e)&&null!=e.apiClientId&&null!=e.apiClientId&&""!=e.apiClientId?e.apiClientId=e.apiClientId:"PRODUCTION"==e.env?e.apiClientId="1MZeCKJYqvwEeaWsCd1FA19KZxHubbz41TCIqdbF":e.apiClientId="QxrFiKSkc7D1Yq38trNbBp9YfdZk0xHHsM3RKP53",i="PRODUCTION"==e.env?"https://apigateway.erosnow.com":"https://stgapigateway.erosnow.com",t=e,n):new Error("Invalid configs provided")}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function PlayerBuilder(){var e=this;this.playbackData={videoUrl:"https://content.uplynk.com/5bc38f7536d0425f87723ddd5fd2b59d.m3u8",bumperVideoUrl:"",bumperVideoType:"",type:"application/x-mpegURL",licenseUrl:"",certificateUrl:"",continueWatchingStartTime:40,initialVideoBirateInKbps:360,autoplay:!1,defaultSubtitle:"",playInLandscape:!1,fullscreenRecommendation:!0,subtitles:[],defaultAudio:"",audioLanguages:[{playback_al_id:1,playback_al_title:"hindi"},{playback_al_id:2,playback_al_title:"English"},{playback_al_id:3,playback_al_title:"Urdu"},{playback_al_id:4,playback_al_title:"Telagu"},{playback_al_id:5,playback_al_title:"Tamil"},{playback_al_id:6,playback_al_title:"Polish"}]},this.allEpisodeData=null,this.assetMetaData={isLive:!1,isContinueWatch:!1,thumbnail_stream_url:"https://images004-a.erosnow.com/movie/3/1000633/img7241/6825491/1000633_6825491_83.vtt",isEncrypted:!1,watermarkUrl:"",asset_id:0,content_type:"episode",content_id:0,content_title:"",episodeTitle:"",asset_title:"",assetDescription:"",description:"The story that comes after two lovers break up when they realize that their career goals are pulling them in different directions.",language:"hin",assetCategory:"VOD",asset_type:"",episodeNumber:123456,seasonNumber:19876,landscapeThumbnail:"url",spriteDuration:12,assetDurationInSeconds:12345,nextContent:null,isDVR:!1,subtitles:"",marker:[],posterUrl:"",next_content:[{content_id:7001592,content_title:"Flesh - Official Trailer",asset_title:"S1 E2: The Hunt For The Snake",asset_id:7001683,images:[{image_type:"vertical_banner_with_title",storage_path:"https://images004-a.erosnow.com/original/0/1069270/img768851/7001630/1069270_7001630.jpg"},{image_type:"horizontal_banner_with_title",storage_path:"https://images004-a.erosnow.com/original/0/1069270/img625352/7001633/1069270_7001633.jpg"}]}],allEpisodes:[],recommendations:[],fullscreenRecommendationData:[]},this.playerConfig={videoQualitySettings:[{playback_ql_bitrate:2500,playback_ql_id:1,playback_ql_render_title:"360p",playback_ql_checked:!0,playback_ql_subtitle:"",playback_ql_title:"Auto"},{playback_ql_bitrate:1500,playback_ql_id:3,playback_ql_render_title:"252p",playback_ql_subtitle:"Uses about 0.9GB per hour",playback_ql_title:"High(1080p)"},{playback_ql_bitrate:700,playback_ql_id:2,playback_ql_render_title:"144p",playback_ql_subtitle:"Uses about 0.4GB per hour",playback_ql_title:"Medium(480p)"},{playback_ql_bitrate:400,playback_ql_id:2,playback_ql_render_title:"144p",playback_ql_subtitle:"Uses about 0.2GB per hour",playback_ql_title:"Low(144p)"}],defaultVideoQualityBitrate:1e3,forwardRewindTime:10,controlsDisappearTimerValue:3,loadInLandscape:!0,audioQualitySettings:[{playback_ql_bitrate:2500,playback_ql_id:1,playback_ql_render_title:"360p",playback_ql_checked:!0,playback_ql_subtitle:"",playback_ql_title:"Aut",playback_ql_qualityMweb:""},{playback_ql_bitrate:2500,playback_ql_id:4,playback_ql_render_title:"360p",playback_ql_subtitle:"Uses about 1.3 GB per hour",playback_ql_title:"Best",playback_ql_qualityMweb:"1.5 GB"},{playback_ql_bitrate:1500,playback_ql_id:3,playback_ql_render_title:"252p",playback_ql_subtitle:"Uses about 0.9 GB per hour",playback_ql_title:"High",playback_ql_qualityMweb:"720 MB"},{playback_ql_bitrate:700,playback_ql_id:2,playback_ql_render_title:"144p",playback_ql_subtitle:"Uses about 0.4 GB per hour",playback_ql_title:"Medium",playback_ql_qualityMweb:"200 MB"},{playback_ql_bitrate:400,playback_ql_id:2,playback_ql_render_title:"144p",playback_ql_subtitle:"Uses about 0.2 GB per hour",playback_ql_title:"Low",playback_ql_qualityMweb:"100 MB"}]},this.playerMainConfig={mobile_setting_option:[{setting_id:1,setting_title:"Video Quality",setting_selected_op:"Auto",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/Setting_Pop_Up/icon-video.svg')"},{setting_id:2,setting_title:"Audio Quality",setting_selected_op:"English",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/Setting_Pop_Up/icon-subs.svg')"},{setting_id:3,setting_title:"Subtitles",setting_selected_op:"English",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/Setting_Pop_Up/icon-subs.svg')"},{setting_id:4,setting_title:"Audio Languages",setting_selected_op:"English",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/Setting_Pop_Up/ic-audio.svg')"},{setting_id:5,setting_title:"Report an issue",setting_icon:"url('UIComponent/Component/assets/LogiPlayer_iconsPortrait/assets_REPORT/icon-help.svg')"}],defaultVideoQualityBitrate:1e3,forwardRewindTime:10,controlsDisappearTimerValue:3},this.setPlaybackData=function(t){Object.keys(t).forEach((function(n){null==e.playbackData[n]&&null==e.playbackData[n]||(e.playbackData[n]=t[n])}))},this.adsConfig={bitrate:-1,adsUrl:"",enablePreloading:!1,loadVideoTimeout:15e3,mute:!0,autoplayAd:!0,adUrl:""},this.setAdsConfig=function(t){Object.keys(t).forEach((function(n){null==e.adsConfig[n]&&null==e.adsConfig[n]||(e.adsConfig[n]=t[n])}))},this.setAssetMetaData=function(t){Object.keys(t).forEach((function(n){null==e.assetMetaData[n]&&null==e.assetMetaData[n]||(e.assetMetaData[n]=t[n])}))},this.setAllEpisodeData=function(t){Object.keys(t).forEach((function(n){null==e.allEpisodeData[n]&&null==e.allEpisodeData[n]||(e.allEpisodeData[n]=t[n])}))},this.setPlayerConfig=function(t){Object.keys(t).forEach((function(n){null==e.playerConfig[n]&&null==e.playerConfig[n]||(e.playerConfig[n]=t[n])}))},this.convertDatamodels=function(){return Logger.debug(" me.playbackData: ",e.playbackData),Logger.debug(" me.assset: ",e.assetMetaData),Logger.debug(" me.playerconfig: ",e.playerConfig),{src:e.playbackData.videoUrl,bumperVideoUrl:e.playbackData.bumperVideoUrl,bumperVideoType:e.playbackData.bumperVideoType,type:e.playbackData.type,licenseUrl:e.playbackData.licenseUrl,certificateUrl:e.playbackData.certificateUrl,startTime:e.playbackData.continueWatchingStartTime,subtitles:e.playbackData.subtitles,defaultAudio:e.playbackData.defaultAudio,defaultSubtitle:e.playbackData.defaultSubtitle,playInLandscape:e.playbackData.playInLandscape,fullscreenRecommendation:e.playbackData.fullscreenRecommendation,audioLangOptions:e.playbackData.audioLanguages,defaultAudio:e.playbackData.defaultAudio,initialVideoBirate:e.playbackData.initialVideoBirateInKbps,autoplay:e.playbackData.autoplay,contentTitle:e.assetMetaData.asset_title,episodeTitle:e.assetMetaData.content_title,isContinueWatch:e.assetMetaData.isContinueWatch,assetType:e.assetMetaData.asset_type,isLive:e.assetMetaData.isLive,isEncrypted:e.assetMetaData.isEncrypted,next_content:e.assetMetaData.next_content,cuePointList:e.assetMetaData.marker,contentId:e.assetMetaData.content_id,assetId:e.assetMetaData.asset_id,allEpisodeData:e.assetMetaData.allEpisodes,recommendations:e.assetMetaData.recommendations,fullscreenRecommendationData:e.assetMetaData.fullscreenRecommendationData,thumbnailUrl:e.assetMetaData.thumbnail_stream_url,controlsDisappearTimerValue:e.playerConfig.controlsDisappearTimerValue,videoQualitySettings:e.playerConfig.videoQualitySettings,audioQualitySettings:e.playerConfig.audioQualitySettings,mobile_setting_option:e.playerMainConfig.mobile_setting_option,forwardRewindTime:e.playerConfig.forwardRewindTime,adsConfig:e.adsConfig,loadInLandscape:e.playerConfig.loadInLandscape}},this.getPlayBackData=function(){return e.playbackData},this.getAssetMetaData=function(){return e.assetMetaData},this.getPlayerConfig=function(){return e.playerConfig}}function DRMPlayerEngine(){this.drmPlugin,this.videoPlayer;var e=this,t=!1,n="Chrome";this.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},this.isIPad=function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},this.checkBrowserDetails=function(){var e=navigator.userAgent.toLowerCase();t=this.isMobile(),!1,isAndroid=!1,n="chrome";if(t||this.isIPad())e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)?(isIOSDevice=!0,n=-1!=e.indexOf("CriOS")||-1!=e.indexOf("chrome")?"Chrome":/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?"Safari":e.match("fxios")||e.match("firefox")?"FireFox":"Chrome"):n=e.match(/android/i)?(-1!=e.indexOf("CriOS")||-1!=e.indexOf("chrome")||e.match("fxios")||e.match("firefox"),"Chrome"):"Chrome";else{var i=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,r=!!document.documentMode,o=!r&&!!window.StyleMedia,a="undefined"!=typeof InstallTrigger,s=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),l=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),u=(l||i)&&!!window.CSS;n=r&&e.indexOf("ie")>-1||o||-1!=e.indexOf("edg")||navigator.userAgent.indexOf("Edge")>=0?"IE":l&&-1!=e.indexOf("chrome")||a&&(-1!=e.indexOf("fxios")||e.match("firefox"))?"Chrome":s&&-1!=e.indexOf("safari")?"Safari":"Chrome";var d="Detecting browsers by ducktyping: \n";d+="isFirefox: "+a+"\n",d+="isChrome: "+l+"\n",d+="isSafari: "+s+"\n",d+="isOpera: "+i+"\n",d+="isIE: "+r+"\n",d+="isEdge: "+o+"\n",d+="isBlink: "+u+"\n",Logger.debug("Browser Agent Detail output :",d)}return Logger.debug("Browser details =>",n),n},this.InitializePlugin=function(t,n,i){e.videoPlayer=t;var r=e.checkBrowserDetails();return new Promise((function(t,o){"IE"==r||i.userAgent.indexOf("IE")>=0||i.userAgent.indexOf("edg")>=0||i.userAgent.indexOf("Edge")>=0||i.userAgent.indexOf("PIXEL_UNICORN")>=0?(e.drmPlugin=new DRMPlayerReadyPlugin,e.drmPlugin.InitializePlugin(e.videoPlayer,n).then((function(e){t(e)}),(function(e){o(e)}))):"Safari"==r&&i.userAgent.indexOf("Safari")>=0?(e.drmPlugin=new DRMFairPlayPlugin,e.drmPlugin.InitializePlugin(e.videoPlayer,n).then((function(e){t(e)}),(function(e){o(e)}))):("Chrome"==r||i.userAgent.indexOf("Chrome")>=0||i.userAgent.indexOf("Firefox")>=0||i.userAgent.indexOf("Tizen")>=0||i.userAgent.indexOf("SamsungBrowser")>=0)&&(e.drmPlugin=new DRMWidevinePlugin,e.drmPlugin.InitializePlugin(e.videoPlayer,n).then((function(e){t(e)}),(function(e){o(e)})))}))},this.ConfigurePlugin=function(){},this.destroyPlugin=function(){Logger.debug("destroy plugin")},this.releaseResources=function(){Logger.debug("-----player resource released--------")}}function DRMWidevinePlugin(){this.videoPlayer,this.playerOptions,this.InitializePlugin=function(e,t){this.videoPlayer=e,this.playerOptions=t;var n=this;return new Promise((function(e,t){TVConsole("playing widevine content");try{TVConsole(n.videoPlayer),TVConsole(n.playerOptions),n.videoPlayer.src({src:n.playerOptions.src,type:"application/dash+xml",keySystemOptions:[{name:"com.widevine.alpha",options:{serverURL:n.playerOptions.keySystemOptions[0].options.serverURL}}]}),e("success")}catch(e){TVConsole("widevineplayBack is not playing"),t(e)}}))},this.ConfigurePlugin=function(e,t){},this.tvLibrary=function(e,t,n){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,n())}:i.onload=function(){n()},i.src=e,i.id=t,document.getElementsByTagName("head")[0].appendChild(i)},destroyPlugin=function(){}}function DRMPlayerReadyPlugin(){this.videoPlayer,this.playerOptions,this.InitializePlugin=function(e,t,n){TVConsole("inside Playerready"),this.videoPlayer=e,this.playerOptions=t;var i=this;return new Promise((function(e,t){TVConsole("playerready  content is playing");try{TVConsole(i.videoPlayer),TVConsole(i.playerOptions),i.videoPlayer?i.videoPlayer.src({src:i.playerOptions.src,type:i.playerOptions.type,keySystemOptions:[{name:"com.microsoft.playready",options:{serverURL:i.playerOptions.keySystemOptions[0].options.serverURL}}]}):Logger.debug("video player is undefined",i.videoPlayer),e("success")}catch(e){t(e)}}))},ConfigurePlugin=function(e,t){},destroyPlugin=function(){}}function DRMFairPlayPlugin(){let e;this.videoPlayer,this.playerOptions,this.httpUrl,this.InitializePlugin=function(i,r){return Logger.debug("inside FairPlay"),new Promise((function(o,a){try{i.eme(),i.src({src:r.src,type:r.type,keySystems:{"com.apple.fps.1_0":{getCertificate:function(e,t){Logger.debug("Fairplay: getCertificate"),videojs.xhr({uri:r.certificateUrl,responseType:"arraybuffer"},((e,n,i)=>{e?t(e):(Logger.debug("Fairplay: certificate acquired"),t(null,new Uint8Array(i)))}))},getContentId:function(i,r){var o;o=new Uint16Array(r.buffer),e=String.fromCharCode.apply(null,o),e=e.slice(e.indexOf("skd")),Logger.debug("Fairplay: getContentId: ",e);t(n(r));Logger.debug("Fairplay: getContentId acquired");return encodeURIComponent("content-zapsea-up-1.uplynk.com")},getLicense:function(t,n,i,o){Logger.debug("Fairplay: getLicense"),Logger.debug("PARSER ENGINE: ");var a=e.replace("skd",r.src.substr(0,r.src.indexOf("://")));Logger.debug("http url from skd: ",a);var s=function(e){var t,n,i,r,o,a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",d=0;for(;d<e.length;)r=(t=e[d++])>>2,o=(3&t)<<4|(n=d<e.length?e[d++]:Number.NaN)>>4,a=(15&n)<<2|(i=d<e.length?e[d++]:Number.NaN)>>6,s=63&i,isNaN(n)?a=s=64:isNaN(i)&&(s=64),u+=l.charAt(r)+l.charAt(o)+l.charAt(a)+l.charAt(s);return u}(i);Logger.debug(s),videojs.xhr({url:a,method:"POST",responseType:"text",body:JSON.stringify({spc:s}),headers:{"Content-type":"application/json"}},((e,t,n)=>{if(e)return void o(e);Logger.debug("Fairplay: License Acquired");let i=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}(JSON.parse(t.body).ckc);o(null,i)}))}}}}),o("succsess from Fairlay")}catch(e){a("failed from FairPlay")}}))},this.ConfigurePlugin=function(e,t){},this.destroyPlugin=function(){};var t=function(e){var t=document.createElement("a");return t.href=e,t.hostname},n=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))}}function hlsplayback(){this.InitializePlugin=function(e,t){},this.ConfigurePlugin=function(e){},this.destroyPlugin=function(){}}function canAutoPlayHelper(){var e=this;this.autoplayAllowed=!1,this.autoplayRequiresMute=!1;var t={};function n(){return new Promise((function(n,i){canAutoplay.video({timeout:1e3,muted:!1}).then((function(r){!1===r.result?new Promise((function(t,n){canAutoplay.video({timeout:100,muted:!0}).then((function(n){!1===n.result?(e.autoplayAllowed=!1,e.autoplayRequiresMute=!1):(e.autoplayAllowed=!0,e.autoplayRequiresMute=!0),Logger.debug(" checkMutedAutoplaySupport "),Logger.debug("autoplayAllowed",e.autoplayAllowed),Logger.debug("autoplayRequiresMute",e.autoplayRequiresMute),t()}))})).then((function(i){t={autoplay:e.autoplayAllowed,muted:e.autoplayRequiresMute,debug:!0},n(t)}),(function(n){t={autoplay:e.autoplayAllowed,muted:e.utoplayRequiresMute,debug:!0},i(t)})):(e.autoplayAllowed=!0,e.autoplayRequiresMute=!1,t={autoplay:e.autoplayAllowed,muted:e.autoplayRequiresMute,debug:!0},i(t))}))}))}this.InitializePlugin=function(){return Logger.debug("autoplay initialize plugin "),new Promise((function(e,t){n().then((function(t){Logger.debug("auto play Settings success",t),t&&e(t)}),(function(e){Logger.error("failure"),t(e)}))}))},this.ConfigurePlugin=function(){},this.destroyPlugin=function(){},this.releaseResouces=function(){}}
/*! @name videojs-landscape-fullscreen @version 1.5.1 @license ISC */function FullscreenEngine(){this.InitializePlugin=function(e,t){e&&e.landscapeFullscreen&&e.landscapeFullscreen({fullscreen:{enterOnRotate:!0,alwaysInLandscapeMode:!0,iOS:t},touchControls:{seekSeconds:10,tapTimeout:300,disableOnEnd:!1}})},this.ConfigurePlugin=function(){},this.destroyPlugin=function(){},this.releaseResouces=function(){}}function logituitSettingsComponent(){let e,t;var n;navigator.platform.toUpperCase().indexOf("MAC");this.videoQuality=videojs.extend(videojs.getComponent("Button"),{constructor:function(i,r,o,a,s){if(videojs.getComponent("Button").apply(this,arguments),this.applyStyles(r.styleCSS),this.updateTextContent(r.text),e=o,this.elementRef,this.options=a,this.uiEngine=s,this.uiOptions=r,this.player=i,console.log("isSafari: ",/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.videoPopupComp=new logituitVideoPopupComponent,t=new this.videoPopupComp.PopupComponent(i,{name:"popup",option:r},o,a,s),n=this,this.tooltipDataFun(),n.isIPad()||n.isTablet())try{n.el().addEventListener("touchstart",(function(){n.updateSettingsPopup();var e=document.getElementsByClassName("ContainerQuality");"hidden"==e[0].style.visibility?e[0].style.visibility="visible":e[0].style.visibility="hidden",this.popupVisible=!0}))}catch(e){Logger.error(e)}try{n.el().addEventListener("mouseover",(function(){n.updateSettingsPopup();var e=document.getElementsByClassName("ContainerVideoWebQuality");e&&e[0]&&(e[0].style.visibility="visible")}))}catch(e){Logger.error(e)}try{n.el().addEventListener("mouseleave",(function(){n.updateSettingsPopup();var e=document.getElementsByClassName("ContainerVideoWebQuality");e&&e[0]&&(e[0].style.visibility="hidden")}))}catch(e){Logger.error(e)}},showSettingsPopup:function(){document.getElementsByClassName("ContainerQuality")[0].style.visibility="visible"},hideSettingsPopup:function(){var e=document.getElementsByClassName("ContainerQuality");e&&e[0]&&(e[0].style.visibility="hidden")},updateSettingsPopup:function(){if(!n.isIPad()&&!n.iOSDevice()){var e=document.getElementsByClassName("qualityLabel")[0];e&&(e.innerHTML=n.uiEngine.getVideoQuality())}var t=document.getElementsByClassName("dolbyLabel")[0];t&&(t.innerHTML=n.uiEngine.getAudioQuality())},tooltipDataFun:function(){var e=document.createElement("div");e.setAttribute("class","ContainerVideoWebQuality"),this.isTablet()&&(e.style.right="calc(-38% + 8px)");let t=document.createElement("span");t.style.width="9.1%",t.style.height="8.2%",t.style.display="flex",t.style.cursor="pointer",t.style.backgroundRepeat="no-repeat",t.style.marginLeft="7%",t.style.top="5.8%",t.style.position="absolute",t.style.zIndex="1",e.appendChild(t),t.addEventListener("click",(function(e){n.uiEngine.removeWebVideoQualityPopup()})),t.addEventListener("touchstart",(function(e){n.uiEngine.removeWebVideoQualityPopup()}));var i=document.createElement("Label");i.setAttribute("class","VideoWebQualityLabel"),i.innerHTML="Video Quality",e.appendChild(i),n.options.videoQualitySettings.forEach((function(t,i){let r=document.createElement("Label");r.setAttribute("class","quality-label-container quality-level"),r.style.marginLeft="27px",r.style.paddingLeft="unset",r.style.marginBottom="0px";let o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("name","VideoQualitys"),o.setAttribute("id","label-"+t.playback_ql_title),o.setAttribute("value",t.playback_ql_id),o.setAttribute("bitrate",t.playback_ql_bitrate),o.setAttribute("qualityKey",t.playback_ql_title),t.playback_ql_bitrate==n.options.initialVideoBirate&&o.setAttribute("checked","");let a=document.createElement("Span");a.setAttribute("for",t.playback_ql_title),t.playback_ql_title&&sessionStorage.setItem("qualityKey",t.playback_ql_title),r.style.display="block",a.innerHTML=t.playback_ql_title,a.style.float="left",a.style.marginLeft="10px",a.style.marginTop="6px",a.style.marginBottom="0px",a.style.fontSize="14px",n.uiEngine.getVideoQuality()===t.playback_ql_title?(a.classList.add("qualityActiveColor"),o.checked=t.playback_ql_title):o.checked=t.playback_ql_checked;let s=document.createElement("br"),l=document.createElement("span");l.style.fontSize="12px",l.style.opacity="0.5",l.style.height="15px",l.style.float="left",l.style.margin="10px",l.style.marginTop="6px",l.style.marginBottom="0px";let u=document.createElement("span");u.setAttribute("class","checkmark"),r.appendChild(o),r.appendChild(a),r.appendChild(s),r.appendChild(u),r.appendChild(l),e.appendChild(r),n.el().appendChild(e),o.addEventListener("change",(function(e){let t=o.getAttribute("bitrate"),i=o.getAttribute("qualityKey");var r=document.querySelectorAll(".qualityActiveColor");r&&r[0]&&r[0].classList.remove("qualityActiveColor"),n.sendEvent(i,t),n.uiEngine.setVideoQuality(i),a.classList.add("qualityActiveColor"),n.changeQualityLevelStatus(player,t)})),u.addEventListener("touchstart",(function(e){let i=o.getAttribute("bitrate"),r=o.getAttribute("qualityKey");var s=document.querySelectorAll(".qualityActiveColor");s&&s[0]&&s[0].classList.remove("qualityActiveColor"),n.sendEvent(r,i),n.uiEngine.setVideoQuality(r),a.classList.add("qualityActiveColor"),o.checked=t.playback_ql_title,n.changeQualityLevelStatus(player,i)}))})),(n.isIPad()||n.isTablet())&&(e.style.width="195px")},populateUi(){},forMobile:function(){!n.uiEngine.isLandscape()&&n.uiEngine.isMobile();n.uiEngine.isLandscape()&&n.uiEngine.isMobile()&&n.isMobile()&&n.el().addEventListener("touchstart",(function(){n.haschild(e,"popup")?n.uiEngine.removeMobileSettingsPopup():n.uiEngine.addMobileSettingsPopup(n.uiOptions)}))},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},isSafari:function(){navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},iOSDevice:function(){var e=navigator.userAgent;return e.match(/ipad/i)||e.match(/iphone/i)||e.match(/iPod/i)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_videoQualityButton"}),this.elementRef},sendEvent:function(){var e={currentTime:n.player.currentTime()},t=new CustomEvent("qualityPopupClick",{detail:e});this.uiEngine.reportEventToUiEngine(t)},handleClick:function(){n.isMobile()&&(n.player.paused()?n.uiEngine.showPlayIcon():n.uiEngine.showPauseIcon()),n.isMobile()||this.sendEvent()},updateTextContent:function(e){"string"!=typeof e&&(e=""),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},haschild:function(e,t){return 0!=e.children_.filter((function(e){if(e.name_)return e.name_==t})).length},applyClass:function(e){this.el().setAttribute("class",e)},changeQualityLevelStatus:function(e,t){if(n.player.qualityLevels().levels_.length){var i=n.player.qualityLevels().levels_,r=i[0].bitrate;let e=0;for(let n=1;n<i.length;n++)Math.abs(i[n].bitrate/1e3-Number.parseInt(t))<Math.abs(r/1e3-Number.parseInt(t))&&(r=i[n].bitrate,e=n);var o=e;"auto"===sessionStorage.getItem("qualityKey")&&(o=n.player.qualityLevels().length);for(var a=0;a<n.player.qualityLevels().length;a++)n.player.qualityLevels()[a].enabled=a==o}else{var s=n.player.dash.mediaPlayer.getBitrateInfoListFor("video");r=s[0].bitrate;let e=0;for(let n=1;n<s.length;n++)Math.abs(s[n].bitrate/1e3-Number.parseInt(t))<Math.abs(r/1e3-Number.parseInt(t))&&(r=s[n].bitrate,e=n);o=e;var l=sessionStorage.getItem("qualityName");1==o&&(r=s[0].bitrate,o=0),"Auto"!=l?(n.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),n.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(n.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),n.player.dash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}})),n.player.dash.mediaPlayer.setQualityFor("video",o),"auto"===sessionStorage.getItem("qualityKey")&&(o=n.playerdash.mediaPlayer.length)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.videoQuality,this.videoQuality=null)}}),videojs.registerComponent("LogixVideoQuality",this.videoQuality)}function logituitAudioQualityComponent(){let e,t;var n;this.videoQuality=videojs.extend(videojs.getComponent("Button"),{constructor:function(i,r,o,a,s){videojs.getComponent("Button").apply(this,arguments),this.applyStyles(r.styleCSS),this.updateTextContent(r.text),e=o,this.elementRef,this.options=a,this.uiEngine=s,this.uiOptions=r,this.player=i,this.videoPopupComp=new logituitVideoPopupComponent,t=new this.videoPopupComp.PopupComponent(i,{name:"popup",option:r},o,a,s),n=this,this.tooltipDataFun()},tooltipDataFun:function(){var e=document.createElement("div");e.setAttribute("class","ContainerWebQuality"),this.isTablet()&&(e.style.right="calc(-38% + 8px)");let t=document.createElement("span");t.style.backgroundImage="url(UIComponent/Component/assets/LogiPlayer_iconsPortrait/asset_arrow/ic-arrow.png)",t.style.width="9.1%",t.style.height="100%",t.style.backgroundRepeat="no-repeat",t.style.marginLeft="4%",t.style.top="14.6%",t.style.left="2.3%",t.style.position="absolute",t.style.zIndex="2",e.appendChild(t),t.addEventListener("touchstart",(function(e){n.uiEngine.removeWebAudioQualityPopup()}));var i=document.createElement("Label");i.setAttribute("class","AudioWebQualityLabel"),i.innerHTML="Audio Quality",i.style.paddingBottom="10px",i.style.zIndex="1",e.appendChild(i),n.options.audioQualitySettings.forEach((function(t,i){let r=document.createElement("Label");r.setAttribute("class","quality-label-container audio-level"),r.style.marginLeft="30px",r.style.paddingLeft="unset",r.style.marginBottom="1px";let o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("name","VideoQualitys"),o.setAttribute("id","High"),o.setAttribute("value",t.playback_ql_id),o.setAttribute("bitrate",t.playback_ql_bitrate),o.setAttribute("qualityKey",t.playback_ql_title),t.playback_ql_bitrate==n.options.initialVideoBirate&&o.setAttribute("checked","");let a=document.createElement("Span");a.setAttribute("for",t.playback_ql_title),t.playback_ql_title&&sessionStorage.setItem("qualityKey",t.playback_ql_title),r.style.display="block",a.innerHTML=t.playback_ql_title,a.style.float="left",a.style.marginLeft="8px",a.style.marginTop="6px",a.style.marginBottom="0px",a.style.fontSize="14px",n.uiEngine.getAudioQuality()===t.playback_ql_title?(a.classList.add("qualityActiveColor"),o.checked=t.playback_ql_title):o.checked=t.playback_ql_checked;let s=document.createElement("br"),l=document.createElement("span");l.innerHTML=t.playback_ql_subtitle,l.style.fontSize="12px",l.style.opacity="0.5",l.style.height="16px",l.style.float="left",l.style.margin="2% 3%",l.style.marginLeft="8px",l.style.marginBottom="0%";let u=document.createElement("span");u.setAttribute("class","checkmark"),u.setAttribute("inputType","radio"),r.appendChild(o),r.appendChild(a),r.appendChild(s),r.appendChild(u),r.appendChild(l),e.appendChild(r),n.el().appendChild(e),e.addEventListener("mouseleave",(function(e){n.uiEngine.removeWebAudioQualityPopup()})),o.addEventListener("change",(function(e){o.getAttribute("bitrate");let t=o.getAttribute("qualityKey");var i=document.querySelectorAll(".qualityActiveColor");i&&i[0]&&i[0].classList.remove("qualityActiveColor"),n.uiEngine.setAudioQuality(t),a.classList.add("qualityActiveColor")})),r.addEventListener("touchstart",(function(e){o.getAttribute("bitrate");let i=o.getAttribute("qualityKey");var r=document.querySelectorAll(".qualityActiveColor");r&&r[0]&&r[0].classList.remove("qualityActiveColor"),n.uiEngine.setAudioQuality(i),a.classList.add("qualityActiveColor"),o.checked=t.playback_ql_title}))})),(n.isIPad()||n.isTablet())&&(e.style.width="200px")},isTablet:function(){const e=navigator.userAgent.toLowerCase();return/(tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)},isIPad:function(){return navigator.userAgent.match(/ipad/i)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},createEl:function(){return this.elementRef=videojs.dom.createEl("button",{className:"logituit_audioQualitySettings"}),this.elementRef},sendEvent:function(){var e={currentTime:n.player.currentTime()},t=new CustomEvent("qualityPopupClick",{detail:e});this.uiEngine.reportEventToUiEngine(t)},handleClick:function(){this.sendEvent()},updateTextContent:function(e){"string"!=typeof e&&(e=""),this.el().innerHTML=e},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},haschild:function(e,t){return 0!=e.children_.filter((function(e){if(e.name_)return e.name_==t})).length},applyClass:function(e){this.el().setAttribute("class",e)},changeQualityLevelStatus:function(e,t){if(n.player.qualityLevels().levels_.length){var i=n.player.qualityLevels().levels_,r=i[0].bitrate;let e=0;for(let n=1;n<i.length;n++)Math.abs(i[n].bitrate/1e3-Number.parseInt(t))<Math.abs(r/1e3-Number.parseInt(t))&&(r=i[n].bitrate,e=n);var o=e;"auto"===sessionStorage.getItem("qualityKey")&&(o=n.player.qualityLevels().length);for(var a=0;a<n.player.qualityLevels().length;a++)n.player.qualityLevels()[a].enabled=a==o}else{var s=n.player.dash.mediaplayer.getBitrateInfoListFor("video");r=s[0].bitrate;let e=0;for(let n=1;n<s.length;n++)Math.abs(s[n].bitrate/1e3-Number.parseInt(t))<Math.abs(r/1e3-Number.parseInt(t))&&(r=s[n].bitrate,e=n);o=e;var l=sessionStorage.getItem("qualityName");1==o&&(r=s[0].bitrate,o=0),"Auto"!=l?(n.player.dash.mediaplayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),n.playerdash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1}}}})):(n.playerdash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),n.playerdash.mediaPlayer.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0}}}})),n.playerdash.mediaPlayer.setQualityFor("video",o),n.playerdash.mediaPlayer.setFastSwitchEnabled(!0),"auto"===sessionStorage.getItem("qualityKey")&&(o=n.playerdash.mediaPlayer.length)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.videoQuality,this.videoQuality=null)}}),videojs.registerComponent("LogixVideoQuality",this.videoQuality)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitErrorMessageComponent(){var e;this.errorMessage=videojs.extend(videojs.getComponent("Component"),{constructor:function(t,n,i,r){videojs.getComponent("Component").apply(this,arguments),this.applyStyles(n.styleCSS),this.updateTextContent(n.text),this.elementRef,this.uiEngine=i,this.eventManager=r,this.options=n,e=this,this.ErrorMsgPopup(e.options.retryImage)},createEl:function(e){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_error_msg"}),this.elementRef},ErrorMsgPopup(t){let n=document.createElement("div");n.setAttribute("class","error_msg");let i=document.createElement("div");i.style.height="17%",i.style.width="9%",i.style.left="48%",i.style.top="30%",i.style.position="absolute",i.style.backgroundRepeat="no-repeat",i.style.backgroundImage=t,i.addEventListener("click",(function(t){online=window.navigator.onLine,online&&(e.uiEngine?e.uiEngine.onLine():e.eventManager.onLine())})),n.addEventListener("click",(function(t){online=window.navigator.onLine,online&&(e.uiEngine?e.uiEngine.onLine():e.eventManager.onLine())})),i.addEventListener("touchstart",(function(t){online=window.navigator.onLine,online&&(e.uiEngine?e.uiEngine.onLine():e.eventManager.onLine())})),n.addEventListener("touchstart",(function(t){online=window.navigator.onLine,online&&(e.uiEngine?e.uiEngine.onLine():e.eventManager.onLine())}));document.getElementsByClassName("error_msg")[0];let r=document.createElement("p");r.setAttribute("class","error_text"),r.innerHTML="No Internet Connection";let o=document.createElement("p");o.setAttribute("class","error_text_msg"),o.innerHTML="Check your internet connection and try again",n.appendChild(r),n.appendChild(o),n.appendChild(i),e.el().appendChild(n),n.addEventListener("touchstart",(function(e){e.stopPropagation()}))},showErrorMsg(){document.getElementsByClassName("error_msg")[0].classList.add("visible")},removeErrorMsg(){document.getElementsByClassName("error_msg")[0].classList.remove("visible")},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},applyStyles:function(e){var t=this.el();for(key in e){let n=e[key],i="",r=n;Object.keys(r).forEach((function(e){"object"==typeof r[e]?r[e].forEach((function(t){i=i+e+":"+t})):i=i+e+":"+r[e]})),t&&t.setAttribute(key,i)}},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.titleBar,this.titleBar=null)}}),videojs.registerComponent("TitleBar",this.errorMessage)}
/**
 * @license
 * logix player
 * @version 1.0
 * @copyright © 2020 Emtarang Techlabs Private Limited All Rights Reserved
 */function logituitMediaErrorMessageComponent(){var e;this.mediaErrorMessage=videojs.extend(videojs.getComponent("Component"),{constructor:function(t,n,i,r){videojs.getComponent("Component").apply(this,arguments),this.elementRef,this.caller=r,e=this,this.ErrorMsgPopup(n,i)},createEl:function(e){return this.elementRef=videojs.dom.createEl("div",{className:"logituit_media_error_msg"}),this.elementRef},ErrorMsgPopup(t,n){let i;if(2===t)i="No Internet Connection",n="Check your internet connection and try again";else i="ERROR";let r=document.createElement("div");r.setAttribute("class","error_msg"),r.style.visibility="visible";let o=document.createElement("div");o.style.height="17%",o.style.width="9%",o.style.left="48%",o.style.top="30%",o.style.position="absolute",o.style.backgroundRepeat="no-repeat",o.style.backgroundImage="url('UIComponent/Component/assets/LogiPlayer_iconsMobile/forwardRewind/cta-10-frw.svg')",o.addEventListener("click",(function(t){e.caller.reinitPlayer()})),o.addEventListener("touchstart",(function(t){e.caller.reinitPlayer()}));document.getElementsByClassName("error_msg")[0];let a=document.createElement("p");a.setAttribute("class","error_text"),a.innerHTML=i;let s=document.createElement("p");s.setAttribute("class","error_text_msg"),s.innerHTML=n,r.appendChild(a),r.appendChild(s),r.appendChild(o),e.el().appendChild(r),r.addEventListener("touchstart",(function(e){e.stopPropagation()}))},updateTextContent:function(e){"string"!=typeof e&&(e="Title Unknown"),videojs.emptyEl(this.el()),videojs.appendContent(this.el(),e)},releaseResource:function(){this.elementRef&&(delete this.elementRef,this.elementRef=null,delete this.titleBar,this.titleBar=null)}}),videojs.registerComponent("MediaError",this.mediaErrorMessage)}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/window")):"function"==typeof define&&define.amd?define(["video.js","global/window"],t):(e=e||self).videojsLandscapeFullscreen=t(e.videojs,e.window)}(this,(function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var n={fullscreen:{enterOnRotate:!0,alwaysInLandscapeMode:!0,iOS:!0}},i=t.screen;i.lockOrientationUniversal=function(e){return i.orientation&&i.orientation.lock(e).then((function(){}),(function(e){return console.log(e)}))||i.mozLockOrientation&&i.mozLockOrientation(e)||i.msLockOrientation&&i.msLockOrientation(e)};var r=function(){return"number"==typeof t.orientation||i&&i.orientation&&i.orientation.angle?t.orientation:(e.log("angle unknown"),0)},o=e.registerPlugin||e.plugin,a=function(o){var a=this;(e.browser.IS_ANDROID||e.browser.IS_IOS)&&this.ready((function(){!function(n,o){n.addClass("vjs-landscape-fullscreen"),o.fullscreen.iOS&&e.browser.IS_IOS&&e.browser.IOS_VERSION>9&&!n.el_.ownerDocument.querySelector(".bc-iframe")&&(n.tech_.el_.setAttribute("playsinline","playsinline"),n.tech_.supportsFullScreen=function(){return!1});var a=function(){var e=r();90!==e&&270!==e&&-90!==e||n.paused(),0!==e&&180!==e||n.isFullscreen()&&n.exitFullscreen()};e.browser.IS_IOS?t.addEventListener("orientationchange",a):i&&i.orientation&&(i.orientation.onchange=a),n.on("fullscreenchange",(function(t){(e.browser.IS_ANDROID||e.browser.IS_IOS)&&!r()&&n.isFullscreen()&&o.fullscreen.alwaysInLandscapeMode&&i.lockOrientationUniversal("landscape")}))}(a,e.mergeOptions(n,o))}))};return o("landscapeFullscreen",a),a.VERSION="1.5.1",a}));